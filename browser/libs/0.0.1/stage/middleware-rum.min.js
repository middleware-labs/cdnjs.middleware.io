(function(){function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};t[a][0].call(l.exports,(function(e){var r=t[a][1][e];return o(r||e)}),l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}return e})()({1:[function(require,e,exports){"use strict";e.exports=require("./packages/init")},{"./packages/init":391}],2:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextAPI=void 0;const t=require("../context/NoopContextManager");const r=require("../internal/global-utils");const n=require("./diag");const o="context";const i=new t.NoopContextManager;class a{constructor(){}static getInstance(){if(!this._instance){this._instance=new a}return this._instance}setGlobalContextManager(e){return(0,r.registerGlobal)(o,e,n.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,r.getGlobal)(o)||i}disable(){this._getContextManager().disable();(0,r.unregisterGlobal)(o,n.DiagAPI.instance())}}exports.ContextAPI=a},{"../context/NoopContextManager":12,"../internal/global-utils":20,"./diag":3}],3:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagAPI=void 0;const t=require("../diag/ComponentLogger");const r=require("../diag/internal/logLevelLogger");const n=require("../diag/types");const o=require("../internal/global-utils");const i="diag";class a{constructor(){function e(e){return function(...t){const r=(0,o.getGlobal)("diag");if(!r)return;return r[e](...t)}}const a=this;const s=(e,t={logLevel:n.DiagLogLevel.INFO})=>{var i,s,c;if(e===a){const e=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");a.error((i=e.stack)!==null&&i!==void 0?i:e.message);return false}if(typeof t==="number"){t={logLevel:t}}const u=(0,o.getGlobal)("diag");const l=(0,r.createLogLevelDiagLogger)((s=t.logLevel)!==null&&s!==void 0?s:n.DiagLogLevel.INFO,e);if(u&&!t.suppressOverrideMessage){const e=(c=(new Error).stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`);l.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,o.registerGlobal)("diag",l,a,true)};a.setLogger=s;a.disable=()=>{(0,o.unregisterGlobal)(i,a)};a.createComponentLogger=e=>new t.DiagComponentLogger(e);a.verbose=e("verbose");a.debug=e("debug");a.info=e("info");a.warn=e("warn");a.error=e("error")}static instance(){if(!this._instance){this._instance=new a}return this._instance}}exports.DiagAPI=a},{"../diag/ComponentLogger":15,"../diag/internal/logLevelLogger":17,"../diag/types":18,"../internal/global-utils":20}],4:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsAPI=void 0;const t=require("../metrics/NoopMeterProvider");const r=require("../internal/global-utils");const n=require("./diag");const o="metrics";class i{constructor(){}static getInstance(){if(!this._instance){this._instance=new i}return this._instance}setGlobalMeterProvider(e){return(0,r.registerGlobal)(o,e,n.DiagAPI.instance())}getMeterProvider(){return(0,r.getGlobal)(o)||t.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,r.unregisterGlobal)(o,n.DiagAPI.instance())}}exports.MetricsAPI=i},{"../internal/global-utils":20,"../metrics/NoopMeterProvider":25,"./diag":3}],5:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PropagationAPI=void 0;const t=require("../internal/global-utils");const r=require("../propagation/NoopTextMapPropagator");const n=require("../propagation/TextMapPropagator");const o=require("../baggage/context-helpers");const i=require("../baggage/utils");const a=require("./diag");const s="propagation";const c=new r.NoopTextMapPropagator;class u{constructor(){this.createBaggage=i.createBaggage;this.getBaggage=o.getBaggage;this.getActiveBaggage=o.getActiveBaggage;this.setBaggage=o.setBaggage;this.deleteBaggage=o.deleteBaggage}static getInstance(){if(!this._instance){this._instance=new u}return this._instance}setGlobalPropagator(e){return(0,t.registerGlobal)(s,e,a.DiagAPI.instance())}inject(e,t,r=n.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=n.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,t.unregisterGlobal)(s,a.DiagAPI.instance())}_getGlobalPropagator(){return(0,t.getGlobal)(s)||c}}exports.PropagationAPI=u},{"../baggage/context-helpers":7,"../baggage/utils":10,"../internal/global-utils":20,"../propagation/NoopTextMapPropagator":29,"../propagation/TextMapPropagator":30,"./diag":3}],6:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceAPI=void 0;const t=require("../internal/global-utils");const r=require("../trace/ProxyTracerProvider");const n=require("../trace/spancontext-utils");const o=require("../trace/context-utils");const i=require("./diag");const a="trace";class s{constructor(){this._proxyTracerProvider=new r.ProxyTracerProvider;this.wrapSpanContext=n.wrapSpanContext;this.isSpanContextValid=n.isSpanContextValid;this.deleteSpan=o.deleteSpan;this.getSpan=o.getSpan;this.getActiveSpan=o.getActiveSpan;this.getSpanContext=o.getSpanContext;this.setSpan=o.setSpan;this.setSpanContext=o.setSpanContext}static getInstance(){if(!this._instance){this._instance=new s}return this._instance}setGlobalTracerProvider(e){const r=(0,t.registerGlobal)(a,this._proxyTracerProvider,i.DiagAPI.instance());if(r){this._proxyTracerProvider.setDelegate(e)}return r}getTracerProvider(){return(0,t.getGlobal)(a)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,t.unregisterGlobal)(a,i.DiagAPI.instance());this._proxyTracerProvider=new r.ProxyTracerProvider}}exports.TraceAPI=s},{"../internal/global-utils":20,"../trace/ProxyTracerProvider":36,"../trace/context-utils":38,"../trace/spancontext-utils":44,"./diag":3}],7:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deleteBaggage=exports.setBaggage=exports.getActiveBaggage=exports.getBaggage=void 0;const t=require("../api/context");const r=require("../context/context");const n=(0,r.createContextKey)("OpenTelemetry Baggage Key");function o(e){return e.getValue(n)||undefined}exports.getBaggage=o;function i(){return o(t.ContextAPI.getInstance().active())}exports.getActiveBaggage=i;function a(e,t){return e.setValue(n,t)}exports.setBaggage=a;function s(e){return e.deleteValue(n)}exports.deleteBaggage=s},{"../api/context":2,"../context/context":13}],8:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaggageImpl=void 0;class t{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){const t=this._entries.get(e);if(!t){return undefined}return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map((([e,t])=>[e,t]))}setEntry(e,r){const n=new t(this._entries);n._entries.set(e,r);return n}removeEntry(e){const r=new t(this._entries);r._entries.delete(e);return r}removeEntries(...e){const r=new t(this._entries);for(const t of e){r._entries.delete(t)}return r}clear(){return new t}}exports.BaggageImpl=t},{}],9:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baggageEntryMetadataSymbol=void 0;exports.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},{}],10:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baggageEntryMetadataFromString=exports.createBaggage=void 0;const t=require("../api/diag");const r=require("./internal/baggage-impl");const n=require("./internal/symbol");const o=t.DiagAPI.instance();function i(e={}){return new r.BaggageImpl(new Map(Object.entries(e)))}exports.createBaggage=i;function a(e){if(typeof e!=="string"){o.error(`Cannot create baggage metadata from unknown type: ${typeof e}`);e=""}return{__TYPE__:n.baggageEntryMetadataSymbol,toString(){return e}}}exports.baggageEntryMetadataFromString=a},{"../api/diag":3,"./internal/baggage-impl":8,"./internal/symbol":9}],11:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.context=void 0;const t=require("./api/context");exports.context=t.ContextAPI.getInstance()},{"./api/context":2}],12:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoopContextManager=void 0;const t=require("./context");class r{active(){return t.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}exports.NoopContextManager=r},{"./context":13}],13:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ROOT_CONTEXT=exports.createContextKey=void 0;function t(e){return Symbol.for(e)}exports.createContextKey=t;class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map;t.getValue=e=>t._currentContext.get(e);t.setValue=(e,n)=>{const o=new r(t._currentContext);o._currentContext.set(e,n);return o};t.deleteValue=e=>{const n=new r(t._currentContext);n._currentContext.delete(e);return n}}}exports.ROOT_CONTEXT=new r},{}],14:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.diag=void 0;const t=require("./api/diag");exports.diag=t.DiagAPI.instance()},{"./api/diag":3}],15:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagComponentLogger=void 0;const t=require("../internal/global-utils");class r{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return n("debug",this._namespace,e)}error(...e){return n("error",this._namespace,e)}info(...e){return n("info",this._namespace,e)}warn(...e){return n("warn",this._namespace,e)}verbose(...e){return n("verbose",this._namespace,e)}}exports.DiagComponentLogger=r;function n(e,r,n){const o=(0,t.getGlobal)("diag");if(!o){return}n.unshift(r);return o[e](...n)}},{"../internal/global-utils":20}],16:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagConsoleLogger=void 0;const t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class r{constructor(){function e(e){return function(...t){if(console){let r=console[e];if(typeof r!=="function"){r=console.log}if(typeof r==="function"){return r.apply(console,t)}}}}for(let r=0;r<t.length;r++){this[t[r].n]=e(t[r].c)}}}exports.DiagConsoleLogger=r},{}],17:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createLogLevelDiagLogger=void 0;const t=require("../types");function r(e,r){if(e<t.DiagLogLevel.NONE){e=t.DiagLogLevel.NONE}else if(e>t.DiagLogLevel.ALL){e=t.DiagLogLevel.ALL}r=r||{};function n(t,n){const o=r[t];if(typeof o==="function"&&e>=n){return o.bind(r)}return function(){}}return{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}exports.createLogLevelDiagLogger=r},{"../types":18}],18:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiagLogLevel=void 0;var t;(function(e){e[e["NONE"]=0]="NONE";e[e["ERROR"]=30]="ERROR";e[e["WARN"]=50]="WARN";e[e["INFO"]=60]="INFO";e[e["DEBUG"]=70]="DEBUG";e[e["VERBOSE"]=80]="VERBOSE";e[e["ALL"]=9999]="ALL"})(t=exports.DiagLogLevel||(exports.DiagLogLevel={}))},{}],19:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trace=exports.propagation=exports.metrics=exports.diag=exports.context=exports.INVALID_SPAN_CONTEXT=exports.INVALID_TRACEID=exports.INVALID_SPANID=exports.isValidSpanId=exports.isValidTraceId=exports.isSpanContextValid=exports.createTraceState=exports.TraceFlags=exports.SpanStatusCode=exports.SpanKind=exports.SamplingDecision=exports.ProxyTracerProvider=exports.ProxyTracer=exports.defaultTextMapSetter=exports.defaultTextMapGetter=exports.ValueType=exports.createNoopMeter=exports.DiagLogLevel=exports.DiagConsoleLogger=exports.ROOT_CONTEXT=exports.createContextKey=exports.baggageEntryMetadataFromString=void 0;var t=require("./baggage/utils");Object.defineProperty(exports,"baggageEntryMetadataFromString",{enumerable:true,get:function(){return t.baggageEntryMetadataFromString}});var r=require("./context/context");Object.defineProperty(exports,"createContextKey",{enumerable:true,get:function(){return r.createContextKey}});Object.defineProperty(exports,"ROOT_CONTEXT",{enumerable:true,get:function(){return r.ROOT_CONTEXT}});var n=require("./diag/consoleLogger");Object.defineProperty(exports,"DiagConsoleLogger",{enumerable:true,get:function(){return n.DiagConsoleLogger}});var o=require("./diag/types");Object.defineProperty(exports,"DiagLogLevel",{enumerable:true,get:function(){return o.DiagLogLevel}});var i=require("./metrics/NoopMeter");Object.defineProperty(exports,"createNoopMeter",{enumerable:true,get:function(){return i.createNoopMeter}});var a=require("./metrics/Metric");Object.defineProperty(exports,"ValueType",{enumerable:true,get:function(){return a.ValueType}});var s=require("./propagation/TextMapPropagator");Object.defineProperty(exports,"defaultTextMapGetter",{enumerable:true,get:function(){return s.defaultTextMapGetter}});Object.defineProperty(exports,"defaultTextMapSetter",{enumerable:true,get:function(){return s.defaultTextMapSetter}});var c=require("./trace/ProxyTracer");Object.defineProperty(exports,"ProxyTracer",{enumerable:true,get:function(){return c.ProxyTracer}});var u=require("./trace/ProxyTracerProvider");Object.defineProperty(exports,"ProxyTracerProvider",{enumerable:true,get:function(){return u.ProxyTracerProvider}});var l=require("./trace/SamplingResult");Object.defineProperty(exports,"SamplingDecision",{enumerable:true,get:function(){return l.SamplingDecision}});var p=require("./trace/span_kind");Object.defineProperty(exports,"SpanKind",{enumerable:true,get:function(){return p.SpanKind}});var d=require("./trace/status");Object.defineProperty(exports,"SpanStatusCode",{enumerable:true,get:function(){return d.SpanStatusCode}});var f=require("./trace/trace_flags");Object.defineProperty(exports,"TraceFlags",{enumerable:true,get:function(){return f.TraceFlags}});var m=require("./trace/internal/utils");Object.defineProperty(exports,"createTraceState",{enumerable:true,get:function(){return m.createTraceState}});var h=require("./trace/spancontext-utils");Object.defineProperty(exports,"isSpanContextValid",{enumerable:true,get:function(){return h.isSpanContextValid}});Object.defineProperty(exports,"isValidTraceId",{enumerable:true,get:function(){return h.isValidTraceId}});Object.defineProperty(exports,"isValidSpanId",{enumerable:true,get:function(){return h.isValidSpanId}});var v=require("./trace/invalid-span-constants");Object.defineProperty(exports,"INVALID_SPANID",{enumerable:true,get:function(){return v.INVALID_SPANID}});Object.defineProperty(exports,"INVALID_TRACEID",{enumerable:true,get:function(){return v.INVALID_TRACEID}});Object.defineProperty(exports,"INVALID_SPAN_CONTEXT",{enumerable:true,get:function(){return v.INVALID_SPAN_CONTEXT}});const _=require("./context-api");Object.defineProperty(exports,"context",{enumerable:true,get:function(){return _.context}});const g=require("./diag-api");Object.defineProperty(exports,"diag",{enumerable:true,get:function(){return g.diag}});const y=require("./metrics-api");Object.defineProperty(exports,"metrics",{enumerable:true,get:function(){return y.metrics}});const E=require("./propagation-api");Object.defineProperty(exports,"propagation",{enumerable:true,get:function(){return E.propagation}});const T=require("./trace-api");Object.defineProperty(exports,"trace",{enumerable:true,get:function(){return T.trace}});exports.default={context:_.context,diag:g.diag,metrics:y.metrics,propagation:E.propagation,trace:T.trace}},{"./baggage/utils":10,"./context-api":11,"./context/context":13,"./diag-api":14,"./diag/consoleLogger":16,"./diag/types":18,"./metrics-api":22,"./metrics/Metric":23,"./metrics/NoopMeter":24,"./propagation-api":28,"./propagation/TextMapPropagator":30,"./trace-api":31,"./trace/ProxyTracer":35,"./trace/ProxyTracerProvider":36,"./trace/SamplingResult":37,"./trace/internal/utils":41,"./trace/invalid-span-constants":42,"./trace/span_kind":43,"./trace/spancontext-utils":44,"./trace/status":45,"./trace/trace_flags":46}],20:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unregisterGlobal=exports.getGlobal=exports.registerGlobal=void 0;const t=require("../platform");const r=require("../version");const n=require("./semver");const o=r.VERSION.split(".")[0];const i=Symbol.for(`opentelemetry.js.api.${o}`);const a=t._globalThis;function s(e,t,n,o=false){var s;const c=a[i]=(s=a[i])!==null&&s!==void 0?s:{version:r.VERSION};if(!o&&c[e]){const t=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);n.error(t.stack||t.message);return false}if(c.version!==r.VERSION){const t=new Error(`@opentelemetry/api: Registration of version v${c.version} for ${e} does not match previously registered API v${r.VERSION}`);n.error(t.stack||t.message);return false}c[e]=t;n.debug(`@opentelemetry/api: Registered a global for ${e} v${r.VERSION}.`);return true}exports.registerGlobal=s;function c(e){var t,r;const o=(t=a[i])===null||t===void 0?void 0:t.version;if(!o||!(0,n.isCompatible)(o)){return}return(r=a[i])===null||r===void 0?void 0:r[e]}exports.getGlobal=c;function u(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${r.VERSION}.`);const n=a[i];if(n){delete n[e]}}exports.unregisterGlobal=u},{"../platform":27,"../version":47,"./semver":21}],21:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isCompatible=exports._makeCompatibilityCheck=void 0;const t=require("../version");const r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(e){const t=new Set([e]);const n=new Set;const o=e.match(r);if(!o){return()=>false}const i={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(i.prerelease!=null){return function t(r){return r===e}}function a(e){n.add(e);return false}function s(e){t.add(e);return true}return function e(o){if(t.has(o)){return true}if(n.has(o)){return false}const c=o.match(r);if(!c){return a(o)}const u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};if(u.prerelease!=null){return a(o)}if(i.major!==u.major){return a(o)}if(i.major===0){if(i.minor===u.minor&&i.patch<=u.patch){return s(o)}return a(o)}if(i.minor<=u.minor){return s(o)}return a(o)}}exports._makeCompatibilityCheck=n;exports.isCompatible=n(t.VERSION)},{"../version":47}],22:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metrics=void 0;const t=require("./api/metrics");exports.metrics=t.MetricsAPI.getInstance()},{"./api/metrics":4}],23:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ValueType=void 0;var t;(function(e){e[e["INT"]=0]="INT";e[e["DOUBLE"]=1]="DOUBLE"})(t=exports.ValueType||(exports.ValueType={}))},{}],24:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createNoopMeter=exports.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=exports.NOOP_OBSERVABLE_GAUGE_METRIC=exports.NOOP_OBSERVABLE_COUNTER_METRIC=exports.NOOP_UP_DOWN_COUNTER_METRIC=exports.NOOP_HISTOGRAM_METRIC=exports.NOOP_COUNTER_METRIC=exports.NOOP_METER=exports.NoopObservableUpDownCounterMetric=exports.NoopObservableGaugeMetric=exports.NoopObservableCounterMetric=exports.NoopObservableMetric=exports.NoopHistogramMetric=exports.NoopUpDownCounterMetric=exports.NoopCounterMetric=exports.NoopMetric=exports.NoopMeter=void 0;class t{constructor(){}createHistogram(e,t){return exports.NOOP_HISTOGRAM_METRIC}createCounter(e,t){return exports.NOOP_COUNTER_METRIC}createUpDownCounter(e,t){return exports.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,t){return exports.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,t){return exports.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,t){return exports.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}exports.NoopMeter=t;class r{}exports.NoopMetric=r;class n extends r{add(e,t){}}exports.NoopCounterMetric=n;class o extends r{add(e,t){}}exports.NoopUpDownCounterMetric=o;class i extends r{record(e,t){}}exports.NoopHistogramMetric=i;class a{addCallback(e){}removeCallback(e){}}exports.NoopObservableMetric=a;class s extends a{}exports.NoopObservableCounterMetric=s;class c extends a{}exports.NoopObservableGaugeMetric=c;class u extends a{}exports.NoopObservableUpDownCounterMetric=u;exports.NOOP_METER=new t;exports.NOOP_COUNTER_METRIC=new n;exports.NOOP_HISTOGRAM_METRIC=new i;exports.NOOP_UP_DOWN_COUNTER_METRIC=new o;exports.NOOP_OBSERVABLE_COUNTER_METRIC=new s;exports.NOOP_OBSERVABLE_GAUGE_METRIC=new c;exports.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u;function l(){return exports.NOOP_METER}exports.createNoopMeter=l},{}],25:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NOOP_METER_PROVIDER=exports.NoopMeterProvider=void 0;const t=require("./NoopMeter");class r{getMeter(e,r,n){return t.NOOP_METER}}exports.NoopMeterProvider=r;exports.NOOP_METER_PROVIDER=new r},{"./NoopMeter":24}],26:[function(require,e,exports){(function(e){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports._globalThis=void 0;exports._globalThis=typeof globalThis==="object"?globalThis:typeof self==="object"?self:typeof window==="object"?window:typeof e==="object"?e:{}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],27:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./globalThis"),exports)},{"./globalThis":26}],28:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propagation=void 0;const t=require("./api/propagation");exports.propagation=t.PropagationAPI.getInstance()},{"./api/propagation":5}],29:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoopTextMapPropagator=void 0;class t{inject(e,t){}extract(e,t){return e}fields(){return[]}}exports.NoopTextMapPropagator=t},{}],30:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultTextMapSetter=exports.defaultTextMapGetter=void 0;exports.defaultTextMapGetter={get(e,t){if(e==null){return undefined}return e[t]},keys(e){if(e==null){return[]}return Object.keys(e)}};exports.defaultTextMapSetter={set(e,t,r){if(e==null){return}e[t]=r}}},{}],31:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trace=void 0;const t=require("./api/trace");exports.trace=t.TraceAPI.getInstance()},{"./api/trace":6}],32:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NonRecordingSpan=void 0;const t=require("./invalid-span-constants");class r{constructor(e=t.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return false}recordException(e,t){}}exports.NonRecordingSpan=r},{"./invalid-span-constants":42}],33:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoopTracer=void 0;const t=require("../api/context");const r=require("../trace/context-utils");const n=require("./NonRecordingSpan");const o=require("./spancontext-utils");const i=t.ContextAPI.getInstance();class a{startSpan(e,t,a=i.active()){const c=Boolean(t===null||t===void 0?void 0:t.root);if(c){return new n.NonRecordingSpan}const u=a&&(0,r.getSpanContext)(a);if(s(u)&&(0,o.isSpanContextValid)(u)){return new n.NonRecordingSpan(u)}else{return new n.NonRecordingSpan}}startActiveSpan(e,t,n,o){let a;let s;let c;if(arguments.length<2){return}else if(arguments.length===2){c=t}else if(arguments.length===3){a=t;c=n}else{a=t;s=n;c=o}const u=s!==null&&s!==void 0?s:i.active();const l=this.startSpan(e,a,u);const p=(0,r.setSpan)(u,l);return i.with(p,c,undefined,l)}}exports.NoopTracer=a;function s(e){return typeof e==="object"&&typeof e["spanId"]==="string"&&typeof e["traceId"]==="string"&&typeof e["traceFlags"]==="number"}},{"../api/context":2,"../trace/context-utils":38,"./NonRecordingSpan":32,"./spancontext-utils":44}],34:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoopTracerProvider=void 0;const t=require("./NoopTracer");class r{getTracer(e,r,n){return new t.NoopTracer}}exports.NoopTracerProvider=r},{"./NoopTracer":33}],35:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProxyTracer=void 0;const t=require("./NoopTracer");const r=new t.NoopTracer;class n{constructor(e,t,r,n){this._provider=e;this.name=t;this.version=r;this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){const o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)}_getTracer(){if(this._delegate){return this._delegate}const e=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!e){return r}this._delegate=e;return this._delegate}}exports.ProxyTracer=n},{"./NoopTracer":33}],36:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProxyTracerProvider=void 0;const t=require("./ProxyTracer");const r=require("./NoopTracerProvider");const n=new r.NoopTracerProvider;class o{getTracer(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new t.ProxyTracer(this,e,r,n)}getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:n}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(e,t,r)}}exports.ProxyTracerProvider=o},{"./NoopTracerProvider":34,"./ProxyTracer":35}],37:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SamplingDecision=void 0;var t;(function(e){e[e["NOT_RECORD"]=0]="NOT_RECORD";e[e["RECORD"]=1]="RECORD";e[e["RECORD_AND_SAMPLED"]=2]="RECORD_AND_SAMPLED"})(t=exports.SamplingDecision||(exports.SamplingDecision={}))},{}],38:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSpanContext=exports.setSpanContext=exports.deleteSpan=exports.setSpan=exports.getActiveSpan=exports.getSpan=void 0;const t=require("../context/context");const r=require("./NonRecordingSpan");const n=require("../api/context");const o=(0,t.createContextKey)("OpenTelemetry Context Key SPAN");function i(e){return e.getValue(o)||undefined}exports.getSpan=i;function a(){return i(n.ContextAPI.getInstance().active())}exports.getActiveSpan=a;function s(e,t){return e.setValue(o,t)}exports.setSpan=s;function c(e){return e.deleteValue(o)}exports.deleteSpan=c;function u(e,t){return s(e,new r.NonRecordingSpan(t))}exports.setSpanContext=u;function l(e){var t;return(t=i(e))===null||t===void 0?void 0:t.spanContext()}exports.getSpanContext=l},{"../api/context":2,"../context/context":13,"./NonRecordingSpan":32}],39:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceStateImpl=void 0;const t=require("./tracestate-validators");const r=32;const n=512;const o=",";const i="=";class a{constructor(e){this._internalState=new Map;if(e)this._parse(e)}set(e,t){const r=this._clone();if(r._internalState.has(e)){r._internalState.delete(e)}r._internalState.set(e,t);return r}unset(e){const t=this._clone();t._internalState.delete(e);return t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>{e.push(t+i+this.get(t));return e}),[]).join(o)}_parse(e){if(e.length>n)return;this._internalState=e.split(o).reverse().reduce(((e,r)=>{const n=r.trim();const o=n.indexOf(i);if(o!==-1){const i=n.slice(0,o);const a=n.slice(o+1,r.length);if((0,t.validateKey)(i)&&(0,t.validateValue)(a)){e.set(i,a)}else{}}return e}),new Map);if(this._internalState.size>r){this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))}}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new a;e._internalState=new Map(this._internalState);return e}}exports.TraceStateImpl=a},{"./tracestate-validators":40}],40:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateValue=exports.validateKey=void 0;const t="[_0-9a-z-*/]";const r=`[a-z]${t}{0,255}`;const n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`;const o=new RegExp(`^(?:${r}|${n})$`);const i=/^[ -~]{0,255}[!-~]$/;const a=/,|=/;function s(e){return o.test(e)}exports.validateKey=s;function c(e){return i.test(e)&&!a.test(e)}exports.validateValue=c},{}],41:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTraceState=void 0;const t=require("./tracestate-impl");function r(e){return new t.TraceStateImpl(e)}exports.createTraceState=r},{"./tracestate-impl":39}],42:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.INVALID_SPAN_CONTEXT=exports.INVALID_TRACEID=exports.INVALID_SPANID=void 0;const t=require("./trace_flags");exports.INVALID_SPANID="0000000000000000";exports.INVALID_TRACEID="00000000000000000000000000000000";exports.INVALID_SPAN_CONTEXT={traceId:exports.INVALID_TRACEID,spanId:exports.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}},{"./trace_flags":46}],43:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanKind=void 0;var t;(function(e){e[e["INTERNAL"]=0]="INTERNAL";e[e["SERVER"]=1]="SERVER";e[e["CLIENT"]=2]="CLIENT";e[e["PRODUCER"]=3]="PRODUCER";e[e["CONSUMER"]=4]="CONSUMER"})(t=exports.SpanKind||(exports.SpanKind={}))},{}],44:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapSpanContext=exports.isSpanContextValid=exports.isValidSpanId=exports.isValidTraceId=void 0;const t=require("./invalid-span-constants");const r=require("./NonRecordingSpan");const n=/^([0-9a-f]{32})$/i;const o=/^[0-9a-f]{16}$/i;function i(e){return n.test(e)&&e!==t.INVALID_TRACEID}exports.isValidTraceId=i;function a(e){return o.test(e)&&e!==t.INVALID_SPANID}exports.isValidSpanId=a;function s(e){return i(e.traceId)&&a(e.spanId)}exports.isSpanContextValid=s;function c(e){return new r.NonRecordingSpan(e)}exports.wrapSpanContext=c},{"./NonRecordingSpan":32,"./invalid-span-constants":42}],45:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanStatusCode=void 0;var t;(function(e){e[e["UNSET"]=0]="UNSET";e[e["OK"]=1]="OK";e[e["ERROR"]=2]="ERROR"})(t=exports.SpanStatusCode||(exports.SpanStatusCode={}))},{}],46:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceFlags=void 0;var t;(function(e){e[e["NONE"]=0]="NONE";e[e["SAMPLED"]=1]="SAMPLED"})(t=exports.TraceFlags||(exports.TraceFlags={}))},{}],47:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VERSION=void 0;exports.VERSION="1.7.0"},{}],48:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ZoneContextManager=void 0;const t=require("@opentelemetry/api");const r=require("./util");const n="OT_ZONE_CONTEXT";class o{constructor(){this._enabled=false;this._zoneCounter=0}_activeContextFromZone(e){return e&&e.get(n)||t.ROOT_CONTEXT}_bindFunction(e,t){const r=this;const n=function(...n){return r.with(e,(()=>t.apply(this,n)))};Object.defineProperty(n,"length",{enumerable:false,configurable:true,writable:false,value:t.length});return n}_bindListener(e,t){const r=t;if(r.__ot_listeners!==undefined){return t}r.__ot_listeners={};if(typeof r.addEventListener==="function"){r.addEventListener=this._patchAddEventListener(r,r.addEventListener,e)}if(typeof r.removeEventListener==="function"){r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener)}return t}_createZoneName(){this._zoneCounter++;const e=Math.random();return`${this._zoneCounter}-${e}`}_createZone(e,t){return Zone.current.fork({name:e,properties:{[n]:t}})}_getActiveZone(){return Zone.current}_patchAddEventListener(e,t,r){const n=this;return function(o,i,a){if(e.__ot_listeners===undefined){e.__ot_listeners={}}let s=e.__ot_listeners[o];if(s===undefined){s=new WeakMap;e.__ot_listeners[o]=s}const c=n.bind(r,i);s.set(i,c);return t.call(this,o,c,a)}}_patchRemoveEventListener(e,t){return function(r,n){if(e.__ot_listeners===undefined||e.__ot_listeners[r]===undefined){return t.call(this,r,n)}const o=e.__ot_listeners[r];const i=o.get(n);o.delete(n);return t.call(this,r,i||n)}}active(){if(!this._enabled){return t.ROOT_CONTEXT}const e=this._getActiveZone();const r=this._activeContextFromZone(e);if(r){return r}return t.ROOT_CONTEXT}bind(e,t){if(e===undefined){e=this.active()}if(typeof t==="function"){return this._bindFunction(e,t)}else if((0,r.isListenerObject)(t)){this._bindListener(e,t)}return t}disable(){this._enabled=false;return this}enable(){this._enabled=true;return this}with(e,t,r,...n){const o=this._createZoneName();const i=this._createZone(o,e);return i.run(t,r,n)}}exports.ZoneContextManager=o},{"./util":51,"@opentelemetry/api":19}],49:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./ZoneContextManager"),exports);r(require("./types"),exports)},{"./ZoneContextManager":48,"./types":50}],50:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],51:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isListenerObject=void 0;function t(e={}){return typeof e.addEventListener==="function"&&typeof e.removeEventListener==="function"}exports.isListenerObject=t},{}],52:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("@opentelemetry/context-zone-peer-dep"),exports);require("zone.js")},{"@opentelemetry/context-zone-peer-dep":49,"zone.js":387}],53:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExportResultCode=void 0;var t;(function(e){e[e["SUCCESS"]=0]="SUCCESS";e[e["FAILED"]=1]="FAILED"})(t=exports.ExportResultCode||(exports.ExportResultCode={}))},{}],54:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BAGGAGE_MAX_TOTAL_LENGTH=exports.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=exports.BAGGAGE_MAX_NAME_VALUE_PAIRS=exports.BAGGAGE_HEADER=exports.BAGGAGE_ITEMS_SEPARATOR=exports.BAGGAGE_PROPERTIES_SEPARATOR=exports.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;exports.BAGGAGE_KEY_PAIR_SEPARATOR="=";exports.BAGGAGE_PROPERTIES_SEPARATOR=";";exports.BAGGAGE_ITEMS_SEPARATOR=",";exports.BAGGAGE_HEADER="baggage";exports.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;exports.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;exports.BAGGAGE_MAX_TOTAL_LENGTH=8192},{}],55:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.W3CBaggagePropagator=void 0;const t=require("@opentelemetry/api");const r=require("../../trace/suppress-tracing");const n=require("../constants");const o=require("../utils");class i{inject(e,i,a){const s=t.propagation.getBaggage(e);if(!s||(0,r.isTracingSuppressed)(e))return;const c=(0,o.getKeyPairs)(s).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS);const u=(0,o.serializeKeyPairs)(c);if(u.length>0){a.set(i,n.BAGGAGE_HEADER,u)}}extract(e,r,i){const a=i.get(r,n.BAGGAGE_HEADER);const s=Array.isArray(a)?a.join(n.BAGGAGE_ITEMS_SEPARATOR):a;if(!s)return e;const c={};if(s.length===0){return e}const u=s.split(n.BAGGAGE_ITEMS_SEPARATOR);u.forEach((e=>{const t=(0,o.parsePairKeyValue)(e);if(t){const e={value:t.value};if(t.metadata){e.metadata=t.metadata}c[t.key]=e}}));if(Object.entries(c).length===0){return e}return t.propagation.setBaggage(e,t.propagation.createBaggage(c))}fields(){return[n.BAGGAGE_HEADER]}}exports.W3CBaggagePropagator=i},{"../../trace/suppress-tracing":83,"../constants":54,"../utils":56,"@opentelemetry/api":19}],56:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseKeyPairsIntoRecord=exports.parsePairKeyValue=exports.getKeyPairs=exports.serializeKeyPairs=void 0;const t=require("@opentelemetry/api");const r=require("./constants");function n(e){return e.reduce(((e,t)=>{const n=`${e}${e!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),"")}exports.serializeKeyPairs=n;function o(e){return e.getAllEntries().map((([e,t])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`;if(t.metadata!==undefined){n+=r.BAGGAGE_PROPERTIES_SEPARATOR+t.metadata.toString()}return n}))}exports.getKeyPairs=o;function i(e){const n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;const o=n.shift();if(!o)return;const i=o.indexOf(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(i<=0)return;const a=decodeURIComponent(o.substring(0,i).trim());const s=decodeURIComponent(o.substring(i+1).trim());let c;if(n.length>0){c=(0,t.baggageEntryMetadataFromString)(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))}return{key:a,value:s,metadata:c}}exports.parsePairKeyValue=i;function a(e){if(typeof e!=="string"||e.length===0)return{};return e.split(r.BAGGAGE_ITEMS_SEPARATOR).map((e=>i(e))).filter((e=>e!==undefined&&e.value.length>0)).reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}exports.parseKeyPairsIntoRecord=a},{"./constants":54,"@opentelemetry/api":19}],57:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnchoredClock=void 0;class t{constructor(e,t){this._monotonicClock=t;this._epochMillis=e.now();this._performanceMillis=t.now()}now(){const e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}}exports.AnchoredClock=t},{}],58:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAttributeValue=exports.isAttributeKey=exports.sanitizeAttributes=void 0;const t=require("@opentelemetry/api");function r(e){const r={};if(typeof e!=="object"||e==null){return r}for(const[i,a]of Object.entries(e)){if(!n(i)){t.diag.warn(`Invalid attribute key: ${i}`);continue}if(!o(a)){t.diag.warn(`Invalid attribute value set for key: ${i}`);continue}if(Array.isArray(a)){r[i]=a.slice()}else{r[i]=a}}return r}exports.sanitizeAttributes=r;function n(e){return typeof e==="string"&&e.length>0}exports.isAttributeKey=n;function o(e){if(e==null){return true}if(Array.isArray(e)){return i(e)}return a(e)}exports.isAttributeValue=o;function i(e){let t;for(const r of e){if(r==null)continue;if(!t){if(a(r)){t=typeof r;continue}return false}if(typeof r===t){continue}return false}return true}function a(e){switch(typeof e){case"number":case"boolean":case"string":return true}return false}},{"@opentelemetry/api":19}],59:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.globalErrorHandler=exports.setGlobalErrorHandler=void 0;const t=require("./logging-error-handler");let r=(0,t.loggingErrorHandler)();function n(e){r=e}exports.setGlobalErrorHandler=n;function o(e){try{r(e)}catch(e){}}exports.globalErrorHandler=o},{"./logging-error-handler":60}],60:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loggingErrorHandler=void 0;const t=require("@opentelemetry/api");function r(){return e=>{t.diag.error(n(e))}}exports.loggingErrorHandler=r;function n(e){if(typeof e==="string"){return e}else{return JSON.stringify(o(e))}}function o(e){const t={};let r=e;while(r!==null){Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;const n=r[e];if(n){t[e]=String(n)}}));r=Object.getPrototypeOf(r)}return t}},{"@opentelemetry/api":19}],61:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addHrTimes=exports.isTimeInput=exports.isTimeInputHrTime=exports.hrTimeToMicroseconds=exports.hrTimeToMilliseconds=exports.hrTimeToNanoseconds=exports.hrTimeToTimeStamp=exports.hrTimeDuration=exports.timeInputToHrTime=exports.hrTime=exports.getTimeOrigin=exports.millisToHrTime=void 0;const t=require("../platform");const r=9;const n=6;const o=Math.pow(10,n);const i=Math.pow(10,r);function a(e){const t=e/1e3;const r=Math.trunc(t);const n=Math.round(e%1e3*o);return[r,n]}exports.millisToHrTime=a;function s(){let e=t.otperformance.timeOrigin;if(typeof e!=="number"){const r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}exports.getTimeOrigin=s;function c(e){const r=a(s());const n=a(typeof e==="number"?e:t.otperformance.now());return _(r,n)}exports.hrTime=c;function u(e){if(h(e)){return e}else if(typeof e==="number"){if(e<s()){return c(e)}else{return a(e)}}else if(e instanceof Date){return a(e.getTime())}else{throw TypeError("Invalid input type")}}exports.timeInputToHrTime=u;function l(e,t){let r=t[0]-e[0];let n=t[1]-e[1];if(n<0){r-=1;n+=i}return[r,n]}exports.hrTimeDuration=l;function p(e){const t=r;const n=`${"0".repeat(t)}${e[1]}Z`;const o=n.substr(n.length-t-1);const i=new Date(e[0]*1e3).toISOString();return i.replace("000Z",o)}exports.hrTimeToTimeStamp=p;function d(e){return e[0]*i+e[1]}exports.hrTimeToNanoseconds=d;function f(e){return e[0]*1e3+e[1]/1e6}exports.hrTimeToMilliseconds=f;function m(e){return e[0]*1e6+e[1]/1e3}exports.hrTimeToMicroseconds=m;function h(e){return Array.isArray(e)&&e.length===2&&typeof e[0]==="number"&&typeof e[1]==="number"}exports.isTimeInputHrTime=h;function v(e){return h(e)||typeof e==="number"||e instanceof Date}exports.isTimeInput=v;function _(e,t){const r=[e[0]+t[0],e[1]+t[1]];if(r[1]>=i){r[1]-=i;r[0]+=1}return r}exports.addHrTimes=_},{"../platform":70}],62:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],63:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});exports.internal=exports.baggageUtils=void 0;r(require("./baggage/propagation/W3CBaggagePropagator"),exports);r(require("./common/anchored-clock"),exports);r(require("./common/attributes"),exports);r(require("./common/global-error-handler"),exports);r(require("./common/logging-error-handler"),exports);r(require("./common/time"),exports);r(require("./common/types"),exports);r(require("./ExportResult"),exports);exports.baggageUtils=require("./baggage/utils");r(require("./platform"),exports);r(require("./propagation/composite"),exports);r(require("./trace/W3CTraceContextPropagator"),exports);r(require("./trace/IdGenerator"),exports);r(require("./trace/rpc-metadata"),exports);r(require("./trace/sampler/AlwaysOffSampler"),exports);r(require("./trace/sampler/AlwaysOnSampler"),exports);r(require("./trace/sampler/ParentBasedSampler"),exports);r(require("./trace/sampler/TraceIdRatioBasedSampler"),exports);r(require("./trace/suppress-tracing"),exports);r(require("./trace/TraceState"),exports);r(require("./utils/environment"),exports);r(require("./utils/merge"),exports);r(require("./utils/sampling"),exports);r(require("./utils/timeout"),exports);r(require("./utils/url"),exports);r(require("./utils/wrap"),exports);r(require("./utils/callback"),exports);r(require("./version"),exports);const n=require("./internal/exporter");exports.internal={_export:n._export}},{"./ExportResult":53,"./baggage/propagation/W3CBaggagePropagator":55,"./baggage/utils":56,"./common/anchored-clock":57,"./common/attributes":58,"./common/global-error-handler":59,"./common/logging-error-handler":60,"./common/time":61,"./common/types":62,"./internal/exporter":64,"./platform":70,"./propagation/composite":74,"./trace/IdGenerator":75,"./trace/TraceState":76,"./trace/W3CTraceContextPropagator":77,"./trace/rpc-metadata":78,"./trace/sampler/AlwaysOffSampler":79,"./trace/sampler/AlwaysOnSampler":80,"./trace/sampler/ParentBasedSampler":81,"./trace/sampler/TraceIdRatioBasedSampler":82,"./trace/suppress-tracing":83,"./utils/callback":84,"./utils/environment":85,"./utils/merge":87,"./utils/sampling":89,"./utils/timeout":90,"./utils/url":91,"./utils/wrap":92,"./version":93}],64:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports._export=void 0;const t=require("@opentelemetry/api");const r=require("../trace/suppress-tracing");function n(e,n){return new Promise((o=>{t.context.with((0,r.suppressTracing)(t.context.active()),(()=>{e.export(n,(e=>{o(e)}))}))}))}exports._export=n},{"../trace/suppress-tracing":83,"@opentelemetry/api":19}],65:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateValue=exports.validateKey=void 0;const t="[_0-9a-z-*/]";const r=`[a-z]${t}{0,255}`;const n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`;const o=new RegExp(`^(?:${r}|${n})$`);const i=/^[ -~]{0,255}[!-~]$/;const a=/,|=/;function s(e){return o.test(e)}exports.validateKey=s;function c(e){return i.test(e)&&!a.test(e)}exports.validateValue=c},{}],66:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RandomIdGenerator=void 0;const t=8;const r=16;class n{constructor(){this.generateTraceId=i(r);this.generateSpanId=i(t)}}exports.RandomIdGenerator=n;const o=Array(32);function i(e){return function t(){for(let t=0;t<e*2;t++){o[t]=Math.floor(Math.random()*16)+48;if(o[t]>=58){o[t]+=39}}return String.fromCharCode.apply(null,o.slice(0,e*2))}}},{}],67:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEnv=void 0;const t=require("../../utils/environment");const r=require("./globalThis");function n(){const e=(0,t.parseEnvironment)(r._globalThis);return Object.assign({},t.DEFAULT_ENVIRONMENT,e)}exports.getEnv=n},{"../../utils/environment":85,"./globalThis":68}],68:[function(require,e,exports){(function(e){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports._globalThis=void 0;exports._globalThis=typeof globalThis==="object"?globalThis:typeof self==="object"?self:typeof window==="object"?window:typeof e==="object"?e:{}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],69:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hexToBase64=void 0;function t(e){const t=e.length;let r="";for(let n=0;n<t;n+=2){const t=e.substring(n,n+2);const o=parseInt(t,16);r+=String.fromCharCode(o)}return btoa(r)}exports.hexToBase64=t},{}],70:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./environment"),exports);r(require("./globalThis"),exports);r(require("./hex-to-base64"),exports);r(require("./RandomIdGenerator"),exports);r(require("./performance"),exports);r(require("./sdk-info"),exports);r(require("./timer-util"),exports)},{"./RandomIdGenerator":66,"./environment":67,"./globalThis":68,"./hex-to-base64":69,"./performance":71,"./sdk-info":72,"./timer-util":73}],71:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.otperformance=void 0;exports.otperformance=performance},{}],72:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SDK_INFO=void 0;const t=require("../../version");const r=require("@opentelemetry/semantic-conventions");exports.SDK_INFO={[r.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[r.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.WEBJS,[r.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}},{"../../version":93,"@opentelemetry/semantic-conventions":247}],73:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unrefTimer=void 0;function t(e){}exports.unrefTimer=t},{}],74:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CompositePropagator=void 0;const t=require("@opentelemetry/api");class r{constructor(e={}){var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[];this._fields=Array.from(new Set(this._propagators.map((e=>typeof e.fields==="function"?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,r,n){for(const o of this._propagators){try{o.inject(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}}}extract(e,r,n){return this._propagators.reduce(((e,o)=>{try{return o.extract(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}exports.CompositePropagator=r},{"@opentelemetry/api":19}],75:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],76:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceState=void 0;const t=require("../internal/validators");const r=32;const n=512;const o=",";const i="=";class a{constructor(e){this._internalState=new Map;if(e)this._parse(e)}set(e,t){const r=this._clone();if(r._internalState.has(e)){r._internalState.delete(e)}r._internalState.set(e,t);return r}unset(e){const t=this._clone();t._internalState.delete(e);return t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>{e.push(t+i+this.get(t));return e}),[]).join(o)}_parse(e){if(e.length>n)return;this._internalState=e.split(o).reverse().reduce(((e,r)=>{const n=r.trim();const o=n.indexOf(i);if(o!==-1){const i=n.slice(0,o);const a=n.slice(o+1,r.length);if((0,t.validateKey)(i)&&(0,t.validateValue)(a)){e.set(i,a)}else{}}return e}),new Map);if(this._internalState.size>r){this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))}}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new a;e._internalState=new Map(this._internalState);return e}}exports.TraceState=a},{"../internal/validators":65}],77:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.W3CTraceContextPropagator=exports.parseTraceParent=exports.TRACE_STATE_HEADER=exports.TRACE_PARENT_HEADER=void 0;const t=require("@opentelemetry/api");const r=require("./suppress-tracing");const n=require("./TraceState");exports.TRACE_PARENT_HEADER="traceparent";exports.TRACE_STATE_HEADER="tracestate";const o="00";const i="(?!ff)[\\da-f]{2}";const a="(?![0]{32})[\\da-f]{32}";const s="(?![0]{16})[\\da-f]{16}";const c="[\\da-f]{2}";const u=new RegExp(`^\\s?(${i})-(${a})-(${s})-(${c})(-.*)?\\s?$`);function l(e){const t=u.exec(e);if(!t)return null;if(t[1]==="00"&&t[5])return null;return{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}exports.parseTraceParent=l;class p{inject(e,n,i){const a=t.trace.getSpanContext(e);if(!a||(0,r.isTracingSuppressed)(e)||!(0,t.isSpanContextValid)(a))return;const s=`${o}-${a.traceId}-${a.spanId}-0${Number(a.traceFlags||t.TraceFlags.NONE).toString(16)}`;i.set(n,exports.TRACE_PARENT_HEADER,s);if(a.traceState){i.set(n,exports.TRACE_STATE_HEADER,a.traceState.serialize())}}extract(e,r,o){const i=o.get(r,exports.TRACE_PARENT_HEADER);if(!i)return e;const a=Array.isArray(i)?i[0]:i;if(typeof a!=="string")return e;const s=l(a);if(!s)return e;s.isRemote=true;const c=o.get(r,exports.TRACE_STATE_HEADER);if(c){const e=Array.isArray(c)?c.join(","):c;s.traceState=new n.TraceState(typeof e==="string"?e:undefined)}return t.trace.setSpanContext(e,s)}fields(){return[exports.TRACE_PARENT_HEADER,exports.TRACE_STATE_HEADER]}}exports.W3CTraceContextPropagator=p},{"./TraceState":76,"./suppress-tracing":83,"@opentelemetry/api":19}],78:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRPCMetadata=exports.deleteRPCMetadata=exports.setRPCMetadata=exports.RPCType=void 0;const t=require("@opentelemetry/api");const r=(0,t.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA");var n;(function(e){e["HTTP"]="http"})(n=exports.RPCType||(exports.RPCType={}));function o(e,t){return e.setValue(r,t)}exports.setRPCMetadata=o;function i(e){return e.deleteValue(r)}exports.deleteRPCMetadata=i;function a(e){return e.getValue(r)}exports.getRPCMetadata=a},{"@opentelemetry/api":19}],79:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlwaysOffSampler=void 0;const t=require("@opentelemetry/api");class r{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}exports.AlwaysOffSampler=r},{"@opentelemetry/api":19}],80:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlwaysOnSampler=void 0;const t=require("@opentelemetry/api");class r{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}exports.AlwaysOnSampler=r},{"@opentelemetry/api":19}],81:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParentBasedSampler=void 0;const t=require("@opentelemetry/api");const r=require("../../common/global-error-handler");const n=require("./AlwaysOffSampler");const o=require("./AlwaysOnSampler");class i{constructor(e){var t,i,a,s;this._root=e.root;if(!this._root){(0,r.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured"));this._root=new o.AlwaysOnSampler}this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new o.AlwaysOnSampler;this._remoteParentNotSampled=(i=e.remoteParentNotSampled)!==null&&i!==void 0?i:new n.AlwaysOffSampler;this._localParentSampled=(a=e.localParentSampled)!==null&&a!==void 0?a:new o.AlwaysOnSampler;this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new n.AlwaysOffSampler}shouldSample(e,r,n,o,i,a){const s=t.trace.getSpanContext(e);if(!s||!(0,t.isSpanContextValid)(s)){return this._root.shouldSample(e,r,n,o,i,a)}if(s.isRemote){if(s.traceFlags&t.TraceFlags.SAMPLED){return this._remoteParentSampled.shouldSample(e,r,n,o,i,a)}return this._remoteParentNotSampled.shouldSample(e,r,n,o,i,a)}if(s.traceFlags&t.TraceFlags.SAMPLED){return this._localParentSampled.shouldSample(e,r,n,o,i,a)}return this._localParentNotSampled.shouldSample(e,r,n,o,i,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}exports.ParentBasedSampler=i},{"../../common/global-error-handler":59,"./AlwaysOffSampler":79,"./AlwaysOnSampler":80,"@opentelemetry/api":19}],82:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceIdRatioBasedSampler=void 0;const t=require("@opentelemetry/api");class r{constructor(e=0){this._ratio=e;this._ratio=this._normalize(e);this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:(0,t.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){if(typeof e!=="number"||isNaN(e))return 0;return e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){const n=r*8;const o=parseInt(e.slice(n,n+8),16);t=(t^o)>>>0}return t}}exports.TraceIdRatioBasedSampler=r},{"@opentelemetry/api":19}],83:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isTracingSuppressed=exports.unsuppressTracing=exports.suppressTracing=void 0;const t=require("@opentelemetry/api");const r=(0,t.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(e){return e.setValue(r,true)}exports.suppressTracing=n;function o(e){return e.deleteValue(r)}exports.unsuppressTracing=o;function i(e){return e.getValue(r)===true}exports.isTracingSuppressed=i},{"@opentelemetry/api":19}],84:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BindOnceFuture=void 0;const t=require("./promise");class r{constructor(e,r){this._callback=e;this._that=r;this._isCalled=false;this._deferred=new t.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=true;try{Promise.resolve(this._callback.call(this._that,...e)).then((e=>this._deferred.resolve(e)),(e=>this._deferred.reject(e)))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}exports.BindOnceFuture=r},{"./promise":88}],85:[function(require,e,exports){(function(e){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEnvWithoutDefaults=exports.parseEnvironment=exports.DEFAULT_ENVIRONMENT=exports.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=exports.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=exports.DEFAULT_ATTRIBUTE_COUNT_LIMIT=exports.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;const t=require("@opentelemetry/api");const r=require("./sampling");const n=require("../platform/browser/globalThis");const o=",";const i=["OTEL_SDK_DISABLED"];function a(e){return i.indexOf(e)>-1}const s=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function c(e){return s.indexOf(e)>-1}const u=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function l(e){return u.indexOf(e)>-1}exports.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=Infinity;exports.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;exports.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128;exports.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128;exports.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:false,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:exports.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:exports.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:exports.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:exports.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:exports.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:exports.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:exports.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:exports.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function p(e,t,r){if(typeof r[e]==="undefined"){return}const n=String(r[e]);t[e]=n.toLowerCase()==="true"}function d(e,t,r,n=-Infinity,o=Infinity){if(typeof r[e]!=="undefined"){const i=Number(r[e]);if(!isNaN(i)){if(i<n){t[e]=n}else if(i>o){t[e]=o}else{t[e]=i}}}}function f(e,t,r,n=o){const i=r[e];if(typeof i==="string"){t[e]=i.split(n).map((e=>e.trim()))}}const m={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function h(e,t,r){const n=r[e];if(typeof n==="string"){const r=m[n.toUpperCase()];if(r!=null){t[e]=r}}}function v(e){const t={};for(const r in exports.DEFAULT_ENVIRONMENT){const n=r;switch(n){case"OTEL_LOG_LEVEL":h(n,t,e);break;default:if(a(n)){p(n,t,e)}else if(c(n)){d(n,t,e)}else if(l(n)){f(n,t,e)}else{const r=e[n];if(typeof r!=="undefined"&&r!==null){t[n]=String(r)}}}}return t}exports.parseEnvironment=v;function _(){return typeof e!=="undefined"&&e&&e.env?v(e.env):v(n._globalThis)}exports.getEnvWithoutDefaults=_}).call(this)}).call(this,require("_process"))},{"../platform/browser/globalThis":68,"./sampling":89,"@opentelemetry/api":19,_process:382}],86:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPlainObject=void 0;const t="[object Object]";const r="[object Null]";const n="[object Undefined]";const o=Function.prototype;const i=o.toString;const a=i.call(Object);const s=d(Object.getPrototypeOf,Object);const c=Object.prototype;const u=c.hasOwnProperty;const l=Symbol?Symbol.toStringTag:undefined;const p=c.toString;function d(e,t){return function(r){return e(t(r))}}function f(e){if(!m(e)||h(e)!==t){return false}const r=s(e);if(r===null){return true}const n=u.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&i.call(n)===a}exports.isPlainObject=f;function m(e){return e!=null&&typeof e=="object"}function h(e){if(e==null){return e===undefined?n:r}return l&&l in Object(e)?v(e):_(e)}function v(e){const t=u.call(e,l),r=e[l];let n=false;try{e[l]=undefined;n=true}catch(e){}const o=p.call(e);if(n){if(t){e[l]=r}else{delete e[l]}}return o}function _(e){return p.call(e)}},{}],87:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.merge=void 0;const t=require("./lodash.merge");const r=20;function n(...e){let t=e.shift();const r=new WeakMap;while(e.length>0){t=i(t,e.shift(),0,r)}return t}exports.merge=n;function o(e){if(s(e)){return e.slice()}return e}function i(e,t,n=0,d){let f;if(n>r){return undefined}n++;if(l(e)||l(t)||c(t)){f=o(t)}else if(s(e)){f=e.slice();if(s(t)){for(let e=0,r=t.length;e<r;e++){f.push(o(t[e]))}}else if(u(t)){const e=Object.keys(t);for(let r=0,n=e.length;r<n;r++){const n=e[r];f[n]=o(t[n])}}}else if(u(e)){if(u(t)){if(!p(e,t)){return t}f=Object.assign({},e);const r=Object.keys(t);for(let o=0,s=r.length;o<s;o++){const s=r[o];const c=t[s];if(l(c)){if(typeof c==="undefined"){delete f[s]}else{f[s]=c}}else{const r=f[s];const o=c;if(a(e,s,d)||a(t,s,d)){delete f[s]}else{if(u(r)&&u(o)){const n=d.get(r)||[];const i=d.get(o)||[];n.push({obj:e,key:s});i.push({obj:t,key:s});d.set(r,n);d.set(o,i)}f[s]=i(f[s],c,n,d)}}}}else{f=t}}return f}function a(e,t,r){const n=r.get(e[t])||[];for(let r=0,o=n.length;r<o;r++){const o=n[r];if(o.key===t&&o.obj===e){return true}}return false}function s(e){return Array.isArray(e)}function c(e){return typeof e==="function"}function u(e){return!l(e)&&!s(e)&&!c(e)&&typeof e==="object"}function l(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"||typeof e==="undefined"||e instanceof Date||e instanceof RegExp||e===null}function p(e,r){if(!(0,t.isPlainObject)(e)||!(0,t.isPlainObject)(r)){return false}return true}},{"./lodash.merge":86}],88:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Deferred=void 0;class t{constructor(){this._promise=new Promise(((e,t)=>{this._resolve=e;this._reject=t}))}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}exports.Deferred=t},{}],89:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TracesSamplerValues=void 0;var t;(function(e){e["AlwaysOff"]="always_off";e["AlwaysOn"]="always_on";e["ParentBasedAlwaysOff"]="parentbased_always_off";e["ParentBasedAlwaysOn"]="parentbased_always_on";e["ParentBasedTraceIdRatio"]="parentbased_traceidratio";e["TraceIdRatio"]="traceidratio"})(t=exports.TracesSamplerValues||(exports.TracesSamplerValues={}))},{}],90:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callWithTimeout=exports.TimeoutError=void 0;class t extends Error{constructor(e){super(e);Object.setPrototypeOf(this,t.prototype)}}exports.TimeoutError=t;function r(e,r){let n;const o=new Promise((function e(o,i){n=setTimeout((function e(){i(new t("Operation timed out."))}),r)}));return Promise.race([e,o]).then((e=>{clearTimeout(n);return e}),(e=>{clearTimeout(n);throw e}))}exports.callWithTimeout=r},{}],91:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isUrlIgnored=exports.urlMatches=void 0;function t(e,t){if(typeof t==="string"){return e===t}else{return!!e.match(t)}}exports.urlMatches=t;function r(e,r){if(!r){return false}for(const n of r){if(t(e,n)){return true}}return false}exports.isUrlIgnored=r},{}],92:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isWrapped=void 0;function t(e){return typeof e==="function"&&typeof e.__original==="function"&&typeof e.__unwrap==="function"&&e.__wrapped===true}exports.isWrapped=t},{}],93:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VERSION=void 0;exports.VERSION="1.19.0"},{}],94:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPMetricExporterBase=exports.LowMemoryTemporalitySelector=exports.DeltaTemporalitySelector=exports.CumulativeTemporalitySelector=void 0;const t=require("@opentelemetry/core");const r=require("@opentelemetry/sdk-metrics");const n=require("./OTLPMetricExporterOptions");const o=require("@opentelemetry/api");const i=()=>r.AggregationTemporality.CUMULATIVE;exports.CumulativeTemporalitySelector=i;const a=e=>{switch(e){case r.InstrumentType.COUNTER:case r.InstrumentType.OBSERVABLE_COUNTER:case r.InstrumentType.HISTOGRAM:case r.InstrumentType.OBSERVABLE_GAUGE:return r.AggregationTemporality.DELTA;case r.InstrumentType.UP_DOWN_COUNTER:case r.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return r.AggregationTemporality.CUMULATIVE}};exports.DeltaTemporalitySelector=a;const s=e=>{switch(e){case r.InstrumentType.COUNTER:case r.InstrumentType.HISTOGRAM:return r.AggregationTemporality.DELTA;case r.InstrumentType.UP_DOWN_COUNTER:case r.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:case r.InstrumentType.OBSERVABLE_COUNTER:case r.InstrumentType.OBSERVABLE_GAUGE:return r.AggregationTemporality.CUMULATIVE}};exports.LowMemoryTemporalitySelector=s;function c(){const e=(0,t.getEnv)();const r=e.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();if(r==="cumulative"){return exports.CumulativeTemporalitySelector}if(r==="delta"){return exports.DeltaTemporalitySelector}if(r==="lowmemory"){return exports.LowMemoryTemporalitySelector}o.diag.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${e.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`);return exports.CumulativeTemporalitySelector}function u(e){if(e!=null){if(e===n.AggregationTemporalityPreference.DELTA){return exports.DeltaTemporalitySelector}else if(e===n.AggregationTemporalityPreference.LOWMEMORY){return exports.LowMemoryTemporalitySelector}return exports.CumulativeTemporalitySelector}return c()}class l{constructor(e,t){this._otlpExporter=e;this._aggregationTemporalitySelector=u(t===null||t===void 0?void 0:t.temporalityPreference)}export(e,t){this._otlpExporter.export([e],t)}async shutdown(){await this._otlpExporter.shutdown()}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}}exports.OTLPMetricExporterBase=l},{"./OTLPMetricExporterOptions":95,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/sdk-metrics":192}],95:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggregationTemporalityPreference=void 0;var t;(function(e){e[e["DELTA"]=0]="DELTA";e[e["CUMULATIVE"]=1]="CUMULATIVE";e[e["LOWMEMORY"]=2]="LOWMEMORY"})(t=exports.AggregationTemporalityPreference||(exports.AggregationTemporalityPreference={}))},{}],96:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./platform"),exports);r(require("./OTLPMetricExporterOptions"),exports);r(require("./OTLPMetricExporterBase"),exports)},{"./OTLPMetricExporterBase":94,"./OTLPMetricExporterOptions":95,"./platform":98}],97:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPMetricExporter=void 0;const t=require("@opentelemetry/core");const r=require("../../OTLPMetricExporterBase");const n=require("@opentelemetry/otlp-exporter-base");const o=require("@opentelemetry/otlp-transformer");const i="v1/metrics";const a=`http://localhost:4318/${i}`;class s extends n.OTLPExporterBrowserBase{constructor(e){super(e);this._headers=Object.assign(this._headers,t.baggageUtils.parseKeyPairsIntoRecord((0,t.getEnv)().OTEL_EXPORTER_OTLP_METRICS_HEADERS))}getDefaultUrl(e){return typeof e.url==="string"?e.url:(0,t.getEnv)().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT.length>0?(0,n.appendRootPathToUrlIfNeeded)((0,t.getEnv)().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT):(0,t.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,n.appendResourcePathToUrl)((0,t.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,i):a}convert(e){return(0,o.createExportMetricsServiceRequest)(e,{useLongBits:false})}}class c extends r.OTLPMetricExporterBase{constructor(e){super(new s(e),e)}}exports.OTLPMetricExporter=c},{"../../OTLPMetricExporterBase":94,"@opentelemetry/core":63,"@opentelemetry/otlp-exporter-base":118,"@opentelemetry/otlp-transformer":127}],98:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./OTLPMetricExporter"),exports)},{"./OTLPMetricExporter":97}],99:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./platform"),exports)},{"./platform":101}],100:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPTraceExporter=void 0;const t=require("@opentelemetry/core");const r=require("@opentelemetry/otlp-exporter-base");const n=require("@opentelemetry/otlp-transformer");const o="v1/traces";const i=`http://localhost:4318/${o}`;class a extends r.OTLPExporterBrowserBase{constructor(e={}){super(e);this._headers=Object.assign(this._headers,t.baggageUtils.parseKeyPairsIntoRecord((0,t.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS))}convert(e){return(0,n.createExportTraceServiceRequest)(e,{useHex:true,useLongBits:false})}getDefaultUrl(e){return typeof e.url==="string"?e.url:(0,t.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,r.appendRootPathToUrlIfNeeded)((0,t.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,t.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,r.appendResourcePathToUrl)((0,t.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,o):i}}exports.OTLPTraceExporter=a},{"@opentelemetry/core":63,"@opentelemetry/otlp-exporter-base":118,"@opentelemetry/otlp-transformer":127}],101:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./OTLPTraceExporter"),exports)},{"./OTLPTraceExporter":100}],102:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AttributeNames=void 0;var t;(function(e){e["COMPONENT"]="component";e["HTTP_ERROR_NAME"]="http.error_name";e["HTTP_STATUS_TEXT"]="http.status_text"})(t=exports.AttributeNames||(exports.AttributeNames={}))},{}],103:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FetchInstrumentation=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/instrumentation");const n=require("@opentelemetry/core");const o=require("@opentelemetry/sdk-trace-web");const i=require("./enums/AttributeNames");const a=require("@opentelemetry/semantic-conventions");const s=require("./version");const c=require("@opentelemetry/core");const u=300;class l extends r.InstrumentationBase{constructor(e){super("@opentelemetry/instrumentation-fetch",s.VERSION,e);this.component="fetch";this.version=s.VERSION;this.moduleName=this.component;this._usedResources=new WeakSet;this._tasksCount=0}init(){}_getConfig(){return this._config}_addChildSpan(e,r){const n=this.tracer.startSpan("CORS Preflight",{startTime:r[o.PerformanceTimingNames.FETCH_START]},t.trace.setSpan(t.context.active(),e));if(!this._getConfig().ignoreNetworkEvents){o.addSpanNetworkEvents(n,r)}n.end(r[o.PerformanceTimingNames.RESPONSE_END])}_addFinalSpanAttributes(e,t){const r=o.parseUrl(t.url);e.setAttribute(a.SemanticAttributes.HTTP_STATUS_CODE,t.status);if(t.statusText!=null){e.setAttribute(i.AttributeNames.HTTP_STATUS_TEXT,t.statusText)}e.setAttribute(a.SemanticAttributes.HTTP_HOST,r.host);e.setAttribute(a.SemanticAttributes.HTTP_SCHEME,r.protocol.replace(":",""));if(typeof navigator!=="undefined"){e.setAttribute(a.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent)}}_addHeaders(e,r){if(!o.shouldPropagateTraceHeaders(r,this._getConfig().propagateTraceHeaderCorsUrls)){const e={};t.propagation.inject(t.context.active(),e);if(Object.keys(e).length>0){this._diag.debug("headers inject skipped due to CORS policy")}return}if(e instanceof Request){t.propagation.inject(t.context.active(),e.headers,{set:(e,t,r)=>e.set(t,typeof r==="string"?r:String(r))})}else if(e.headers instanceof Headers){t.propagation.inject(t.context.active(),e.headers,{set:(e,t,r)=>e.set(t,typeof r==="string"?r:String(r))})}else{const r={};t.propagation.inject(t.context.active(),r);e.headers=Object.assign({},r,e.headers||{})}}_clearResources(){if(this._tasksCount===0&&this._getConfig().clearTimingResources){performance.clearResourceTimings();this._usedResources=new WeakSet}}_createSpan(e,r={}){if(n.isUrlIgnored(e,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}const o=(r.method||"GET").toUpperCase();const s=`HTTP ${o}`;return this.tracer.startSpan(s,{kind:t.SpanKind.CLIENT,attributes:{[i.AttributeNames.COMPONENT]:this.moduleName,[a.SemanticAttributes.HTTP_METHOD]:o,[a.SemanticAttributes.HTTP_URL]:e}})}_findResourceAndAddNetworkEvents(e,t,r){let n=t.entries;if(!n.length){if(!performance.getEntriesByType){return}n=performance.getEntriesByType("resource")}const i=o.getResource(t.spanUrl,t.startTime,r,n,this._usedResources,"fetch");if(i.mainRequest){const t=i.mainRequest;this._markResourceAsUsed(t);const r=i.corsPreFlightRequest;if(r){this._addChildSpan(e,r);this._markResourceAsUsed(r)}if(!this._getConfig().ignoreNetworkEvents){o.addSpanNetworkEvents(e,t)}}}_markResourceAsUsed(e){this._usedResources.add(e)}_endSpan(e,t,r){const o=n.millisToHrTime(Date.now());const i=n.hrTime();this._addFinalSpanAttributes(e,r);setTimeout((()=>{var r;(r=t.observer)===null||r===void 0?void 0:r.disconnect();this._findResourceAndAddNetworkEvents(e,t,i);this._tasksCount--;this._clearResources();e.end(o)}),u)}_patchConstructor(){return e=>{const r=this;return function n(...i){const a=this;const s=o.parseUrl(i[0]instanceof Request?i[0].url:String(i[0])).href;const c=i[0]instanceof Request?i[0]:i[1]||{};const u=r._createSpan(s,c);if(!u){return e.apply(this,i)}const l=r._prepareSpanData(s);function p(e,t){r._applyAttributesAfterFetch(e,c,t);r._endSpan(e,l,{status:t.status||0,statusText:t.message,url:s})}function d(e,t){r._applyAttributesAfterFetch(e,c,t);if(t.status>=200&&t.status<400){r._endSpan(e,l,t)}else{r._endSpan(e,l,{status:t.status,statusText:t.statusText,url:s})}}function f(e,t,r){try{const t=r.clone();const n=r.clone();const o=t.body;if(o){const t=o.getReader();const r=()=>{t.read().then((({done:t})=>{if(t){d(e,n)}else{r()}}),(t=>{p(e,t)}))};r()}else{d(e,r)}}finally{t(r)}}function m(e,t,r){try{p(e,r)}finally{t(r)}}return new Promise(((n,o)=>t.context.with(t.trace.setSpan(t.context.active(),u),(()=>{r._addHeaders(c,s);r._tasksCount++;return e.apply(a,c instanceof Request?[c]:[s,c]).then(f.bind(a,u,n),m.bind(a,u,o))}))))}}}_applyAttributesAfterFetch(e,t,n){const o=this._getConfig().applyCustomAttributesOnSpan;if(o){(0,r.safeExecuteInTheMiddle)((()=>o(e,t,n)),(e=>{if(!e){return}this._diag.error("applyCustomAttributesOnSpan",e)}),true)}}_prepareSpanData(e){const t=n.hrTime();const r=[];if(typeof PerformanceObserver!=="function"){return{entries:r,startTime:t,spanUrl:e}}const o=new PerformanceObserver((t=>{const n=t.getEntries();n.forEach((t=>{if(t.initiatorType==="fetch"&&t.name===e){r.push(t)}}))}));o.observe({entryTypes:["resource"]});return{entries:r,observer:o,startTime:t,spanUrl:e}}enable(){if((0,r.isWrapped)(fetch)){this._unwrap(c._globalThis,"fetch");this._diag.debug("removing previous patch for constructor")}this._wrap(c._globalThis,"fetch",this._patchConstructor())}disable(){this._unwrap(c._globalThis,"fetch");this._usedResources=new WeakSet}}exports.FetchInstrumentation=l},{"./enums/AttributeNames":102,"./version":105,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/instrumentation":108,"@opentelemetry/sdk-trace-web":244,"@opentelemetry/semantic-conventions":247}],104:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./fetch"),exports)},{"./fetch":103}],105:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VERSION=void 0;exports.VERSION="0.46.0"},{}],106:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerInstrumentations=void 0;const t=require("@opentelemetry/api");const r=require("./autoLoaderUtils");function n(e){const{instrumentations:n}=(0,r.parseInstrumentationOptions)(e.instrumentations);const o=e.tracerProvider||t.trace.getTracerProvider();const i=e.meterProvider||t.metrics.getMeterProvider();(0,r.enableInstrumentations)(n,o,i);return()=>{(0,r.disableInstrumentations)(n)}}exports.registerInstrumentations=n},{"./autoLoaderUtils":107,"@opentelemetry/api":19}],107:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.disableInstrumentations=exports.enableInstrumentations=exports.parseInstrumentationOptions=void 0;function t(e=[]){let r=[];for(let n=0,o=e.length;n<o;n++){const o=e[n];if(Array.isArray(o)){const e=t(o);r=r.concat(e.instrumentations)}else if(typeof o==="function"){r.push(new o)}else if(o.instrumentationName){r.push(o)}}return{instrumentations:r}}exports.parseInstrumentationOptions=t;function r(e,t,r){for(let n=0,o=e.length;n<o;n++){const o=e[n];if(t){o.setTracerProvider(t)}if(r){o.setMeterProvider(r)}if(!o.getConfig().enabled){o.enable()}}}exports.enableInstrumentations=r;function n(e){e.forEach((e=>e.disable()))}exports.disableInstrumentations=n},{}],108:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationNodeModuleFile=exports.InstrumentationNodeModuleDefinition=exports.InstrumentationBase=void 0;r(require("./autoLoader"),exports);var n=require("./platform/index");Object.defineProperty(exports,"InstrumentationBase",{enumerable:true,get:function(){return n.InstrumentationBase}});var o=require("./instrumentationNodeModuleDefinition");Object.defineProperty(exports,"InstrumentationNodeModuleDefinition",{enumerable:true,get:function(){return o.InstrumentationNodeModuleDefinition}});var i=require("./instrumentationNodeModuleFile");Object.defineProperty(exports,"InstrumentationNodeModuleFile",{enumerable:true,get:function(){return i.InstrumentationNodeModuleFile}});r(require("./types"),exports);r(require("./types_internal"),exports);r(require("./utils"),exports)},{"./autoLoader":106,"./instrumentationNodeModuleDefinition":110,"./instrumentationNodeModuleFile":111,"./platform/index":112,"./types":114,"./types_internal":115,"./utils":116}],109:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationAbstract=void 0;const t=require("@opentelemetry/api");const r=require("shimmer");class n{constructor(e,n,o={}){this.instrumentationName=e;this.instrumentationVersion=n;this._wrap=r.wrap;this._unwrap=r.unwrap;this._massWrap=r.massWrap;this._massUnwrap=r.massUnwrap;this._config=Object.assign({enabled:true},o);this._diag=t.diag.createComponentLogger({namespace:e});this._tracer=t.trace.getTracer(e,n);this._meter=t.metrics.getMeter(e,n);this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion);this._updateMetricInstruments()}_updateMetricInstruments(){return}getConfig(){return this._config}setConfig(e={}){this._config=Object.assign({},e)}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}exports.InstrumentationAbstract=n},{"@opentelemetry/api":19,shimmer:384}],110:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationNodeModuleDefinition=void 0;class t{constructor(e,t,r,n,o){this.name=e;this.supportedVersions=t;this.patch=r;this.unpatch=n;this.files=o||[]}}exports.InstrumentationNodeModuleDefinition=t},{}],111:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationNodeModuleFile=void 0;const t=require("path");class r{constructor(e,r,n,o){this.supportedVersions=r;this.patch=n;this.unpatch=o;this.name=(0,t.normalize)(e)}}exports.InstrumentationNodeModuleFile=r},{path:381}],112:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationBase=void 0;var t=require("./instrumentation");Object.defineProperty(exports,"InstrumentationBase",{enumerable:true,get:function(){return t.InstrumentationBase}})},{"./instrumentation":113}],113:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentationBase=void 0;const t=require("../../instrumentation");class r extends t.InstrumentationAbstract{constructor(e,t,r={}){super(e,t,r);if(this._config.enabled){this.enable()}}}exports.InstrumentationBase=r},{"../../instrumentation":109}],114:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],115:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],116:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isWrapped=exports.safeExecuteInTheMiddleAsync=exports.safeExecuteInTheMiddle=void 0;function t(e,t,r){let n;let o;try{o=e()}catch(e){n=e}finally{t(n,o);if(n&&!r){throw n}return o}}exports.safeExecuteInTheMiddle=t;async function r(e,t,r){let n;let o;try{o=await e()}catch(e){n=e}finally{t(n,o);if(n&&!r){throw n}return o}}exports.safeExecuteInTheMiddleAsync=r;function n(e){return typeof e==="function"&&typeof e.__original==="function"&&typeof e.__unwrap==="function"&&e.__wrapped===true}exports.isWrapped=n},{}],117:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPExporterBase=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./util");class o{constructor(e={}){this._sendingPromises=[];this.url=this.getDefaultUrl(e);if(typeof e.hostname==="string"){this.hostname=e.hostname}this.shutdown=this.shutdown.bind(this);this._shutdownOnce=new r.BindOnceFuture(this._shutdown,this);this._concurrencyLimit=typeof e.concurrencyLimit==="number"?e.concurrencyLimit:30;this.timeoutMillis=(0,n.configureExporterTimeout)(e.timeoutMillis);this.onInit(e)}export(e,t){if(this._shutdownOnce.isCalled){t({code:r.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){t({code:r.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then((()=>{t({code:r.ExportResultCode.SUCCESS})})).catch((e=>{t({code:r.ExportResultCode.FAILED,error:e})}))}_export(e){return new Promise(((r,n)=>{try{t.diag.debug("items to be sent",e);this.send(e,r,n)}catch(e){n(e)}}))}shutdown(){return this._shutdownOnce.call()}forceFlush(){return Promise.all(this._sendingPromises).then((()=>{}))}_shutdown(){t.diag.debug("shutdown started");this.onShutdown();return this.forceFlush()}}exports.OTLPExporterBase=o},{"./util":123,"@opentelemetry/api":19,"@opentelemetry/core":63}],118:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});exports.invalidTimeout=exports.configureExporterTimeout=exports.appendRootPathToUrlIfNeeded=exports.appendResourcePathToUrl=exports.parseHeaders=exports.OTLPExporterError=exports.OTLPExporterBase=void 0;r(require("./platform"),exports);var n=require("./OTLPExporterBase");Object.defineProperty(exports,"OTLPExporterBase",{enumerable:true,get:function(){return n.OTLPExporterBase}});var o=require("./types");Object.defineProperty(exports,"OTLPExporterError",{enumerable:true,get:function(){return o.OTLPExporterError}});var i=require("./util");Object.defineProperty(exports,"parseHeaders",{enumerable:true,get:function(){return i.parseHeaders}});Object.defineProperty(exports,"appendResourcePathToUrl",{enumerable:true,get:function(){return i.appendResourcePathToUrl}});Object.defineProperty(exports,"appendRootPathToUrlIfNeeded",{enumerable:true,get:function(){return i.appendRootPathToUrlIfNeeded}});Object.defineProperty(exports,"configureExporterTimeout",{enumerable:true,get:function(){return i.configureExporterTimeout}});Object.defineProperty(exports,"invalidTimeout",{enumerable:true,get:function(){return i.invalidTimeout}})},{"./OTLPExporterBase":117,"./platform":120,"./types":122,"./util":123}],119:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPExporterBrowserBase=void 0;const t=require("../../OTLPExporterBase");const r=require("../../util");const n=require("./util");const o=require("@opentelemetry/api");const i=require("@opentelemetry/core");class a extends t.OTLPExporterBase{constructor(e={}){super(e);this._useXHR=false;this._useXHR=!!e.headers||typeof navigator.sendBeacon!=="function";if(this._useXHR){this._headers=Object.assign({},(0,r.parseHeaders)(e.headers),i.baggageUtils.parseKeyPairsIntoRecord((0,i.getEnv)().OTEL_EXPORTER_OTLP_HEADERS))}else{this._headers={}}}onInit(){i._globalThis.addEventListener("unload",this.shutdown)}onShutdown(){i._globalThis.removeEventListener("unload",this.shutdown)}send(e,t,r){if(this._shutdownOnce.isCalled){o.diag.debug("Shutdown already started. Cannot send objects");return}const i=this.convert(e);const a=JSON.stringify(i);const s=new Promise(((e,t)=>{if(this._useXHR){(0,n.sendWithXhr)(a,this.url,this._headers,this.timeoutMillis,e,t)}else{(0,n.sendWithBeacon)(a,this.url,{type:"application/json"},e,t)}})).then(t,r);this._sendingPromises.push(s);const c=()=>{const e=this._sendingPromises.indexOf(s);this._sendingPromises.splice(e,1)};s.then(c,c)}}exports.OTLPExporterBrowserBase=a},{"../../OTLPExporterBase":117,"../../util":123,"./util":121,"@opentelemetry/api":19,"@opentelemetry/core":63}],120:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sendWithXhr=exports.OTLPExporterBrowserBase=void 0;var t=require("./OTLPExporterBrowserBase");Object.defineProperty(exports,"OTLPExporterBrowserBase",{enumerable:true,get:function(){return t.OTLPExporterBrowserBase}});var r=require("./util");Object.defineProperty(exports,"sendWithXhr",{enumerable:true,get:function(){return r.sendWithXhr}})},{"./OTLPExporterBrowserBase":119,"./util":121}],121:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sendWithXhr=exports.sendWithBeacon=void 0;const t=require("@opentelemetry/api");const r=require("../../types");const n=require("../../util");function o(e,n,o,i,a){if(navigator.sendBeacon(n,new Blob([e],o))){t.diag.debug("sendBeacon - can send",e);i()}else{const t=new r.OTLPExporterError(`sendBeacon - cannot send ${e}`);a(t)}}exports.sendWithBeacon=o;function i(e,o,i,a,s,c){let u;let l;let p=false;const d=setTimeout((()=>{clearTimeout(u);p=true;if(l.readyState===XMLHttpRequest.DONE){const e=new r.OTLPExporterError("Request Timeout");c(e)}else{l.abort()}}),a);const f=(a=n.DEFAULT_EXPORT_MAX_ATTEMPTS,m=n.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{l=new XMLHttpRequest;l.open("POST",o);const h={Accept:"application/json","Content-Type":"application/json"};Object.entries(Object.assign(Object.assign({},h),i)).forEach((([e,t])=>{l.setRequestHeader(e,t)}));l.send(e);l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE&&p===false){if(l.status>=200&&l.status<=299){t.diag.debug("xhr success",e);s();clearTimeout(d);clearTimeout(u)}else if(l.status&&(0,n.isExportRetryable)(l.status)&&a>0){let e;m=n.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*m;if(l.getResponseHeader("Retry-After")){e=(0,n.parseRetryAfterToMills)(l.getResponseHeader("Retry-After"))}else{e=Math.round(Math.random()*(n.DEFAULT_EXPORT_MAX_BACKOFF-m)+m)}u=setTimeout((()=>{f(a-1,m)}),e)}else{const e=new r.OTLPExporterError(`Failed to export with XHR (status: ${l.status})`,l.status);c(e);clearTimeout(d);clearTimeout(u)}}};l.onabort=()=>{if(p){const e=new r.OTLPExporterError("Request Timeout");c(e)}clearTimeout(d);clearTimeout(u)};l.onerror=()=>{if(p){const e=new r.OTLPExporterError("Request Timeout");c(e)}clearTimeout(d);clearTimeout(u)}};f()}exports.sendWithXhr=i},{"../../types":122,"../../util":123,"@opentelemetry/api":19}],122:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OTLPExporterError=void 0;class t extends Error{constructor(e,t,r){super(e);this.name="OTLPExporterError";this.data=r;this.code=t}}exports.OTLPExporterError=t},{}],123:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseRetryAfterToMills=exports.isExportRetryable=exports.invalidTimeout=exports.configureExporterTimeout=exports.appendRootPathToUrlIfNeeded=exports.appendResourcePathToUrl=exports.parseHeaders=exports.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=exports.DEFAULT_EXPORT_MAX_BACKOFF=exports.DEFAULT_EXPORT_INITIAL_BACKOFF=exports.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=1e4;exports.DEFAULT_EXPORT_MAX_ATTEMPTS=5;exports.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3;exports.DEFAULT_EXPORT_MAX_BACKOFF=5e3;exports.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5;function o(e={}){const r={};Object.entries(e).forEach((([e,n])=>{if(typeof n!=="undefined"){r[e]=String(n)}else{t.diag.warn(`Header "${e}" has wrong value and will be ignored`)}}));return r}exports.parseHeaders=o;function i(e,t){if(!e.endsWith("/")){e=e+"/"}return e+t}exports.appendResourcePathToUrl=i;function a(e){try{const t=new URL(e);if(t.pathname===""){t.pathname=t.pathname+"/"}return t.toString()}catch(r){t.diag.warn(`Could not parse export URL: '${e}'`);return e}}exports.appendRootPathToUrlIfNeeded=a;function s(e){if(typeof e==="number"){if(e<=0){return u(e,n)}return e}else{return c()}}exports.configureExporterTimeout=s;function c(){var e;const t=Number((e=(0,r.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,r.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);if(t<=0){return u(t,n)}else{return t}}function u(e,r){t.diag.warn("Timeout must be greater than 0",e);return r}exports.invalidTimeout=u;function l(e){const t=[429,502,503,504];return t.includes(e)}exports.isExportRetryable=l;function p(e){if(e==null){return-1}const t=Number.parseInt(e,10);if(Number.isInteger(t)){return t>0?t*1e3:-1}const r=new Date(e).getTime()-Date.now();if(r>=0){return r}return 0}exports.parseRetryAfterToMills=p},{"@opentelemetry/api":19,"@opentelemetry/core":63}],124:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOtlpEncoder=exports.encodeAsString=exports.encodeAsLongBits=exports.toLongBits=exports.hrTimeToNanos=void 0;const t=require("@opentelemetry/core");const r=BigInt(1e9);function n(e){return BigInt(e[0])*r+BigInt(e[1])}exports.hrTimeToNanos=n;function o(e){const t=Number(BigInt.asUintN(32,e));const r=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:r}}exports.toLongBits=o;function i(e){const t=n(e);return o(t)}exports.encodeAsLongBits=i;function a(e){const t=n(e);return t.toString()}exports.encodeAsString=a;const s=typeof BigInt!=="undefined"?a:t.hrTimeToNanoseconds;function c(e){return e}function u(e){if(e===undefined)return undefined;return(0,t.hexToBase64)(e)}const l={encodeHrTime:i,encodeSpanContext:t.hexToBase64,encodeOptionalSpanContext:u};function p(e){var r,n;if(e===undefined){return l}const o=(r=e.useLongBits)!==null&&r!==void 0?r:true;const a=(n=e.useHex)!==null&&n!==void 0?n:false;return{encodeHrTime:o?i:s,encodeSpanContext:a?c:t.hexToBase64,encodeOptionalSpanContext:a?c:u}}exports.getOtlpEncoder=p},{"@opentelemetry/core":63}],125:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAnyValue=exports.toKeyValue=exports.toAttributes=void 0;function t(e){return Object.keys(e).map((t=>r(t,e[t])))}exports.toAttributes=t;function r(e,t){return{key:e,value:n(t)}}exports.toKeyValue=r;function n(e){const t=typeof e;if(t==="string")return{stringValue:e};if(t==="number"){if(!Number.isInteger(e))return{doubleValue:e};return{intValue:e}}if(t==="boolean")return{boolValue:e};if(e instanceof Uint8Array)return{bytesValue:e};if(Array.isArray(e))return{arrayValue:{values:e.map(n)}};if(t==="object"&&e!=null)return{kvlistValue:{values:Object.entries(e).map((([e,t])=>r(e,t)))}};return{}}exports.toAnyValue=n},{}],126:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],127:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});exports.createExportLogsServiceRequest=exports.createExportMetricsServiceRequest=exports.createExportTraceServiceRequest=void 0;r(require("./common/types"),exports);r(require("./common"),exports);r(require("./metrics/types"),exports);r(require("./resource/types"),exports);r(require("./trace/types"),exports);r(require("./logs/types"),exports);var n=require("./trace");Object.defineProperty(exports,"createExportTraceServiceRequest",{enumerable:true,get:function(){return n.createExportTraceServiceRequest}});var o=require("./metrics");Object.defineProperty(exports,"createExportMetricsServiceRequest",{enumerable:true,get:function(){return o.createExportMetricsServiceRequest}});var i=require("./logs");Object.defineProperty(exports,"createExportLogsServiceRequest",{enumerable:true,get:function(){return i.createExportLogsServiceRequest}})},{"./common":124,"./common/types":126,"./logs":128,"./logs/types":129,"./metrics":130,"./metrics/types":132,"./resource/types":133,"./trace":134,"./trace/types":136}],128:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toLogAttributes=exports.createExportLogsServiceRequest=void 0;const t=require("../common");const r=require("../common/internal");function n(e,r){const n=(0,t.getOtlpEncoder)(r);return{resourceLogs:i(e,n)}}exports.createExportLogsServiceRequest=n;function o(e){const t=new Map;for(const r of e){const{resource:e,instrumentationScope:{name:n,version:o="",schemaUrl:i=""}}=r;let a=t.get(e);if(!a){a=new Map;t.set(e,a)}const s=`${n}@${o}:${i}`;let c=a.get(s);if(!c){c=[];a.set(s,c)}c.push(r)}return t}function i(e,t){const n=o(e);return Array.from(n,(([e,n])=>({resource:{attributes:(0,r.toAttributes)(e.attributes),droppedAttributesCount:0},scopeLogs:Array.from(n,(([,e])=>{const{instrumentationScope:{name:r,version:n,schemaUrl:o}}=e[0];return{scope:{name:r,version:n},logRecords:e.map((e=>a(e,t))),schemaUrl:o}})),schemaUrl:undefined})))}function a(e,t){var n,o,i;return{timeUnixNano:t.encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:s(e.severityNumber),severityText:e.severityText,body:(0,r.toAnyValue)(e.body),attributes:c(e.attributes),droppedAttributesCount:e.droppedAttributesCount,flags:(n=e.spanContext)===null||n===void 0?void 0:n.traceFlags,traceId:t.encodeOptionalSpanContext((o=e.spanContext)===null||o===void 0?void 0:o.traceId),spanId:t.encodeOptionalSpanContext((i=e.spanContext)===null||i===void 0?void 0:i.spanId)}}function s(e){return e}function c(e){return Object.keys(e).map((t=>(0,r.toKeyValue)(t,e[t])))}exports.toLogAttributes=c},{"../common":124,"../common/internal":125}],129:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],130:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createExportMetricsServiceRequest=void 0;const t=require("./internal");function r(e,r){return{resourceMetrics:e.map((e=>(0,t.toResourceMetrics)(e,r)))}}exports.createExportMetricsServiceRequest=r},{"./internal":131}],131:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toMetric=exports.toScopeMetrics=exports.toResourceMetrics=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/sdk-metrics");const n=require("../common/internal");const o=require("../common");function i(e,t){const r=(0,o.getOtlpEncoder)(t);return{resource:{attributes:(0,n.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:undefined,scopeMetrics:a(e.scopeMetrics,r)}}exports.toResourceMetrics=i;function a(e,t){return Array.from(e.map((e=>({scope:{name:e.scope.name,version:e.scope.version},metrics:e.metrics.map((e=>s(e,t))),schemaUrl:e.scope.schemaUrl}))))}exports.toScopeMetrics=a;function s(e,t){const n={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit};const o=d(e.aggregationTemporality);switch(e.dataPointType){case r.DataPointType.SUM:n.sum={aggregationTemporality:o,isMonotonic:e.isMonotonic,dataPoints:u(e,t)};break;case r.DataPointType.GAUGE:n.gauge={dataPoints:u(e,t)};break;case r.DataPointType.HISTOGRAM:n.histogram={aggregationTemporality:o,dataPoints:l(e,t)};break;case r.DataPointType.EXPONENTIAL_HISTOGRAM:n.exponentialHistogram={aggregationTemporality:o,dataPoints:p(e,t)};break}return n}exports.toMetric=s;function c(e,r,o){const i={attributes:(0,n.toAttributes)(e.attributes),startTimeUnixNano:o.encodeHrTime(e.startTime),timeUnixNano:o.encodeHrTime(e.endTime)};switch(r){case t.ValueType.INT:i.asInt=e.value;break;case t.ValueType.DOUBLE:i.asDouble=e.value;break}return i}function u(e,t){return e.dataPoints.map((r=>c(r,e.descriptor.valueType,t)))}function l(e,t){return e.dataPoints.map((e=>{const r=e.value;return{attributes:(0,n.toAttributes)(e.attributes),bucketCounts:r.buckets.counts,explicitBounds:r.buckets.boundaries,count:r.count,sum:r.sum,min:r.min,max:r.max,startTimeUnixNano:t.encodeHrTime(e.startTime),timeUnixNano:t.encodeHrTime(e.endTime)}}))}function p(e,t){return e.dataPoints.map((e=>{const r=e.value;return{attributes:(0,n.toAttributes)(e.attributes),count:r.count,min:r.min,max:r.max,sum:r.sum,positive:{offset:r.positive.offset,bucketCounts:r.positive.bucketCounts},negative:{offset:r.negative.offset,bucketCounts:r.negative.bucketCounts},scale:r.scale,zeroCount:r.zeroCount,startTimeUnixNano:t.encodeHrTime(e.startTime),timeUnixNano:t.encodeHrTime(e.endTime)}}))}function d(e){switch(e){case r.AggregationTemporality.DELTA:return 1;case r.AggregationTemporality.CUMULATIVE:return 2}}},{"../common":124,"../common/internal":125,"@opentelemetry/api":19,"@opentelemetry/sdk-metrics":192}],132:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],133:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],134:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createExportTraceServiceRequest=void 0;const t=require("../common/internal");const r=require("./internal");const n=require("../common");function o(e,t){const r=(0,n.getOtlpEncoder)(t);return{resourceSpans:a(e,r)}}exports.createExportTraceServiceRequest=o;function i(e){const t=new Map;for(const r of e){let e=t.get(r.resource);if(!e){e=new Map;t.set(r.resource,e)}const n=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`;let o=e.get(n);if(!o){o=[];e.set(n,o)}o.push(r)}return t}function a(e,n){const o=i(e);const a=[];const s=o.entries();let c=s.next();while(!c.done){const[e,o]=c.value;const i=[];const u=o.values();let l=u.next();while(!l.done){const e=l.value;if(e.length>0){const{name:t,version:o,schemaUrl:a}=e[0].instrumentationLibrary;const s=e.map((e=>(0,r.sdkSpanToOtlpSpan)(e,n)));i.push({scope:{name:t,version:o},spans:s,schemaUrl:a})}l=u.next()}const p={resource:{attributes:(0,t.toAttributes)(e.attributes),droppedAttributesCount:0},scopeSpans:i,schemaUrl:undefined};a.push(p);c=s.next()}return a}},{"../common":124,"../common/internal":125,"./internal":135}],135:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toOtlpSpanEvent=exports.toOtlpLink=exports.sdkSpanToOtlpSpan=void 0;const t=require("../common/internal");function r(e,r){var i;const a=e.spanContext();const s=e.status;return{traceId:r.encodeSpanContext(a.traceId),spanId:r.encodeSpanContext(a.spanId),parentSpanId:r.encodeOptionalSpanContext(e.parentSpanId),traceState:(i=a.traceState)===null||i===void 0?void 0:i.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:r.encodeHrTime(e.startTime),endTimeUnixNano:r.encodeHrTime(e.endTime),attributes:(0,t.toAttributes)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map((e=>o(e,r))),droppedEventsCount:e.droppedEventsCount,status:{code:s.code,message:s.message},links:e.links.map((e=>n(e,r))),droppedLinksCount:e.droppedLinksCount}}exports.sdkSpanToOtlpSpan=r;function n(e,r){var n;return{attributes:e.attributes?(0,t.toAttributes)(e.attributes):[],spanId:r.encodeSpanContext(e.context.spanId),traceId:r.encodeSpanContext(e.context.traceId),traceState:(n=e.context.traceState)===null||n===void 0?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}exports.toOtlpLink=n;function o(e,r){return{attributes:e.attributes?(0,t.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:r.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}exports.toOtlpSpanEvent=o},{"../common/internal":125}],136:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESpanKind=void 0;var t;(function(e){e[e["SPAN_KIND_UNSPECIFIED"]=0]="SPAN_KIND_UNSPECIFIED";e[e["SPAN_KIND_INTERNAL"]=1]="SPAN_KIND_INTERNAL";e[e["SPAN_KIND_SERVER"]=2]="SPAN_KIND_SERVER";e[e["SPAN_KIND_CLIENT"]=3]="SPAN_KIND_CLIENT";e[e["SPAN_KIND_PRODUCER"]=4]="SPAN_KIND_PRODUCER";e[e["SPAN_KIND_CONSUMER"]=5]="SPAN_KIND_CONSUMER"})(t=exports.ESpanKind||(exports.ESpanKind={}))},{}],137:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.B3MultiPropagator=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./common");const o=require("./constants");const i=new Set([true,"true","True","1",1]);const a=new Set([false,"false","False","0",0]);function s(e){return e===t.TraceFlags.SAMPLED||e===t.TraceFlags.NONE}function c(e){return Array.isArray(e)?e[0]:e}function u(e,t,r){const n=t.get(e,r);return c(n)}function l(e,t){const r=u(e,t,o.X_B3_TRACE_ID);if(typeof r==="string"){return r.padStart(32,"0")}return""}function p(e,t){const r=u(e,t,o.X_B3_SPAN_ID);if(typeof r==="string"){return r}return""}function d(e,t){const r=u(e,t,o.X_B3_FLAGS);return r==="1"?"1":undefined}function f(e,r){const n=u(e,r,o.X_B3_SAMPLED);const s=d(e,r);if(s==="1"||i.has(n)){return t.TraceFlags.SAMPLED}if(n===undefined||a.has(n)){return t.TraceFlags.NONE}return}class m{inject(e,i,a){const s=t.trace.getSpanContext(e);if(!s||!(0,t.isSpanContextValid)(s)||(0,r.isTracingSuppressed)(e))return;const c=e.getValue(n.B3_DEBUG_FLAG_KEY);a.set(i,o.X_B3_TRACE_ID,s.traceId);a.set(i,o.X_B3_SPAN_ID,s.spanId);if(c==="1"){a.set(i,o.X_B3_FLAGS,c)}else if(s.traceFlags!==undefined){a.set(i,o.X_B3_SAMPLED,(t.TraceFlags.SAMPLED&s.traceFlags)===t.TraceFlags.SAMPLED?"1":"0")}}extract(e,r,o){const i=l(r,o);const a=p(r,o);const c=f(r,o);const u=d(r,o);if((0,t.isValidTraceId)(i)&&(0,t.isValidSpanId)(a)&&s(c)){e=e.setValue(n.B3_DEBUG_FLAG_KEY,u);return t.trace.setSpanContext(e,{traceId:i,spanId:a,isRemote:true,traceFlags:c})}return e}fields(){return[o.X_B3_TRACE_ID,o.X_B3_SPAN_ID,o.X_B3_FLAGS,o.X_B3_SAMPLED,o.X_B3_PARENT_SPAN_ID]}}exports.B3MultiPropagator=m},{"./common":140,"./constants":141,"@opentelemetry/api":19,"@opentelemetry/core":63}],138:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.B3Propagator=void 0;const t=require("@opentelemetry/core");const r=require("./B3MultiPropagator");const n=require("./B3SinglePropagator");const o=require("./constants");const i=require("./types");class a{constructor(e={}){this._b3MultiPropagator=new r.B3MultiPropagator;this._b3SinglePropagator=new n.B3SinglePropagator;if(e.injectEncoding===i.B3InjectEncoding.MULTI_HEADER){this._inject=this._b3MultiPropagator.inject;this._fields=this._b3MultiPropagator.fields()}else{this._inject=this._b3SinglePropagator.inject;this._fields=this._b3SinglePropagator.fields()}}inject(e,r,n){if((0,t.isTracingSuppressed)(e)){return}this._inject(e,r,n)}extract(e,t,r){const n=r.get(t,o.B3_CONTEXT_HEADER);const i=Array.isArray(n)?n[0]:n;if(i){return this._b3SinglePropagator.extract(e,t,r)}else{return this._b3MultiPropagator.extract(e,t,r)}}fields(){return this._fields}}exports.B3Propagator=a},{"./B3MultiPropagator":137,"./B3SinglePropagator":139,"./constants":141,"./types":143,"@opentelemetry/core":63}],139:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.B3SinglePropagator=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./common");const o=require("./constants");const i=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/;const a="0".repeat(16);const s=new Set(["d","1"]);const c="d";function u(e){return e.length===32?e:`${a}${e}`}function l(e){if(e&&s.has(e)){return t.TraceFlags.SAMPLED}return t.TraceFlags.NONE}class p{inject(e,i,a){const s=t.trace.getSpanContext(e);if(!s||!(0,t.isSpanContextValid)(s)||(0,r.isTracingSuppressed)(e))return;const c=e.getValue(n.B3_DEBUG_FLAG_KEY)||s.traceFlags&1;const u=`${s.traceId}-${s.spanId}-${c}`;a.set(i,o.B3_CONTEXT_HEADER,u)}extract(e,r,a){const s=a.get(r,o.B3_CONTEXT_HEADER);const p=Array.isArray(s)?s[0]:s;if(typeof p!=="string")return e;const d=p.match(i);if(!d)return e;const[,f,m,h]=d;const v=u(f);if(!(0,t.isValidTraceId)(v)||!(0,t.isValidSpanId)(m))return e;const _=l(h);if(h===c){e=e.setValue(n.B3_DEBUG_FLAG_KEY,h)}return t.trace.setSpanContext(e,{traceId:v,spanId:m,isRemote:true,traceFlags:_})}fields(){return[o.B3_CONTEXT_HEADER]}}exports.B3SinglePropagator=p},{"./common":140,"./constants":141,"@opentelemetry/api":19,"@opentelemetry/core":63}],140:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.B3_DEBUG_FLAG_KEY=void 0;const t=require("@opentelemetry/api");exports.B3_DEBUG_FLAG_KEY=(0,t.createContextKey)("OpenTelemetry Context Key B3 Debug Flag")},{"@opentelemetry/api":19}],141:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.X_B3_FLAGS=exports.X_B3_PARENT_SPAN_ID=exports.X_B3_SAMPLED=exports.X_B3_SPAN_ID=exports.X_B3_TRACE_ID=exports.B3_CONTEXT_HEADER=void 0;exports.B3_CONTEXT_HEADER="b3";exports.X_B3_TRACE_ID="x-b3-traceid";exports.X_B3_SPAN_ID="x-b3-spanid";exports.X_B3_SAMPLED="x-b3-sampled";exports.X_B3_PARENT_SPAN_ID="x-b3-parentspanid";exports.X_B3_FLAGS="x-b3-flags"},{}],142:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./B3Propagator"),exports);r(require("./constants"),exports);r(require("./types"),exports)},{"./B3Propagator":138,"./constants":141,"./types":143}],143:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.B3InjectEncoding=void 0;var t;(function(e){e[e["SINGLE_HEADER"]=0]="SINGLE_HEADER";e[e["MULTI_HEADER"]=1]="MULTI_HEADER"})(t=exports.B3InjectEncoding||(exports.B3InjectEncoding={}))},{}],144:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],145:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Resource=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/semantic-conventions");const n=require("@opentelemetry/core");const o=require("./platform");class i{constructor(e,r){var n;this._attributes=e;this.asyncAttributesPending=r!=null;this._syncAttributes=(n=this._attributes)!==null&&n!==void 0?n:{};this._asyncAttributesPromise=r===null||r===void 0?void 0:r.then((e=>{this._attributes=Object.assign({},this._attributes,e);this.asyncAttributesPending=false;return e}),(e=>{t.diag.debug("a resource's async attributes promise rejected: %s",e);this.asyncAttributesPending=false;return{}}))}static empty(){return i.EMPTY}static default(){return new i({[r.SemanticResourceAttributes.SERVICE_NAME]:(0,o.defaultServiceName)(),[r.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.SDK_INFO[r.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[r.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:n.SDK_INFO[r.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[r.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:n.SDK_INFO[r.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}get attributes(){var e;if(this.asyncAttributesPending){t.diag.error("Accessing resource attributes before async attributes settled")}return(e=this._attributes)!==null&&e!==void 0?e:{}}async waitForAsyncAttributes(){if(this.asyncAttributesPending){await this._asyncAttributesPromise}}merge(e){var t;if(!e)return this;const r=Object.assign(Object.assign({},this._syncAttributes),(t=e._syncAttributes)!==null&&t!==void 0?t:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise){return new i(r)}const n=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then((([t,r])=>{var n;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),t),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes),r)}));return new i(r,n)}}exports.Resource=i;i.EMPTY=new i({})},{"./platform":163,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/semantic-conventions":247}],146:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],147:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectResourcesSync=exports.detectResources=void 0;const t=require("./Resource");const r=require("@opentelemetry/api");const n=require("./utils");const o=async(e={})=>{const n=await Promise.all((e.detectors||[]).map((async n=>{try{const t=await n.detect(e);r.diag.debug(`${n.constructor.name} found resource.`,t);return t}catch(e){r.diag.debug(`${n.constructor.name} failed: ${e.message}`);return t.Resource.empty()}})));a(n);return n.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};exports.detectResources=o;const i=(e={})=>{var o;const i=((o=e.detectors)!==null&&o!==void 0?o:[]).map((o=>{try{const i=o.detect(e);let a;if((0,n.isPromiseLike)(i)){const e=async()=>{const e=await i;return e.attributes};a=new t.Resource({},e())}else{a=i}if(a.waitForAsyncAttributes){void a.waitForAsyncAttributes().then((()=>r.diag.debug(`${o.constructor.name} found resource.`,a)))}else{r.diag.debug(`${o.constructor.name} found resource.`,a)}return a}catch(e){r.diag.error(`${o.constructor.name} failed: ${e.message}`);return t.Resource.empty()}}));const s=i.reduce(((e,t)=>e.merge(t)),t.Resource.empty());if(s.waitForAsyncAttributes){void s.waitForAsyncAttributes().then((()=>{a(i)}))}return s};exports.detectResourcesSync=i;const a=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){const t=JSON.stringify(e.attributes,null,4);r.diag.verbose(t)}}))}},{"./Resource":145,"./utils":165,"@opentelemetry/api":19}],148:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.browserDetector=void 0;const t=require("..");class r{detect(e){return Promise.resolve(t.browserDetectorSync.detect(e))}}exports.browserDetector=new r},{"..":155}],149:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.browserDetectorSync=void 0;const t=require("@opentelemetry/semantic-conventions");const r=require("..");const n=require("@opentelemetry/api");class o{detect(e){const n=typeof navigator!=="undefined";if(!n){return r.Resource.empty()}const o={[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[t.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[t.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(o,e)}_getResourceAttributes(e,o){if(e[t.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]===""){n.diag.debug("BrowserDetector failed: Unable to find required browser resources. ");return r.Resource.empty()}else{return new r.Resource(Object.assign({},e))}}}exports.browserDetectorSync=new o},{"..":155,"@opentelemetry/api":19,"@opentelemetry/semantic-conventions":247}],150:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.envDetector=void 0;const t=require("./EnvDetectorSync");class r{detect(e){return Promise.resolve(t.envDetectorSync.detect(e))}}exports.envDetector=new r},{"./EnvDetectorSync":151}],151:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.envDetectorSync=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("@opentelemetry/semantic-conventions");const o=require("../Resource");class i{constructor(){this._MAX_LENGTH=255;this._COMMA_SEPARATOR=",";this._LABEL_KEY_VALUE_SPLITTER="=";this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.";this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(e){const i={};const a=(0,r.getEnv)();const s=a.OTEL_RESOURCE_ATTRIBUTES;const c=a.OTEL_SERVICE_NAME;if(s){try{const e=this._parseResourceAttributes(s);Object.assign(i,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}}if(c){i[n.SemanticResourceAttributes.SERVICE_NAME]=c}return new o.Resource(i)}_parseResourceAttributes(e){if(!e)return{};const t={};const r=e.split(this._COMMA_SEPARATOR,-1);for(const e of r){const r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(r.length!==2){continue}let[n,o]=r;n=n.trim();o=o.trim().split(/^"|"$/).join("");if(!this._isValidAndNotEmpty(n)){throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`)}if(!this._isValid(o)){throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`)}t[n]=decodeURIComponent(o)}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<33||r===44||r===59||r===92||r>126){return false}}return true}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}exports.envDetectorSync=new i},{"../Resource":145,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/semantic-conventions":247}],152:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noopDetector=exports.NoopDetector=void 0;const t=require("./NoopDetectorSync");class r{detect(){return Promise.resolve(t.noopDetectorSync.detect())}}exports.NoopDetector=r;exports.noopDetector=new r},{"./NoopDetectorSync":153}],153:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noopDetectorSync=exports.NoopDetectorSync=void 0;const t=require("../Resource");class r{detect(){return new t.Resource({})}}exports.NoopDetectorSync=r;exports.noopDetectorSync=new r},{"../Resource":145}],154:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./BrowserDetector"),exports);r(require("./EnvDetector"),exports);r(require("./BrowserDetectorSync"),exports);r(require("./EnvDetectorSync"),exports)},{"./BrowserDetector":148,"./BrowserDetectorSync":149,"./EnvDetector":150,"./EnvDetectorSync":151}],155:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./Resource"),exports);r(require("./IResource"),exports);r(require("./platform"),exports);r(require("./types"),exports);r(require("./config"),exports);r(require("./detectors"),exports);r(require("./detect-resources"),exports)},{"./IResource":144,"./Resource":145,"./config":146,"./detect-resources":147,"./detectors":154,"./platform":163,"./types":164}],156:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hostDetector=void 0;const t=require("../../detectors/NoopDetector");exports.hostDetector=t.noopDetector},{"../../detectors/NoopDetector":152}],157:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hostDetectorSync=void 0;const t=require("../../detectors/NoopDetectorSync");exports.hostDetectorSync=t.noopDetectorSync},{"../../detectors/NoopDetectorSync":153}],158:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.osDetector=void 0;const t=require("../../detectors/NoopDetector");exports.osDetector=t.noopDetector},{"../../detectors/NoopDetector":152}],159:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.osDetectorSync=void 0;const t=require("../../detectors/NoopDetectorSync");exports.osDetectorSync=t.noopDetectorSync},{"../../detectors/NoopDetectorSync":153}],160:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.processDetector=void 0;const t=require("../../detectors/NoopDetector");exports.processDetector=t.noopDetector},{"../../detectors/NoopDetector":152}],161:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.processDetectorSync=void 0;const t=require("../../detectors/NoopDetector");exports.processDetectorSync=t.noopDetector},{"../../detectors/NoopDetector":152}],162:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultServiceName=void 0;function t(){return"unknown_service"}exports.defaultServiceName=t},{}],163:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./default-service-name"),exports);r(require("./HostDetector"),exports);r(require("./OSDetector"),exports);r(require("./HostDetectorSync"),exports);r(require("./OSDetectorSync"),exports);r(require("./ProcessDetector"),exports);r(require("./ProcessDetectorSync"),exports)},{"./HostDetector":156,"./HostDetectorSync":157,"./OSDetector":158,"./OSDetectorSync":159,"./ProcessDetector":160,"./ProcessDetectorSync":161,"./default-service-name":162}],164:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],165:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPromiseLike=void 0;const t=e=>e!==null&&typeof e==="object"&&typeof e.then==="function";exports.isPromiseLike=t},{}],166:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidName=exports.isDescriptorCompatibleWith=exports.createInstrumentDescriptorWithView=exports.createInstrumentDescriptor=exports.InstrumentType=void 0;const t=require("@opentelemetry/api");const r=require("./utils");var n;(function(e){e["COUNTER"]="COUNTER";e["HISTOGRAM"]="HISTOGRAM";e["UP_DOWN_COUNTER"]="UP_DOWN_COUNTER";e["OBSERVABLE_COUNTER"]="OBSERVABLE_COUNTER";e["OBSERVABLE_GAUGE"]="OBSERVABLE_GAUGE";e["OBSERVABLE_UP_DOWN_COUNTER"]="OBSERVABLE_UP_DOWN_COUNTER"})(n=exports.InstrumentType||(exports.InstrumentType={}));function o(e,r,n){var o,i,a,s;if(!c(e)){t.diag.warn(`Invalid metric name: "${e}". The metric name should be a ASCII string with a length no greater than 255 characters.`)}return{name:e,type:r,description:(o=n===null||n===void 0?void 0:n.description)!==null&&o!==void 0?o:"",unit:(i=n===null||n===void 0?void 0:n.unit)!==null&&i!==void 0?i:"",valueType:(a=n===null||n===void 0?void 0:n.valueType)!==null&&a!==void 0?a:t.ValueType.DOUBLE,advice:(s=n===null||n===void 0?void 0:n.advice)!==null&&s!==void 0?s:{}}}exports.createInstrumentDescriptor=o;function i(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice}}exports.createInstrumentDescriptorWithView=i;function a(e,t){return(0,r.equalsCaseInsensitive)(e.name,t.name)&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}exports.isDescriptorCompatibleWith=a;const s=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function c(e){return e.match(s)!=null}exports.isValidName=c},{"./utils":205,"@opentelemetry/api":19}],167:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isObservableInstrument=exports.ObservableUpDownCounterInstrument=exports.ObservableGaugeInstrument=exports.ObservableCounterInstrument=exports.ObservableInstrument=exports.HistogramInstrument=exports.CounterInstrument=exports.UpDownCounterInstrument=exports.SyncInstrument=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");class n{constructor(e,t){this._writableMetricStorage=e;this._descriptor=t}_record(e,n={},o=t.context.active()){if(typeof e!=="number"){t.diag.warn(`non-number value provided to metric ${this._descriptor.name}: ${e}`);return}if(this._descriptor.valueType===t.ValueType.INT&&!Number.isInteger(e)){t.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`);e=Math.trunc(e);if(!Number.isInteger(e)){return}}this._writableMetricStorage.record(e,n,o,(0,r.millisToHrTime)(Date.now()))}}exports.SyncInstrument=n;class o extends n{add(e,t,r){this._record(e,t,r)}}exports.UpDownCounterInstrument=o;class i extends n{add(e,r,n){if(e<0){t.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`);return}this._record(e,r,n)}}exports.CounterInstrument=i;class a extends n{record(e,r,n){if(e<0){t.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`);return}this._record(e,r,n)}}exports.HistogramInstrument=a;class s{constructor(e,t,r){this._observableRegistry=r;this._descriptor=e;this._metricStorages=t}addCallback(e){this._observableRegistry.addCallback(e,this)}removeCallback(e){this._observableRegistry.removeCallback(e,this)}}exports.ObservableInstrument=s;class c extends s{}exports.ObservableCounterInstrument=c;class u extends s{}exports.ObservableGaugeInstrument=u;class l extends s{}exports.ObservableUpDownCounterInstrument=l;function p(e){return e instanceof s}exports.isObservableInstrument=p},{"@opentelemetry/api":19,"@opentelemetry/core":63}],168:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Meter=void 0;const t=require("./InstrumentDescriptor");const r=require("./Instruments");class n{constructor(e){this._meterSharedState=e}createHistogram(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.HISTOGRAM,n);const i=this._meterSharedState.registerMetricStorage(o);return new r.HistogramInstrument(i,o)}createCounter(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.COUNTER,n);const i=this._meterSharedState.registerMetricStorage(o);return new r.CounterInstrument(i,o)}createUpDownCounter(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.UP_DOWN_COUNTER,n);const i=this._meterSharedState.registerMetricStorage(o);return new r.UpDownCounterInstrument(i,o)}createObservableGauge(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.OBSERVABLE_GAUGE,n);const i=this._meterSharedState.registerAsyncMetricStorage(o);return new r.ObservableGaugeInstrument(o,i,this._meterSharedState.observableRegistry)}createObservableCounter(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.OBSERVABLE_COUNTER,n);const i=this._meterSharedState.registerAsyncMetricStorage(o);return new r.ObservableCounterInstrument(o,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(e,n){const o=(0,t.createInstrumentDescriptor)(e,t.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,n);const i=this._meterSharedState.registerAsyncMetricStorage(o);return new r.ObservableUpDownCounterInstrument(o,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)}removeBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)}}exports.Meter=n},{"./InstrumentDescriptor":166,"./Instruments":167}],169:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MeterProvider=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/resources");const n=require("./state/MeterProviderSharedState");const o=require("./state/MetricCollector");class i{constructor(e){var t;this._shutdown=false;const o=r.Resource.default().merge((t=e===null||e===void 0?void 0:e.resource)!==null&&t!==void 0?t:r.Resource.empty());this._sharedState=new n.MeterProviderSharedState(o);if((e===null||e===void 0?void 0:e.views)!=null&&e.views.length>0){for(const t of e.views){this._sharedState.viewRegistry.addView(t)}}}getMeter(e,r="",n={}){if(this._shutdown){t.diag.warn("A shutdown MeterProvider cannot provide a Meter");return(0,t.createNoopMeter)()}return this._sharedState.getMeterSharedState({name:e,version:r,schemaUrl:n.schemaUrl}).meter}addMetricReader(e){const t=new o.MetricCollector(this._sharedState,e);e.setMetricProducer(t);this._sharedState.metricCollectors.push(t)}async shutdown(e){if(this._shutdown){t.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=true;await Promise.all(this._sharedState.metricCollectors.map((t=>t.shutdown(e))))}async forceFlush(e){if(this._shutdown){t.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map((t=>t.forceFlush(e))))}}exports.MeterProvider=i},{"./state/MeterProviderSharedState":196,"./state/MetricCollector":198,"@opentelemetry/api":19,"@opentelemetry/resources":155}],170:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BatchObservableResultImpl=exports.ObservableResultImpl=void 0;const t=require("@opentelemetry/api");const r=require("./state/HashMap");const n=require("./Instruments");class o{constructor(e,t){this._instrumentName=e;this._valueType=t;this._buffer=new r.AttributeHashMap}observe(e,r={}){if(typeof e!=="number"){t.diag.warn(`non-number value provided to metric ${this._instrumentName}: ${e}`);return}if(this._valueType===t.ValueType.INT&&!Number.isInteger(e)){t.diag.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`);e=Math.trunc(e);if(!Number.isInteger(e)){return}}this._buffer.set(r,e)}}exports.ObservableResultImpl=o;class i{constructor(){this._buffer=new Map}observe(e,o,i={}){if(!(0,n.isObservableInstrument)(e)){return}let a=this._buffer.get(e);if(a==null){a=new r.AttributeHashMap;this._buffer.set(e,a)}if(typeof o!=="number"){t.diag.warn(`non-number value provided to metric ${e._descriptor.name}: ${o}`);return}if(e._descriptor.valueType===t.ValueType.INT&&!Number.isInteger(o)){t.diag.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`);o=Math.trunc(o);if(!Number.isInteger(o)){return}}a.set(i,o)}}exports.BatchObservableResultImpl=i},{"./Instruments":167,"./state/HashMap":195,"@opentelemetry/api":19}],171:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DropAggregator=void 0;const t=require("./types");class r{constructor(){this.kind=t.AggregatorKind.DROP}createAccumulation(){return undefined}merge(e,t){return undefined}diff(e,t){return undefined}toMetricData(e,t,r,n){return undefined}}exports.DropAggregator=r},{"./types":184}],172:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExponentialHistogramAggregator=exports.ExponentialHistogramAccumulation=void 0;const t=require("./types");const r=require("../export/MetricData");const n=require("@opentelemetry/api");const o=require("../InstrumentDescriptor");const i=require("./exponential-histogram/Buckets");const a=require("./exponential-histogram/mapping/getMapping");const s=require("./exponential-histogram/util");class c{constructor(e,t){this.low=e;this.high=t}static combine(e,t){return new c(Math.min(e.low,t.low),Math.max(e.high,t.high))}}const u=20;const l=160;const p=2;class d{constructor(e=e,t=l,r=true,o=0,s=0,c=0,d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,m=new i.Buckets,h=new i.Buckets,v=(0,a.getMapping)(u)){this.startTime=e;this._maxSize=t;this._recordMinMax=r;this._sum=o;this._count=s;this._zeroCount=c;this._min=d;this._max=f;this._positive=m;this._negative=h;this._mapping=v;if(this._maxSize<p){n.diag.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: ${p}`);this._maxSize=p}}record(e){this.updateByIncrement(e,1)}setStartTime(e){this.startTime=e}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){if(this._count===this._zeroCount){return 0}return this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(e,t){if(e>this._max){this._max=e}if(e<this._min){this._min=e}this._count+=t;if(e===0){this._zeroCount+=t;return}this._sum+=e*t;if(e>0){this._updateBuckets(this._positive,e,t)}else{this._updateBuckets(this._negative,-e,t)}}merge(e){if(this._count===0){this._min=e.min;this._max=e.max}else if(e.count!==0){if(e.min<this.min){this._min=e.min}if(e.max>this.max){this._max=e.max}}this.startTime=e.startTime;this._sum+=e.sum;this._count+=e.count;this._zeroCount+=e.zeroCount;const t=this._minScale(e);this._downscale(this.scale-t);this._mergeBuckets(this.positive,e,e.positive,t);this._mergeBuckets(this.negative,e,e.negative,t)}diff(e){this._min=Infinity;this._max=-Infinity;this._sum-=e.sum;this._count-=e.count;this._zeroCount-=e.zeroCount;const t=this._minScale(e);this._downscale(this.scale-t);this._diffBuckets(this.positive,e,e.positive,t);this._diffBuckets(this.negative,e,e.negative,t)}clone(){return new d(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(e,t,r){let n=this._mapping.mapToIndex(t);let o=false;let i=0;let a=0;if(e.length===0){e.indexStart=n;e.indexEnd=e.indexStart;e.indexBase=e.indexStart}else if(n<e.indexStart&&e.indexEnd-n>=this._maxSize){o=true;a=n;i=e.indexEnd}else if(n>e.indexEnd&&n-e.indexStart>=this._maxSize){o=true;a=e.indexStart;i=n}if(o){const e=this._changeScale(i,a);this._downscale(e);n=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,n,r)}_incrementIndexBy(e,t,r){if(r===0){return}if(t<e.indexStart){const r=e.indexEnd-t;if(r>=e.backing.length){this._grow(e,r+1)}e.indexStart=t}else if(t>e.indexEnd){const r=t-e.indexStart;if(r>=e.backing.length){this._grow(e,r+1)}e.indexEnd=t}let n=t-e.indexBase;if(n<0){n+=e.backing.length}e.incrementBucket(n,r)}_grow(e,t){const r=e.backing.length;const n=e.indexBase-e.indexStart;const o=r-n;let i=(0,s.nextGreaterSquare)(t);if(i>this._maxSize){i=this._maxSize}const a=i-n;e.backing.growTo(i,o,a)}_changeScale(e,t){let r=0;while(e-t>=this._maxSize){e>>=1;t>>=1;r++}return r}_downscale(e){if(e===0){return}if(e<0){throw new Error(`impossible change of scale: ${this.scale}`)}const t=this._mapping.scale-e;this._positive.downscale(e);this._negative.downscale(e);this._mapping=(0,a.getMapping)(t)}_minScale(e){const t=Math.min(this.scale,e.scale);const r=c.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t));const n=c.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(r.high,r.low),t-this._changeScale(n.high,n.low))}_highLowAtScale(e,t,r){if(e.length===0){return new c(0,-1)}const n=t-r;return new c(e.indexStart>>n,e.indexEnd>>n)}_mergeBuckets(e,t,r,n){const o=r.offset;const i=t.scale-n;for(let t=0;t<r.length;t++){this._incrementIndexBy(e,o+t>>i,r.at(t))}}_diffBuckets(e,t,r,n){const o=r.offset;const i=t.scale-n;for(let t=0;t<r.length;t++){const n=o+t>>i;let a=n-e.indexBase;if(a<0){a+=e.backing.length}e.decrementBucket(a,r.at(t))}e.trim()}}exports.ExponentialHistogramAccumulation=d;class f{constructor(e,r){this._maxSize=e;this._recordMinMax=r;this.kind=t.AggregatorKind.EXPONENTIAL_HISTOGRAM}createAccumulation(e){return new d(e,this._maxSize,this._recordMinMax)}merge(e,t){const r=t.clone();r.merge(e);return r}diff(e,t){const r=t.clone();r.diff(e);return r}toMetricData(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:r.DataPointType.EXPONENTIAL_HISTOGRAM,dataPoints:n.map((([t,r])=>{const n=r.toPointValue();const a=e.type===o.InstrumentType.UP_DOWN_COUNTER||e.type===o.InstrumentType.OBSERVABLE_GAUGE||e.type===o.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:i,value:{min:n.hasMinMax?n.min:undefined,max:n.hasMinMax?n.max:undefined,sum:!a?n.sum:undefined,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},count:n.count,scale:n.scale,zeroCount:n.zeroCount}}}))}}}exports.ExponentialHistogramAggregator=f},{"../InstrumentDescriptor":166,"../export/MetricData":189,"./exponential-histogram/Buckets":176,"./exponential-histogram/mapping/getMapping":179,"./exponential-histogram/util":182,"./types":184,"@opentelemetry/api":19}],173:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HistogramAggregator=exports.HistogramAccumulation=void 0;const t=require("./types");const r=require("../export/MetricData");const n=require("../InstrumentDescriptor");const o=require("../utils");function i(e){const t=e.map((()=>0));t.push(0);return{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:false,min:Infinity,max:-Infinity}}class a{constructor(e,t,r=true,n=i(t)){this.startTime=e;this._boundaries=t;this._recordMinMax=r;this._current=n}record(e){this._current.count+=1;this._current.sum+=e;if(this._recordMinMax){this._current.min=Math.min(e,this._current.min);this._current.max=Math.max(e,this._current.max);this._current.hasMinMax=true}const t=(0,o.binarySearchLB)(this._boundaries,e);this._current.buckets.counts[t+1]+=1}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}exports.HistogramAccumulation=a;class s{constructor(e,r){this._boundaries=e;this._recordMinMax=r;this.kind=t.AggregatorKind.HISTOGRAM}createAccumulation(e){return new a(e,this._boundaries,this._recordMinMax)}merge(e,t){const r=e.toPointValue();const n=t.toPointValue();const o=r.buckets.counts;const i=n.buckets.counts;const s=new Array(o.length);for(let e=0;e<o.length;e++){s[e]=o[e]+i[e]}let c=Infinity;let u=-Infinity;if(this._recordMinMax){if(r.hasMinMax&&n.hasMinMax){c=Math.min(r.min,n.min);u=Math.max(r.max,n.max)}else if(r.hasMinMax){c=r.min;u=r.max}else if(n.hasMinMax){c=n.min;u=n.max}}return new a(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:s},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:c,max:u})}diff(e,t){const r=e.toPointValue();const n=t.toPointValue();const o=r.buckets.counts;const i=n.buckets.counts;const s=new Array(o.length);for(let e=0;e<o.length;e++){s[e]=i[e]-o[e]}return new a(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:s},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:false,min:Infinity,max:-Infinity})}toMetricData(e,t,o,i){return{descriptor:e,aggregationTemporality:t,dataPointType:r.DataPointType.HISTOGRAM,dataPoints:o.map((([t,r])=>{const o=r.toPointValue();const a=e.type===n.InstrumentType.UP_DOWN_COUNTER||e.type===n.InstrumentType.OBSERVABLE_GAUGE||e.type===n.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:i,value:{min:o.hasMinMax?o.min:undefined,max:o.hasMinMax?o.max:undefined,sum:!a?o.sum:undefined,buckets:o.buckets,count:o.count}}}))}}}exports.HistogramAggregator=s},{"../InstrumentDescriptor":166,"../export/MetricData":189,"../utils":205,"./types":184}],174:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LastValueAggregator=exports.LastValueAccumulation=void 0;const t=require("./types");const r=require("@opentelemetry/core");const n=require("../export/MetricData");class o{constructor(e,t=0,r=[0,0]){this.startTime=e;this._current=t;this.sampleTime=r}record(e){this._current=e;this.sampleTime=(0,r.millisToHrTime)(Date.now())}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}exports.LastValueAccumulation=o;class i{constructor(){this.kind=t.AggregatorKind.LAST_VALUE}createAccumulation(e){return new o(e)}merge(e,t){const n=(0,r.hrTimeToMicroseconds)(t.sampleTime)>=(0,r.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new o(e.startTime,n.toPointValue(),n.sampleTime)}diff(e,t){const n=(0,r.hrTimeToMicroseconds)(t.sampleTime)>=(0,r.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new o(t.startTime,n.toPointValue(),n.sampleTime)}toMetricData(e,t,r,o){return{descriptor:e,aggregationTemporality:t,dataPointType:n.DataPointType.GAUGE,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:o,value:t.toPointValue()})))}}}exports.LastValueAggregator=i},{"../export/MetricData":189,"./types":184,"@opentelemetry/core":63}],175:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SumAggregator=exports.SumAccumulation=void 0;const t=require("./types");const r=require("../export/MetricData");class n{constructor(e,t,r=0,n=false){this.startTime=e;this.monotonic=t;this._current=r;this.reset=n}record(e){if(this.monotonic&&e<0){return}this._current+=e}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}exports.SumAccumulation=n;class o{constructor(e){this.monotonic=e;this.kind=t.AggregatorKind.SUM}createAccumulation(e){return new n(e,this.monotonic)}merge(e,t){const r=e.toPointValue();const o=t.toPointValue();if(t.reset){return new n(t.startTime,this.monotonic,o,t.reset)}return new n(e.startTime,this.monotonic,r+o)}diff(e,t){const r=e.toPointValue();const o=t.toPointValue();if(this.monotonic&&r>o){return new n(t.startTime,this.monotonic,o,true)}return new n(t.startTime,this.monotonic,o-r)}toMetricData(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:r.DataPointType.SUM,dataPoints:n.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:o,value:t.toPointValue()}))),isMonotonic:this.monotonic}}}exports.SumAggregator=o},{"../export/MetricData":189,"./types":184}],176:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Buckets=void 0;class t{constructor(e=new r,t=0,n=0,o=0){this.backing=e;this.indexBase=t;this.indexStart=n;this.indexEnd=o}get offset(){return this.indexStart}get length(){if(this.backing.length===0){return 0}if(this.indexEnd===this.indexStart&&this.at(0)===0){return 0}return this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},((e,t)=>this.at(t)))}at(e){const t=this.indexBase-this.indexStart;if(e<t){e+=this.backing.length}e-=t;return this.backing.countAt(e)}incrementBucket(e,t){this.backing.increment(e,t)}decrementBucket(e,t){this.backing.decrement(e,t)}trim(){for(let e=0;e<this.length;e++){if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}}for(let e=this.length-1;e>=0;e--){if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}}this._rotate()}downscale(e){this._rotate();const t=1+this.indexEnd-this.indexStart;const r=1<<e;let n=0;let o=0;for(let e=this.indexStart;e<=this.indexEnd;){let i=e%r;if(i<0){i+=r}for(let a=i;a<r&&n<t;a++){this._relocateBucket(o,n);n++;e++}o++}this.indexStart>>=e;this.indexEnd>>=e;this.indexBase=this.indexStart}clone(){return new t(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){const e=this.indexBase-this.indexStart;if(e===0){return}else if(e>0){this.backing.reverse(0,this.backing.length);this.backing.reverse(0,e);this.backing.reverse(e,this.backing.length)}else{this.backing.reverse(0,this.backing.length);this.backing.reverse(0,this.backing.length+e)}this.indexBase=this.indexStart}_relocateBucket(e,t){if(e===t){return}this.incrementBucket(e,this.backing.emptyBucket(t))}}exports.Buckets=t;class r{constructor(e=[0]){this._counts=e}get length(){return this._counts.length}countAt(e){return this._counts[e]}growTo(e,t,r){const n=new Array(e).fill(0);n.splice(r,this._counts.length-t,...this._counts.slice(t));n.splice(0,t,...this._counts.slice(0,t));this._counts=n}reverse(e,t){const r=Math.floor((e+t)/2)-e;for(let n=0;n<r;n++){const r=this._counts[e+n];this._counts[e+n]=this._counts[t-n-1];this._counts[t-n-1]=r}}emptyBucket(e){const t=this._counts[e];this._counts[e]=0;return t}increment(e,t){this._counts[e]+=t}decrement(e,t){if(this._counts[e]>=t){this._counts[e]-=t}else{this._counts[e]=0}}clone(){return new r([...this._counts])}}},{}],177:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExponentMapping=void 0;const t=require("./ieee754");const r=require("../util");const n=require("./types");class o{constructor(e){this._shift=-e}mapToIndex(e){if(e<t.MIN_VALUE){return this._minNormalLowerBoundaryIndex()}const r=t.getNormalBase2(e);const n=this._rightShift(t.getSignificand(e)-1,t.SIGNIFICAND_WIDTH);return r+n>>this._shift}lowerBoundary(e){const t=this._minNormalLowerBoundaryIndex();if(e<t){throw new n.MappingError(`underflow: ${e} is < minimum lower boundary: ${t}`)}const o=this._maxNormalLowerBoundaryIndex();if(e>o){throw new n.MappingError(`overflow: ${e} is > maximum lower boundary: ${o}`)}return r.ldexp(1,e<<this._shift)}get scale(){if(this._shift===0){return 0}return-this._shift}_minNormalLowerBoundaryIndex(){let e=t.MIN_NORMAL_EXPONENT>>this._shift;if(this._shift<2){e--}return e}_maxNormalLowerBoundaryIndex(){return t.MAX_NORMAL_EXPONENT>>this._shift}_rightShift(e,t){return Math.floor(e*Math.pow(2,-t))}}exports.ExponentMapping=o},{"../util":182,"./ieee754":180,"./types":181}],178:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LogarithmMapping=void 0;const t=require("./ieee754");const r=require("../util");const n=require("./types");class o{constructor(e){this._scale=e;this._scaleFactor=r.ldexp(Math.LOG2E,e);this._inverseFactor=r.ldexp(Math.LN2,-e)}mapToIndex(e){if(e<=t.MIN_VALUE){return this._minNormalLowerBoundaryIndex()-1}if(t.getSignificand(e)===0){const r=t.getNormalBase2(e);return(r<<this._scale)-1}const r=Math.floor(Math.log(e)*this._scaleFactor);const n=this._maxNormalLowerBoundaryIndex();if(r>=n){return n}return r}lowerBoundary(e){const r=this._maxNormalLowerBoundaryIndex();if(e>=r){if(e===r){return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor)}throw new n.MappingError(`overflow: ${e} is > maximum lower boundary: ${r}`)}const o=this._minNormalLowerBoundaryIndex();if(e<=o){if(e===o){return t.MIN_VALUE}else if(e===o-1){return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2}throw new n.MappingError(`overflow: ${e} is < minimum lower boundary: ${o}`)}return Math.exp(e*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return t.MIN_NORMAL_EXPONENT<<this._scale}_maxNormalLowerBoundaryIndex(){return(t.MAX_NORMAL_EXPONENT+1<<this._scale)-1}}exports.LogarithmMapping=o},{"../util":182,"./ieee754":180,"./types":181}],179:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMapping=void 0;const t=require("./ExponentMapping");const r=require("./LogarithmMapping");const n=require("./types");const o=-10;const i=20;const a=Array.from({length:31},((e,n)=>{if(n>10){return new r.LogarithmMapping(n-10)}return new t.ExponentMapping(n-10)}));function s(e){if(e>i||e<o){throw new n.MappingError(`expected scale >= ${o} && <= ${i}, got: ${e}`)}return a[e+10]}exports.getMapping=s},{"./ExponentMapping":177,"./LogarithmMapping":178,"./types":181}],180:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSignificand=exports.getNormalBase2=exports.MIN_VALUE=exports.MAX_NORMAL_EXPONENT=exports.MIN_NORMAL_EXPONENT=exports.SIGNIFICAND_WIDTH=void 0;exports.SIGNIFICAND_WIDTH=52;const t=2146435072;const r=1048575;const n=1023;exports.MIN_NORMAL_EXPONENT=-n+1;exports.MAX_NORMAL_EXPONENT=n;exports.MIN_VALUE=Math.pow(2,-1022);function o(e){const r=new DataView(new ArrayBuffer(8));r.setFloat64(0,e);const o=r.getUint32(0);const i=(o&t)>>20;return i-n}exports.getNormalBase2=o;function i(e){const t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);const n=t.getUint32(0);const o=t.getUint32(4);const i=(n&r)*Math.pow(2,32);return i+o}exports.getSignificand=i},{}],181:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MappingError=void 0;class t extends Error{}exports.MappingError=t},{}],182:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.nextGreaterSquare=exports.ldexp=void 0;function t(e,t){if(e===0||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||Number.isNaN(e)){return e}return e*Math.pow(2,t)}exports.ldexp=t;function r(e){e--;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;e++;return e}exports.nextGreaterSquare=r},{}],183:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./Drop"),exports);r(require("./Histogram"),exports);r(require("./ExponentialHistogram"),exports);r(require("./LastValue"),exports);r(require("./Sum"),exports)},{"./Drop":171,"./ExponentialHistogram":172,"./Histogram":173,"./LastValue":174,"./Sum":175}],184:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggregatorKind=void 0;var t;(function(e){e[e["DROP"]=0]="DROP";e[e["SUM"]=1]="SUM";e[e["LAST_VALUE"]=2]="LAST_VALUE";e[e["HISTOGRAM"]=3]="HISTOGRAM";e[e["EXPONENTIAL_HISTOGRAM"]=4]="EXPONENTIAL_HISTOGRAM"})(t=exports.AggregatorKind||(exports.AggregatorKind={}))},{}],185:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=exports.DEFAULT_AGGREGATION_SELECTOR=void 0;const t=require("../view/Aggregation");const r=require("./AggregationTemporality");const n=e=>t.Aggregation.Default();exports.DEFAULT_AGGREGATION_SELECTOR=n;const o=e=>r.AggregationTemporality.CUMULATIVE;exports.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=o},{"../view/Aggregation":206,"./AggregationTemporality":186}],186:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggregationTemporality=void 0;var t;(function(e){e[e["DELTA"]=0]="DELTA";e[e["CUMULATIVE"]=1]="CUMULATIVE"})(t=exports.AggregationTemporality||(exports.AggregationTemporality={}))},{}],187:[function(require,e,exports){(function(e){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConsoleMetricExporter=void 0;const t=require("@opentelemetry/core");const r=require("./AggregationSelector");class n{constructor(e){var t;this._shutdown=false;this._temporalitySelector=(t=e===null||e===void 0?void 0:e.temporalitySelector)!==null&&t!==void 0?t:r.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}export(r,o){if(this._shutdown){e(o,{code:t.ExportResultCode.FAILED});return}return n._sendMetrics(r,o)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._temporalitySelector(e)}shutdown(){this._shutdown=true;return Promise.resolve()}static _sendMetrics(e,r){for(const t of e.scopeMetrics){for(const e of t.metrics){console.dir({descriptor:e.descriptor,dataPointType:e.dataPointType,dataPoints:e.dataPoints})}}r({code:t.ExportResultCode.SUCCESS})}}exports.ConsoleMetricExporter=n}).call(this)}).call(this,require("timers").setImmediate)},{"./AggregationSelector":185,"@opentelemetry/core":63,timers:385}],188:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InMemoryMetricExporter=void 0;const t=require("@opentelemetry/core");class r{constructor(e){this._shutdown=false;this._metrics=[];this._aggregationTemporality=e}export(e,r){if(this._shutdown){setTimeout((()=>r({code:t.ExportResultCode.FAILED})),0);return}this._metrics.push(e);setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(e){return this._aggregationTemporality}shutdown(){this._shutdown=true;return Promise.resolve()}}exports.InMemoryMetricExporter=r},{"@opentelemetry/core":63}],189:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPointType=void 0;var t;(function(e){e[e["HISTOGRAM"]=0]="HISTOGRAM";e[e["EXPONENTIAL_HISTOGRAM"]=1]="EXPONENTIAL_HISTOGRAM";e[e["GAUGE"]=2]="GAUGE";e[e["SUM"]=3]="SUM"})(t=exports.DataPointType||(exports.DataPointType={}))},{}],190:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricReader=void 0;const t=require("@opentelemetry/api");const r=require("../utils");const n=require("./AggregationSelector");class o{constructor(e){var t,r,o;this._shutdown=false;this._aggregationSelector=(t=e===null||e===void 0?void 0:e.aggregationSelector)!==null&&t!==void 0?t:n.DEFAULT_AGGREGATION_SELECTOR;this._aggregationTemporalitySelector=(r=e===null||e===void 0?void 0:e.aggregationTemporalitySelector)!==null&&r!==void 0?r:n.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR;this._metricProducers=(o=e===null||e===void 0?void 0:e.metricProducers)!==null&&o!==void 0?o:[]}setMetricProducer(e){if(this._sdkMetricProducer){throw new Error("MetricReader can not be bound to a MeterProvider again.")}this._sdkMetricProducer=e;this.onInitialized()}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}onInitialized(){}async collect(e){if(this._sdkMetricProducer===undefined){throw new Error("MetricReader is not bound to a MetricProducer")}if(this._shutdown){throw new Error("MetricReader is shutdown")}const[t,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:e===null||e===void 0?void 0:e.timeoutMillis}),...this._metricProducers.map((t=>t.collect({timeoutMillis:e===null||e===void 0?void 0:e.timeoutMillis})))]);const o=t.errors.concat((0,r.FlatMap)(n,(e=>e.errors)));const i=t.resourceMetrics.resource;const a=t.resourceMetrics.scopeMetrics.concat((0,r.FlatMap)(n,(e=>e.resourceMetrics.scopeMetrics)));return{resourceMetrics:{resource:i,scopeMetrics:a},errors:o}}async shutdown(e){if(this._shutdown){t.diag.error("Cannot call shutdown twice.");return}if((e===null||e===void 0?void 0:e.timeoutMillis)==null){await this.onShutdown()}else{await(0,r.callWithTimeout)(this.onShutdown(),e.timeoutMillis)}this._shutdown=true}async forceFlush(e){if(this._shutdown){t.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if((e===null||e===void 0?void 0:e.timeoutMillis)==null){await this.onForceFlush();return}await(0,r.callWithTimeout)(this.onForceFlush(),e.timeoutMillis)}}exports.MetricReader=o},{"../utils":205,"./AggregationSelector":185,"@opentelemetry/api":19}],191:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PeriodicExportingMetricReader=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./MetricReader");const o=require("../utils");const i=require("@opentelemetry/api");class a extends n.MetricReader{constructor(e){var t,r,n,o;super({aggregationSelector:(t=e.exporter.selectAggregation)===null||t===void 0?void 0:t.bind(e.exporter),aggregationTemporalitySelector:(r=e.exporter.selectAggregationTemporality)===null||r===void 0?void 0:r.bind(e.exporter),metricProducers:e.metricProducers});if(e.exportIntervalMillis!==undefined&&e.exportIntervalMillis<=0){throw Error("exportIntervalMillis must be greater than 0")}if(e.exportTimeoutMillis!==undefined&&e.exportTimeoutMillis<=0){throw Error("exportTimeoutMillis must be greater than 0")}if(e.exportTimeoutMillis!==undefined&&e.exportIntervalMillis!==undefined&&e.exportIntervalMillis<e.exportTimeoutMillis){throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis")}this._exportInterval=(n=e.exportIntervalMillis)!==null&&n!==void 0?n:6e4;this._exportTimeout=(o=e.exportTimeoutMillis)!==null&&o!==void 0?o:3e4;this._exporter=e.exporter}async _runOnce(){try{await(0,o.callWithTimeout)(this._doRun(),this._exportTimeout)}catch(e){if(e instanceof o.TimeoutError){t.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,r.globalErrorHandler)(e)}}async _doRun(){var e,n;const{resourceMetrics:o,errors:a}=await this.collect({timeoutMillis:this._exportTimeout});if(a.length>0){t.diag.error("PeriodicExportingMetricReader: metrics collection errors",...a)}const s=async()=>{const e=await r.internal._export(this._exporter,o);if(e.code!==r.ExportResultCode.SUCCESS){throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${e.error})`)}};if(o.resource.asyncAttributesPending){(n=(e=o.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(e).then(s,(e=>i.diag.debug("Error while resolving async portion of resource: ",e)))}else{await s()}}onInitialized(){this._interval=setInterval((()=>{void this._runOnce()}),this._exportInterval);(0,r.unrefTimer)(this._interval)}async onForceFlush(){await this._runOnce();await this._exporter.forceFlush()}async onShutdown(){if(this._interval){clearInterval(this._interval)}await this._exporter.shutdown()}}exports.PeriodicExportingMetricReader=a},{"../utils":205,"./MetricReader":190,"@opentelemetry/api":19,"@opentelemetry/core":63}],192:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeoutError=exports.View=exports.Aggregation=exports.SumAggregation=exports.LastValueAggregation=exports.HistogramAggregation=exports.DropAggregation=exports.ExponentialHistogramAggregation=exports.ExplicitBucketHistogramAggregation=exports.DefaultAggregation=exports.MeterProvider=exports.InstrumentType=exports.ConsoleMetricExporter=exports.InMemoryMetricExporter=exports.PeriodicExportingMetricReader=exports.MetricReader=exports.DataPointType=exports.AggregationTemporality=void 0;var t=require("./export/AggregationTemporality");Object.defineProperty(exports,"AggregationTemporality",{enumerable:true,get:function(){return t.AggregationTemporality}});var r=require("./export/MetricData");Object.defineProperty(exports,"DataPointType",{enumerable:true,get:function(){return r.DataPointType}});var n=require("./export/MetricReader");Object.defineProperty(exports,"MetricReader",{enumerable:true,get:function(){return n.MetricReader}});var o=require("./export/PeriodicExportingMetricReader");Object.defineProperty(exports,"PeriodicExportingMetricReader",{enumerable:true,get:function(){return o.PeriodicExportingMetricReader}});var i=require("./export/InMemoryMetricExporter");Object.defineProperty(exports,"InMemoryMetricExporter",{enumerable:true,get:function(){return i.InMemoryMetricExporter}});var a=require("./export/ConsoleMetricExporter");Object.defineProperty(exports,"ConsoleMetricExporter",{enumerable:true,get:function(){return a.ConsoleMetricExporter}});var s=require("./InstrumentDescriptor");Object.defineProperty(exports,"InstrumentType",{enumerable:true,get:function(){return s.InstrumentType}});var c=require("./MeterProvider");Object.defineProperty(exports,"MeterProvider",{enumerable:true,get:function(){return c.MeterProvider}});var u=require("./view/Aggregation");Object.defineProperty(exports,"DefaultAggregation",{enumerable:true,get:function(){return u.DefaultAggregation}});Object.defineProperty(exports,"ExplicitBucketHistogramAggregation",{enumerable:true,get:function(){return u.ExplicitBucketHistogramAggregation}});Object.defineProperty(exports,"ExponentialHistogramAggregation",{enumerable:true,get:function(){return u.ExponentialHistogramAggregation}});Object.defineProperty(exports,"DropAggregation",{enumerable:true,get:function(){return u.DropAggregation}});Object.defineProperty(exports,"HistogramAggregation",{enumerable:true,get:function(){return u.HistogramAggregation}});Object.defineProperty(exports,"LastValueAggregation",{enumerable:true,get:function(){return u.LastValueAggregation}});Object.defineProperty(exports,"SumAggregation",{enumerable:true,get:function(){return u.SumAggregation}});Object.defineProperty(exports,"Aggregation",{enumerable:true,get:function(){return u.Aggregation}});var l=require("./view/View");Object.defineProperty(exports,"View",{enumerable:true,get:function(){return l.View}});var p=require("./utils");Object.defineProperty(exports,"TimeoutError",{enumerable:true,get:function(){return p.TimeoutError}})},{"./InstrumentDescriptor":166,"./MeterProvider":169,"./export/AggregationTemporality":186,"./export/ConsoleMetricExporter":187,"./export/InMemoryMetricExporter":188,"./export/MetricData":189,"./export/MetricReader":190,"./export/PeriodicExportingMetricReader":191,"./utils":205,"./view/Aggregation":206,"./view/View":212}],193:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AsyncMetricStorage=void 0;const t=require("./MetricStorage");const r=require("./DeltaMetricProcessor");const n=require("./TemporalMetricProcessor");const o=require("./HashMap");class i extends t.MetricStorage{constructor(e,t,o,i){super(e);this._attributesProcessor=o;this._deltaMetricStorage=new r.DeltaMetricProcessor(t);this._temporalMetricStorage=new n.TemporalMetricProcessor(t,i)}record(e,t){const r=new o.AttributeHashMap;Array.from(e.entries()).forEach((([e,t])=>{r.set(this._attributesProcessor.process(e),t)}));this._deltaMetricStorage.batchCumulate(r,t)}collect(e,t){const r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)}}exports.AsyncMetricStorage=i},{"./DeltaMetricProcessor":194,"./HashMap":195,"./MetricStorage":199,"./TemporalMetricProcessor":204}],194:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeltaMetricProcessor=void 0;const t=require("./HashMap");class r{constructor(e){this._aggregator=e;this._activeCollectionStorage=new t.AttributeHashMap;this._cumulativeMemoStorage=new t.AttributeHashMap}record(e,t,r,n){const o=this._activeCollectionStorage.getOrDefault(t,(()=>this._aggregator.createAccumulation(n)));o===null||o===void 0?void 0:o.record(e)}batchCumulate(e,t){Array.from(e.entries()).forEach((([e,r,n])=>{const o=this._aggregator.createAccumulation(t);o===null||o===void 0?void 0:o.record(r);let i=o;if(this._cumulativeMemoStorage.has(e,n)){const t=this._cumulativeMemoStorage.get(e,n);i=this._aggregator.diff(t,o)}if(this._activeCollectionStorage.has(e,n)){const t=this._activeCollectionStorage.get(e,n);i=this._aggregator.merge(t,i)}this._cumulativeMemoStorage.set(e,o,n);this._activeCollectionStorage.set(e,i,n)}))}collect(){const e=this._activeCollectionStorage;this._activeCollectionStorage=new t.AttributeHashMap;return e}}exports.DeltaMetricProcessor=r},{"./HashMap":195}],195:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AttributeHashMap=exports.HashMap=void 0;const t=require("../utils");class r{constructor(e){this._hash=e;this._valueMap=new Map;this._keyMap=new Map}get(e,t){t!==null&&t!==void 0?t:t=this._hash(e);return this._valueMap.get(t)}getOrDefault(e,t){const r=this._hash(e);if(this._valueMap.has(r)){return this._valueMap.get(r)}const n=t();if(!this._keyMap.has(r)){this._keyMap.set(r,e)}this._valueMap.set(r,n);return n}set(e,t,r){r!==null&&r!==void 0?r:r=this._hash(e);if(!this._keyMap.has(r)){this._keyMap.set(r,e)}this._valueMap.set(r,t)}has(e,t){t!==null&&t!==void 0?t:t=this._hash(e);return this._valueMap.has(t)}*keys(){const e=this._keyMap.entries();let t=e.next();while(t.done!==true){yield[t.value[1],t.value[0]];t=e.next()}}*entries(){const e=this._valueMap.entries();let t=e.next();while(t.done!==true){yield[this._keyMap.get(t.value[0]),t.value[1],t.value[0]];t=e.next()}}get size(){return this._valueMap.size}}exports.HashMap=r;class n extends r{constructor(){super(t.hashAttributes)}}exports.AttributeHashMap=n},{"../utils":205}],196:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MeterProviderSharedState=void 0;const t=require("../utils");const r=require("../view/ViewRegistry");const n=require("./MeterSharedState");class o{constructor(e){this.resource=e;this.viewRegistry=new r.ViewRegistry;this.metricCollectors=[];this.meterSharedStates=new Map}getMeterSharedState(e){const r=(0,t.instrumentationScopeId)(e);let o=this.meterSharedStates.get(r);if(o==null){o=new n.MeterSharedState(this,e);this.meterSharedStates.set(r,o)}return o}selectAggregations(e){const t=[];for(const r of this.metricCollectors){t.push([r,r.selectAggregation(e)])}return t}}exports.MeterProviderSharedState=o},{"../utils":205,"../view/ViewRegistry":213,"./MeterSharedState":197}],197:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MeterSharedState=void 0;const t=require("../InstrumentDescriptor");const r=require("../Meter");const n=require("../utils");const o=require("./AsyncMetricStorage");const i=require("./MetricStorageRegistry");const a=require("./MultiWritableMetricStorage");const s=require("./ObservableRegistry");const c=require("./SyncMetricStorage");const u=require("../view/AttributesProcessor");class l{constructor(e,t){this._meterProviderSharedState=e;this._instrumentationScope=t;this.metricStorageRegistry=new i.MetricStorageRegistry;this.observableRegistry=new s.ObservableRegistry;this.meter=new r.Meter(this)}registerMetricStorage(e){const t=this._registerMetricStorage(e,c.SyncMetricStorage);if(t.length===1){return t[0]}return new a.MultiMetricStorage(t)}registerAsyncMetricStorage(e){const t=this._registerMetricStorage(e,o.AsyncMetricStorage);return t}async collect(e,t,r){const o=await this.observableRegistry.observe(t,r===null||r===void 0?void 0:r.timeoutMillis);const i=this.metricStorageRegistry.getStorages(e);if(i.length===0){return null}const a=i.map((r=>r.collect(e,t))).filter(n.isNotNullish);if(a.length===0){return{errors:o}}return{scopeMetrics:{scope:this._instrumentationScope,metrics:a},errors:o}}_registerMetricStorage(e,r){const n=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope);let o=n.map((n=>{const o=(0,t.createInstrumentDescriptorWithView)(n,e);const i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(i!=null){return i}const a=n.aggregation.createAggregator(o);const s=new r(o,a,n.attributesProcessor,this._meterProviderSharedState.metricCollectors);this.metricStorageRegistry.register(s);return s}));if(o.length===0){const t=this._meterProviderSharedState.selectAggregations(e.type);const n=t.map((([t,n])=>{const o=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(t,e);if(o!=null){return o}const i=n.createAggregator(e);const a=new r(e,i,u.AttributesProcessor.Noop(),[t]);this.metricStorageRegistry.registerForCollector(t,a);return a}));o=o.concat(n)}return o}}exports.MeterSharedState=l},{"../InstrumentDescriptor":166,"../Meter":168,"../utils":205,"../view/AttributesProcessor":207,"./AsyncMetricStorage":193,"./MetricStorageRegistry":200,"./MultiWritableMetricStorage":201,"./ObservableRegistry":202,"./SyncMetricStorage":203}],198:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricCollector=void 0;const t=require("@opentelemetry/core");class r{constructor(e,t){this._sharedState=e;this._metricReader=t}async collect(e){const r=(0,t.millisToHrTime)(Date.now());const n=[];const o=[];const i=Array.from(this._sharedState.meterSharedStates.values()).map((async t=>{const i=await t.collect(this,r,e);if((i===null||i===void 0?void 0:i.scopeMetrics)!=null){n.push(i.scopeMetrics)}if((i===null||i===void 0?void 0:i.errors)!=null){o.push(...i.errors)}}));await Promise.all(i);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:o}}async forceFlush(e){await this._metricReader.forceFlush(e)}async shutdown(e){await this._metricReader.shutdown(e)}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}selectAggregation(e){return this._metricReader.selectAggregation(e)}}exports.MetricCollector=r},{"@opentelemetry/core":63}],199:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricStorage=void 0;const t=require("../InstrumentDescriptor");class r{constructor(e){this._instrumentDescriptor=e}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=(0,t.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}}exports.MetricStorage=r},{"../InstrumentDescriptor":166}],200:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricStorageRegistry=void 0;const t=require("../InstrumentDescriptor");const r=require("@opentelemetry/api");const n=require("../view/RegistrationConflicts");class o{constructor(){this._sharedRegistry=new Map;this._perCollectorRegistry=new Map}static create(){return new o}getStorages(e){let t=[];for(const e of this._sharedRegistry.values()){t=t.concat(e)}const r=this._perCollectorRegistry.get(e);if(r!=null){for(const e of r.values()){t=t.concat(e)}}return t}register(e){this._registerStorage(e,this._sharedRegistry)}registerForCollector(e,t){let r=this._perCollectorRegistry.get(e);if(r==null){r=new Map;this._perCollectorRegistry.set(e,r)}this._registerStorage(t,r)}findOrUpdateCompatibleStorage(e){const t=this._sharedRegistry.get(e.name);if(t===undefined){return null}return this._findOrUpdateCompatibleStorage(e,t)}findOrUpdateCompatibleCollectorStorage(e,t){const r=this._perCollectorRegistry.get(e);if(r===undefined){return null}const n=r.get(t.name);if(n===undefined){return null}return this._findOrUpdateCompatibleStorage(t,n)}_registerStorage(e,t){const r=e.getInstrumentDescriptor();const n=t.get(r.name);if(n===undefined){t.set(r.name,[e]);return}n.push(e)}_findOrUpdateCompatibleStorage(e,o){let i=null;for(const a of o){const o=a.getInstrumentDescriptor();if((0,t.isDescriptorCompatibleWith)(o,e)){if(o.description!==e.description){if(e.description.length>o.description.length){a.updateDescription(e.description)}r.diag.warn("A view or instrument with the name ",e.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",(0,n.getIncompatibilityDetails)(o,e),"The longer description will be used.\nTo resolve the conflict:",(0,n.getConflictResolutionRecipe)(o,e))}i=a}else{r.diag.warn("A view or instrument with the name ",e.name," has already been registered and is incompatible with another registered view.\n","Details:\n",(0,n.getIncompatibilityDetails)(o,e),"To resolve the conflict:\n",(0,n.getConflictResolutionRecipe)(o,e))}}return i}}exports.MetricStorageRegistry=o},{"../InstrumentDescriptor":166,"../view/RegistrationConflicts":211,"@opentelemetry/api":19}],201:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiMetricStorage=void 0;class t{constructor(e){this._backingStorages=e}record(e,t,r,n){this._backingStorages.forEach((o=>{o.record(e,t,r,n)}))}}exports.MultiMetricStorage=t},{}],202:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObservableRegistry=void 0;const t=require("@opentelemetry/api");const r=require("../Instruments");const n=require("../ObservableResult");const o=require("../utils");class i{constructor(){this._callbacks=[];this._batchCallbacks=[]}addCallback(e,t){const r=this._findCallback(e,t);if(r>=0){return}this._callbacks.push({callback:e,instrument:t})}removeCallback(e,t){const r=this._findCallback(e,t);if(r<0){return}this._callbacks.splice(r,1)}addBatchCallback(e,n){const o=new Set(n.filter(r.isObservableInstrument));if(o.size===0){t.diag.error("BatchObservableCallback is not associated with valid instruments",n);return}const i=this._findBatchCallback(e,o);if(i>=0){return}this._batchCallbacks.push({callback:e,instruments:o})}removeBatchCallback(e,t){const n=new Set(t.filter(r.isObservableInstrument));const o=this._findBatchCallback(e,n);if(o<0){return}this._batchCallbacks.splice(o,1)}async observe(e,t){const r=this._observeCallbacks(e,t);const n=this._observeBatchCallbacks(e,t);const i=await(0,o.PromiseAllSettled)([...r,...n]);const a=i.filter(o.isPromiseAllSettledRejectionResult).map((e=>e.reason));return a}_observeCallbacks(e,t){return this._callbacks.map((async({callback:r,instrument:i})=>{const a=new n.ObservableResultImpl(i._descriptor.name,i._descriptor.valueType);let s=Promise.resolve(r(a));if(t!=null){s=(0,o.callWithTimeout)(s,t)}await s;i._metricStorages.forEach((t=>{t.record(a._buffer,e)}))}))}_observeBatchCallbacks(e,t){return this._batchCallbacks.map((async({callback:r,instruments:i})=>{const a=new n.BatchObservableResultImpl;let s=Promise.resolve(r(a));if(t!=null){s=(0,o.callWithTimeout)(s,t)}await s;i.forEach((t=>{const r=a._buffer.get(t);if(r==null){return}t._metricStorages.forEach((t=>{t.record(r,e)}))}))}))}_findCallback(e,t){return this._callbacks.findIndex((r=>r.callback===e&&r.instrument===t))}_findBatchCallback(e,t){return this._batchCallbacks.findIndex((r=>r.callback===e&&(0,o.setEquals)(r.instruments,t)))}}exports.ObservableRegistry=i},{"../Instruments":167,"../ObservableResult":170,"../utils":205,"@opentelemetry/api":19}],203:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SyncMetricStorage=void 0;const t=require("./MetricStorage");const r=require("./DeltaMetricProcessor");const n=require("./TemporalMetricProcessor");class o extends t.MetricStorage{constructor(e,t,o,i){super(e);this._attributesProcessor=o;this._deltaMetricStorage=new r.DeltaMetricProcessor(t);this._temporalMetricStorage=new n.TemporalMetricProcessor(t,i)}record(e,t,r,n){t=this._attributesProcessor.process(t,r);this._deltaMetricStorage.record(e,t,r,n)}collect(e,t){const r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,this._instrumentDescriptor,r,t)}}exports.SyncMetricStorage=o},{"./DeltaMetricProcessor":194,"./MetricStorage":199,"./TemporalMetricProcessor":204}],204:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TemporalMetricProcessor=void 0;const t=require("../export/AggregationTemporality");const r=require("./HashMap");class n{constructor(e,t){this._aggregator=e;this._unreportedAccumulations=new Map;this._reportHistory=new Map;t.forEach((e=>{this._unreportedAccumulations.set(e,[])}))}buildMetrics(e,r,i,a){this._stashAccumulations(i);const s=this._getMergedUnreportedAccumulations(e);let c=s;let u;if(this._reportHistory.has(e)){const r=this._reportHistory.get(e);const o=r.collectionTime;u=r.aggregationTemporality;if(u===t.AggregationTemporality.CUMULATIVE){c=n.merge(r.accumulations,s,this._aggregator)}else{c=n.calibrateStartTime(r.accumulations,s,o)}}else{u=e.selectAggregationTemporality(r.type)}this._reportHistory.set(e,{accumulations:c,collectionTime:a,aggregationTemporality:u});const l=o(c);if(l.length===0){return undefined}return this._aggregator.toMetricData(r,u,l,a)}_stashAccumulations(e){const t=this._unreportedAccumulations.keys();for(const r of t){let t=this._unreportedAccumulations.get(r);if(t===undefined){t=[];this._unreportedAccumulations.set(r,t)}t.push(e)}}_getMergedUnreportedAccumulations(e){let t=new r.AttributeHashMap;const o=this._unreportedAccumulations.get(e);this._unreportedAccumulations.set(e,[]);if(o===undefined){return t}for(const e of o){t=n.merge(t,e,this._aggregator)}return t}static merge(e,t,r){const n=e;const o=t.entries();let i=o.next();while(i.done!==true){const[t,a,s]=i.value;if(e.has(t,s)){const o=e.get(t,s);const i=r.merge(o,a);n.set(t,i,s)}else{n.set(t,a,s)}i=o.next()}return n}static calibrateStartTime(e,t,r){for(const[n,o]of e.keys()){const e=t.get(n,o);e===null||e===void 0?void 0:e.setStartTime(r)}return t}}exports.TemporalMetricProcessor=n;function o(e){return Array.from(e.entries())}},{"../export/AggregationTemporality":186,"./HashMap":195}],205:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.equalsCaseInsensitive=exports.binarySearchLB=exports.setEquals=exports.FlatMap=exports.isPromiseAllSettledRejectionResult=exports.PromiseAllSettled=exports.callWithTimeout=exports.TimeoutError=exports.instrumentationScopeId=exports.hashAttributes=exports.isNotNullish=void 0;function t(e){return e!==undefined&&e!==null}exports.isNotNullish=t;function r(e){let t=Object.keys(e);if(t.length===0)return"";t=t.sort();return JSON.stringify(t.map((t=>[t,e[t]])))}exports.hashAttributes=r;function n(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}exports.instrumentationScopeId=n;class o extends Error{constructor(e){super(e);Object.setPrototypeOf(this,o.prototype)}}exports.TimeoutError=o;function i(e,t){let r;const n=new Promise((function e(n,i){r=setTimeout((function e(){i(new o("Operation timed out."))}),t)}));return Promise.race([e,n]).then((e=>{clearTimeout(r);return e}),(e=>{clearTimeout(r);throw e}))}exports.callWithTimeout=i;async function a(e){return Promise.all(e.map((async e=>{try{const t=await e;return{status:"fulfilled",value:t}}catch(e){return{status:"rejected",reason:e}}})))}exports.PromiseAllSettled=a;function s(e){return e.status==="rejected"}exports.isPromiseAllSettledRejectionResult=s;function c(e,t){const r=[];e.forEach((e=>{r.push(...t(e))}));return r}exports.FlatMap=c;function u(e,t){if(e.size!==t.size){return false}for(const r of e){if(!t.has(r)){return false}}return true}exports.setEquals=u;function l(e,t){let r=0;let n=e.length-1;while(n-r>1){const o=Math.trunc((n+r)/2);if(e[o]<=t){r=o}else{n=o-1}}if(e[n]<=t){return n}else if(e[r]<=t){return r}return-1}exports.binarySearchLB=l;function p(e,t){return e.toLowerCase()===t.toLowerCase()}exports.equalsCaseInsensitive=p},{}],206:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultAggregation=exports.ExponentialHistogramAggregation=exports.ExplicitBucketHistogramAggregation=exports.HistogramAggregation=exports.LastValueAggregation=exports.SumAggregation=exports.DropAggregation=exports.Aggregation=void 0;const t=require("@opentelemetry/api");const r=require("../aggregator");const n=require("../InstrumentDescriptor");class o{static Drop(){return d}static Sum(){return f}static LastValue(){return m}static Histogram(){return h}static ExponentialHistogram(){return v}static Default(){return _}}exports.Aggregation=o;class i extends o{createAggregator(e){return i.DEFAULT_INSTANCE}}exports.DropAggregation=i;i.DEFAULT_INSTANCE=new r.DropAggregator;class a extends o{createAggregator(e){switch(e.type){case n.InstrumentType.COUNTER:case n.InstrumentType.OBSERVABLE_COUNTER:case n.InstrumentType.HISTOGRAM:{return a.MONOTONIC_INSTANCE}default:{return a.NON_MONOTONIC_INSTANCE}}}}exports.SumAggregation=a;a.MONOTONIC_INSTANCE=new r.SumAggregator(true);a.NON_MONOTONIC_INSTANCE=new r.SumAggregator(false);class s extends o{createAggregator(e){return s.DEFAULT_INSTANCE}}exports.LastValueAggregation=s;s.DEFAULT_INSTANCE=new r.LastValueAggregator;class c extends o{createAggregator(e){return c.DEFAULT_INSTANCE}}exports.HistogramAggregation=c;c.DEFAULT_INSTANCE=new r.HistogramAggregator([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],true);class u extends o{constructor(e,t=true){super();this._recordMinMax=t;if(e===undefined||e.length===0){throw new Error("HistogramAggregator should be created with boundaries.")}e=e.concat();e=e.sort(((e,t)=>e-t));const r=e.lastIndexOf(-Infinity);let n=e.indexOf(Infinity);if(n===-1){n=undefined}this._boundaries=e.slice(r+1,n)}createAggregator(e){return new r.HistogramAggregator(this._boundaries,this._recordMinMax)}}exports.ExplicitBucketHistogramAggregation=u;class l extends o{constructor(e=160,t=true){super();this._maxSize=e;this._recordMinMax=t}createAggregator(e){return new r.ExponentialHistogramAggregator(this._maxSize,this._recordMinMax)}}exports.ExponentialHistogramAggregation=l;class p extends o{_resolve(e){switch(e.type){case n.InstrumentType.COUNTER:case n.InstrumentType.UP_DOWN_COUNTER:case n.InstrumentType.OBSERVABLE_COUNTER:case n.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:{return f}case n.InstrumentType.OBSERVABLE_GAUGE:{return m}case n.InstrumentType.HISTOGRAM:{if(e.advice.explicitBucketBoundaries){return new u(e.advice.explicitBucketBoundaries)}return h}}t.diag.warn(`Unable to recognize instrument type: ${e.type}`);return d}createAggregator(e){return this._resolve(e).createAggregator(e)}}exports.DefaultAggregation=p;const d=new i;const f=new a;const m=new s;const h=new c;const v=new l;const _=new p},{"../InstrumentDescriptor":166,"../aggregator":183,"@opentelemetry/api":19}],207:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilteringAttributesProcessor=exports.NoopAttributesProcessor=exports.AttributesProcessor=void 0;class t{static Noop(){return o}}exports.AttributesProcessor=t;class r extends t{process(e,t){return e}}exports.NoopAttributesProcessor=r;class n extends t{constructor(e){super();this._allowedAttributeNames=e}process(e,t){const r={};Object.keys(e).filter((e=>this._allowedAttributeNames.includes(e))).forEach((t=>r[t]=e[t]));return r}}exports.FilteringAttributesProcessor=n;const o=new r},{}],208:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstrumentSelector=void 0;const t=require("./Predicate");class r{constructor(e){var r;this._nameFilter=new t.PatternPredicate((r=e===null||e===void 0?void 0:e.name)!==null&&r!==void 0?r:"*");this._type=e===null||e===void 0?void 0:e.type;this._unitFilter=new t.ExactPredicate(e===null||e===void 0?void 0:e.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}exports.InstrumentSelector=r},{"./Predicate":210}],209:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MeterSelector=void 0;const t=require("./Predicate");class r{constructor(e){this._nameFilter=new t.ExactPredicate(e===null||e===void 0?void 0:e.name);this._versionFilter=new t.ExactPredicate(e===null||e===void 0?void 0:e.version);this._schemaUrlFilter=new t.ExactPredicate(e===null||e===void 0?void 0:e.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}exports.MeterSelector=r},{"./Predicate":210}],210:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExactPredicate=exports.PatternPredicate=void 0;const t=/[\^$\\.+?()[\]{}|]/g;class r{constructor(e){if(e==="*"){this._matchAll=true;this._regexp=/.*/}else{this._matchAll=false;this._regexp=new RegExp(r.escapePattern(e))}}match(e){if(this._matchAll){return true}return this._regexp.test(e)}static escapePattern(e){return`^${e.replace(t,"\\$&").replace("*",".*")}$`}static hasWildcard(e){return e.includes("*")}}exports.PatternPredicate=r;class n{constructor(e){this._matchAll=e===undefined;this._pattern=e}match(e){if(this._matchAll){return true}if(e===this._pattern){return true}return false}}exports.ExactPredicate=n},{}],211:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getConflictResolutionRecipe=exports.getDescriptionResolutionRecipe=exports.getTypeConflictResolutionRecipe=exports.getUnitConflictResolutionRecipe=exports.getValueTypeConflictResolutionRecipe=exports.getIncompatibilityDetails=void 0;function t(e,t){let r="";if(e.unit!==t.unit){r+=`\t- Unit '${e.unit}' does not match '${t.unit}'\n`}if(e.type!==t.type){r+=`\t- Type '${e.type}' does not match '${t.type}'\n`}if(e.valueType!==t.valueType){r+=`\t- Value Type '${e.valueType}' does not match '${t.valueType}'\n`}if(e.description!==t.description){r+=`\t- Description '${e.description}' does not match '${t.description}'\n`}return r}exports.getIncompatibilityDetails=t;function r(e,t){return`\t- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}exports.getValueTypeConflictResolutionRecipe=r;function n(e,t){return`\t- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}exports.getUnitConflictResolutionRecipe=n;function o(e,t){const r={name:t.name,type:t.type,unit:t.unit};const n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}exports.getTypeConflictResolutionRecipe=o;function i(e,t){const r={name:t.name,type:t.type,unit:t.unit};const n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'\n    \t- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}\n    \t- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}exports.getDescriptionResolutionRecipe=i;function a(e,t){if(e.valueType!==t.valueType){return r(e,t)}if(e.unit!==t.unit){return n(e,t)}if(e.type!==t.type){return o(e,t)}if(e.description!==t.description){return i(e,t)}return""}exports.getConflictResolutionRecipe=a},{}],212:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.View=void 0;const t=require("./Predicate");const r=require("./AttributesProcessor");const n=require("./InstrumentSelector");const o=require("./MeterSelector");const i=require("./Aggregation");function a(e){return e.instrumentName==null&&e.instrumentType==null&&e.instrumentUnit==null&&e.meterName==null&&e.meterVersion==null&&e.meterSchemaUrl==null}class s{constructor(e){var s;if(a(e)){throw new Error("Cannot create view with no selector arguments supplied")}if(e.name!=null&&((e===null||e===void 0?void 0:e.instrumentName)==null||t.PatternPredicate.hasWildcard(e.instrumentName))){throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}if(e.attributeKeys!=null){this.attributesProcessor=new r.FilteringAttributesProcessor(e.attributeKeys)}else{this.attributesProcessor=r.AttributesProcessor.Noop()}this.name=e.name;this.description=e.description;this.aggregation=(s=e.aggregation)!==null&&s!==void 0?s:i.Aggregation.Default();this.instrumentSelector=new n.InstrumentSelector({name:e.instrumentName,type:e.instrumentType,unit:e.instrumentUnit});this.meterSelector=new o.MeterSelector({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl})}}exports.View=s},{"./Aggregation":206,"./AttributesProcessor":207,"./InstrumentSelector":208,"./MeterSelector":209,"./Predicate":210}],213:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ViewRegistry=void 0;class t{constructor(){this._registeredViews=[]}addView(e){this._registeredViews.push(e)}findViews(e,t){const r=this._registeredViews.filter((r=>this._matchInstrument(r.instrumentSelector,e)&&this._matchMeter(r.meterSelector,t)));return r}_matchInstrument(e,t){return(e.getType()===undefined||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)}_matchMeter(e,t){return e.getNameFilter().match(t.name)&&(t.version===undefined||e.getVersionFilter().match(t.version))&&(t.schemaUrl===undefined||e.getSchemaUrlFilter().match(t.schemaUrl))}}exports.ViewRegistry=t},{}],214:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BasicTracerProvider=exports.ForceFlushState=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("@opentelemetry/resources");const o=require(".");const i=require("./config");const a=require("./MultiSpanProcessor");const s=require("./export/NoopSpanProcessor");const c=require("./platform");const u=require("./utility");var l;(function(e){e[e["resolved"]=0]="resolved";e[e["timeout"]=1]="timeout";e[e["error"]=2]="error";e[e["unresolved"]=3]="unresolved"})(l=exports.ForceFlushState||(exports.ForceFlushState={}));class p{constructor(e={}){var t;this._registeredSpanProcessors=[];this._tracers=new Map;const o=(0,r.merge)({},(0,i.loadDefaultConfig)(),(0,u.reconfigureLimits)(e));this.resource=(t=o.resource)!==null&&t!==void 0?t:n.Resource.empty();this.resource=n.Resource.default().merge(this.resource);this._config=Object.assign({},o,{resource:this.resource});const a=this._buildExporterFromEnv();if(a!==undefined){const e=new c.BatchSpanProcessor(a);this.activeSpanProcessor=e}else{this.activeSpanProcessor=new s.NoopSpanProcessor}}getTracer(e,t,r){const n=`${e}@${t||""}:${(r===null||r===void 0?void 0:r.schemaUrl)||""}`;if(!this._tracers.has(n)){this._tracers.set(n,new o.Tracer({name:e,version:t,schemaUrl:r===null||r===void 0?void 0:r.schemaUrl},this._config,this))}return this._tracers.get(n)}addSpanProcessor(e){if(this._registeredSpanProcessors.length===0){this.activeSpanProcessor.shutdown().catch((e=>t.diag.error("Error while trying to shutdown current span processor",e)))}this._registeredSpanProcessors.push(e);this.activeSpanProcessor=new a.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){t.trace.setGlobalTracerProvider(this);if(e.propagator===undefined){e.propagator=this._buildPropagatorFromEnv()}if(e.contextManager){t.context.setGlobalContextManager(e.contextManager)}if(e.propagator){t.propagation.setGlobalPropagator(e.propagator)}}forceFlush(){const e=this._config.forceFlushTimeoutMillis;const t=this._registeredSpanProcessors.map((t=>new Promise((r=>{let n;const o=setTimeout((()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`));n=l.timeout}),e);t.forceFlush().then((()=>{clearTimeout(o);if(n!==l.timeout){n=l.resolved;r(n)}})).catch((e=>{clearTimeout(o);n=l.error;r(e)}))}))));return new Promise(((e,r)=>{Promise.all(t).then((t=>{const n=t.filter((e=>e!==l.resolved));if(n.length>0){r(n)}else{e()}})).catch((e=>r([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()}_getSpanExporter(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()}_buildPropagatorFromEnv(){const e=Array.from(new Set((0,r.getEnv)().OTEL_PROPAGATORS));const n=e.map((e=>{const r=this._getPropagator(e);if(!r){t.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`)}return r}));const o=n.reduce(((e,t)=>{if(t){e.push(t)}return e}),[]);if(o.length===0){return}else if(e.length===1){return o[0]}else{return new r.CompositePropagator({propagators:o})}}_buildExporterFromEnv(){const e=(0,r.getEnv)().OTEL_TRACES_EXPORTER;if(e==="none"||e==="")return;const n=this._getSpanExporter(e);if(!n){t.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`)}return n}}exports.BasicTracerProvider=p;p._registeredPropagators=new Map([["tracecontext",()=>new r.W3CTraceContextPropagator],["baggage",()=>new r.W3CBaggagePropagator]]);p._registeredExporters=new Map},{".":231,"./MultiSpanProcessor":216,"./config":222,"./export/NoopSpanProcessor":227,"./platform":234,"./utility":240,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/resources":155}],215:[function(require,e,exports){arguments[4][75][0].apply(exports,arguments)},{dup:75}],216:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiSpanProcessor=void 0;const t=require("@opentelemetry/core");class r{constructor(e){this._spanProcessors=e}forceFlush(){const e=[];for(const t of this._spanProcessors){e.push(t.forceFlush())}return new Promise((r=>{Promise.all(e).then((()=>{r()})).catch((e=>{(0,t.globalErrorHandler)(e||new Error("MultiSpanProcessor: forceFlush failed"));r()}))}))}onStart(e,t){for(const r of this._spanProcessors){r.onStart(e,t)}}onEnd(e){for(const t of this._spanProcessors){t.onEnd(e)}}shutdown(){const e=[];for(const t of this._spanProcessors){e.push(t.shutdown())}return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}exports.MultiSpanProcessor=r},{"@opentelemetry/core":63}],217:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SamplingDecision=void 0;var t;(function(e){e[e["NOT_RECORD"]=0]="NOT_RECORD";e[e["RECORD"]=1]="RECORD";e[e["RECORD_AND_SAMPLED"]=2]="RECORD_AND_SAMPLED"})(t=exports.SamplingDecision||(exports.SamplingDecision={}))},{}],218:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Span=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("@opentelemetry/semantic-conventions");const o=require("./enums");class i{constructor(e,n,o,i,a,s,c=[],u,l,p){this.attributes={};this.links=[];this.events=[];this._droppedAttributesCount=0;this._droppedEventsCount=0;this._droppedLinksCount=0;this.status={code:t.SpanStatusCode.UNSET};this.endTime=[0,0];this._ended=false;this._duration=[-1,-1];this.name=o;this._spanContext=i;this.parentSpanId=s;this.kind=a;this.links=c;const d=Date.now();this._performanceStartTime=r.otperformance.now();this._performanceOffset=d-(this._performanceStartTime+(0,r.getTimeOrigin)());this._startTimeProvided=u!=null;this.startTime=this._getTime(u!==null&&u!==void 0?u:d);this.resource=e.resource;this.instrumentationLibrary=e.instrumentationLibrary;this._spanLimits=e.getSpanLimits();if(p!=null){this.setAttributes(p)}this._spanProcessor=e.getActiveSpanProcessor();this._spanProcessor.onStart(this,n);this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(e,n){if(n==null||this._isSpanEnded())return this;if(e.length===0){t.diag.warn(`Invalid attribute key: ${e}`);return this}if(!(0,r.isAttributeValue)(n)){t.diag.warn(`Invalid attribute value set for key: ${e}`);return this}if(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)){this._droppedAttributesCount++;return this}this.attributes[e]=this._truncateToSize(n);return this}setAttributes(e){for(const[t,r]of Object.entries(e)){this.setAttribute(t,r)}return this}addEvent(e,n,o){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0){t.diag.warn("No events allowed.");this._droppedEventsCount++;return this}if(this.events.length>=this._spanLimits.eventCountLimit){t.diag.warn("Dropping extra events.");this.events.shift();this._droppedEventsCount++}if((0,r.isTimeInput)(n)){if(!(0,r.isTimeInput)(o)){o=n}n=undefined}const i=(0,r.sanitizeAttributes)(n);this.events.push({name:e,attributes:i,time:this._getTime(o),droppedAttributesCount:0});return this}setStatus(e){if(this._isSpanEnded())return this;this.status=e;return this}updateName(e){if(this._isSpanEnded())return this;this.name=e;return this}end(e){if(this._isSpanEnded()){t.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=true;this.endTime=this._getTime(e);this._duration=(0,r.hrTimeDuration)(this.startTime,this.endTime);if(this._duration[0]<0){t.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime);this.endTime=this.startTime.slice();this._duration=[0,0]}this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e==="number"&&e<r.otperformance.now()){return(0,r.hrTime)(e+this._performanceOffset)}if(typeof e==="number"){return(0,r.millisToHrTime)(e)}if(e instanceof Date){return(0,r.millisToHrTime)(e.getTime())}if((0,r.isTimeInputHrTime)(e)){return e}if(this._startTimeProvided){return(0,r.millisToHrTime)(Date.now())}const t=r.otperformance.now()-this._performanceStartTime;return(0,r.addHrTimes)(this.startTime,(0,r.millisToHrTime)(t))}isRecording(){return this._ended===false}recordException(e,r){const i={};if(typeof e==="string"){i[n.SemanticAttributes.EXCEPTION_MESSAGE]=e}else if(e){if(e.code){i[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString()}else if(e.name){i[n.SemanticAttributes.EXCEPTION_TYPE]=e.name}if(e.message){i[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message}if(e.stack){i[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack}}if(i[n.SemanticAttributes.EXCEPTION_TYPE]||i[n.SemanticAttributes.EXCEPTION_MESSAGE]){this.addEvent(o.ExceptionEventName,i,r)}else{t.diag.warn(`Failed to record an exception ${e}`)}}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){t.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`)}return this._ended}_truncateToLimitUtil(e,t){if(e.length<=t){return e}return e.substr(0,t)}_truncateToSize(e){const r=this._attributeValueLengthLimit;if(r<=0){t.diag.warn(`Attribute value limit must be positive, got ${r}`);return e}if(typeof e==="string"){return this._truncateToLimitUtil(e,r)}if(Array.isArray(e)){return e.map((e=>typeof e==="string"?this._truncateToLimitUtil(e,r):e))}return e}}exports.Span=i},{"./enums":223,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/semantic-conventions":247}],219:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],220:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],221:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tracer=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./Span");const o=require("./utility");const i=require("./platform");class a{constructor(e,t,r){this._tracerProvider=r;const n=(0,o.mergeConfig)(t);this._sampler=n.sampler;this._generalLimits=n.generalLimits;this._spanLimits=n.spanLimits;this._idGenerator=t.idGenerator||new i.RandomIdGenerator;this.resource=r.resource;this.instrumentationLibrary=e}startSpan(e,o={},i=t.context.active()){var a,s,c;if(o.root){i=t.trace.deleteSpan(i)}const u=t.trace.getSpan(i);if((0,r.isTracingSuppressed)(i)){t.diag.debug("Instrumentation suppressed, returning Noop Span");const e=t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);return e}const l=u===null||u===void 0?void 0:u.spanContext();const p=this._idGenerator.generateSpanId();let d;let f;let m;if(!l||!t.trace.isSpanContextValid(l)){d=this._idGenerator.generateTraceId()}else{d=l.traceId;f=l.traceState;m=l.spanId}const h=(a=o.kind)!==null&&a!==void 0?a:t.SpanKind.INTERNAL;const v=((s=o.links)!==null&&s!==void 0?s:[]).map((e=>({context:e.context,attributes:(0,r.sanitizeAttributes)(e.attributes)})));const _=(0,r.sanitizeAttributes)(o.attributes);const g=this._sampler.shouldSample(i,d,e,h,_,v);f=(c=g.traceState)!==null&&c!==void 0?c:f;const y=g.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE;const E={traceId:d,spanId:p,traceFlags:y,traceState:f};if(g.decision===t.SamplingDecision.NOT_RECORD){t.diag.debug("Recording is off, propagating context in a non-recording span");const e=t.trace.wrapSpanContext(E);return e}const T=(0,r.sanitizeAttributes)(Object.assign(_,g.attributes));const S=new n.Span(this,i,e,E,h,m,v,o.startTime,undefined,T);return S}startActiveSpan(e,r,n,o){let i;let a;let s;if(arguments.length<2){return}else if(arguments.length===2){s=r}else if(arguments.length===3){i=r;s=n}else{i=r;a=n;s=o}const c=a!==null&&a!==void 0?a:t.context.active();const u=this.startSpan(e,i,c);const l=t.trace.setSpan(c,u);return t.context.with(l,s,undefined,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}exports.Tracer=a},{"./Span":218,"./platform":234,"./utility":240,"@opentelemetry/api":19,"@opentelemetry/core":63}],222:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSamplerFromEnv=exports.loadDefaultConfig=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./sampler/AlwaysOffSampler");const o=require("./sampler/AlwaysOnSampler");const i=require("./sampler/ParentBasedSampler");const a=require("./sampler/TraceIdRatioBasedSampler");const s=(0,r.getEnv)();const c=r.TracesSamplerValues.AlwaysOn;const u=1;function l(){return{sampler:p(s),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,r.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,r.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,r.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,r.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,r.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,r.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,r.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,r.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}exports.loadDefaultConfig=l;function p(e=(0,r.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new o.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new n.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new i.ParentBasedSampler({root:new o.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new i.ParentBasedSampler({root:new n.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new a.TraceIdRatioBasedSampler(d(e));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new i.ParentBasedSampler({root:new a.TraceIdRatioBasedSampler(d(e))});default:t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${c}".`);return new o.AlwaysOnSampler}}exports.buildSamplerFromEnv=p;function d(e){if(e.OTEL_TRACES_SAMPLER_ARG===undefined||e.OTEL_TRACES_SAMPLER_ARG===""){t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${u}.`);return u}const r=Number(e.OTEL_TRACES_SAMPLER_ARG);if(isNaN(r)){t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${u}.`);return u}if(r<0||r>1){t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${u}.`);return u}return r}},{"./sampler/AlwaysOffSampler":235,"./sampler/AlwaysOnSampler":236,"./sampler/ParentBasedSampler":237,"./sampler/TraceIdRatioBasedSampler":238,"@opentelemetry/api":19,"@opentelemetry/core":63}],223:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExceptionEventName=void 0;exports.ExceptionEventName="exception"},{}],224:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BatchSpanProcessorBase=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");class n{constructor(e,n){this._exporter=e;this._isExporting=false;this._finishedSpans=[];this._droppedSpansCount=0;const o=(0,r.getEnv)();this._maxExportBatchSize=typeof(n===null||n===void 0?void 0:n.maxExportBatchSize)==="number"?n.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE;this._maxQueueSize=typeof(n===null||n===void 0?void 0:n.maxQueueSize)==="number"?n.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE;this._scheduledDelayMillis=typeof(n===null||n===void 0?void 0:n.scheduledDelayMillis)==="number"?n.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY;this._exportTimeoutMillis=typeof(n===null||n===void 0?void 0:n.exportTimeoutMillis)==="number"?n.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT;this._shutdownOnce=new r.BindOnceFuture(this._shutdown,this);if(this._maxExportBatchSize>this._maxQueueSize){t.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize");this._maxExportBatchSize=this._maxQueueSize}}forceFlush(){if(this._shutdownOnce.isCalled){return this._shutdownOnce.promise}return this._flushAll()}onStart(e,t){}onEnd(e){if(this._shutdownOnce.isCalled){return}if((e.spanContext().traceFlags&t.TraceFlags.SAMPLED)===0){return}this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){if(this._droppedSpansCount===0){t.diag.debug("maxQueueSize reached, dropping spans")}this._droppedSpansCount++;return}if(this._droppedSpansCount>0){t.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`);this._droppedSpansCount=0}this._finishedSpans.push(e);this._maybeStartTimer()}_flushAll(){return new Promise(((e,t)=>{const r=[];const n=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let e=0,t=n;e<t;e++){r.push(this._flushOneBatch())}Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){this._clearTimer();if(this._finishedSpans.length===0){return Promise.resolve()}return new Promise(((e,n)=>{const o=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with((0,r.suppressTracing)(t.context.active()),(()=>{const t=this._finishedSpans.splice(0,this._maxExportBatchSize);const i=()=>this._exporter.export(t,(t=>{var i;clearTimeout(o);if(t.code===r.ExportResultCode.SUCCESS){e()}else{n((i=t.error)!==null&&i!==void 0?i:new Error("BatchSpanProcessor: span export failed"))}}));const a=t.map((e=>e.resource)).filter((e=>e.asyncAttributesPending));if(a.length===0){i()}else{Promise.all(a.map((e=>{var t;return(t=e.waitForAsyncAttributes)===null||t===void 0?void 0:t.call(e)}))).then(i,(e=>{(0,r.globalErrorHandler)(e);n(e)}))}}))}))}_maybeStartTimer(){if(this._isExporting)return;const e=()=>{this._isExporting=true;this._flushOneBatch().then((()=>{this._isExporting=false;if(this._finishedSpans.length>0){this._clearTimer();this._maybeStartTimer()}})).catch((e=>{this._isExporting=false;(0,r.globalErrorHandler)(e)}))};if(this._finishedSpans.length>=this._maxExportBatchSize){return e()}if(this._timer!==undefined)return;this._timer=setTimeout((()=>e()),this._scheduledDelayMillis);(0,r.unrefTimer)(this._timer)}_clearTimer(){if(this._timer!==undefined){clearTimeout(this._timer);this._timer=undefined}}}exports.BatchSpanProcessorBase=n},{"@opentelemetry/api":19,"@opentelemetry/core":63}],225:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConsoleSpanExporter=void 0;const t=require("@opentelemetry/core");class r{export(e,t){return this._sendSpans(e,t)}shutdown(){this._sendSpans([]);return this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){var r;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,t.hrTimeToMicroseconds)(e.startTime),duration:(0,t.hrTimeToMicroseconds)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,r){for(const t of e){console.dir(this._exportInfo(t),{depth:3})}if(r){return r({code:t.ExportResultCode.SUCCESS})}}}exports.ConsoleSpanExporter=r},{"@opentelemetry/core":63}],226:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InMemorySpanExporter=void 0;const t=require("@opentelemetry/core");class r{constructor(){this._finishedSpans=[];this._stopped=false}export(e,r){if(this._stopped)return r({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e);setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){this._stopped=true;this._finishedSpans=[];return this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}exports.InMemorySpanExporter=r},{"@opentelemetry/core":63}],227:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoopSpanProcessor=void 0;class t{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}exports.NoopSpanProcessor=t},{}],228:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],229:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleSpanProcessor=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");class n{constructor(e){this._exporter=e;this._shutdownOnce=new r.BindOnceFuture(this._shutdown,this);this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports));if(this._exporter.forceFlush){await this._exporter.forceFlush()}}onStart(e,t){}onEnd(e){var n,o;if(this._shutdownOnce.isCalled){return}if((e.spanContext().traceFlags&t.TraceFlags.SAMPLED)===0){return}const i=()=>r.internal._export(this._exporter,[e]).then((e=>{var t;if(e.code!==r.ExportResultCode.SUCCESS){(0,r.globalErrorHandler)((t=e.error)!==null&&t!==void 0?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}})).catch((e=>{(0,r.globalErrorHandler)(e)}));if(e.resource.asyncAttributesPending){const t=(o=(n=e.resource).waitForAsyncAttributes)===null||o===void 0?void 0:o.call(n).then((()=>{if(t!=null){this._unresolvedExports.delete(t)}return i()}),(e=>(0,r.globalErrorHandler)(e)));if(t!=null){this._unresolvedExports.add(t)}}else{void i()}}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}exports.SimpleSpanProcessor=n},{"@opentelemetry/api":19,"@opentelemetry/core":63}],230:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})},{}],231:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./Tracer"),exports);r(require("./BasicTracerProvider"),exports);r(require("./platform"),exports);r(require("./export/ConsoleSpanExporter"),exports);r(require("./export/InMemorySpanExporter"),exports);r(require("./export/ReadableSpan"),exports);r(require("./export/SimpleSpanProcessor"),exports);r(require("./export/SpanExporter"),exports);r(require("./export/NoopSpanProcessor"),exports);r(require("./sampler/AlwaysOffSampler"),exports);r(require("./sampler/AlwaysOnSampler"),exports);r(require("./sampler/ParentBasedSampler"),exports);r(require("./sampler/TraceIdRatioBasedSampler"),exports);r(require("./Sampler"),exports);r(require("./Span"),exports);r(require("./SpanProcessor"),exports);r(require("./TimedEvent"),exports);r(require("./types"),exports);r(require("./IdGenerator"),exports)},{"./BasicTracerProvider":214,"./IdGenerator":215,"./Sampler":217,"./Span":218,"./SpanProcessor":219,"./TimedEvent":220,"./Tracer":221,"./export/ConsoleSpanExporter":225,"./export/InMemorySpanExporter":226,"./export/NoopSpanProcessor":227,"./export/ReadableSpan":228,"./export/SimpleSpanProcessor":229,"./export/SpanExporter":230,"./platform":234,"./sampler/AlwaysOffSampler":235,"./sampler/AlwaysOnSampler":236,"./sampler/ParentBasedSampler":237,"./sampler/TraceIdRatioBasedSampler":238,"./types":239}],232:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RandomIdGenerator=void 0;const t=8;const r=16;class n{constructor(){this.generateTraceId=i(r);this.generateSpanId=i(t)}}exports.RandomIdGenerator=n;const o=Array(32);function i(e){return function t(){for(let t=0;t<e*2;t++){o[t]=Math.floor(Math.random()*16)+48;if(o[t]>=58){o[t]+=39}}return String.fromCharCode.apply(null,o.slice(0,e*2))}}},{}],233:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BatchSpanProcessor=void 0;const t=require("../../../export/BatchSpanProcessorBase");class r extends t.BatchSpanProcessorBase{constructor(e,t){super(e,t);this.onInit(t)}onInit(e){if((e===null||e===void 0?void 0:e.disableAutoFlushOnDocumentHide)!==true&&typeof document!=="undefined"){this._visibilityChangeListener=()=>{if(document.visibilityState==="hidden"){void this.forceFlush()}};this._pageHideListener=()=>{void this.forceFlush()};document.addEventListener("visibilitychange",this._visibilityChangeListener);document.addEventListener("pagehide",this._pageHideListener)}}onShutdown(){if(typeof document!=="undefined"){if(this._visibilityChangeListener){document.removeEventListener("visibilitychange",this._visibilityChangeListener)}if(this._pageHideListener){document.removeEventListener("pagehide",this._pageHideListener)}}}}exports.BatchSpanProcessor=r},{"../../../export/BatchSpanProcessorBase":224}],234:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./export/BatchSpanProcessor"),exports);r(require("./RandomIdGenerator"),exports)},{"./RandomIdGenerator":232,"./export/BatchSpanProcessor":233}],235:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlwaysOffSampler=void 0;const t=require("../Sampler");class r{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}exports.AlwaysOffSampler=r},{"../Sampler":217}],236:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlwaysOnSampler=void 0;const t=require("../Sampler");class r{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}exports.AlwaysOnSampler=r},{"../Sampler":217}],237:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParentBasedSampler=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./AlwaysOffSampler");const o=require("./AlwaysOnSampler");class i{constructor(e){var t,i,a,s;this._root=e.root;if(!this._root){(0,r.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured"));this._root=new o.AlwaysOnSampler}this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new o.AlwaysOnSampler;this._remoteParentNotSampled=(i=e.remoteParentNotSampled)!==null&&i!==void 0?i:new n.AlwaysOffSampler;this._localParentSampled=(a=e.localParentSampled)!==null&&a!==void 0?a:new o.AlwaysOnSampler;this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new n.AlwaysOffSampler}shouldSample(e,r,n,o,i,a){const s=t.trace.getSpanContext(e);if(!s||!(0,t.isSpanContextValid)(s)){return this._root.shouldSample(e,r,n,o,i,a)}if(s.isRemote){if(s.traceFlags&t.TraceFlags.SAMPLED){return this._remoteParentSampled.shouldSample(e,r,n,o,i,a)}return this._remoteParentNotSampled.shouldSample(e,r,n,o,i,a)}if(s.traceFlags&t.TraceFlags.SAMPLED){return this._localParentSampled.shouldSample(e,r,n,o,i,a)}return this._localParentNotSampled.shouldSample(e,r,n,o,i,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}exports.ParentBasedSampler=i},{"./AlwaysOffSampler":235,"./AlwaysOnSampler":236,"@opentelemetry/api":19,"@opentelemetry/core":63}],238:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceIdRatioBasedSampler=void 0;const t=require("@opentelemetry/api");const r=require("../Sampler");class n{constructor(e=0){this._ratio=e;this._ratio=this._normalize(e);this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,n){return{decision:(0,t.isValidTraceId)(n)&&this._accumulate(n)<this._upperBound?r.SamplingDecision.RECORD_AND_SAMPLED:r.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){if(typeof e!=="number"||isNaN(e))return 0;return e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){const n=r*8;const o=parseInt(e.slice(n,n+8),16);t=(t^o)>>>0}return t}}exports.TraceIdRatioBasedSampler=n},{"../Sampler":217,"@opentelemetry/api":19}],239:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],240:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reconfigureLimits=exports.mergeConfig=void 0;const t=require("./config");const r=require("@opentelemetry/core");function n(e){const r={sampler:(0,t.buildSamplerFromEnv)()};const n=(0,t.loadDefaultConfig)();const o=Object.assign({},n,r,e);o.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{});o.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{});return o}exports.mergeConfig=n;function o(e){var t,n,o,i,a,s,c,u,l,p,d,f;const m=Object.assign({},e.spanLimits);const h=(0,r.getEnvWithoutDefaults)();m.attributeCountLimit=(s=(a=(i=(n=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&n!==void 0?n:(o=e.generalLimits)===null||o===void 0?void 0:o.attributeCountLimit)!==null&&i!==void 0?i:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:h.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT;m.attributeValueLengthLimit=(f=(d=(p=(u=(c=e.spanLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&u!==void 0?u:(l=e.generalLimits)===null||l===void 0?void 0:l.attributeValueLengthLimit)!==null&&p!==void 0?p:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT;return Object.assign({},e,{spanLimits:m})}exports.reconfigureLimits=o},{"./config":222,"@opentelemetry/core":63}],241:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StackContextManager=void 0;const t=require("@opentelemetry/api");class r{constructor(){this._enabled=false;this._currentContext=t.ROOT_CONTEXT}_bindFunction(e=t.ROOT_CONTEXT,r){const n=this;const o=function(...t){return n.with(e,(()=>r.apply(this,t)))};Object.defineProperty(o,"length",{enumerable:false,configurable:true,writable:false,value:r.length});return o}active(){return this._currentContext}bind(e,t){if(e===undefined){e=this.active()}if(typeof t==="function"){return this._bindFunction(e,t)}return t}disable(){this._currentContext=t.ROOT_CONTEXT;this._enabled=false;return this}enable(){if(this._enabled){return this}this._enabled=true;this._currentContext=t.ROOT_CONTEXT;return this}with(e,r,n,...o){const i=this._currentContext;this._currentContext=e||t.ROOT_CONTEXT;try{return r.call(n,...o)}finally{this._currentContext=i}}}exports.StackContextManager=r},{"@opentelemetry/api":19}],242:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebTracerProvider=void 0;const t=require("@opentelemetry/sdk-trace-base");const r=require("./StackContextManager");class n extends t.BasicTracerProvider{constructor(e={}){super(e);if(e.contextManager){throw"contextManager should be defined in register method not in"+" constructor"}if(e.propagator){throw"propagator should be defined in register method not in constructor"}}register(e={}){if(e.contextManager===undefined){e.contextManager=new r.StackContextManager}if(e.contextManager){e.contextManager.enable()}super.register(e)}}exports.WebTracerProvider=n},{"./StackContextManager":241,"@opentelemetry/sdk-trace-base":231}],243:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PerformanceTimingNames=void 0;var t;(function(e){e["CONNECT_END"]="connectEnd";e["CONNECT_START"]="connectStart";e["DECODED_BODY_SIZE"]="decodedBodySize";e["DOM_COMPLETE"]="domComplete";e["DOM_CONTENT_LOADED_EVENT_END"]="domContentLoadedEventEnd";e["DOM_CONTENT_LOADED_EVENT_START"]="domContentLoadedEventStart";e["DOM_INTERACTIVE"]="domInteractive";e["DOMAIN_LOOKUP_END"]="domainLookupEnd";e["DOMAIN_LOOKUP_START"]="domainLookupStart";e["ENCODED_BODY_SIZE"]="encodedBodySize";e["FETCH_START"]="fetchStart";e["LOAD_EVENT_END"]="loadEventEnd";e["LOAD_EVENT_START"]="loadEventStart";e["NAVIGATION_START"]="navigationStart";e["REDIRECT_END"]="redirectEnd";e["REDIRECT_START"]="redirectStart";e["REQUEST_START"]="requestStart";e["RESPONSE_END"]="responseEnd";e["RESPONSE_START"]="responseStart";e["SECURE_CONNECTION_START"]="secureConnectionStart";e["UNLOAD_EVENT_END"]="unloadEventEnd";e["UNLOAD_EVENT_START"]="unloadEventStart"})(t=exports.PerformanceTimingNames||(exports.PerformanceTimingNames={}))},{}],244:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./WebTracerProvider"),exports);r(require("./StackContextManager"),exports);r(require("./enums/PerformanceTimingNames"),exports);r(require("./types"),exports);r(require("./utils"),exports);r(require("@opentelemetry/sdk-trace-base"),exports)},{"./StackContextManager":241,"./WebTracerProvider":242,"./enums/PerformanceTimingNames":243,"./types":245,"./utils":246,"@opentelemetry/sdk-trace-base":231}],245:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("./enums/PerformanceTimingNames")},{"./enums/PerformanceTimingNames":243}],246:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shouldPropagateTraceHeaders=exports.getElementXPath=exports.normalizeUrl=exports.parseUrl=exports.getResource=exports.sortResources=exports.addSpanNetworkEvents=exports.addSpanNetworkEvent=exports.hasKey=void 0;const t=require("./enums/PerformanceTimingNames");const r=require("@opentelemetry/core");const n=require("@opentelemetry/semantic-conventions");let o;function i(){if(!o){o=document.createElement("a")}return o}function a(e,t){return t in e}exports.hasKey=a;function s(e,t,r){if(a(r,t)&&typeof r[t]==="number"){e.addEvent(t,r[t]);return e}return undefined}exports.addSpanNetworkEvent=s;function c(e,r){s(e,t.PerformanceTimingNames.FETCH_START,r);s(e,t.PerformanceTimingNames.DOMAIN_LOOKUP_START,r);s(e,t.PerformanceTimingNames.DOMAIN_LOOKUP_END,r);s(e,t.PerformanceTimingNames.CONNECT_START,r);if(a(r,"name")&&r["name"].startsWith("https:")){s(e,t.PerformanceTimingNames.SECURE_CONNECTION_START,r)}s(e,t.PerformanceTimingNames.CONNECT_END,r);s(e,t.PerformanceTimingNames.REQUEST_START,r);s(e,t.PerformanceTimingNames.RESPONSE_START,r);s(e,t.PerformanceTimingNames.RESPONSE_END,r);const o=r[t.PerformanceTimingNames.ENCODED_BODY_SIZE];if(o!==undefined){e.setAttribute(n.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH,o)}const i=r[t.PerformanceTimingNames.DECODED_BODY_SIZE];if(i!==undefined&&o!==i){e.setAttribute(n.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,i)}}exports.addSpanNetworkEvents=c;function u(e){return e.slice().sort(((e,r)=>{const n=e[t.PerformanceTimingNames.FETCH_START];const o=r[t.PerformanceTimingNames.FETCH_START];if(n>o){return 1}else if(n<o){return-1}return 0}))}exports.sortResources=u;function l(){return typeof location!=="undefined"?location.origin:undefined}function p(e,r,n,o,i=new WeakSet,a){const s=m(e);e=s.toString();const c=f(e,r,n,o,i,a);if(c.length===0){return{mainRequest:undefined}}if(c.length===1){return{mainRequest:c[0]}}const p=u(c);if(s.origin!==l()&&p.length>1){let e=p[0];let r=d(p,e[t.PerformanceTimingNames.RESPONSE_END],n);const o=e[t.PerformanceTimingNames.RESPONSE_END];const i=r[t.PerformanceTimingNames.FETCH_START];if(i<o){r=e;e=undefined}return{corsPreFlightRequest:e,mainRequest:r}}else{return{mainRequest:c[0]}}}exports.getResource=p;function d(e,n,o){const i=(0,r.hrTimeToNanoseconds)(o);const a=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n));let s=e[1];let c;const u=e.length;for(let n=1;n<u;n++){const o=e[n];const u=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(o[t.PerformanceTimingNames.FETCH_START]));const l=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(o[t.PerformanceTimingNames.RESPONSE_END]));const p=i-l;if(u>=a&&(!c||p<c)){c=p;s=o}}return s}function f(e,n,o,i,a,s){const c=(0,r.hrTimeToNanoseconds)(n);const u=(0,r.hrTimeToNanoseconds)(o);let l=i.filter((n=>{const o=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n[t.PerformanceTimingNames.FETCH_START]));const i=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n[t.PerformanceTimingNames.RESPONSE_END]));return n.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&n.name===e&&o>=c&&i<=u}));if(l.length>0){l=l.filter((e=>!a.has(e)))}return l}function m(e){if(typeof URL==="function"){return new URL(e,typeof document!=="undefined"?document.baseURI:typeof location!=="undefined"?location.href:undefined)}const t=i();t.href=e;return t}exports.parseUrl=m;function h(e){const t=m(e);return t.href}exports.normalizeUrl=h;function v(e,t){if(e.nodeType===Node.DOCUMENT_NODE){return"/"}const r=g(e,t);if(t&&r.indexOf("@id")>0){return r}let n="";if(e.parentNode){n+=v(e.parentNode,false)}n+=r;return n}exports.getElementXPath=v;function _(e){if(!e.parentNode){return 0}const t=[e.nodeType];if(e.nodeType===Node.CDATA_SECTION_NODE){t.push(Node.TEXT_NODE)}let r=Array.from(e.parentNode.childNodes);r=r.filter((r=>{const n=r.localName;return t.indexOf(r.nodeType)>=0&&n===e.localName}));if(r.length>=1){return r.indexOf(e)+1}return 0}function g(e,t){const r=e.nodeType;const n=_(e);let o="";if(r===Node.ELEMENT_NODE){const r=e.getAttribute("id");if(t&&r){return`//*[@id="${r}"]`}o=e.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE){o="text()"}else if(r===Node.COMMENT_NODE){o="comment()"}else{return""}if(o&&n>1){return`/${o}[${n}]`}return`/${o}`}function y(e,t){let n=t||[];if(typeof n==="string"||n instanceof RegExp){n=[n]}const o=m(e);if(o.origin===l()){return true}else{return n.some((t=>(0,r.urlMatches)(e,t)))}}exports.shouldPropagateTraceHeaders=y},{"./enums/PerformanceTimingNames":243,"@opentelemetry/core":63,"@opentelemetry/semantic-conventions":247}],247:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./trace"),exports);r(require("./resource"),exports)},{"./resource":249,"./trace":251}],248:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetrySdkLanguageValues=exports.OsTypeValues=exports.HostArchValues=exports.AwsEcsLaunchtypeValues=exports.CloudPlatformValues=exports.CloudProviderValues=exports.SemanticResourceAttributes=void 0;exports.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};exports.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};exports.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"};exports.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"};exports.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"};exports.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"};exports.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}},{}],249:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./SemanticResourceAttributes"),exports)},{"./SemanticResourceAttributes":248}],250:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MessageTypeValues=exports.RpcGrpcStatusCodeValues=exports.MessagingOperationValues=exports.MessagingDestinationKindValues=exports.HttpFlavorValues=exports.NetHostConnectionSubtypeValues=exports.NetHostConnectionTypeValues=exports.NetTransportValues=exports.FaasInvokedProviderValues=exports.FaasDocumentOperationValues=exports.FaasTriggerValues=exports.DbCassandraConsistencyLevelValues=exports.DbSystemValues=exports.SemanticAttributes=void 0;exports.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"};exports.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"};exports.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"};exports.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"};exports.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"};exports.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"};exports.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"};exports.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"};exports.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"};exports.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"};exports.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"};exports.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"};exports.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16};exports.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}},{}],251:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./SemanticAttributes"),exports)},{"./SemanticAttributes":250}],252:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AttributeNames=void 0;var t;(function(e){e["DOCUMENT_LOAD"]="documentLoad";e["DOCUMENT_FETCH"]="documentFetch";e["RESOURCE_FETCH"]="resourceFetch"})(t=exports.AttributeNames||(exports.AttributeNames={}))},{}],253:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EventNames=void 0;var t;(function(e){e["FIRST_PAINT"]="firstPaint";e["FIRST_CONTENTFUL_PAINT"]="firstContentfulPaint"})(t=exports.EventNames||(exports.EventNames={}))},{}],254:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./instrumentation"),exports);(0,t.__exportStar)(require("./enums/AttributeNames"),exports);(0,t.__exportStar)(require("./types"),exports)},{"./enums/AttributeNames":252,"./instrumentation":255,"./types":256,tslib:386}],255:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocumentLoadInstrumentation=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("@opentelemetry/sdk-trace-web");const o=require("@opentelemetry/instrumentation");const i=require("@opentelemetry/semantic-conventions");const a=require("./utils");class s extends o.InstrumentationBase{constructor(e={}){super("@middleware-labs/instrumentation-document-load","0.1",e);this.component="document-load";this.version="1";this.moduleName=this.component}init(){}_onDocumentLoaded(){window.setTimeout((()=>{this._collectPerformance()}))}_addResourcesSpans(e){var t,n;const o=(n=(t=r.otperformance).getEntriesByType)===null||n===void 0?void 0:n.call(t,"resource");if(o){o.forEach((t=>{this._initResourceSpan(t,e)}))}}_collectPerformance(){const e=Array.from(document.getElementsByTagName("meta")).find((e=>e.getAttribute("name")===r.TRACE_PARENT_HEADER));const o=(0,a.getPerformanceNavigationEntries)();const s=e&&e.content||"";t.context.with(t.propagation.extract(t.ROOT_CONTEXT,{traceparent:s}),(()=>{var e;const r=this._startSpan("document load "+location.href,n.PerformanceTimingNames.FETCH_START,o);if(!r){return}r.setAttribute("event.type","load");t.context.with(t.trace.setSpan(t.context.active(),r),(()=>{const e=this._startSpan("document fetch "+location.href,n.PerformanceTimingNames.FETCH_START,o);if(e){e.setAttribute(i.SemanticAttributes.HTTP_URL,location.href);e.setAttribute("event.type","fetch");t.context.with(t.trace.setSpan(t.context.active(),e),(()=>{var t;(0,n.addSpanNetworkEvents)(e,o);this._addCustomAttributesOnSpan(e,(t=this._getConfig().applyCustomAttributesOnSpan)===null||t===void 0?void 0:t.documentFetch);this._endSpan(e,n.PerformanceTimingNames.RESPONSE_END,o)}))}}));r.setAttribute(i.SemanticAttributes.HTTP_URL,location.href);r.setAttribute(i.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent);this._addResourcesSpans(r);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.FETCH_START,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.UNLOAD_EVENT_START,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.UNLOAD_EVENT_END,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.DOM_INTERACTIVE,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.DOM_CONTENT_LOADED_EVENT_START,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.DOM_CONTENT_LOADED_EVENT_END,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.DOM_COMPLETE,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.LOAD_EVENT_START,o);(0,n.addSpanNetworkEvent)(r,n.PerformanceTimingNames.LOAD_EVENT_END,o);(0,a.addSpanPerformancePaintEvents)(r);this._addCustomAttributesOnSpan(r,(e=this._getConfig().applyCustomAttributesOnSpan)===null||e===void 0?void 0:e.documentLoad);this._endSpan(r,n.PerformanceTimingNames.LOAD_EVENT_END,o)}))}_endSpan(e,t,r){if(e){if((0,n.hasKey)(r,t)){e.end(r[t])}else{e.end()}}}_initResourceSpan(e,t){var r;const o=this._startSpan("resource fetch"+e.name,n.PerformanceTimingNames.FETCH_START,e,t);if(o){o.setAttribute(i.SemanticAttributes.HTTP_URL,e.name);(0,n.addSpanNetworkEvents)(o,e);this._addCustomAttributesOnResourceSpan(o,e,(r=this._getConfig().applyCustomAttributesOnSpan)===null||r===void 0?void 0:r.resourceFetch);this._endSpan(o,n.PerformanceTimingNames.RESPONSE_END,e)}}_startSpan(e,r,o,i){if((0,n.hasKey)(o,r)&&typeof o[r]==="number"){const n=this.tracer.startSpan(e,{startTime:o[r]},i?t.trace.setSpan(t.context.active(),i):undefined);return n}return undefined}_waitForPageLoad(){if(window.document.readyState==="complete"){this._onDocumentLoaded()}else{this._onDocumentLoaded=this._onDocumentLoaded.bind(this);window.addEventListener("load",this._onDocumentLoaded)}}_getConfig(){return this._config}_addCustomAttributesOnSpan(e,t){if(t){(0,o.safeExecuteInTheMiddle)((()=>t(e)),(e=>{if(!e){return}this._diag.error("addCustomAttributesOnSpan",e)}),true)}}_addCustomAttributesOnResourceSpan(e,t,r){if(r){(0,o.safeExecuteInTheMiddle)((()=>r(e,t)),(e=>{if(!e){return}this._diag.error("addCustomAttributesOnResourceSpan",e)}),true)}}enable(){window.removeEventListener("load",this._onDocumentLoaded);this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}}exports.DocumentLoadInstrumentation=s},{"./utils":257,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/instrumentation":260,"@opentelemetry/sdk-trace-web":244,"@opentelemetry/semantic-conventions":247}],256:[function(require,e,exports){arguments[4][132][0].apply(exports,arguments)},{dup:132}],257:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSpanPerformancePaintEvents=exports.getPerformanceNavigationEntries=void 0;const t=require("@opentelemetry/core");const r=require("@opentelemetry/sdk-trace-web");const n=require("./enums/EventNames");const o=()=>{var e,n;const o={};const i=(n=(e=t.otperformance).getEntriesByType)===null||n===void 0?void 0:n.call(e,"navigation")[0];if(i){const e=Object.values(r.PerformanceTimingNames);e.forEach((e=>{if((0,r.hasKey)(i,e)){const t=i[e];if(typeof t==="number"){o[e]=t}}}))}else{const e=t.otperformance;const n=e.timing;if(n){const e=Object.values(r.PerformanceTimingNames);e.forEach((e=>{if((0,r.hasKey)(n,e)){const t=n[e];if(typeof t==="number"){o[e]=t}}}))}}return o};exports.getPerformanceNavigationEntries=o;const i={"first-paint":n.EventNames.FIRST_PAINT,"first-contentful-paint":n.EventNames.FIRST_CONTENTFUL_PAINT};const a=e=>{var n,o;const a=(o=(n=t.otperformance).getEntriesByType)===null||o===void 0?void 0:o.call(n,"paint");if(a){a.forEach((({name:t,startTime:n})=>{if((0,r.hasKey)(i,t)){e.addEvent(i[t],n)}}))}};exports.addSpanPerformancePaintEvents=a},{"./enums/EventNames":253,"@opentelemetry/core":63,"@opentelemetry/sdk-trace-web":244}],258:[function(require,e,exports){arguments[4][106][0].apply(exports,arguments)},{"./autoLoaderUtils":259,"@opentelemetry/api":19,dup:106}],259:[function(require,e,exports){arguments[4][107][0].apply(exports,arguments)},{dup:107}],260:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./autoLoader"),exports);r(require("./platform/index"),exports);r(require("./types"),exports);r(require("./types_internal"),exports);r(require("./utils"),exports)},{"./autoLoader":258,"./platform/index":262,"./types":264,"./types_internal":265,"./utils":266}],261:[function(require,e,exports){arguments[4][109][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:109,shimmer:384}],262:[function(require,e,exports){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=this&&this.__exportStar||function(e,exports){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(exports,r))t(exports,e,r)};Object.defineProperty(exports,"__esModule",{value:true});r(require("./instrumentation"),exports)},{"./instrumentation":263}],263:[function(require,e,exports){arguments[4][113][0].apply(exports,arguments)},{"../../instrumentation":261,dup:113}],264:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],265:[function(require,e,exports){arguments[4][115][0].apply(exports,arguments)},{dup:115}],266:[function(require,e,exports){arguments[4][116][0].apply(exports,arguments)},{dup:116}],267:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AttributeNames=void 0;var t;(function(e){e["HTTP_STATUS_TEXT"]="http.status_text"})(t=exports.AttributeNames||(exports.AttributeNames={}))},{}],268:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EventNames=void 0;var t;(function(e){e["METHOD_OPEN"]="open";e["METHOD_SEND"]="send";e["EVENT_ABORT"]="abort";e["EVENT_ERROR"]="error";e["EVENT_LOAD"]="loaded";e["EVENT_TIMEOUT"]="timeout"})(t=exports.EventNames||(exports.EventNames={}))},{}],269:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./xhr"),exports)},{"./xhr":270,tslib:386}],270:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XMLHttpRequestInstrumentation=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/instrumentation");const n=require("@opentelemetry/core");const o=require("@opentelemetry/semantic-conventions");const i=require("@opentelemetry/sdk-trace-web");const a=require("./enums/EventNames");const s=require("./enums/AttributeNames");const c=300;class u extends r.InstrumentationBase{constructor(e){super("middleware.io-instrumentation-xml-http-request","0.1",e);this.component="xml-http-request";this.moduleName=this.component;this._tasksCount=0;this._xhrMem=new WeakMap;this._usedResources=new WeakSet}init(){}_getConfig(){return this._config}_addHeaders(e,r){const n=(0,i.parseUrl)(r).href;if(!(0,i.shouldPropagateTraceHeaders)(n,this._getConfig().propagateTraceHeaderCorsUrls)){const e={};t.propagation.inject(t.context.active(),e);if(Object.keys(e).length>0){this._diag.debug("headers inject skipped due to CORS policy")}return}const o={};t.propagation.inject(t.context.active(),o);Object.keys(o).forEach((t=>{e.setRequestHeader(t,String(o[t]))}))}_addChildSpan(e,r){t.context.with(t.trace.setSpan(t.context.active(),e),(()=>{const e=this.tracer.startSpan("CORS Preflight",{startTime:r[i.PerformanceTimingNames.FETCH_START]});(0,i.addSpanNetworkEvents)(e,r);e.end(r[i.PerformanceTimingNames.RESPONSE_END])}))}_addFinalSpanAttributes(e,t,r){if(typeof r==="string"){const n=(0,i.parseUrl)(r);if(t.status!==undefined){e.setAttribute(o.SemanticAttributes.HTTP_STATUS_CODE,t.status)}if(t.statusText!==undefined){e.setAttribute(s.AttributeNames.HTTP_STATUS_TEXT,t.statusText)}e.setAttribute(o.SemanticAttributes.HTTP_HOST,n.host);e.setAttribute(o.SemanticAttributes.HTTP_SCHEME,n.protocol.replace(":",""));e.setAttribute(o.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent)}}_applyAttributesAfterXHR(e,t){const n=this._getConfig().applyCustomAttributesOnSpan;if(typeof n==="function"){(0,r.safeExecuteInTheMiddle)((()=>n(e,t)),(e=>{if(!e){return}this._diag.error("applyCustomAttributesOnSpan",e)}),true)}}_addResourceObserver(e,t){const r=this._xhrMem.get(e);if(!r||typeof PerformanceObserver!=="function"||typeof PerformanceResourceTiming!=="function"){return}r.createdResources={observer:new PerformanceObserver((e=>{const n=e.getEntries();const o=(0,i.parseUrl)(t);n.forEach((e=>{if(e.initiatorType==="xmlhttprequest"&&e.name===o.href){if(r.createdResources){r.createdResources.entries.push(e)}}}))})),entries:[]};r.createdResources.observer.observe({entryTypes:["resource"]})}_clearResources(){if(this._tasksCount===0&&this._getConfig().clearTimingResources){n.otperformance.clearResourceTimings();this._xhrMem=new WeakMap;this._usedResources=new WeakSet}}_findResourceAndAddNetworkEvents(e,t,r,o,a){if(!r||!o||!a||!e.createdResources){return}let s=e.createdResources.entries;if(!s||!s.length){s=n.otperformance.getEntriesByType("resource")}const c=(0,i.getResource)((0,i.parseUrl)(r).href,o,a,s,this._usedResources);if(c.mainRequest){const e=c.mainRequest;this._markResourceAsUsed(e);const r=c.corsPreFlightRequest;if(r){this._addChildSpan(t,r);this._markResourceAsUsed(r)}(0,i.addSpanNetworkEvents)(t,e)}}_cleanPreviousSpanInformation(e){const t=this._xhrMem.get(e);if(t){const r=t.callbackToRemoveEvents;if(r){r()}this._xhrMem.delete(e)}}_createSpan(e,r,s){if((0,n.isUrlIgnored)(r,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}const c=s.toUpperCase()+" "+(0,i.parseUrl)(r).toString();const u=this.tracer.startSpan(c,{kind:t.SpanKind.CLIENT,attributes:{[o.SemanticAttributes.HTTP_METHOD]:s,[o.SemanticAttributes.HTTP_URL]:(0,i.parseUrl)(r).toString()}});u.addEvent(a.EventNames.METHOD_OPEN);this._cleanPreviousSpanInformation(e);this._xhrMem.set(e,{span:u,spanUrl:r});return u}_markResourceAsUsed(e){this._usedResources.add(e)}_patchOpen(){return e=>{const t=this;return function r(...n){const o=n[0];const i=n[1];t._createSpan(this,i,o);return e.apply(this,n)}}}_patchSend(){const e=this;function r(t,r,n,o){const i=r.callbackToRemoveEvents;if(typeof i==="function"){i()}const{span:a,spanUrl:s,sendStartTime:c}=r;if(a){e._findResourceAndAddNetworkEvents(r,a,s,c,n);a.addEvent(t,o);e._addFinalSpanAttributes(a,r,s);a.end(o);e._tasksCount--}e._clearResources()}function o(t,o){const i=e._xhrMem.get(o);if(!i){return}i.status=o.status;i.statusText=o.statusText;e._xhrMem.delete(o);if(i.span){e._applyAttributesAfterXHR(i.span,o)}const a=(0,n.hrTime)();const s=Date.now();setTimeout((()=>{r(t,i,a,s)}),c)}function i(){o(a.EventNames.EVENT_ERROR,this)}function s(){o(a.EventNames.EVENT_ABORT,this)}function u(){o(a.EventNames.EVENT_TIMEOUT,this)}function l(){if(this.status<299){o(a.EventNames.EVENT_LOAD,this)}else{o(a.EventNames.EVENT_ERROR,this)}}function p(t){t.removeEventListener("abort",s);t.removeEventListener("error",i);t.removeEventListener("load",l);t.removeEventListener("timeout",u);const r=e._xhrMem.get(t);if(r){r.callbackToRemoveEvents=undefined}}return r=>function o(...c){const d=e._xhrMem.get(this);if(!d){return r.apply(this,c)}const f=d.span;const m=d.spanUrl;if(f&&m){t.context.with(t.trace.setSpan(t.context.active(),f),(()=>{e._tasksCount++;d.sendStartTime=(0,n.hrTime)();f.addEvent(a.EventNames.METHOD_SEND);this.addEventListener("abort",s);this.addEventListener("error",i);this.addEventListener("load",l);this.addEventListener("timeout",u);d.callbackToRemoveEvents=()=>{p(this);if(d.createdResources){d.createdResources.observer.disconnect()}};e._addHeaders(this,m);e._addResourceObserver(this,m)}))}return r.apply(this,c)}}enable(){this._diag.debug("applying patch to",this.moduleName,.1);if((0,r.isWrapped)(XMLHttpRequest.prototype.open)){this._unwrap(XMLHttpRequest.prototype,"open");this._diag.debug("removing previous patch from method open")}if((0,r.isWrapped)(XMLHttpRequest.prototype.send)){this._unwrap(XMLHttpRequest.prototype,"send");this._diag.debug("removing previous patch from method send")}this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen());this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,.1);this._unwrap(XMLHttpRequest.prototype,"open");this._unwrap(XMLHttpRequest.prototype,"send");this._tasksCount=0;this._xhrMem=new WeakMap;this._usedResources=new WeakSet}}exports.XMLHttpRequestInstrumentation=u},{"./enums/AttributeNames":267,"./enums/EventNames":268,"@opentelemetry/api":19,"@opentelemetry/core":281,"@opentelemetry/instrumentation":314,"@opentelemetry/sdk-trace-web":373,"@opentelemetry/semantic-conventions":376}],271:[function(require,e,exports){arguments[4][53][0].apply(exports,arguments)},{dup:53}],272:[function(require,e,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],273:[function(require,e,exports){arguments[4][55][0].apply(exports,arguments)},{"../../trace/suppress-tracing":301,"../constants":272,"../utils":274,"@opentelemetry/api":19,dup:55}],274:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseKeyPairsIntoRecord=exports.parsePairKeyValue=exports.getKeyPairs=exports.serializeKeyPairs=void 0;const t=require("@opentelemetry/api");const r=require("./constants");function n(e){return e.reduce(((e,t)=>{const n=`${e}${e!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),"")}exports.serializeKeyPairs=n;function o(e){return e.getAllEntries().map((([e,t])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`;if(t.metadata!==undefined){n+=r.BAGGAGE_PROPERTIES_SEPARATOR+t.metadata.toString()}return n}))}exports.getKeyPairs=o;function i(e){const n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;const o=n.shift();if(!o)return;const i=o.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(i.length!==2)return;const a=decodeURIComponent(i[0].trim());const s=decodeURIComponent(i[1].trim());let c;if(n.length>0){c=(0,t.baggageEntryMetadataFromString)(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))}return{key:a,value:s,metadata:c}}exports.parsePairKeyValue=i;function a(e){if(typeof e!=="string"||e.length===0)return{};return e.split(r.BAGGAGE_ITEMS_SEPARATOR).map((e=>i(e))).filter((e=>e!==undefined&&e.value.length>0)).reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}exports.parseKeyPairsIntoRecord=a},{"./constants":272,"@opentelemetry/api":19}],275:[function(require,e,exports){arguments[4][57][0].apply(exports,arguments)},{dup:57}],276:[function(require,e,exports){arguments[4][58][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:58}],277:[function(require,e,exports){arguments[4][59][0].apply(exports,arguments)},{"./logging-error-handler":278,dup:59}],278:[function(require,e,exports){arguments[4][60][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:60}],279:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addHrTimes=exports.isTimeInput=exports.isTimeInputHrTime=exports.hrTimeToMicroseconds=exports.hrTimeToMilliseconds=exports.hrTimeToNanoseconds=exports.hrTimeToTimeStamp=exports.hrTimeDuration=exports.timeInputToHrTime=exports.hrTime=exports.getTimeOrigin=exports.millisToHrTime=void 0;const t=require("../platform");const r=9;const n=6;const o=Math.pow(10,n);const i=Math.pow(10,r);function a(e){const t=e/1e3;const r=Math.trunc(t);const n=Math.round(e%1e3*o);return[r,n]}exports.millisToHrTime=a;function s(){let e=t.otperformance.timeOrigin;if(typeof e!=="number"){const r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}exports.getTimeOrigin=s;function c(e){const r=a(s());const n=a(typeof e==="number"?e:t.otperformance.now());return _(r,n)}exports.hrTime=c;function u(e){if(h(e)){return e}else if(typeof e==="number"){if(e<s()){return c(e)}else{return a(e)}}else if(e instanceof Date){return a(e.getTime())}else{throw TypeError("Invalid input type")}}exports.timeInputToHrTime=u;function l(e,t){let r=t[0]-e[0];let n=t[1]-e[1];if(n<0){r-=1;n+=i}return[r,n]}exports.hrTimeDuration=l;function p(e){const t=r;const n=`${"0".repeat(t)}${e[1]}Z`;const o=n.substr(n.length-t-1);const i=new Date(e[0]*1e3).toISOString();return i.replace("000Z",o)}exports.hrTimeToTimeStamp=p;function d(e){return e[0]*i+e[1]}exports.hrTimeToNanoseconds=d;function f(e){return Math.round(e[0]*1e3+e[1]/1e6)}exports.hrTimeToMilliseconds=f;function m(e){return Math.round(e[0]*1e6+e[1]/1e3)}exports.hrTimeToMicroseconds=m;function h(e){return Array.isArray(e)&&e.length===2&&typeof e[0]==="number"&&typeof e[1]==="number"}exports.isTimeInputHrTime=h;function v(e){return h(e)||typeof e==="number"||e instanceof Date}exports.isTimeInput=v;function _(e,t){const r=[e[0]+t[0],e[1]+t[1]];if(r[1]>=i){r[1]-=i;r[0]+=1}return r}exports.addHrTimes=_},{"../platform":288}],280:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],281:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.internal=exports.baggageUtils=void 0;const t=require("tslib");(0,t.__exportStar)(require("./baggage/propagation/W3CBaggagePropagator"),exports);(0,t.__exportStar)(require("./common/anchored-clock"),exports);(0,t.__exportStar)(require("./common/attributes"),exports);(0,t.__exportStar)(require("./common/global-error-handler"),exports);(0,t.__exportStar)(require("./common/logging-error-handler"),exports);(0,t.__exportStar)(require("./common/time"),exports);(0,t.__exportStar)(require("./common/types"),exports);(0,t.__exportStar)(require("./ExportResult"),exports);(0,t.__exportStar)(require("./version"),exports);exports.baggageUtils=require("./baggage/utils");(0,t.__exportStar)(require("./platform"),exports);(0,t.__exportStar)(require("./propagation/composite"),exports);(0,t.__exportStar)(require("./trace/W3CTraceContextPropagator"),exports);(0,t.__exportStar)(require("./trace/IdGenerator"),exports);(0,t.__exportStar)(require("./trace/rpc-metadata"),exports);(0,t.__exportStar)(require("./trace/sampler/AlwaysOffSampler"),exports);(0,t.__exportStar)(require("./trace/sampler/AlwaysOnSampler"),exports);(0,t.__exportStar)(require("./trace/sampler/ParentBasedSampler"),exports);(0,t.__exportStar)(require("./trace/sampler/TraceIdRatioBasedSampler"),exports);(0,t.__exportStar)(require("./trace/suppress-tracing"),exports);(0,t.__exportStar)(require("./trace/TraceState"),exports);(0,t.__exportStar)(require("./utils/environment"),exports);(0,t.__exportStar)(require("./utils/merge"),exports);(0,t.__exportStar)(require("./utils/sampling"),exports);(0,t.__exportStar)(require("./utils/timeout"),exports);(0,t.__exportStar)(require("./utils/url"),exports);(0,t.__exportStar)(require("./utils/wrap"),exports);(0,t.__exportStar)(require("./utils/callback"),exports);(0,t.__exportStar)(require("./version"),exports);const r=require("./internal/exporter");exports.internal={_export:r._export}},{"./ExportResult":271,"./baggage/propagation/W3CBaggagePropagator":273,"./baggage/utils":274,"./common/anchored-clock":275,"./common/attributes":276,"./common/global-error-handler":277,"./common/logging-error-handler":278,"./common/time":279,"./common/types":280,"./internal/exporter":282,"./platform":288,"./propagation/composite":292,"./trace/IdGenerator":293,"./trace/TraceState":294,"./trace/W3CTraceContextPropagator":295,"./trace/rpc-metadata":296,"./trace/sampler/AlwaysOffSampler":297,"./trace/sampler/AlwaysOnSampler":298,"./trace/sampler/ParentBasedSampler":299,"./trace/sampler/TraceIdRatioBasedSampler":300,"./trace/suppress-tracing":301,"./utils/callback":302,"./utils/environment":303,"./utils/merge":305,"./utils/sampling":307,"./utils/timeout":308,"./utils/url":309,"./utils/wrap":310,"./version":311,tslib:386}],282:[function(require,e,exports){arguments[4][64][0].apply(exports,arguments)},{"../trace/suppress-tracing":301,"@opentelemetry/api":19,dup:64}],283:[function(require,e,exports){arguments[4][65][0].apply(exports,arguments)},{dup:65}],284:[function(require,e,exports){arguments[4][66][0].apply(exports,arguments)},{dup:66}],285:[function(require,e,exports){arguments[4][67][0].apply(exports,arguments)},{"../../utils/environment":303,"./globalThis":286,dup:67}],286:[function(require,e,exports){arguments[4][68][0].apply(exports,arguments)},{dup:68}],287:[function(require,e,exports){arguments[4][69][0].apply(exports,arguments)},{dup:69}],288:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./environment"),exports);(0,t.__exportStar)(require("./globalThis"),exports);(0,t.__exportStar)(require("./hex-to-base64"),exports);(0,t.__exportStar)(require("./RandomIdGenerator"),exports);(0,t.__exportStar)(require("./performance"),exports);(0,t.__exportStar)(require("./sdk-info"),exports);(0,t.__exportStar)(require("./timer-util"),exports)},{"./RandomIdGenerator":284,"./environment":285,"./globalThis":286,"./hex-to-base64":287,"./performance":289,"./sdk-info":290,"./timer-util":291,tslib:386}],289:[function(require,e,exports){arguments[4][71][0].apply(exports,arguments)},{dup:71}],290:[function(require,e,exports){arguments[4][72][0].apply(exports,arguments)},{"../../version":311,"@opentelemetry/semantic-conventions":376,dup:72}],291:[function(require,e,exports){arguments[4][73][0].apply(exports,arguments)},{dup:73}],292:[function(require,e,exports){arguments[4][74][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:74}],293:[function(require,e,exports){arguments[4][75][0].apply(exports,arguments)},{dup:75}],294:[function(require,e,exports){arguments[4][76][0].apply(exports,arguments)},{"../internal/validators":283,dup:76}],295:[function(require,e,exports){arguments[4][77][0].apply(exports,arguments)},{"./TraceState":294,"./suppress-tracing":301,"@opentelemetry/api":19,dup:77}],296:[function(require,e,exports){arguments[4][78][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:78}],297:[function(require,e,exports){arguments[4][79][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:79}],298:[function(require,e,exports){arguments[4][80][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:80}],299:[function(require,e,exports){arguments[4][81][0].apply(exports,arguments)},{"../../common/global-error-handler":277,"./AlwaysOffSampler":297,"./AlwaysOnSampler":298,"@opentelemetry/api":19,dup:81}],300:[function(require,e,exports){arguments[4][82][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:82}],301:[function(require,e,exports){arguments[4][83][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:83}],302:[function(require,e,exports){arguments[4][84][0].apply(exports,arguments)},{"./promise":306,dup:84}],303:[function(require,e,exports){arguments[4][85][0].apply(exports,arguments)},{"../platform/browser/globalThis":286,"./sampling":307,"@opentelemetry/api":19,_process:382,dup:85}],304:[function(require,e,exports){arguments[4][86][0].apply(exports,arguments)},{dup:86}],305:[function(require,e,exports){arguments[4][87][0].apply(exports,arguments)},{"./lodash.merge":304,dup:87}],306:[function(require,e,exports){arguments[4][88][0].apply(exports,arguments)},{dup:88}],307:[function(require,e,exports){arguments[4][89][0].apply(exports,arguments)},{dup:89}],308:[function(require,e,exports){arguments[4][90][0].apply(exports,arguments)},{dup:90}],309:[function(require,e,exports){arguments[4][91][0].apply(exports,arguments)},{dup:91}],310:[function(require,e,exports){arguments[4][92][0].apply(exports,arguments)},{dup:92}],311:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VERSION=void 0;exports.VERSION="1.15.0"},{}],312:[function(require,e,exports){arguments[4][106][0].apply(exports,arguments)},{"./autoLoaderUtils":313,"@opentelemetry/api":19,dup:106}],313:[function(require,e,exports){arguments[4][107][0].apply(exports,arguments)},{dup:107}],314:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./autoLoader"),exports);(0,t.__exportStar)(require("./platform/index"),exports);(0,t.__exportStar)(require("./types"),exports);(0,t.__exportStar)(require("./types_internal"),exports);(0,t.__exportStar)(require("./utils"),exports)},{"./autoLoader":312,"./platform/index":316,"./types":318,"./types_internal":319,"./utils":320,tslib:386}],315:[function(require,e,exports){arguments[4][109][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:109,shimmer:384}],316:[function(require,e,exports){arguments[4][112][0].apply(exports,arguments)},{"./instrumentation":317,dup:112}],317:[function(require,e,exports){arguments[4][113][0].apply(exports,arguments)},{"../../instrumentation":315,dup:113}],318:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],319:[function(require,e,exports){arguments[4][115][0].apply(exports,arguments)},{dup:115}],320:[function(require,e,exports){arguments[4][116][0].apply(exports,arguments)},{dup:116}],321:[function(require,e,exports){arguments[4][144][0].apply(exports,arguments)},{dup:144}],322:[function(require,e,exports){arguments[4][145][0].apply(exports,arguments)},{"./platform":340,"@opentelemetry/api":19,"@opentelemetry/core":281,"@opentelemetry/semantic-conventions":376,dup:145}],323:[function(require,e,exports){arguments[4][146][0].apply(exports,arguments)},{dup:146}],324:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectResourcesSync=exports.detectResources=void 0;const t=require("./Resource");const r=require("@opentelemetry/api");const n=require("./utils");const o=async(e={})=>{const n=await Promise.all((e.detectors||[]).map((async n=>{try{const t=await n.detect(e);r.diag.debug(`${n.constructor.name} found resource.`,t);return t}catch(e){r.diag.debug(`${n.constructor.name} failed: ${e.message}`);return t.Resource.empty()}})));a(n);return n.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};exports.detectResources=o;const i=(e={})=>{var o;const i=((o=e.detectors)!==null&&o!==void 0?o:[]).map((o=>{try{const i=o.detect(e);let a;if((0,n.isPromiseLike)(i)){const e=async()=>{const e=await i;return e.attributes};a=new t.Resource({},e())}else{a=i}if(a.waitForAsyncAttributes){void a.waitForAsyncAttributes().then((()=>r.diag.debug(`${o.constructor.name} found resource.`,a)))}else{r.diag.debug(`${o.constructor.name} found resource.`,a)}return a}catch(e){r.diag.error(`${o.constructor.name} failed: ${e.message}`);return t.Resource.empty()}}));const s=i.reduce(((e,t)=>e.merge(t)),t.Resource.empty());if(s.waitForAsyncAttributes){void s.waitForAsyncAttributes().then((()=>{a(i)}))}return s};exports.detectResourcesSync=i;const a=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){const t=JSON.stringify(e.attributes,null,4);r.diag.verbose(t)}}))}},{"./Resource":322,"./utils":342,"@opentelemetry/api":19}],325:[function(require,e,exports){arguments[4][148][0].apply(exports,arguments)},{"..":332,dup:148}],326:[function(require,e,exports){arguments[4][149][0].apply(exports,arguments)},{"..":332,"@opentelemetry/api":19,"@opentelemetry/semantic-conventions":376,dup:149}],327:[function(require,e,exports){arguments[4][150][0].apply(exports,arguments)},{"./EnvDetectorSync":328,dup:150}],328:[function(require,e,exports){arguments[4][151][0].apply(exports,arguments)},{"../Resource":322,"@opentelemetry/api":19,"@opentelemetry/core":281,"@opentelemetry/semantic-conventions":376,dup:151}],329:[function(require,e,exports){arguments[4][152][0].apply(exports,arguments)},{"./NoopDetectorSync":330,dup:152}],330:[function(require,e,exports){arguments[4][153][0].apply(exports,arguments)},{"../Resource":322,dup:153}],331:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./BrowserDetector"),exports);(0,t.__exportStar)(require("./EnvDetector"),exports);(0,t.__exportStar)(require("./BrowserDetectorSync"),exports);(0,t.__exportStar)(require("./EnvDetectorSync"),exports)},{"./BrowserDetector":325,"./BrowserDetectorSync":326,"./EnvDetector":327,"./EnvDetectorSync":328,tslib:386}],332:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./Resource"),exports);(0,t.__exportStar)(require("./IResource"),exports);(0,t.__exportStar)(require("./platform"),exports);(0,t.__exportStar)(require("./types"),exports);(0,t.__exportStar)(require("./config"),exports);(0,t.__exportStar)(require("./detectors"),exports);(0,t.__exportStar)(require("./detect-resources"),exports)},{"./IResource":321,"./Resource":322,"./config":323,"./detect-resources":324,"./detectors":331,"./platform":340,"./types":341,tslib:386}],333:[function(require,e,exports){arguments[4][156][0].apply(exports,arguments)},{"../../detectors/NoopDetector":329,dup:156}],334:[function(require,e,exports){arguments[4][157][0].apply(exports,arguments)},{"../../detectors/NoopDetectorSync":330,dup:157}],335:[function(require,e,exports){arguments[4][158][0].apply(exports,arguments)},{"../../detectors/NoopDetector":329,dup:158}],336:[function(require,e,exports){arguments[4][159][0].apply(exports,arguments)},{"../../detectors/NoopDetectorSync":330,dup:159}],337:[function(require,e,exports){arguments[4][160][0].apply(exports,arguments)},{"../../detectors/NoopDetector":329,dup:160}],338:[function(require,e,exports){arguments[4][161][0].apply(exports,arguments)},{"../../detectors/NoopDetector":329,dup:161}],339:[function(require,e,exports){arguments[4][162][0].apply(exports,arguments)},{dup:162}],340:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./default-service-name"),exports);(0,t.__exportStar)(require("./HostDetector"),exports);(0,t.__exportStar)(require("./OSDetector"),exports);(0,t.__exportStar)(require("./HostDetectorSync"),exports);(0,t.__exportStar)(require("./OSDetectorSync"),exports);(0,t.__exportStar)(require("./ProcessDetector"),exports);(0,t.__exportStar)(require("./ProcessDetectorSync"),exports)},{"./HostDetector":333,"./HostDetectorSync":334,"./OSDetector":335,"./OSDetectorSync":336,"./ProcessDetector":337,"./ProcessDetectorSync":338,"./default-service-name":339,tslib:386}],341:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],342:[function(require,e,exports){arguments[4][165][0].apply(exports,arguments)},{dup:165}],343:[function(require,e,exports){arguments[4][214][0].apply(exports,arguments)},{".":360,"./MultiSpanProcessor":345,"./config":351,"./export/NoopSpanProcessor":356,"./platform":363,"./utility":369,"@opentelemetry/api":19,"@opentelemetry/core":281,"@opentelemetry/resources":332,dup:214}],344:[function(require,e,exports){arguments[4][75][0].apply(exports,arguments)},{dup:75}],345:[function(require,e,exports){arguments[4][216][0].apply(exports,arguments)},{"@opentelemetry/core":281,dup:216}],346:[function(require,e,exports){arguments[4][217][0].apply(exports,arguments)},{dup:217}],347:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Span=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("@opentelemetry/semantic-conventions");const o=require("./enums");class i{constructor(e,n,o,i,a,s,c=[],u,l){this.attributes={};this.links=[];this.events=[];this._droppedAttributesCount=0;this._droppedEventsCount=0;this._droppedLinksCount=0;this.status={code:t.SpanStatusCode.UNSET};this.endTime=[0,0];this._ended=false;this._duration=[-1,-1];this.name=o;this._spanContext=i;this.parentSpanId=s;this.kind=a;this.links=c;const p=Date.now();this._performanceStartTime=r.otperformance.now();this._performanceOffset=p-(this._performanceStartTime+(0,r.getTimeOrigin)());this._startTimeProvided=u!=null;this.startTime=this._getTime(u!==null&&u!==void 0?u:p);this.resource=e.resource;this.instrumentationLibrary=e.instrumentationLibrary;this._spanLimits=e.getSpanLimits();this._spanProcessor=e.getActiveSpanProcessor();this._spanProcessor.onStart(this,n);this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(e,n){if(n==null||this._isSpanEnded())return this;if(e.length===0){t.diag.warn(`Invalid attribute key: ${e}`);return this}if(!(0,r.isAttributeValue)(n)){t.diag.warn(`Invalid attribute value set for key: ${e}`);return this}if(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)){this._droppedAttributesCount++;return this}this.attributes[e]=this._truncateToSize(n);return this}setAttributes(e){for(const[t,r]of Object.entries(e)){this.setAttribute(t,r)}return this}addEvent(e,n,o){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0){t.diag.warn("No events allowed.");this._droppedEventsCount++;return this}if(this.events.length>=this._spanLimits.eventCountLimit){t.diag.warn("Dropping extra events.");this.events.shift();this._droppedEventsCount++}if((0,r.isTimeInput)(n)){if(!(0,r.isTimeInput)(o)){o=n}n=undefined}const i=(0,r.sanitizeAttributes)(n);this.events.push({name:e,attributes:i,time:this._getTime(o),droppedAttributesCount:0});return this}setStatus(e){if(this._isSpanEnded())return this;this.status=e;return this}updateName(e){if(this._isSpanEnded())return this;this.name=e;return this}end(e){if(this._isSpanEnded()){t.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=true;this.endTime=this._getTime(e);this._duration=(0,r.hrTimeDuration)(this.startTime,this.endTime);if(this._duration[0]<0){t.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime);this.endTime=this.startTime.slice();this._duration=[0,0]}this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e==="number"&&e<r.otperformance.now()){return(0,r.hrTime)(e+this._performanceOffset)}if(typeof e==="number"){return(0,r.millisToHrTime)(e)}if(e instanceof Date){return(0,r.millisToHrTime)(e.getTime())}if((0,r.isTimeInputHrTime)(e)){return e}if(this._startTimeProvided){return(0,r.millisToHrTime)(Date.now())}const t=r.otperformance.now()-this._performanceStartTime;return(0,r.addHrTimes)(this.startTime,(0,r.millisToHrTime)(t))}isRecording(){return this._ended===false}recordException(e,r){const i={};if(typeof e==="string"){i[n.SemanticAttributes.EXCEPTION_MESSAGE]=e}else if(e){if(e.code){i[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString()}else if(e.name){i[n.SemanticAttributes.EXCEPTION_TYPE]=e.name}if(e.message){i[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message}if(e.stack){i[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack}}if(i[n.SemanticAttributes.EXCEPTION_TYPE]||i[n.SemanticAttributes.EXCEPTION_MESSAGE]){this.addEvent(o.ExceptionEventName,i,r)}else{t.diag.warn(`Failed to record an exception ${e}`)}}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){t.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`)}return this._ended}_truncateToLimitUtil(e,t){if(e.length<=t){return e}return e.substr(0,t)}_truncateToSize(e){const r=this._attributeValueLengthLimit;if(r<=0){t.diag.warn(`Attribute value limit must be positive, got ${r}`);return e}if(typeof e==="string"){return this._truncateToLimitUtil(e,r)}if(Array.isArray(e)){return e.map((e=>typeof e==="string"?this._truncateToLimitUtil(e,r):e))}return e}}exports.Span=i},{"./enums":352,"@opentelemetry/api":19,"@opentelemetry/core":281,"@opentelemetry/semantic-conventions":376}],348:[function(require,e,exports){arguments[4][219][0].apply(exports,arguments)},{dup:219}],349:[function(require,e,exports){arguments[4][220][0].apply(exports,arguments)},{dup:220}],350:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tracer=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");const n=require("./Span");const o=require("./utility");const i=require("./platform");class a{constructor(e,t,r){this._tracerProvider=r;const n=(0,o.mergeConfig)(t);this._sampler=n.sampler;this._generalLimits=n.generalLimits;this._spanLimits=n.spanLimits;this._idGenerator=t.idGenerator||new i.RandomIdGenerator;this.resource=r.resource;this.instrumentationLibrary=e}startSpan(e,o={},i=t.context.active()){var a,s,c;if(o.root){i=t.trace.deleteSpan(i)}const u=t.trace.getSpan(i);if((0,r.isTracingSuppressed)(i)){t.diag.debug("Instrumentation suppressed, returning Noop Span");const e=t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);return e}const l=u===null||u===void 0?void 0:u.spanContext();const p=this._idGenerator.generateSpanId();let d;let f;let m;if(!l||!t.trace.isSpanContextValid(l)){d=this._idGenerator.generateTraceId()}else{d=l.traceId;f=l.traceState;m=l.spanId}const h=(a=o.kind)!==null&&a!==void 0?a:t.SpanKind.INTERNAL;const v=((s=o.links)!==null&&s!==void 0?s:[]).map((e=>({context:e.context,attributes:(0,r.sanitizeAttributes)(e.attributes)})));const _=(0,r.sanitizeAttributes)(o.attributes);const g=this._sampler.shouldSample(i,d,e,h,_,v);f=(c=g.traceState)!==null&&c!==void 0?c:f;const y=g.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE;const E={traceId:d,spanId:p,traceFlags:y,traceState:f};if(g.decision===t.SamplingDecision.NOT_RECORD){t.diag.debug("Recording is off, propagating context in a non-recording span");const e=t.trace.wrapSpanContext(E);return e}const T=new n.Span(this,i,e,E,h,m,v,o.startTime);const S=(0,r.sanitizeAttributes)(Object.assign(_,g.attributes));T.setAttributes(S);return T}startActiveSpan(e,r,n,o){let i;let a;let s;if(arguments.length<2){return}else if(arguments.length===2){s=r}else if(arguments.length===3){i=r;s=n}else{i=r;a=n;s=o}const c=a!==null&&a!==void 0?a:t.context.active();const u=this.startSpan(e,i,c);const l=t.trace.setSpan(c,u);return t.context.with(l,s,undefined,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}exports.Tracer=a},{"./Span":347,"./platform":363,"./utility":369,"@opentelemetry/api":19,"@opentelemetry/core":281}],351:[function(require,e,exports){arguments[4][222][0].apply(exports,arguments)},{"./sampler/AlwaysOffSampler":364,"./sampler/AlwaysOnSampler":365,"./sampler/ParentBasedSampler":366,"./sampler/TraceIdRatioBasedSampler":367,"@opentelemetry/api":19,"@opentelemetry/core":281,dup:222}],352:[function(require,e,exports){arguments[4][223][0].apply(exports,arguments)},{dup:223}],353:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BatchSpanProcessorBase=void 0;const t=require("@opentelemetry/api");const r=require("@opentelemetry/core");class n{constructor(e,n){this._exporter=e;this._finishedSpans=[];this._droppedSpansCount=0;const o=(0,r.getEnv)();this._maxExportBatchSize=typeof(n===null||n===void 0?void 0:n.maxExportBatchSize)==="number"?n.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE;this._maxQueueSize=typeof(n===null||n===void 0?void 0:n.maxQueueSize)==="number"?n.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE;this._scheduledDelayMillis=typeof(n===null||n===void 0?void 0:n.scheduledDelayMillis)==="number"?n.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY;this._exportTimeoutMillis=typeof(n===null||n===void 0?void 0:n.exportTimeoutMillis)==="number"?n.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT;this._shutdownOnce=new r.BindOnceFuture(this._shutdown,this);if(this._maxExportBatchSize>this._maxQueueSize){t.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize");this._maxExportBatchSize=this._maxQueueSize}}forceFlush(){if(this._shutdownOnce.isCalled){return this._shutdownOnce.promise}return this._flushAll()}onStart(e,t){}onEnd(e){if(this._shutdownOnce.isCalled){return}if((e.spanContext().traceFlags&t.TraceFlags.SAMPLED)===0){return}this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){if(this._droppedSpansCount===0){t.diag.debug("maxQueueSize reached, dropping spans")}this._droppedSpansCount++;return}if(this._droppedSpansCount>0){t.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`);this._droppedSpansCount=0}this._finishedSpans.push(e);this._maybeStartTimer()}_flushAll(){return new Promise(((e,t)=>{const r=[];const n=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let e=0,t=n;e<t;e++){r.push(this._flushOneBatch())}Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){this._clearTimer();if(this._finishedSpans.length===0){return Promise.resolve()}return new Promise(((e,n)=>{const o=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with((0,r.suppressTracing)(t.context.active()),(()=>{const t=this._finishedSpans.splice(0,this._maxExportBatchSize);const i=()=>this._exporter.export(t,(t=>{var i;clearTimeout(o);if(t.code===r.ExportResultCode.SUCCESS){e()}else{n((i=t.error)!==null&&i!==void 0?i:new Error("BatchSpanProcessor: span export failed"))}}));const a=t.map((e=>e.resource)).filter((e=>e.asyncAttributesPending));if(a.length===0){i()}else{Promise.all(a.map((e=>{var t;return(t=e.waitForAsyncAttributes)===null||t===void 0?void 0:t.call(e)}))).then(i,(e=>{(0,r.globalErrorHandler)(e);n(e)}))}}))}))}_maybeStartTimer(){if(this._timer!==undefined)return;this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{if(this._finishedSpans.length>0){this._clearTimer();this._maybeStartTimer()}})).catch((e=>{(0,r.globalErrorHandler)(e)}))}),this._scheduledDelayMillis);(0,r.unrefTimer)(this._timer)}_clearTimer(){if(this._timer!==undefined){clearTimeout(this._timer);this._timer=undefined}}}exports.BatchSpanProcessorBase=n},{"@opentelemetry/api":19,"@opentelemetry/core":281}],354:[function(require,e,exports){arguments[4][225][0].apply(exports,arguments)},{"@opentelemetry/core":281,dup:225}],355:[function(require,e,exports){arguments[4][226][0].apply(exports,arguments)},{"@opentelemetry/core":281,dup:226}],356:[function(require,e,exports){arguments[4][227][0].apply(exports,arguments)},{dup:227}],357:[function(require,e,exports){arguments[4][228][0].apply(exports,arguments)},{dup:228}],358:[function(require,e,exports){arguments[4][229][0].apply(exports,arguments)},{"@opentelemetry/api":19,"@opentelemetry/core":281,dup:229}],359:[function(require,e,exports){arguments[4][230][0].apply(exports,arguments)},{dup:230}],360:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./Tracer"),exports);(0,t.__exportStar)(require("./BasicTracerProvider"),exports);(0,t.__exportStar)(require("./platform"),exports);(0,t.__exportStar)(require("./export/ConsoleSpanExporter"),exports);(0,t.__exportStar)(require("./export/InMemorySpanExporter"),exports);(0,t.__exportStar)(require("./export/ReadableSpan"),exports);(0,t.__exportStar)(require("./export/SimpleSpanProcessor"),exports);(0,t.__exportStar)(require("./export/SpanExporter"),exports);(0,t.__exportStar)(require("./export/NoopSpanProcessor"),exports);(0,t.__exportStar)(require("./sampler/AlwaysOffSampler"),exports);(0,t.__exportStar)(require("./sampler/AlwaysOnSampler"),exports);(0,t.__exportStar)(require("./sampler/ParentBasedSampler"),exports);(0,t.__exportStar)(require("./sampler/TraceIdRatioBasedSampler"),exports);(0,t.__exportStar)(require("./Sampler"),exports);(0,t.__exportStar)(require("./Span"),exports);(0,t.__exportStar)(require("./SpanProcessor"),exports);(0,t.__exportStar)(require("./TimedEvent"),exports);(0,t.__exportStar)(require("./types"),exports);(0,t.__exportStar)(require("./IdGenerator"),exports)},{"./BasicTracerProvider":343,"./IdGenerator":344,"./Sampler":346,"./Span":347,"./SpanProcessor":348,"./TimedEvent":349,"./Tracer":350,"./export/ConsoleSpanExporter":354,"./export/InMemorySpanExporter":355,"./export/NoopSpanProcessor":356,"./export/ReadableSpan":357,"./export/SimpleSpanProcessor":358,"./export/SpanExporter":359,"./platform":363,"./sampler/AlwaysOffSampler":364,"./sampler/AlwaysOnSampler":365,"./sampler/ParentBasedSampler":366,"./sampler/TraceIdRatioBasedSampler":367,"./types":368,tslib:386}],361:[function(require,e,exports){arguments[4][232][0].apply(exports,arguments)},{dup:232}],362:[function(require,e,exports){arguments[4][233][0].apply(exports,arguments)},{"../../../export/BatchSpanProcessorBase":353,dup:233}],363:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./export/BatchSpanProcessor"),exports);(0,t.__exportStar)(require("./RandomIdGenerator"),exports)},{"./RandomIdGenerator":361,"./export/BatchSpanProcessor":362,tslib:386}],364:[function(require,e,exports){arguments[4][235][0].apply(exports,arguments)},{"../Sampler":346,dup:235}],365:[function(require,e,exports){arguments[4][236][0].apply(exports,arguments)},{"../Sampler":346,dup:236}],366:[function(require,e,exports){arguments[4][237][0].apply(exports,arguments)},{"./AlwaysOffSampler":364,"./AlwaysOnSampler":365,"@opentelemetry/api":19,"@opentelemetry/core":281,dup:237}],367:[function(require,e,exports){arguments[4][238][0].apply(exports,arguments)},{"../Sampler":346,"@opentelemetry/api":19,dup:238}],368:[function(require,e,exports){arguments[4][50][0].apply(exports,arguments)},{dup:50}],369:[function(require,e,exports){arguments[4][240][0].apply(exports,arguments)},{"./config":351,"@opentelemetry/core":281,dup:240}],370:[function(require,e,exports){arguments[4][241][0].apply(exports,arguments)},{"@opentelemetry/api":19,dup:241}],371:[function(require,e,exports){arguments[4][242][0].apply(exports,arguments)},{"./StackContextManager":370,"@opentelemetry/sdk-trace-base":360,dup:242}],372:[function(require,e,exports){arguments[4][243][0].apply(exports,arguments)},{dup:243}],373:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./WebTracerProvider"),exports);(0,t.__exportStar)(require("./StackContextManager"),exports);(0,t.__exportStar)(require("./enums/PerformanceTimingNames"),exports);(0,t.__exportStar)(require("./types"),exports);(0,t.__exportStar)(require("./utils"),exports);(0,t.__exportStar)(require("@opentelemetry/sdk-trace-base"),exports)},{"./StackContextManager":370,"./WebTracerProvider":371,"./enums/PerformanceTimingNames":372,"./types":374,"./utils":375,"@opentelemetry/sdk-trace-base":360,tslib:386}],374:[function(require,e,exports){arguments[4][245][0].apply(exports,arguments)},{"./enums/PerformanceTimingNames":372,dup:245}],375:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shouldPropagateTraceHeaders=exports.getElementXPath=exports.normalizeUrl=exports.parseUrl=exports.getResource=exports.sortResources=exports.addSpanNetworkEvents=exports.addSpanNetworkEvent=exports.hasKey=void 0;const t=require("./enums/PerformanceTimingNames");const r=require("@opentelemetry/core");const n=require("@opentelemetry/semantic-conventions");let o;function i(){if(!o){o=document.createElement("a")}return o}function a(e,t){return t in e}exports.hasKey=a;function s(e,t,r){if(a(r,t)&&typeof r[t]==="number"){e.addEvent(t,r[t]);return e}return undefined}exports.addSpanNetworkEvent=s;function c(e,r){s(e,t.PerformanceTimingNames.FETCH_START,r);s(e,t.PerformanceTimingNames.DOMAIN_LOOKUP_START,r);s(e,t.PerformanceTimingNames.DOMAIN_LOOKUP_END,r);s(e,t.PerformanceTimingNames.CONNECT_START,r);if(a(r,"name")&&r["name"].startsWith("https:")){s(e,t.PerformanceTimingNames.SECURE_CONNECTION_START,r)}s(e,t.PerformanceTimingNames.CONNECT_END,r);s(e,t.PerformanceTimingNames.REQUEST_START,r);s(e,t.PerformanceTimingNames.RESPONSE_START,r);s(e,t.PerformanceTimingNames.RESPONSE_END,r);const o=r[t.PerformanceTimingNames.ENCODED_BODY_SIZE];if(o!==undefined){e.setAttribute(n.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH,o)}const i=r[t.PerformanceTimingNames.DECODED_BODY_SIZE];if(i!==undefined&&o!==i){e.setAttribute(n.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,i)}}exports.addSpanNetworkEvents=c;function u(e){return e.slice().sort(((e,r)=>{const n=e[t.PerformanceTimingNames.FETCH_START];const o=r[t.PerformanceTimingNames.FETCH_START];if(n>o){return 1}else if(n<o){return-1}return 0}))}exports.sortResources=u;function l(e,r,n,o,i=new WeakSet,a){const s=f(e);e=s.toString();const c=d(e,r,n,o,i,a);if(c.length===0){return{mainRequest:undefined}}if(c.length===1){return{mainRequest:c[0]}}const l=u(c);if(s.origin!==location.origin&&l.length>1){let e=l[0];let r=p(l,e[t.PerformanceTimingNames.RESPONSE_END],n);const o=e[t.PerformanceTimingNames.RESPONSE_END];const i=r[t.PerformanceTimingNames.FETCH_START];if(i<o){r=e;e=undefined}return{corsPreFlightRequest:e,mainRequest:r}}else{return{mainRequest:c[0]}}}exports.getResource=l;function p(e,n,o){const i=(0,r.hrTimeToNanoseconds)(o);const a=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n));let s=e[1];let c;const u=e.length;for(let n=1;n<u;n++){const o=e[n];const u=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(o[t.PerformanceTimingNames.FETCH_START]));const l=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(o[t.PerformanceTimingNames.RESPONSE_END]));const p=i-l;if(u>=a&&(!c||p<c)){c=p;s=o}}return s}function d(e,n,o,i,a,s){const c=(0,r.hrTimeToNanoseconds)(n);const u=(0,r.hrTimeToNanoseconds)(o);let l=i.filter((n=>{const o=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n[t.PerformanceTimingNames.FETCH_START]));const i=(0,r.hrTimeToNanoseconds)((0,r.timeInputToHrTime)(n[t.PerformanceTimingNames.RESPONSE_END]));return n.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&n.name===e&&o>=c&&i<=u}));if(l.length>0){l=l.filter((e=>!a.has(e)))}return l}function f(e){if(typeof URL==="function"){return new URL(e,typeof document!=="undefined"?document.baseURI:typeof location!=="undefined"?location.href:undefined)}const t=i();t.href=e;return t}exports.parseUrl=f;function m(e){const t=f(e);return t.href}exports.normalizeUrl=m;function h(e,t){if(e.nodeType===Node.DOCUMENT_NODE){return"/"}const r=_(e,t);if(t&&r.indexOf("@id")>0){return r}let n="";if(e.parentNode){n+=h(e.parentNode,false)}n+=r;return n}exports.getElementXPath=h;function v(e){if(!e.parentNode){return 0}const t=[e.nodeType];if(e.nodeType===Node.CDATA_SECTION_NODE){t.push(Node.TEXT_NODE)}let r=Array.from(e.parentNode.childNodes);r=r.filter((r=>{const n=r.localName;return t.indexOf(r.nodeType)>=0&&n===e.localName}));if(r.length>=1){return r.indexOf(e)+1}return 0}function _(e,t){const r=e.nodeType;const n=v(e);let o="";if(r===Node.ELEMENT_NODE){const r=e.getAttribute("id");if(t&&r){return`//*[@id="${r}"]`}o=e.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE){o="text()"}else if(r===Node.COMMENT_NODE){o="comment()"}else{return""}if(o&&n>1){return`/${o}[${n}]`}return`/${o}`}function g(e,t){let n=t||[];if(typeof n==="string"||n instanceof RegExp){n=[n]}const o=f(e);if(o.origin===location.origin){return true}else{return n.some((t=>(0,r.urlMatches)(e,t)))}}exports.shouldPropagateTraceHeaders=g},{"./enums/PerformanceTimingNames":372,"@opentelemetry/core":281,"@opentelemetry/semantic-conventions":376}],376:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./trace"),exports);(0,t.__exportStar)(require("./resource"),exports)},{"./resource":378,"./trace":380,tslib:386}],377:[function(require,e,exports){arguments[4][248][0].apply(exports,arguments)},{dup:248}],378:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./SemanticResourceAttributes"),exports)},{"./SemanticResourceAttributes":377,tslib:386}],379:[function(require,e,exports){arguments[4][250][0].apply(exports,arguments)},{dup:250}],380:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const t=require("tslib");(0,t.__exportStar)(require("./SemanticAttributes"),exports)},{"./SemanticAttributes":379,tslib:386}],381:[function(require,e,exports){(function(t){(function(){"use strict";function r(e){if(typeof e!=="string"){throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}}function n(e,t){var r="";var n=0;var o=-1;var i=0;var a;for(var s=0;s<=e.length;++s){if(s<e.length)a=e.charCodeAt(s);else if(a===47)break;else a=47;if(a===47){if(o===s-1||i===1){}else if(o!==s-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){if(c===-1){r="";n=0}else{r=r.slice(0,c);n=r.length-1-r.lastIndexOf("/")}o=s;i=0;continue}}else if(r.length===2||r.length===1){r="";n=0;o=s;i=0;continue}}if(t){if(r.length>0)r+="/..";else r="..";n=2}}else{if(r.length>0)r+="/"+e.slice(o+1,s);else r=e.slice(o+1,s);n=s-o-1}o=s;i=0}else if(a===46&&i!==-1){++i}else{i=-1}}return r}function o(e,t){var r=t.dir||t.root;var n=t.base||(t.name||"")+(t.ext||"");if(!r){return n}if(r===t.root){return r+n}return r+e+n}var i={resolve:function e(){var o="";var i=false;var a;for(var s=arguments.length-1;s>=-1&&!i;s--){var c;if(s>=0)c=arguments[s];else{if(a===undefined)a=t.cwd();c=a}r(c);if(c.length===0){continue}o=c+"/"+o;i=c.charCodeAt(0)===47}o=n(o,!i);if(i){if(o.length>0)return"/"+o;else return"/"}else if(o.length>0){return o}else{return"."}},normalize:function e(t){r(t);if(t.length===0)return".";var o=t.charCodeAt(0)===47;var i=t.charCodeAt(t.length-1)===47;t=n(t,!o);if(t.length===0&&!o)t=".";if(t.length>0&&i)t+="/";if(o)return"/"+t;return t},isAbsolute:function e(t){r(t);return t.length>0&&t.charCodeAt(0)===47},join:function e(){if(arguments.length===0)return".";var t;for(var n=0;n<arguments.length;++n){var o=arguments[n];r(o);if(o.length>0){if(t===undefined)t=o;else t+="/"+o}}if(t===undefined)return".";return i.normalize(t)},relative:function e(t,n){r(t);r(n);if(t===n)return"";t=i.resolve(t);n=i.resolve(n);if(t===n)return"";var o=1;for(;o<t.length;++o){if(t.charCodeAt(o)!==47)break}var a=t.length;var s=a-o;var c=1;for(;c<n.length;++c){if(n.charCodeAt(c)!==47)break}var u=n.length;var l=u-c;var p=s<l?s:l;var d=-1;var f=0;for(;f<=p;++f){if(f===p){if(l>p){if(n.charCodeAt(c+f)===47){return n.slice(c+f+1)}else if(f===0){return n.slice(c+f)}}else if(s>p){if(t.charCodeAt(o+f)===47){d=f}else if(f===0){d=0}}break}var m=t.charCodeAt(o+f);var h=n.charCodeAt(c+f);if(m!==h)break;else if(m===47)d=f}var v="";for(f=o+d+1;f<=a;++f){if(f===a||t.charCodeAt(f)===47){if(v.length===0)v+="..";else v+="/.."}}if(v.length>0)return v+n.slice(c+d);else{c+=d;if(n.charCodeAt(c)===47)++c;return n.slice(c)}},_makeLong:function e(t){return t},dirname:function e(t){r(t);if(t.length===0)return".";var n=t.charCodeAt(0);var o=n===47;var i=-1;var a=true;for(var s=t.length-1;s>=1;--s){n=t.charCodeAt(s);if(n===47){if(!a){i=s;break}}else{a=false}}if(i===-1)return o?"/":".";if(o&&i===1)return"//";return t.slice(0,i)},basename:function e(t,n){if(n!==undefined&&typeof n!=="string")throw new TypeError('"ext" argument must be a string');r(t);var o=0;var i=-1;var a=true;var s;if(n!==undefined&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var c=n.length-1;var u=-1;for(s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(l===47){if(!a){o=s+1;break}}else{if(u===-1){a=false;u=s+1}if(c>=0){if(l===n.charCodeAt(c)){if(--c===-1){i=s}}else{c=-1;i=u}}}}if(o===i)i=u;else if(i===-1)i=t.length;return t.slice(o,i)}else{for(s=t.length-1;s>=0;--s){if(t.charCodeAt(s)===47){if(!a){o=s+1;break}}else if(i===-1){a=false;i=s+1}}if(i===-1)return"";return t.slice(o,i)}},extname:function e(t){r(t);var n=-1;var o=0;var i=-1;var a=true;var s=0;for(var c=t.length-1;c>=0;--c){var u=t.charCodeAt(c);if(u===47){if(!a){o=c+1;break}continue}if(i===-1){a=false;i=c+1}if(u===46){if(n===-1)n=c;else if(s!==1)s=1}else if(n!==-1){s=-1}}if(n===-1||i===-1||s===0||s===1&&n===i-1&&n===o+1){return""}return t.slice(n,i)},format:function e(t){if(t===null||typeof t!=="object"){throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t)}return o("/",t)},parse:function e(t){r(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var o=t.charCodeAt(0);var i=o===47;var a;if(i){n.root="/";a=1}else{a=0}var s=-1;var c=0;var u=-1;var l=true;var p=t.length-1;var d=0;for(;p>=a;--p){o=t.charCodeAt(p);if(o===47){if(!l){c=p+1;break}continue}if(u===-1){l=false;u=p+1}if(o===46){if(s===-1)s=p;else if(d!==1)d=1}else if(s!==-1){d=-1}}if(s===-1||u===-1||d===0||d===1&&s===u-1&&s===c+1){if(u!==-1){if(c===0&&i)n.base=n.name=t.slice(1,u);else n.base=n.name=t.slice(c,u)}}else{if(c===0&&i){n.name=t.slice(1,s);n.base=t.slice(1,u)}else{n.name=t.slice(c,s);n.base=t.slice(c,u)}n.ext=t.slice(s,u)}if(c>0)n.dir=t.slice(0,c-1);else if(i)n.dir="/";return n},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i;e.exports=i}).call(this)}).call(this,require("_process"))},{_process:382}],382:[function(require,e,exports){var t=e.exports={};var r;var n;function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=o}}catch(e){r=o}try{if(typeof clearTimeout==="function"){n=clearTimeout}else{n=i}}catch(e){n=i}})();function a(e){if(r===setTimeout){return setTimeout(e,0)}if((r===o||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function s(e){if(n===clearTimeout){return clearTimeout(e)}if((n===i||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var c=[];var u=false;var l;var p=-1;function d(){if(!u||!l){return}u=false;if(l.length){c=l.concat(c)}else{p=-1}if(c.length){f()}}function f(){if(u){return}var e=a(d);u=true;var t=c.length;while(t){l=c;c=[];while(++p<t){if(l){l[p].run()}}p=-1;t=c.length}l=null;u=false;s(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new m(e,t));if(c.length===1&&!u){a(f)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=true;t.env={};t.argv=[];t.version="";t.versions={};function h(){}t.on=h;t.addListener=h;t.once=h;t.off=h;t.removeListener=h;t.removeAllListeners=h;t.emit=h;t.prependListener=h;t.prependOnceListener=h;t.listeners=function(e){return[]};t.binding=function(e){throw new Error("process.binding is not supported")};t.cwd=function(){return"/"};t.chdir=function(e){throw new Error("process.chdir is not supported")};t.umask=function(){return 0}},{}],383:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(){t=Object.assign||function e(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i))t[i]=r[i]}return t};return t.apply(this,arguments)};function r(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++){if(t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o]))r[n[o]]=e[n[o]]}return r}function n(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)i.push(o.value)}catch(e){a={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return i}function i(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++){if(i||!(n in t)){if(!i)i=Array.prototype.slice.call(t,0,n);i[n]=t[n]}}return e.concat(i||Array.prototype.slice.call(t))}var a;(function(e){e[e["Document"]=0]="Document";e[e["DocumentType"]=1]="DocumentType";e[e["Element"]=2]="Element";e[e["Text"]=3]="Text";e[e["CDATA"]=4]="CDATA";e[e["Comment"]=5]="Comment"})(a||(a={}));function s(e){return e.nodeType===e.ELEMENT_NODE}function c(e){var t;var r=(t=e)===null||t===void 0?void 0:t.host;return Boolean(r&&r.shadowRoot&&r.shadowRoot===e)}function u(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn;var a=o||"";if(t[r.toLowerCase()]||t[n]){if(i){a=i(a)}else{a="*".repeat(a.length)}}return a}var l="__rrweb_original__";function p(e){var t=e.getContext("2d");if(!t)return true;var r=50;for(var n=0;n<e.width;n+=r){for(var o=0;o<e.height;o+=r){var i=t.getImageData;var a=l in i?i[l]:i;var s=new Uint32Array(a.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(s.some((function(e){return e!==0})))return false}}return true}var d=1;var f=new RegExp("[^a-z0-9-_:]");var m=-2;function h(){return d++}function v(e){if(e instanceof HTMLFormElement){return"form"}var t=e.tagName.toLowerCase().trim();if(f.test(t)){return"div"}return t}function _(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(g).join(""):null}catch(e){return null}}function g(e){var t=e.cssText;if(y(e)){try{t=_(e.styleSheet)||t}catch(e){}}return t}function y(e){return"styleSheet"in e}function E(e){return e.cssRules?Array.from(e.cssRules).map((function(e){return e.cssText||""})).join(""):""}function T(e){var t="";if(e.indexOf("//")>-1){t=e.split("/").slice(0,3).join("/")}else{t=e.split("/")[0]}t=t.split("?")[0];return t}var S;var b;var O=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm;var A=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/;var P=/^(data:)([^,]*),(.*)/i;function N(e,t){return(e||"").replace(O,(function(e,r,n,o,i,a){var s=n||i||a;var c=r||o||"";if(!s){return e}if(!A.test(s)){return"url("+c+s+c+")"}if(P.test(s)){return"url("+c+s+c+")"}if(s[0]==="/"){return"url("+c+(T(t)+s)+c+")"}var u=t.split("/");var l=s.split("/");u.pop();for(var p=0,d=l;p<d.length;p++){var f=d[p];if(f==="."){continue}else if(f===".."){u.pop()}else{u.push(f)}}return"url("+c+u.join("/")+c+")"}))}var R=/^[^ \t\n\r\u000c]+/;var w=/^[, \t\n\r\u000c]+/;function M(e,t){if(t.trim()===""){return t}var r=0;function n(e){var n;var o=e.exec(t.substring(r));if(o){n=o[0];r+=n.length;return n}return""}var o=[];while(true){n(w);if(r>=t.length){break}var i=n(R);if(i.slice(-1)===","){i=I(e,i.substring(0,i.length-1));o.push(i)}else{var a="";i=I(e,i);var s=false;while(true){var c=t.charAt(r);if(c===""){o.push((i+a).trim());break}else if(!s){if(c===","){r+=1;o.push((i+a).trim());break}else if(c==="("){s=true}}else{if(c===")"){s=false}}a+=c;r+=1}}}return o.join(", ")}function I(e,t){if(!t||t.trim()===""){return t}var r=e.createElement("a");r.href=t;return r.href}function C(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function x(){var e=document.createElement("a");e.href="";return e.href}function L(e,t,r,n){if(r==="src"||r==="href"&&n){return I(e,n)}else if(r==="xlink:href"&&n&&n[0]!=="#"){return I(e,n)}else if(r==="background"&&n&&(t==="table"||t==="td"||t==="th")){return I(e,n)}else if(r==="srcset"&&n){return M(e,n)}else if(r==="style"&&n){return N(n,x())}else if(t==="object"&&r==="data"&&n){return I(e,n)}else{return n}}function D(e,t,r){if(typeof t==="string"){if(e.classList.contains(t)){return true}}else{for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o)){return true}}}if(r){return e.matches(r)}return false}function k(e,t,r){if(!e){return false}if(e.nodeType===e.ELEMENT_NODE){if(typeof t==="string"){if(e.classList.contains(t)){return true}}else{for(var n=0;n<e.classList.length;n++){var o=e.classList[n];if(t.test(o)){return true}}}if(r){if(e.matches(r)){return true}}return k(e.parentNode,t,r)}if(e.nodeType===e.TEXT_NODE){return k(e.parentNode,t,r)}return k(e.parentNode,t,r)}function j(e,t,r){var n=e.contentWindow;if(!n){return}var o=false;var i;try{i=n.document.readyState}catch(e){return}if(i!=="complete"){var a=setTimeout((function(){if(!o){t();o=true}}),r);e.addEventListener("load",(function(){clearTimeout(a);o=true;t()}));return}var s="about:blank";if(n.location.href!==s||e.src===s||e.src===""){setTimeout(t,0);return}e.addEventListener("load",t)}function B(e,t){var r;var n=t.doc,o=t.blockClass,i=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,l=t.inlineStylesheet,d=t.maskInputOptions,f=d===void 0?{}:d,m=t.maskTextFn,h=t.maskInputFn,g=t.dataURLOptions,y=g===void 0?{}:g,T=t.inlineImages,O=t.recordCanvas,A=t.keepIframeSrcFn;var P;if(n.__sn){var R=n.__sn.id;P=R===1?undefined:R}switch(e.nodeType){case e.DOCUMENT_NODE:if(e.compatMode!=="CSS1Compat"){return{type:a.Document,childNodes:[],compatMode:e.compatMode,rootId:P}}else{return{type:a.Document,childNodes:[],rootId:P}}case e.DOCUMENT_TYPE_NODE:return{type:a.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:P};case e.ELEMENT_NODE:var w=D(e,o,i);var M=v(e);var I={};for(var j=0,B=Array.from(e.attributes);j<B.length;j++){var U=B[j],F=U.name,G=U.value;I[F]=L(n,M,F,G)}if(M==="link"&&l){var V=Array.from(n.styleSheets).find((function(t){return t.href===e.href}));var H=null;if(V){H=_(V)}if(H){delete I.rel;delete I.href;I._cssText=N(H,V.href)}}if(M==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var H=_(e.sheet);if(H){I._cssText=N(H,x())}}if(M==="input"||M==="textarea"||M==="select"){var G=e.value;if(I.type!=="radio"&&I.type!=="checkbox"&&I.type!=="submit"&&I.type!=="button"&&G){I.value=u({type:I.type,tagName:M,value:G,maskInputOptions:f,maskInputFn:h})}else if(e.checked){I.checked=e.checked}}if(M==="option"){if(e.selected&&!f["select"]){I.selected=true}else{delete I.selected}}if(M==="canvas"&&O){if(e.__context==="2d"){if(!p(e)){I.rr_dataURL=e.toDataURL(y.type,y.quality)}}else if(!("__context"in e)){var X=e.toDataURL(y.type,y.quality);var z=document.createElement("canvas");z.width=e.width;z.height=e.height;var W=z.toDataURL(y.type,y.quality);if(X!==W){I.rr_dataURL=X}}}if(M==="img"&&T){if(!S){S=n.createElement("canvas");b=S.getContext("2d")}var K=e;var Z=K.crossOrigin;K.crossOrigin="anonymous";var Y=function(){try{S.width=K.naturalWidth;S.height=K.naturalHeight;b.drawImage(K,0,0);I.rr_dataURL=S.toDataURL(y.type,y.quality)}catch(e){console.warn("Cannot inline img src="+K.currentSrc+"! Error: "+e)}Z?I.crossOrigin=Z:delete I.crossOrigin};if(K.complete&&K.naturalWidth!==0)Y();else K.onload=Y}if(M==="audio"||M==="video"){I.rr_mediaState=e.paused?"paused":"played";I.rr_mediaCurrentTime=e.currentTime}if(e.scrollLeft){I.rr_scrollLeft=e.scrollLeft}if(e.scrollTop){I.rr_scrollTop=e.scrollTop}if(w){var q=e.getBoundingClientRect(),Q=q.width,J=q.height;I={class:I["class"],rr_width:Q+"px",rr_height:J+"px"}}if(M==="iframe"&&!A(I.src)){if(!e.contentDocument){I.rr_src=I.src}delete I.src}return{type:a.Element,tagName:M,attributes:I,childNodes:[],isSVG:C(e)||undefined,needBlock:w,rootId:P};case e.TEXT_NODE:var ee=e.parentNode&&e.parentNode.tagName;var te=e.textContent;var re=ee==="STYLE"?true:undefined;var ne=ee==="SCRIPT"?true:undefined;if(re&&te){try{if(e.nextSibling||e.previousSibling){}else if((r=e.parentNode.sheet)===null||r===void 0?void 0:r.cssRules){te=E(e.parentNode.sheet)}}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}te=N(te,x())}if(ne){te="SCRIPT_PLACEHOLDER"}if(!re&&!ne&&k(e,s,c)&&te){te=m?m(te):te.replace(/[\S]/g,"*")}return{type:a.Text,textContent:te||"",isStyle:re,rootId:P};case e.CDATA_SECTION_NODE:return{type:a.CDATA,textContent:"",rootId:P};case e.COMMENT_NODE:return{type:a.Comment,textContent:e.textContent||"",rootId:P};default:return false}}function U(e){if(e===undefined){return""}else{return e.toLowerCase()}}function F(e,t){if(t.comment&&e.type===a.Comment){return true}else if(e.type===a.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href==="string"&&e.attributes.href.endsWith(".js"))){return true}else if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(U(e.attributes.name).match(/^msapplication-tile(image|color)$/)||U(e.attributes.name)==="application-name"||U(e.attributes.rel)==="icon"||U(e.attributes.rel)==="apple-touch-icon"||U(e.attributes.rel)==="shortcut icon"))){return true}else if(e.tagName==="meta"){if(t.headMetaDescKeywords&&U(e.attributes.name).match(/^description|keywords$/)){return true}else if(t.headMetaSocial&&(U(e.attributes.property).match(/^(og|twitter|fb):/)||U(e.attributes.name).match(/^(og|twitter):/)||U(e.attributes.name)==="pinterest")){return true}else if(t.headMetaRobots&&(U(e.attributes.name)==="robots"||U(e.attributes.name)==="googlebot"||U(e.attributes.name)==="bingbot")){return true}else if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==undefined){return true}else if(t.headMetaAuthorship&&(U(e.attributes.name)==="author"||U(e.attributes.name)==="generator"||U(e.attributes.name)==="framework"||U(e.attributes.name)==="publisher"||U(e.attributes.name)==="progid"||U(e.attributes.property).match(/^article:/)||U(e.attributes.property).match(/^product:/))){return true}else if(t.headMetaVerification&&(U(e.attributes.name)==="google-site-verification"||U(e.attributes.name)==="yandex-verification"||U(e.attributes.name)==="csrf-token"||U(e.attributes.name)==="p:domain_verify"||U(e.attributes.name)==="verify-v1"||U(e.attributes.name)==="verification"||U(e.attributes.name)==="shopify-checkout-api-token")){return true}}}return false}function G(e,t){var r=t.doc,n=t.map,o=t.blockClass,i=t.blockSelector,u=t.maskTextClass,l=t.maskTextSelector,p=t.skipChild,d=p===void 0?false:p,f=t.inlineStylesheet,v=f===void 0?true:f,_=t.maskInputOptions,g=_===void 0?{}:_,y=t.maskTextFn,E=t.maskInputFn,T=t.slimDOMOptions,S=t.dataURLOptions,b=S===void 0?{}:S,O=t.inlineImages,A=O===void 0?false:O,P=t.recordCanvas,N=P===void 0?false:P,R=t.onSerialize,w=t.onIframeLoad,M=t.iframeLoadTimeout,I=M===void 0?5e3:M,C=t.keepIframeSrcFn,x=C===void 0?function(){return false}:C;var L=t.preserveWhiteSpace,D=L===void 0?true:L;var k=B(e,{doc:r,blockClass:o,blockSelector:i,maskTextClass:u,maskTextSelector:l,inlineStylesheet:v,maskInputOptions:g,maskTextFn:y,maskInputFn:E,dataURLOptions:b,inlineImages:A,recordCanvas:N,keepIframeSrcFn:x});if(!k){console.warn(e,"not serialized");return null}var U;if("__sn"in e){U=e.__sn.id}else if(F(k,T)||!D&&k.type===a.Text&&!k.isStyle&&!k.textContent.replace(/^\s+|\s+$/gm,"").length){U=m}else{U=h()}var V=Object.assign(k,{id:U});e.__sn=V;if(U===m){return null}n[U]=e;if(R){R(e)}var H=!d;if(V.type===a.Element){H=H&&!V.needBlock;delete V.needBlock;if(e.shadowRoot)V.isShadowHost=true}if((V.type===a.Document||V.type===a.Element)&&H){if(T.headWhitespace&&k.type===a.Element&&k.tagName==="head"){D=false}var X={doc:r,map:n,blockClass:o,blockSelector:i,maskTextClass:u,maskTextSelector:l,skipChild:d,inlineStylesheet:v,maskInputOptions:g,maskTextFn:y,maskInputFn:E,slimDOMOptions:T,dataURLOptions:b,inlineImages:A,recordCanvas:N,preserveWhiteSpace:D,onSerialize:R,onIframeLoad:w,iframeLoadTimeout:I,keepIframeSrcFn:x};for(var z=0,W=Array.from(e.childNodes);z<W.length;z++){var K=W[z];var Z=G(K,X);if(Z){V.childNodes.push(Z)}}if(s(e)&&e.shadowRoot){for(var Y=0,q=Array.from(e.shadowRoot.childNodes);Y<q.length;Y++){var K=q[Y];var Z=G(K,X);if(Z){Z.isShadow=true;V.childNodes.push(Z)}}}}if(e.parentNode&&c(e.parentNode)){V.isShadow=true}if(V.type===a.Element&&V.tagName==="iframe"){j(e,(function(){var t=e.contentDocument;if(t&&w){var r=G(t,{doc:t,map:n,blockClass:o,blockSelector:i,maskTextClass:u,maskTextSelector:l,skipChild:false,inlineStylesheet:v,maskInputOptions:g,maskTextFn:y,maskInputFn:E,slimDOMOptions:T,dataURLOptions:b,inlineImages:A,recordCanvas:N,preserveWhiteSpace:D,onSerialize:R,onIframeLoad:w,iframeLoadTimeout:I,keepIframeSrcFn:x});if(r){w(e,r)}}}),I)}return V}function V(e,t){var r=t||{},n=r.blockClass,o=n===void 0?"rr-block":n,i=r.blockSelector,a=i===void 0?null:i,s=r.maskTextClass,c=s===void 0?"rr-mask":s,u=r.maskTextSelector,l=u===void 0?null:u,p=r.inlineStylesheet,d=p===void 0?true:p,f=r.inlineImages,m=f===void 0?false:f,h=r.recordCanvas,v=h===void 0?false:h,_=r.maskAllInputs,g=_===void 0?false:_,y=r.maskTextFn,E=r.maskInputFn,T=r.slimDOM,S=T===void 0?false:T,b=r.dataURLOptions,O=r.preserveWhiteSpace,A=r.onSerialize,P=r.onIframeLoad,N=r.iframeLoadTimeout,R=r.keepIframeSrcFn,w=R===void 0?function(){return false}:R;var M={};var I=g===true?{color:true,date:true,"datetime-local":true,email:true,month:true,number:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true,textarea:true,select:true,password:true}:g===false?{password:true}:g;var C=S===true||S==="all"?{script:true,comment:true,headFavicon:true,headWhitespace:true,headMetaDescKeywords:S==="all",headMetaSocial:true,headMetaRobots:true,headMetaHttpEquiv:true,headMetaAuthorship:true,headMetaVerification:true}:S===false?{}:S;return[G(e,{doc:e,map:M,blockClass:o,blockSelector:a,maskTextClass:c,maskTextSelector:l,skipChild:false,inlineStylesheet:d,maskInputOptions:I,maskTextFn:y,maskInputFn:E,slimDOMOptions:C,dataURLOptions:b,inlineImages:m,recordCanvas:v,preserveWhiteSpace:O,onSerialize:A,onIframeLoad:P,iframeLoadTimeout:N,keepIframeSrcFn:w}),M]}var H=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function X(e,t){if(t===void 0){t={}}var r=1;var n=1;function o(e){var t=e.match(/\n/g);if(t){r+=t.length}var o=e.lastIndexOf("\n");n=o===-1?n+e.length:e.length-o}function i(){var e={line:r,column:n};return function(t){t.position=new a(e);m();return t}}var a=function(){function e(e){this.start=e;this.end={line:r,column:n};this.source=t.source}return e}();a.prototype.content=e;var s=[];function c(o){var i=new Error(t.source+":"+r+":"+n+": "+o);i.reason=o;i.filename=t.source;i.line=r;i.column=n;i.source=e;if(t.silent){s.push(i)}else{throw i}}function u(){var e=d();return{type:"stylesheet",stylesheet:{source:t.source,rules:e,parsingErrors:s}}}function l(){return f(/^{\s*/)}function p(){return f(/^}/)}function d(){var t;var r=[];m();h(r);while(e.length&&e.charAt(0)!=="}"&&(t=x()||L())){if(t!==false){r.push(t);h(r)}}return r}function f(t){var r=t.exec(e);if(!r){return}var n=r[0];o(n);e=e.slice(n.length);return r}function m(){f(/^\s*/)}function h(e){if(e===void 0){e=[]}var t;while(t=v()){if(t!==false){e.push(t)}t=v()}return e}function v(){var t=i();if("/"!==e.charAt(0)||"*"!==e.charAt(1)){return}var r=2;while(""!==e.charAt(r)&&("*"!==e.charAt(r)||"/"!==e.charAt(r+1))){++r}r+=2;if(""===e.charAt(r-1)){return c("End of comment missing")}var a=e.slice(2,r-2);n+=2;o(a);e=e.slice(r);n+=2;return t({type:"comment",comment:a})}function _(){var e=f(/^([^{]+)/);if(!e){return}return z(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function g(){var e=i();var t=f(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!t){return}var r=z(t[0]);if(!f(/^:\s*/)){return c("property missing ':'")}var n=f(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);var o=e({type:"declaration",property:r.replace(H,""),value:n?z(n[0]).replace(H,""):""});f(/^[;\s]*/);return o}function y(){var e=[];if(!l()){return c("missing '{'")}h(e);var t;while(t=g()){if(t!==false){e.push(t);h(e)}t=g()}if(!p()){return c("missing '}'")}return e}function E(){var e;var t=[];var r=i();while(e=f(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)){t.push(e[1]);f(/^,\s*/)}if(!t.length){return}return r({type:"keyframe",values:t,declarations:y()})}function T(){var e=i();var t=f(/^@([-\w]+)?keyframes\s*/);if(!t){return}var r=t[1];t=f(/^([-\w]+)\s*/);if(!t){return c("@keyframes missing name")}var n=t[1];if(!l()){return c("@keyframes missing '{'")}var o;var a=h();while(o=E()){a.push(o);a=a.concat(h())}if(!p()){return c("@keyframes missing '}'")}return e({type:"keyframes",name:n,vendor:r,keyframes:a})}function S(){var e=i();var t=f(/^@supports *([^{]+)/);if(!t){return}var r=z(t[1]);if(!l()){return c("@supports missing '{'")}var n=h().concat(d());if(!p()){return c("@supports missing '}'")}return e({type:"supports",supports:r,rules:n})}function b(){var e=i();var t=f(/^@host\s*/);if(!t){return}if(!l()){return c("@host missing '{'")}var r=h().concat(d());if(!p()){return c("@host missing '}'")}return e({type:"host",rules:r})}function O(){var e=i();var t=f(/^@media *([^{]+)/);if(!t){return}var r=z(t[1]);if(!l()){return c("@media missing '{'")}var n=h().concat(d());if(!p()){return c("@media missing '}'")}return e({type:"media",media:r,rules:n})}function A(){var e=i();var t=f(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(!t){return}return e({type:"custom-media",name:z(t[1]),media:z(t[2])})}function P(){var e=i();var t=f(/^@page */);if(!t){return}var r=_()||[];if(!l()){return c("@page missing '{'")}var n=h();var o;while(o=g()){n.push(o);n=n.concat(h())}if(!p()){return c("@page missing '}'")}return e({type:"page",selectors:r,declarations:n})}function N(){var e=i();var t=f(/^@([-\w]+)?document *([^{]+)/);if(!t){return}var r=z(t[1]);var n=z(t[2]);if(!l()){return c("@document missing '{'")}var o=h().concat(d());if(!p()){return c("@document missing '}'")}return e({type:"document",document:n,vendor:r,rules:o})}function R(){var e=i();var t=f(/^@font-face\s*/);if(!t){return}if(!l()){return c("@font-face missing '{'")}var r=h();var n;while(n=g()){r.push(n);r=r.concat(h())}if(!p()){return c("@font-face missing '}'")}return e({type:"font-face",declarations:r})}var w=C("import");var M=C("charset");var I=C("namespace");function C(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=i();var n=f(t);if(!n){return}var o={type:e};o[e]=n[1].trim();return r(o)}}function x(){if(e[0]!=="@"){return}return T()||O()||A()||S()||w()||M()||I()||N()||P()||b()||R()}function L(){var e=i();var t=_();if(!t){return c("selector missing")}h();return e({type:"rule",selectors:t,declarations:y()})}return W(u())}function z(e){return e?e.replace(/^\s+|\s+$/g,""):""}function W(e,t){var r=e&&typeof e.type==="string";var n=r?e:t;for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];var s=e[a];if(Array.isArray(s)){s.forEach((function(e){W(e,n)}))}else if(s&&typeof s==="object"){W(s,n)}}if(r){Object.defineProperty(e,"parent",{configurable:true,writable:true,enumerable:false,value:t||null})}return e}var K={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Z(e){var t=K[e.tagName]?K[e.tagName]:e.tagName;if(t==="link"&&e.attributes._cssText){t="style"}return t}function Y(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var q=/([^\\]):hover/;var Q=new RegExp(q.source,"g");function J(e,t){var r=t===null||t===void 0?void 0:t.stylesWithHoverClass.get(e);if(r)return r;var n=X(e,{silent:true});if(!n.stylesheet){return e}var o=[];n.stylesheet.rules.forEach((function(e){if("selectors"in e){(e.selectors||[]).forEach((function(e){if(q.test(e)){o.push(e)}}))}}));if(o.length===0){return e}var i=new RegExp(o.filter((function(e,t){return o.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return Y(e)})).join("|"),"g");var a=e.replace(i,(function(e){var t=e.replace(Q,"$1.\\:hover");return e+", "+t}));t===null||t===void 0?void 0:t.stylesWithHoverClass.set(e,a);return a}function ee(){var e=new Map;return{stylesWithHoverClass:e}}function te(e,t){var r=t.doc,n=t.hackCss,o=t.cache;switch(e.type){case a.Document:return r.implementation.createDocument(null,"",null);case a.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case a.Element:var i=Z(e);var s;if(e.isSVG){s=r.createElementNS("http://www.w3.org/2000/svg",i)}else{s=r.createElement(i)}var c=function(t){if(!e.attributes.hasOwnProperty(t)){return"continue"}var a=e.attributes[t];if(i==="option"&&t==="selected"&&a===false){return"continue"}a=typeof a==="boolean"||typeof a==="number"?"":a;if(!t.startsWith("rr_")){var c=i==="textarea"&&t==="value";var u=i==="style"&&t==="_cssText";if(u&&n){a=J(a,o)}if(c||u){var l=r.createTextNode(a);for(var p=0,d=Array.from(s.childNodes);p<d.length;p++){var f=d[p];if(f.nodeType===s.TEXT_NODE){s.removeChild(f)}}s.appendChild(l);return"continue"}try{if(e.isSVG&&t==="xlink:href"){s.setAttributeNS("http://www.w3.org/1999/xlink",t,a)}else if(t==="onload"||t==="onclick"||t.substring(0,7)==="onmouse"){s.setAttribute("_"+t,a)}else if(i==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&t==="content"){s.setAttribute("csp-content",a);return"continue"}else if(i==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"){}else if(i==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href==="string"&&e.attributes.href.endsWith(".js")){}else if(i==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL){s.setAttribute("rrweb-original-srcset",e.attributes.srcset)}else{s.setAttribute(t,a)}}catch(e){}}else{if(i==="canvas"&&t==="rr_dataURL"){var m=document.createElement("img");m.src=a;m.onload=function(){var e=s.getContext("2d");if(e){e.drawImage(m,0,0,m.width,m.height)}}}else if(i==="img"&&t==="rr_dataURL"){var h=s;if(!h.currentSrc.startsWith("data:")){h.setAttribute("rrweb-original-src",e.attributes.src);h.src=a}}if(t==="rr_width"){s.style.width=a}else if(t==="rr_height"){s.style.height=a}else if(t==="rr_mediaCurrentTime"){s.currentTime=e.attributes.rr_mediaCurrentTime}else if(t==="rr_mediaState"){switch(a){case"played":s.play()["catch"]((function(e){return console.warn("media playback error",e)}));break;case"paused":s.pause();break}}}};for(var u in e.attributes){c(u)}if(e.isShadowHost){if(!s.shadowRoot){s.attachShadow({mode:"open"})}else{while(s.shadowRoot.firstChild){s.shadowRoot.removeChild(s.shadowRoot.firstChild)}}}return s;case a.Text:return r.createTextNode(e.isStyle&&n?J(e.textContent,o):e.textContent);case a.CDATA:return r.createCDATASection(e.textContent);case a.Comment:return r.createComment(e.textContent);default:return null}}function re(e,t){var r=t.doc,n=t.map,o=t.skipChild,i=o===void 0?false:o,c=t.hackCss,u=c===void 0?true:c,l=t.afterAppend,p=t.cache;var d=te(e,{doc:r,hackCss:u,cache:p});if(!d){return null}if(e.rootId){console.assert(n[e.rootId]===r,"Target document should has the same root id.")}if(e.type===a.Document){r.close();r.open();if(e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==a.DocumentType){if(e.childNodes[0].type===a.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"){r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">')}else{r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')}}d=r}d.__sn=e;n[e.id]=d;if((e.type===a.Document||e.type===a.Element)&&!i){for(var f=0,m=e.childNodes;f<m.length;f++){var h=m[f];var v=re(h,{doc:r,map:n,skipChild:false,hackCss:u,afterAppend:l,cache:p});if(!v){console.warn("Failed to rebuild",h);continue}if(h.isShadow&&s(d)&&d.shadowRoot){d.shadowRoot.appendChild(v)}else{d.appendChild(v)}if(l){l(v)}}}return d}function ne(e,t){function r(e){t(e)}for(var n in e){if(e[n]){r(e[n])}}}function oe(e){var t=e.__sn;if(t.type!==a.Element){return}var r=e;for(var n in t.attributes){if(!(t.attributes.hasOwnProperty(n)&&n.startsWith("rr_"))){continue}var o=t.attributes[n];if(n==="rr_scrollLeft"){r.scrollLeft=o}if(n==="rr_scrollTop"){r.scrollTop=o}}}function ie(e,t){var r=t.doc,n=t.onVisit,o=t.hackCss,i=o===void 0?true:o,a=t.afterAppend,s=t.cache;var c={};var u=re(e,{doc:r,map:c,skipChild:false,hackCss:i,afterAppend:a,cache:s});ne(c,(function(e){if(n){n(e)}oe(e)}));return[u,c]}exports.EventType=void 0;(function(e){e[e["DomContentLoaded"]=0]="DomContentLoaded";e[e["Load"]=1]="Load";e[e["FullSnapshot"]=2]="FullSnapshot";e[e["IncrementalSnapshot"]=3]="IncrementalSnapshot";e[e["Meta"]=4]="Meta";e[e["Custom"]=5]="Custom";e[e["Plugin"]=6]="Plugin"})(exports.EventType||(exports.EventType={}));exports.IncrementalSource=void 0;(function(e){e[e["Mutation"]=0]="Mutation";e[e["MouseMove"]=1]="MouseMove";e[e["MouseInteraction"]=2]="MouseInteraction";e[e["Scroll"]=3]="Scroll";e[e["ViewportResize"]=4]="ViewportResize";e[e["Input"]=5]="Input";e[e["TouchMove"]=6]="TouchMove";e[e["MediaInteraction"]=7]="MediaInteraction";e[e["StyleSheetRule"]=8]="StyleSheetRule";e[e["CanvasMutation"]=9]="CanvasMutation";e[e["Font"]=10]="Font";e[e["Log"]=11]="Log";e[e["Drag"]=12]="Drag";e[e["StyleDeclaration"]=13]="StyleDeclaration"})(exports.IncrementalSource||(exports.IncrementalSource={}));exports.MouseInteractions=void 0;(function(e){e[e["MouseUp"]=0]="MouseUp";e[e["MouseDown"]=1]="MouseDown";e[e["Click"]=2]="Click";e[e["ContextMenu"]=3]="ContextMenu";e[e["DblClick"]=4]="DblClick";e[e["Focus"]=5]="Focus";e[e["Blur"]=6]="Blur";e[e["TouchStart"]=7]="TouchStart";e[e["TouchMove_Departed"]=8]="TouchMove_Departed";e[e["TouchEnd"]=9]="TouchEnd";e[e["TouchCancel"]=10]="TouchCancel"})(exports.MouseInteractions||(exports.MouseInteractions={}));var ae;(function(e){e[e["2D"]=0]="2D";e[e["WebGL"]=1]="WebGL";e[e["WebGL2"]=2]="WebGL2"})(ae||(ae={}));var se;(function(e){e[e["Play"]=0]="Play";e[e["Pause"]=1]="Pause";e[e["Seeked"]=2]="Seeked";e[e["VolumeChange"]=3]="VolumeChange"})(se||(se={}));exports.ReplayerEvents=void 0;(function(e){e["Start"]="start";e["Pause"]="pause";e["Resume"]="resume";e["Resize"]="resize";e["Finish"]="finish";e["FullsnapshotRebuilded"]="fullsnapshot-rebuilded";e["LoadStylesheetStart"]="load-stylesheet-start";e["LoadStylesheetEnd"]="load-stylesheet-end";e["SkipStart"]="skip-start";e["SkipEnd"]="skip-end";e["MouseInteraction"]="mouse-interaction";e["EventCast"]="event-cast";e["CustomEvent"]="custom-event";e["Flush"]="flush";e["StateChange"]="state-change";e["PlayBack"]="play-back"})(exports.ReplayerEvents||(exports.ReplayerEvents={}));function ce(e,t,r){if(r===void 0){r=document}var n={capture:true,passive:true};r.addEventListener(e,t,n);return function(){return r.removeEventListener(e,t,n)}}function ue(){return{map:{},getId:function(e){if(!e||!e.__sn){return-1}return e.__sn.id},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this;var r=e.__sn&&e.__sn.id;delete this.map[r];if(e.childNodes){e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))}},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}}}var le="Please stop import mirror directly. Instead of that,"+"\r\n"+"now you can use replayer.getMirror() to access the mirror instance of a replayer,"+"\r\n"+"or you can use record.mirror to access the mirror instance during recording.";exports.mirror={map:{},getId:function(){console.error(le);return-1},getNode:function(){console.error(le);return null},removeNodeFromMap:function(){console.error(le)},has:function(){console.error(le);return false},reset:function(){console.error(le)}};if(typeof window!=="undefined"&&window.Proxy&&window.Reflect){exports.mirror=new Proxy(exports.mirror,{get:function(e,t,r){if(t==="map"){console.error(le)}return Reflect.get(e,t,r)}})}function pe(e,t,r){if(r===void 0){r={}}var n=null;var o=0;return function(i){var a=Date.now();if(!o&&r.leading===false){o=a}var s=t-(a-o);var c=this;var u=arguments;if(s<=0||s>t){if(n){clearTimeout(n);n=null}o=a;e.apply(c,u)}else if(!n&&r.trailing!==false){n=setTimeout((function(){o=r.leading===false?0:Date.now();n=null;e.apply(c,u)}),s)}}}function de(e,t,r,n,o){if(o===void 0){o=window}var i=o.Object.getOwnPropertyDescriptor(e,t);o.Object.defineProperty(e,t,n?r:{set:function(e){var t=this;setTimeout((function(){r.set.call(t,e)}),0);if(i&&i.set){i.set.call(this,e)}}});return function(){return de(e,t,i||{},true)}}function fe(e,t,r){try{if(!(t in e)){return function(){}}var n=e[t];var o=r(n);if(typeof o==="function"){o.prototype=o.prototype||{};Object.defineProperties(o,{__rrweb_original__:{enumerable:false,value:n}})}e[t]=o;return function(){e[t]=n}}catch(e){return function(){}}}function me(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function he(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ve(e,t){if(!e){return false}if(e.nodeType===e.ELEMENT_NODE){var r=false;if(typeof t==="string"){if(e.closest!==undefined){return e.closest("."+t)!==null}else{r=e.classList.contains(t)}}else{e.classList.forEach((function(e){if(t.test(e)){r=true}}))}return r||ve(e.parentNode,t)}if(e.nodeType===e.TEXT_NODE){return ve(e.parentNode,t)}return ve(e.parentNode,t)}function _e(e){if("__sn"in e){return e.__sn.id===m}return false}function ge(e,t){if(c(e)){return false}var r=t.getId(e);if(!t.has(r)){return true}if(e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE){return false}if(!e.parentNode){return true}return ge(e.parentNode,t)}function ye(e){return Boolean(e.changedTouches)}function Ee(e){if(e===void 0){e=window}if("NodeList"in e&&!e.NodeList.prototype.forEach){e.NodeList.prototype.forEach=Array.prototype.forEach}if("DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach){e.DOMTokenList.prototype.forEach=Array.prototype.forEach}if(!Node.prototype.contains){Node.prototype.contains=function e(t){if(!(0 in arguments)){throw new TypeError("1 argument is required")}do{if(this===t){return true}}while(t=t&&t.parentNode);return false}}}var Te=function(){function e(){this.reset()}e.prototype.add=function(e){var t=this.indexes.get(e.parentId);var r={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};if(!t){this.tree[r.id]=r}else{r.parent=t;t.children[r.id]=r}this.indexes.set(r.id,r)};e.prototype.remove=function(e,t){var r=this;var n=this.indexes.get(e.parentId);var o=this.indexes.get(e.id);var i=function(e){r.removeIdSet.add(e);var n=t.getNode(e);n===null||n===void 0?void 0:n.childNodes.forEach((function(e){if("__sn"in e){i(e.__sn.id)}}))};var a=function(t){r.removeIdSet.add(t.id);Object.values(t.children).forEach((function(e){return a(e)}));var n=r.indexes.get(t.id);if(n){var o=n.parent;if(o){delete n.parent;delete o.children[n.id];r.indexes.delete(e.id)}}};if(!o){this.removeNodeMutations.push(e);i(e.id)}else if(!n){delete this.tree[o.id];this.indexes.delete(o.id);a(o)}else{delete o.parent;delete n.children[o.id];this.indexes.delete(e.id);a(o)}};e.prototype.text=function(e){var t=this.indexes.get(e.id);if(t){t.texts.push(e)}else{this.textMutations.push(e)}};e.prototype.attribute=function(e){var t=this.indexes.get(e.id);if(t){t.attributes.push(e)}else{this.attributeMutations.push(e)}};e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)};e.prototype.input=function(e){this.inputMap.set(e.id,e)};e.prototype.flush=function(){var e,t,r,o;var i=this;var a=this,s=a.tree,c=a.removeNodeMutations,u=a.textMutations,l=a.attributeMutations;var p={source:exports.IncrementalSource.Mutation,removes:c,texts:u,attributes:l,adds:[]};var d=function(e,t){if(t){i.removeIdSet.add(e.id)}p.texts=p.texts.concat(t?[]:e.texts).filter((function(e){return!i.removeIdSet.has(e.id)}));p.attributes=p.attributes.concat(t?[]:e.attributes).filter((function(e){return!i.removeIdSet.has(e.id)}));if(!i.removeIdSet.has(e.id)&&!i.removeIdSet.has(e.mutation.parentId)&&!t){p.adds.push(e.mutation);if(e.children){Object.values(e.children).forEach((function(e){return d(e,false)}))}}else{Object.values(e.children).forEach((function(e){return d(e,true)}))}};Object.values(s).forEach((function(e){return d(e,false)}));try{for(var f=n(this.scrollMap.keys()),m=f.next();!m.done;m=f.next()){var h=m.value;if(this.removeIdSet.has(h)){this.scrollMap.delete(h)}}}catch(t){e={error:t}}finally{try{if(m&&!m.done&&(t=f.return))t.call(f)}finally{if(e)throw e.error}}try{for(var v=n(this.inputMap.keys()),_=v.next();!_.done;_=v.next()){var h=_.value;if(this.removeIdSet.has(h)){this.inputMap.delete(h)}}}catch(e){r={error:e}}finally{try{if(_&&!_.done&&(o=v.return))o.call(v)}finally{if(r)throw r.error}}var g=new Map(this.scrollMap);var y=new Map(this.inputMap);this.reset();return{mutationData:p,scrollMap:g,inputMap:y}};e.prototype.reset=function(){this.tree=[];this.indexes=new Map;this.removeNodeMutations=[];this.textMutations=[];this.attributeMutations=[];this.removeIdSet=new Set;this.scrollMap=new Map;this.inputMap=new Map};e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)};return e}();function Se(e){var t,r;var o={};var i=function(e,t){var r={value:e,parent:t,children:[]};o[e.node.id]=r;return r};var a=[];try{for(var s=n(e),c=s.next();!c.done;c=s.next()){var u=c.value;var l=u.nextId,p=u.parentId;if(l&&l in o){var d=o[l];if(d.parent){var f=d.parent.children.indexOf(d);d.parent.children.splice(f,0,i(u,d.parent))}else{var f=a.indexOf(d);a.splice(f,0,i(u,null))}continue}if(p in o){var m=o[p];m.children.push(i(u,m));continue}a.push(i(u,null))}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}return a}function be(e,t){t(e.value);for(var r=e.children.length-1;r>=0;r--){be(e.children[r],t)}}function Oe(e){if("__sn"in e){return e.__sn.type===a.Element&&e.__sn.tagName==="iframe"}return false}function Ae(e,t){var r,n;var o=(n=(r=e.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||n===void 0?void 0:n.frameElement;if(!o||o===t){return{x:0,y:0,relativeScale:1,absoluteScale:1}}var i=o.getBoundingClientRect();var a=Ae(o,t);var s=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:s,absoluteScale:a.absoluteScale*s}}function Pe(e){return Boolean(e===null||e===void 0?void 0:e.shadowRoot)}var Ne=Object.freeze({__proto__:null,on:ce,createMirror:ue,get _mirror(){return exports.mirror},throttle:pe,hookSetter:de,patch:fe,getWindowHeight:me,getWindowWidth:he,isBlocked:ve,isIgnored:_e,isAncestorRemoved:ge,isTouchEvent:ye,polyfill:Ee,TreeIndex:Te,queueToResolveTrees:Se,iterateResolveTree:be,isIframeINode:Oe,getBaseDimension:Ae,hasShadowRoot:Pe});function Re(e){return"__ln"in e}var we=function(){function e(){this.length=0;this.head=null}e.prototype.get=function(e){if(e>=this.length){throw new Error("Position outside of list range")}var t=this.head;for(var r=0;r<e;r++){t=(t===null||t===void 0?void 0:t.next)||null}return t};e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};e.__ln=t;if(e.previousSibling&&Re(e.previousSibling)){var r=e.previousSibling.__ln.next;t.next=r;t.previous=e.previousSibling.__ln;e.previousSibling.__ln.next=t;if(r){r.previous=t}}else if(e.nextSibling&&Re(e.nextSibling)&&e.nextSibling.__ln.previous){var r=e.nextSibling.__ln.previous;t.previous=r;t.next=e.nextSibling.__ln;e.nextSibling.__ln.previous=t;if(r){r.next=t}}else{if(this.head){this.head.previous=t}t.next=this.head;this.head=t}this.length++};e.prototype.removeNode=function(e){var t=e.__ln;if(!this.head){return}if(!t.previous){this.head=t.next;if(this.head){this.head.previous=null}}else{t.previous.next=t.next;if(t.next){t.next.previous=t.previous}}if(e.__ln){delete e.__ln}this.length--};return e}();var Me=function(e,t){return"".concat(e,"@").concat(t)};function Ie(e){return"__sn"in e}var Ce=function(){function e(){var e=this;this.frozen=false;this.locked=false;this.texts=[];this.attributes=[];this.removes=[];this.mapRemoves=[];this.movedMap={};this.addedSet=new Set;this.movedSet=new Set;this.droppedSet=new Set;this.processMutations=function(t){t.forEach(e.processMutation);e.emit()};this.emit=function(){var t,r,o,i;if(e.frozen||e.locked){return}var a=[];var s=new we;var u=function(t){var r=t;var n=m;while(n===m){r=r&&r.nextSibling;n=r&&e.mirror.getId(r)}return n};var l=function(t){var r,n,o,i,l;var p=t.getRootNode?(r=t.getRootNode())===null||r===void 0?void 0:r.host:null;var d=p;while((o=(n=d===null||d===void 0?void 0:d.getRootNode)===null||n===void 0?void 0:n.call(d))===null||o===void 0?void 0:o.host)d=((l=(i=d===null||d===void 0?void 0:d.getRootNode)===null||i===void 0?void 0:i.call(d))===null||l===void 0?void 0:l.host)||null;var f=!e.doc.contains(t)&&(d===null||!e.doc.contains(d));if(!t.parentNode||f){return}var m=c(t.parentNode)?e.mirror.getId(p):e.mirror.getId(t.parentNode);var h=u(t);if(m===-1||h===-1){return s.addNode(t)}var v=G(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:true,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(r){if(Oe(r)){e.iframeManager.addIframe(r)}if(Pe(t)){e.shadowDomManager.addShadowRoot(t.shadowRoot,document)}},onIframeLoad:function(t,r){e.iframeManager.attachIframe(t,r);e.shadowDomManager.observeAttachShadow(t)}});if(v){a.push({parentId:m,nextId:h,node:v})}};while(e.mapRemoves.length){e.mirror.removeNodeFromMap(e.mapRemoves.shift())}try{for(var p=n(e.movedSet),d=p.next();!d.done;d=p.next()){var f=d.value;if(Le(e.removes,f,e.mirror)&&!e.movedSet.has(f.parentNode)){continue}l(f)}}catch(e){t={error:e}}finally{try{if(d&&!d.done&&(r=p.return))r.call(p)}finally{if(t)throw t.error}}try{for(var h=n(e.addedSet),v=h.next();!v.done;v=h.next()){var f=v.value;if(!De(e.droppedSet,f)&&!Le(e.removes,f,e.mirror)){l(f)}else if(De(e.movedSet,f)){l(f)}else{e.droppedSet.add(f)}}}catch(e){o={error:e}}finally{try{if(v&&!v.done&&(i=h.return))i.call(h)}finally{if(o)throw o.error}}var _=null;while(s.length){var g=null;if(_){var y=e.mirror.getId(_.value.parentNode);var E=u(_.value);if(y!==-1&&E!==-1){g=_}}if(!g){for(var T=s.length-1;T>=0;T--){var S=s.get(T);if(S){var y=e.mirror.getId(S.value.parentNode);var E=u(S.value);if(y!==-1&&E!==-1){g=S;break}}}}if(!g){while(s.head){s.removeNode(s.head.value)}break}_=g.previous;s.removeNode(g.value);l(g.value)}var b={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};if(!b.texts.length&&!b.attributes.length&&!b.removes.length&&!b.adds.length){return}e.texts=[];e.attributes=[];e.removes=[];e.addedSet=new Set;e.movedSet=new Set;e.droppedSet=new Set;e.movedMap={};e.mutationCb(b)};this.processMutation=function(t){var r,o,i,a;if(_e(t.target)){return}switch(t.type){case"characterData":{var s=t.target.textContent;if(!ve(t.target,e.blockClass)&&s!==t.oldValue){e.texts.push({value:k(t.target,e.maskTextClass,e.maskTextSelector)&&s?e.maskTextFn?e.maskTextFn(s):s.replace(/[\S]/g,"*"):s,node:t.target})}break}case"attributes":{var l=t.target;var s=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"){s=u({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:s,maskInputFn:e.maskInputFn})}if(ve(t.target,e.blockClass)||s===t.oldValue){return}var p=e.attributes.find((function(e){return e.node===t.target}));if(!p){p={node:t.target,attributes:{}};e.attributes.push(p)}if(t.attributeName==="style"){var d=e.doc.createElement("span");if(t.oldValue){d.setAttribute("style",t.oldValue)}if(p.attributes.style===undefined||p.attributes.style===null){p.attributes.style={}}var f=p.attributes.style;try{for(var m=n(Array.from(l.style)),h=m.next();!h.done;h=m.next()){var v=h.value;var _=l.style.getPropertyValue(v);var g=l.style.getPropertyPriority(v);if(_!==d.style.getPropertyValue(v)||g!==d.style.getPropertyPriority(v)){if(g===""){f[v]=_}else{f[v]=[_,g]}}}}catch(e){r={error:e}}finally{try{if(h&&!h.done&&(o=m.return))o.call(m)}finally{if(r)throw r.error}}try{for(var y=n(Array.from(d.style)),E=y.next();!E.done;E=y.next()){var v=E.value;if(l.style.getPropertyValue(v)===""){f[v]=false}}}catch(e){i={error:e}}finally{try{if(E&&!E.done&&(a=y.return))a.call(y)}finally{if(i)throw i.error}}}else{p.attributes[t.attributeName]=L(e.doc,t.target.tagName,t.attributeName,s)}break}case"childList":{t.addedNodes.forEach((function(r){return e.genAdds(r,t.target)}));t.removedNodes.forEach((function(r){var n=e.mirror.getId(r);var o=c(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);if(ve(t.target,e.blockClass)||_e(r)){return}if(e.addedSet.has(r)){xe(e.addedSet,r);e.droppedSet.add(r)}else if(e.addedSet.has(t.target)&&n===-1);else if(ge(t.target,e.mirror));else if(e.movedSet.has(r)&&e.movedMap[Me(n,o)]){xe(e.movedSet,r)}else{e.removes.push({parentId:o,id:n,isShadow:c(t.target)?true:undefined})}e.mapRemoves.push(r)}));break}}};this.genAdds=function(t,r){if(r&&ve(r,e.blockClass)){return}if(Ie(t)){if(_e(t)){return}e.movedSet.add(t);var n=null;if(r&&Ie(r)){n=r.__sn.id}if(n){e.movedMap[Me(t.__sn.id,n)]=true}}else{e.addedSet.add(t);e.droppedSet.delete(t)}if(!ve(t,e.blockClass))t.childNodes.forEach((function(t){return e.genAdds(t)}))}}e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(r){t[r]=e[r]}))};e.prototype.freeze=function(){this.frozen=true;this.canvasManager.freeze()};e.prototype.unfreeze=function(){this.frozen=false;this.canvasManager.unfreeze();this.emit()};e.prototype.isFrozen=function(){return this.frozen};e.prototype.lock=function(){this.locked=true;this.canvasManager.lock()};e.prototype.unlock=function(){this.locked=false;this.canvasManager.unlock();this.emit()};e.prototype.reset=function(){this.shadowDomManager.reset();this.canvasManager.reset()};return e}();function xe(e,t){e.delete(t);t.childNodes.forEach((function(t){return xe(e,t)}))}function Le(e,t,r){var n=t.parentNode;if(!n){return false}var o=r.getId(n);if(e.some((function(e){return e.id===o}))){return true}return Le(e,n,r)}function De(e,t){var r=t.parentNode;if(!r){return false}if(e.has(r)){return true}return De(e,r)}var ke=[];var je=typeof CSSGroupingRule!=="undefined";var Be=typeof CSSMediaRule!=="undefined";var Ue=typeof CSSSupportsRule!=="undefined";var Fe=typeof CSSConditionRule!=="undefined";function Ge(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length){return t[0]}}else if("path"in e&&e.path.length){return e.path[0]}return e.target}catch(t){return e.target}}function Ve(e,t){var r,n;var o=new Ce;ke.push(o);o.init(e);var i=window.MutationObserver||window.__rrMutationObserver;var a=(n=(r=window===null||window===void 0?void 0:window.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");if(a&&window[a]){i=window[a]}var s=new i(o.processMutations.bind(o));s.observe(t,{attributes:true,attributeOldValue:true,characterData:true,characterDataOldValue:true,childList:true,subtree:true});return s}function He(e){var t=e.mousemoveCb,r=e.sampling,n=e.doc,o=e.mirror;if(r.mousemove===false){return function(){}}var i=typeof r.mousemove==="number"?r.mousemove:50;var a=typeof r.mousemoveCallback==="number"?r.mousemoveCallback:500;var s=[];var c;var u=pe((function(e){var r=Date.now()-c;t(s.map((function(e){e.timeOffset-=r;return e})),e);s=[];c=null}),a);var l=pe((function(e){var t=Ge(e);var r=ye(e)?e.changedTouches[0]:e,n=r.clientX,i=r.clientY;if(!c){c=Date.now()}s.push({x:n,y:i,id:o.getId(t),timeOffset:Date.now()-c});u(typeof DragEvent!=="undefined"&&e instanceof DragEvent?exports.IncrementalSource.Drag:e instanceof MouseEvent?exports.IncrementalSource.MouseMove:exports.IncrementalSource.TouchMove)}),i,{trailing:false});var p=[ce("mousemove",l,n),ce("touchmove",l,n),ce("drag",l,n)];return function(){p.forEach((function(e){return e()}))}}function Xe(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.sampling;if(i.mouseInteraction===false){return function(){}}var a=i.mouseInteraction===true||i.mouseInteraction===undefined?{}:i.mouseInteraction;var s=[];var c=function(e){return function(r){var i=Ge(r);if(ve(i,o)){return}var a=ye(r)?r.changedTouches[0]:r;if(!a){return}var s=n.getId(i);var c=a.clientX,u=a.clientY;t({type:exports.MouseInteractions[e],id:s,x:c,y:u})}};Object.keys(exports.MouseInteractions).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&a[e]!==false})).forEach((function(e){var t=e.toLowerCase();var n=c(e);s.push(ce(t,n,r))}));return function(){s.forEach((function(e){return e()}))}}function ze(e){var t=e.scrollCb,r=e.doc,n=e.mirror,o=e.blockClass,i=e.sampling;var a=pe((function(e){var i=Ge(e);if(!i||ve(i,o)){return}var a=n.getId(i);if(i===r){var s=r.scrollingElement||r.documentElement;t({id:a,x:s.scrollLeft,y:s.scrollTop})}else{t({id:a,x:i.scrollLeft,y:i.scrollTop})}}),i.scroll||100);return ce("scroll",a,r)}function We(e){var t=e.viewportResizeCb;var r=-1;var n=-1;var o=pe((function(){var e=me();var o=he();if(r!==e||n!==o){t({width:Number(o),height:Number(e)});r=e;n=o}}),200);return ce("resize",o,window)}function Ke(e,r){var n=t({},e);if(!r)delete n.userTriggered;return n}var $e=["INPUT","TEXTAREA","SELECT"];var Ze=new WeakMap;function Ye(e){var r=e.inputCb,n=e.doc,a=e.mirror,s=e.blockClass,c=e.ignoreClass,l=e.maskInputOptions,p=e.maskInputFn,d=e.sampling,f=e.userTriggeredOnInput;function m(e){var t=Ge(e);var r=e.isTrusted;if(t&&t.tagName==="OPTION")t=t.parentElement;if(!t||!t.tagName||$e.indexOf(t.tagName)<0||ve(t,s)){return}var o=t.type;if(t.classList.contains(c)){return}var i=t.value;var a=false;if(o==="radio"||o==="checkbox"){a=t.checked}else if(l[t.tagName.toLowerCase()]||l[o]){i=u({maskInputOptions:l,tagName:t.tagName,type:o,value:i,maskInputFn:p})}h(t,Ke({text:i,isChecked:a,userTriggered:r},f));var d=t.name;if(o==="radio"&&d&&a){n.querySelectorAll('input[type="radio"][name="'.concat(d,'"]')).forEach((function(e){if(e!==t){h(e,Ke({text:e.value,isChecked:!a,userTriggered:false},f))}}))}}function h(e,n){var o=Ze.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){Ze.set(e,n);var i=a.getId(e);r(t(t({},n),{id:i}))}}var v=d.input==="last"?["change"]:["input","change"];var _=v.map((function(e){return ce(e,m,n)}));var g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");var y=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];if(g&&g.set){_.push.apply(_,i([],o(y.map((function(e){return de(e[0],e[1],{set:function(){m({target:this})}})}))),false))}return function(){_.forEach((function(e){return e()}))}}function qe(e){var t=[];function r(e,t){if(je&&e.parentRule instanceof CSSGroupingRule||Be&&e.parentRule instanceof CSSMediaRule||Ue&&e.parentRule instanceof CSSSupportsRule||Fe&&e.parentRule instanceof CSSConditionRule){var r=Array.from(e.parentRule.cssRules);var n=r.indexOf(e);t.unshift(n)}else{var r=Array.from(e.parentStyleSheet.cssRules);var n=r.indexOf(e);t.unshift(n)}return t}return r(e,t)}function Qe(e,t){var r=e.styleSheetRuleCb,n=e.mirror;var a=t.win;var s=a.CSSStyleSheet.prototype.insertRule;a.CSSStyleSheet.prototype.insertRule=function(e,t){var o=n.getId(this.ownerNode);if(o!==-1){r({id:o,adds:[{rule:e,index:t}]})}return s.apply(this,arguments)};var c=a.CSSStyleSheet.prototype.deleteRule;a.CSSStyleSheet.prototype.deleteRule=function(e){var t=n.getId(this.ownerNode);if(t!==-1){r({id:t,removes:[{index:e}]})}return c.apply(this,arguments)};var u={};if(je){u.CSSGroupingRule=a.CSSGroupingRule}else{if(Be){u.CSSMediaRule=a.CSSMediaRule}if(Fe){u.CSSConditionRule=a.CSSConditionRule}if(Ue){u.CSSSupportsRule=a.CSSSupportsRule}}var l={};Object.entries(u).forEach((function(e){var t=o(e,2),a=t[0],s=t[1];l[a]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule};s.prototype.insertRule=function(e,t){var s=n.getId(this.parentStyleSheet.ownerNode);if(s!==-1){r({id:s,adds:[{rule:e,index:i(i([],o(qe(this)),false),[t||0],false)}]})}return l[a].insertRule.apply(this,arguments)};s.prototype.deleteRule=function(e){var t=n.getId(this.parentStyleSheet.ownerNode);if(t!==-1){r({id:t,removes:[{index:i(i([],o(qe(this)),false),[e],false)}]})}return l[a].deleteRule.apply(this,arguments)}}));return function(){a.CSSStyleSheet.prototype.insertRule=s;a.CSSStyleSheet.prototype.deleteRule=c;Object.entries(u).forEach((function(e){var t=o(e,2),r=t[0],n=t[1];n.prototype.insertRule=l[r].insertRule;n.prototype.deleteRule=l[r].deleteRule}))}}function Je(e,t){var r=e.styleDeclarationCb,n=e.mirror;var o=t.win;var i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(e,t,o){var a,s;var c=n.getId((s=(a=this.parentRule)===null||a===void 0?void 0:a.parentStyleSheet)===null||s===void 0?void 0:s.ownerNode);if(c!==-1){r({id:c,set:{property:e,value:t,priority:o},index:qe(this.parentRule)})}return i.apply(this,arguments)};var a=o.CSSStyleDeclaration.prototype.removeProperty;o.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,o;var i=n.getId((o=(t=this.parentRule)===null||t===void 0?void 0:t.parentStyleSheet)===null||o===void 0?void 0:o.ownerNode);if(i!==-1){r({id:i,remove:{property:e},index:qe(this.parentRule)})}return a.apply(this,arguments)};return function(){o.CSSStyleDeclaration.prototype.setProperty=i;o.CSSStyleDeclaration.prototype.removeProperty=a}}function et(e){var t=e.mediaInteractionCb,r=e.blockClass,n=e.mirror,o=e.sampling;var i=function(e){return pe((function(o){var i=Ge(o);if(!i||ve(i,r)){return}var a=i,s=a.currentTime,c=a.volume,u=a.muted;t({type:e,id:n.getId(i),currentTime:s,volume:c,muted:u})}),o.media||500)};var a=[ce("play",i(0)),ce("pause",i(1)),ce("seeked",i(2)),ce("volumechange",i(3))];return function(){a.forEach((function(e){return e()}))}}function tt(e){var t=e.fontCb,r=e.doc;var n=r.defaultView;if(!n){return function(){}}var o=[];var i=new WeakMap;var a=n.FontFace;n.FontFace=function e(t,r,n){var o=new a(t,r,n);i.set(o,{family:t,buffer:typeof r!=="string",descriptors:n,fontSource:typeof r==="string"?r:JSON.stringify(Array.from(new Uint8Array(r)))});return o};var s=fe(r.fonts,"add",(function(e){return function(r){setTimeout((function(){var e=i.get(r);if(e){t(e);i.delete(r)}}),0);return e.apply(this,[r])}}));o.push((function(){n.FontFace=a}));o.push(s);return function(){o.forEach((function(e){return e()}))}}function rt(e,t){var r=e.mutationCb,n=e.mousemoveCb,a=e.mouseInteractionCb,s=e.scrollCb,c=e.viewportResizeCb,u=e.inputCb,l=e.mediaInteractionCb,p=e.styleSheetRuleCb,d=e.styleDeclarationCb,f=e.canvasMutationCb,m=e.fontCb;e.mutationCb=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}if(t.mutation){t.mutation.apply(t,i([],o(e),false))}r.apply(void 0,i([],o(e),false))};e.mousemoveCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.mousemove){t.mousemove.apply(t,i([],o(e),false))}n.apply(void 0,i([],o(e),false))};e.mouseInteractionCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.mouseInteraction){t.mouseInteraction.apply(t,i([],o(e),false))}a.apply(void 0,i([],o(e),false))};e.scrollCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.scroll){t.scroll.apply(t,i([],o(e),false))}s.apply(void 0,i([],o(e),false))};e.viewportResizeCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.viewportResize){t.viewportResize.apply(t,i([],o(e),false))}c.apply(void 0,i([],o(e),false))};e.inputCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.input){t.input.apply(t,i([],o(e),false))}u.apply(void 0,i([],o(e),false))};e.mediaInteractionCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.mediaInteaction){t.mediaInteaction.apply(t,i([],o(e),false))}l.apply(void 0,i([],o(e),false))};e.styleSheetRuleCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.styleSheetRule){t.styleSheetRule.apply(t,i([],o(e),false))}p.apply(void 0,i([],o(e),false))};e.styleDeclarationCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.styleDeclaration){t.styleDeclaration.apply(t,i([],o(e),false))}d.apply(void 0,i([],o(e),false))};e.canvasMutationCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.canvasMutation){t.canvasMutation.apply(t,i([],o(e),false))}f.apply(void 0,i([],o(e),false))};e.fontCb=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}if(t.font){t.font.apply(t,i([],o(e),false))}m.apply(void 0,i([],o(e),false))}}function nt(e,t){var r,o;if(t===void 0){t={}}var i=e.doc.defaultView;if(!i){return function(){}}rt(e,t);var a=Ve(e,e.doc);var s=He(e);var c=Xe(e);var u=ze(e);var l=We(e);var p=Ye(e);var d=et(e);var f=Qe(e,{win:i});var m=Je(e,{win:i});var h=e.collectFonts?tt(e):function(){};var v=[];try{for(var _=n(e.plugins),g=_.next();!g.done;g=_.next()){var y=g.value;v.push(y.observer(y.callback,i,y.options))}}catch(e){r={error:e}}finally{try{if(g&&!g.done&&(o=_.return))o.call(_)}finally{if(r)throw r.error}}return function(){ke.forEach((function(e){return e.reset()}));a.disconnect();s();c();u();l();p();d();f();m();h();v.forEach((function(e){return e()}))}}var ot=function(){function e(e){this.iframes=new WeakMap;this.mutationCb=e.mutationCb}e.prototype.addIframe=function(e){this.iframes.set(e,true)};e.prototype.addLoadListener=function(e){this.loadListener=e};e.prototype.attachIframe=function(e,t){var r;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:true});(r=this.loadListener)===null||r===void 0?void 0:r.call(this,e)};return e}();var it=function(){function e(e){this.restorePatches=[];this.mutationCb=e.mutationCb;this.scrollCb=e.scrollCb;this.bypassOptions=e.bypassOptions;this.mirror=e.mirror;var t=this;this.restorePatches.push(fe(HTMLElement.prototype,"attachShadow",(function(e){return function(){var r=e.apply(this,arguments);if(this.shadowRoot)t.addShadowRoot(this.shadowRoot,this.ownerDocument);return r}})))}e.prototype.addShadowRoot=function(e,r){Ve(t(t({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);ze(t(t({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))};e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(fe(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(r){return function(){var n=r.apply(this,arguments);if(this.shadowRoot)t.addShadowRoot(this.shadowRoot,e.contentDocument);return n}})))}};e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))};return e}();function at(e,t,r,a){var s,c;var u=[];var l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);var p=function(n){try{if(typeof t.CanvasRenderingContext2D.prototype[n]!=="function"){return"continue"}var a=fe(t.CanvasRenderingContext2D.prototype,n,(function(t){return function(){var a=this;var s=[];for(var c=0;c<arguments.length;c++){s[c]=arguments[c]}if(!ve(this.canvas,r)){setTimeout((function(){var t=i([],o(s),false);if(n==="drawImage"){if(t[0]&&t[0]instanceof HTMLCanvasElement){var r=t[0];var c=r.getContext("2d");var u=c===null||c===void 0?void 0:c.getImageData(0,0,r.width,r.height);var l=u===null||u===void 0?void 0:u.data;t[0]=JSON.stringify(l)}}e(a.canvas,{type:ae["2D"],property:n,args:t})}),0)}return t.apply(this,s)}}));u.push(a)}catch(r){var s=de(t.CanvasRenderingContext2D.prototype,n,{set:function(t){e(this.canvas,{type:ae["2D"],property:n,args:[t],setter:true})}});u.push(s)}};try{for(var d=n(l),f=d.next();!f.done;f=d.next()){var m=f.value;p(m)}}catch(e){s={error:e}}finally{try{if(f&&!f.done&&(c=d.return))c.call(d)}finally{if(s)throw s.error}}return function(){u.forEach((function(e){return e()}))}}function st(e,t){var r=[];try{var n=fe(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r){var n=[];for(var a=1;a<arguments.length;a++){n[a-1]=arguments[a]}if(!ve(this,t)){if(!("__context"in this))this.__context=r}return e.apply(this,i([r],o(n),false))}}));r.push(n)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){r.forEach((function(e){return e()}))}}var ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var ut=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(var lt=0;lt<ct.length;lt++){ut[ct.charCodeAt(lt)]=lt}var pt=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3){o+=ct[t[r]>>2];o+=ct[(t[r]&3)<<4|t[r+1]>>4];o+=ct[(t[r+1]&15)<<2|t[r+2]>>6];o+=ct[t[r+2]&63]}if(n%3===2){o=o.substring(0,o.length-1)+"="}else if(n%3===1){o=o.substring(0,o.length-2)+"=="}return o};var dt=function(e){var t=e.length*.75,r=e.length,n,o=0,i,a,s,c;if(e[e.length-1]==="="){t--;if(e[e.length-2]==="="){t--}}var u=new ArrayBuffer(t),l=new Uint8Array(u);for(n=0;n<r;n+=4){i=ut[e.charCodeAt(n)];a=ut[e.charCodeAt(n+1)];s=ut[e.charCodeAt(n+2)];c=ut[e.charCodeAt(n+3)];l[o++]=i<<2|a>>4;l[o++]=(a&15)<<4|s>>2;l[o++]=(s&3)<<6|c&63}return u};var ft=new Map;function mt(e,t){var r=ft.get(e);if(!r){r=new Map;ft.set(e,r)}if(!r.has(t)){r.set(t,[])}return r.get(t)}var ht=function(e,t,r){if(!e||!(gt(e,t)||typeof e==="object"))return;var n=e.constructor.name;var o=mt(r,n);var i=o.indexOf(e);if(i===-1){i=o.length;o.push(e)}return i};function vt(e,t,r){if(e instanceof Array){return e.map((function(e){return vt(e,t,r)}))}else if(e===null){return e}else if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){var n=e.constructor.name;return{rr_type:n,args:[Object.values(e)]}}else if(e instanceof ArrayBuffer){var o=e.constructor.name;var i=pt(e);return{rr_type:o,base64:i}}else if(e instanceof DataView){var a=e.constructor.name;return{rr_type:a,args:[vt(e.buffer,t,r),e.byteOffset,e.byteLength]}}else if(e instanceof HTMLImageElement){var s=e.constructor.name;var c=e.src;return{rr_type:s,src:c}}else if(e instanceof ImageData){var u=e.constructor.name;return{rr_type:u,args:[vt(e.data,t,r),e.width,e.height]}}else if(gt(e,t)||typeof e==="object"){var l=e.constructor.name;var p=ht(e,t,r);return{rr_type:l,index:p}}return e}var _t=function(e,t,r){return i([],o(e),false).map((function(e){return vt(e,t,r)}))};var gt=function(e,t){var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"];var n=r.filter((function(e){return typeof t[e]==="function"}));return Boolean(n.find((function(r){return e instanceof t[r]})))};function yt(e,t,r,a,s,c){var u,l;var p=[];var d=Object.getOwnPropertyNames(e);var f=function(n){try{if(typeof e[n]!=="function"){return"continue"}var u=fe(e,n,(function(u){return function(){var l=[];for(var p=0;p<arguments.length;p++){l[p]=arguments[p]}var d=u.apply(this,l);ht(d,c,e);if(!ve(this.canvas,a)){var f=s.getId(this.canvas);var m=_t(i([],o(l),false),c,e);var h={type:t,property:n,args:m};r(this.canvas,h)}return d}}));p.push(u)}catch(o){var l=de(e,n,{set:function(e){r(this.canvas,{type:t,property:n,args:[e],setter:true})}});p.push(l)}};try{for(var m=n(d),h=m.next();!h.done;h=m.next()){var v=h.value;f(v)}}catch(e){u={error:e}}finally{try{if(h&&!h.done&&(l=m.return))l.call(m)}finally{if(u)throw u.error}}return p}function Et(e,t,r,n){var a=[];a.push.apply(a,i([],o(yt(t.WebGLRenderingContext.prototype,ae.WebGL,e,r,n,t)),false));if(typeof t.WebGL2RenderingContext!=="undefined"){a.push.apply(a,i([],o(yt(t.WebGL2RenderingContext.prototype,ae.WebGL2,e,r,n,t)),false))}return function(){a.forEach((function(e){return e()}))}}var Tt=function(){function e(e){this.pendingCanvasMutations=new Map;this.rafStamps={latestId:0,invokeId:null};this.frozen=false;this.locked=false;this.processMutation=function(e,t){var r=this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId;if(r||!this.rafStamps.invokeId)this.rafStamps.invokeId=this.rafStamps.latestId;if(!this.pendingCanvasMutations.has(e)){this.pendingCanvasMutations.set(e,[])}this.pendingCanvasMutations.get(e).push(t)};this.mutationCb=e.mutationCb;this.mirror=e.mirror;if(e.recordCanvas===true)this.initCanvasMutationObserver(e.win,e.blockClass)}e.prototype.reset=function(){this.pendingCanvasMutations.clear();this.resetObservers&&this.resetObservers()};e.prototype.freeze=function(){this.frozen=true};e.prototype.unfreeze=function(){this.frozen=false};e.prototype.lock=function(){this.locked=true};e.prototype.unlock=function(){this.locked=false};e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping();this.startPendingCanvasMutationFlusher();var r=st(e,t);var n=at(this.processMutation.bind(this),e,t,this.mirror);var o=Et(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){r();n();o()}};e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))};e.prototype.startRAFTimestamping=function(){var e=this;var t=function(r){e.rafStamps.latestId=r;requestAnimationFrame(t)};requestAnimationFrame(t)};e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,r){var n=e.mirror.getId(r);e.flushPendingCanvasMutationFor(r,n)}));requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))};e.prototype.flushPendingCanvasMutationFor=function(e,t){if(this.frozen||this.locked){return}var n=this.pendingCanvasMutations.get(e);if(!n||t===-1)return;var o=n.map((function(e){e.type;var t=r(e,["type"]);return t}));var i=n[0].type;this.mutationCb({id:t,type:i,commands:o});this.pendingCanvasMutations.delete(e)};return e}();function St(e){return t(t({},e),{timestamp:Date.now()})}var bt;var Ot;var At=ue();function Pt(e){if(e===void 0){e={}}var r=e.emit,i=e.checkoutEveryNms,a=e.checkoutEveryNth,s=e.blockClass,c=s===void 0?"rr-block":s,u=e.blockSelector,l=u===void 0?null:u,p=e.ignoreClass,d=p===void 0?"rr-ignore":p,f=e.maskTextClass,m=f===void 0?"rr-mask":f,h=e.maskTextSelector,v=h===void 0?null:h,_=e.inlineStylesheet,g=_===void 0?true:_,y=e.maskAllInputs,E=e.maskInputOptions,T=e.slimDOMOptions,S=e.maskInputFn,b=e.maskTextFn,O=e.hooks,A=e.packFn,P=e.sampling,N=P===void 0?{}:P,R=e.mousemoveWait,w=e.recordCanvas,M=w===void 0?false:w,I=e.userTriggeredOnInput,C=I===void 0?false:I,x=e.collectFonts,L=x===void 0?false:x,D=e.inlineImages,k=D===void 0?false:D,j=e.plugins,B=e.keepIframeSrcFn,U=B===void 0?function(){return false}:B;if(!r){throw new Error("emit function is required")}if(R!==undefined&&N.mousemove===undefined){N.mousemove=R}var F=y===true?{color:true,date:true,"datetime-local":true,email:true,month:true,number:true,range:true,search:true,tel:true,text:true,time:true,url:true,week:true,textarea:true,select:true,password:true}:E!==undefined?E:{password:true};var G=T===true||T==="all"?{script:true,comment:true,headFavicon:true,headWhitespace:true,headMetaSocial:true,headMetaRobots:true,headMetaHttpEquiv:true,headMetaVerification:true,headMetaAuthorship:T==="all",headMetaDescKeywords:T==="all"}:T?T:{};Ee();var H;var X=0;var z=function(e){var t,r;try{for(var o=n(j||[]),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.eventProcessor){e=a.eventProcessor(e)}}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}if(A){e=A(e)}return e};bt=function(e,t){var n;if(((n=ke[0])===null||n===void 0?void 0:n.isFrozen())&&e.type!==exports.EventType.FullSnapshot&&!(e.type===exports.EventType.IncrementalSnapshot&&e.data.source===exports.IncrementalSource.Mutation)){ke.forEach((function(e){return e.unfreeze()}))}r(z(e),t);if(e.type===exports.EventType.FullSnapshot){H=e;X=0}else if(e.type===exports.EventType.IncrementalSnapshot){if(e.data.source===exports.IncrementalSource.Mutation&&e.data.isAttachIframe){return}X++;var o=a&&X>=a;var s=i&&e.timestamp-H.timestamp>i;if(o||s){Ot(true)}}};var W=function(e){bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.Mutation},e)}))};var K=function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.Scroll},e)}))};var Z=function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.CanvasMutation},e)}))};var Y=new ot({mutationCb:W});var q=new Tt({recordCanvas:M,mutationCb:Z,win:window,blockClass:c,mirror:At});var Q=new it({mutationCb:W,scrollCb:K,bypassOptions:{blockClass:c,blockSelector:l,maskTextClass:m,maskTextSelector:v,inlineStylesheet:g,maskInputOptions:F,maskTextFn:b,maskInputFn:S,recordCanvas:M,inlineImages:k,sampling:N,slimDOMOptions:G,iframeManager:Y,canvasManager:q},mirror:At});Ot=function(e){var t,r,n,i;if(e===void 0){e=false}bt(St({type:exports.EventType.Meta,data:{href:window.location.href,width:he(),height:me()}}),e);ke.forEach((function(e){return e.lock()}));var a=o(V(document,{blockClass:c,blockSelector:l,maskTextClass:m,maskTextSelector:v,inlineStylesheet:g,maskAllInputs:F,maskTextFn:b,slimDOM:G,recordCanvas:M,inlineImages:k,onSerialize:function(e){if(Oe(e)){Y.addIframe(e)}if(Pe(e)){Q.addShadowRoot(e.shadowRoot,document)}},onIframeLoad:function(e,t){Y.attachIframe(e,t);Q.observeAttachShadow(e)},keepIframeSrcFn:U}),2),s=a[0],u=a[1];if(!s){return console.warn("Failed to snapshot the document")}At.map=u;bt(St({type:exports.EventType.FullSnapshot,data:{node:s,initialOffset:{left:window.pageXOffset!==undefined?window.pageXOffset:(document===null||document===void 0?void 0:document.documentElement.scrollLeft)||((r=(t=document===null||document===void 0?void 0:document.body)===null||t===void 0?void 0:t.parentElement)===null||r===void 0?void 0:r.scrollLeft)||(document===null||document===void 0?void 0:document.body.scrollLeft)||0,top:window.pageYOffset!==undefined?window.pageYOffset:(document===null||document===void 0?void 0:document.documentElement.scrollTop)||((i=(n=document===null||document===void 0?void 0:document.body)===null||n===void 0?void 0:n.parentElement)===null||i===void 0?void 0:i.scrollTop)||(document===null||document===void 0?void 0:document.body.scrollTop)||0}}}));ke.forEach((function(e){return e.unlock()}))};try{var J=[];J.push(ce("DOMContentLoaded",(function(){bt(St({type:exports.EventType.DomContentLoaded,data:{}}))})));var ee=function(e){var r;return nt({mutationCb:W,mousemoveCb:function(e,t){return bt(St({type:exports.EventType.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.MouseInteraction},e)}))},scrollCb:K,viewportResizeCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.ViewportResize},e)}))},inputCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.Input},e)}))},mediaInteractionCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.StyleDeclaration},e)}))},canvasMutationCb:Z,fontCb:function(e){return bt(St({type:exports.EventType.IncrementalSnapshot,data:t({source:exports.IncrementalSource.Font},e)}))},blockClass:c,ignoreClass:d,maskTextClass:m,maskTextSelector:v,maskInputOptions:F,inlineStylesheet:g,sampling:N,recordCanvas:M,inlineImages:k,userTriggeredOnInput:C,collectFonts:L,doc:e,maskInputFn:S,maskTextFn:b,blockSelector:l,slimDOMOptions:G,mirror:At,iframeManager:Y,shadowDomManager:Q,canvasManager:q,plugins:((r=j===null||j===void 0?void 0:j.filter((function(e){return e.observer})))===null||r===void 0?void 0:r.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return bt(St({type:exports.EventType.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},O)};Y.addLoadListener((function(e){J.push(ee(e.contentDocument))}));var te=function(){Ot();J.push(ee(document))};if(document.readyState==="interactive"||document.readyState==="complete"){te()}else{J.push(ce("load",(function(){bt(St({type:exports.EventType.Load,data:{}}));te()}),window))}return function(){J.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}Pt.addCustomEvent=function(e,t){if(!bt){throw new Error("please add custom event after start recording")}bt(St({type:exports.EventType.Custom,data:{tag:e,payload:t}}))};Pt.freezePage=function(){ke.forEach((function(e){return e.freeze()}))};Pt.takeFullSnapshot=function(e){if(!Ot){throw new Error("please take full snapshot after start recording")}Ot(e)};Pt.mirror=At;function Nt(e){e=e||Object.create(null);return{on:function t(r,n){(e[r]||(e[r]=[])).push(n)},off:function t(r,n){if(e[r]){e[r].splice(e[r].indexOf(n)>>>0,1)}},emit:function t(r,n){(e[r]||[]).slice().map((function(e){e(n)}));(e["*"]||[]).slice().map((function(e){e(r,n)}))}}}var Rt=Object.freeze({__proto__:null,default:Nt});function wt(e,t){if(e===void 0){e=window}if(t===void 0){t=document}if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==true){return}var r=e.HTMLElement||e.Element;var n=468;var o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||c,scrollIntoView:r.prototype.scrollIntoView};var i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;function a(e){var t=["MSIE ","Trident/","Edge/"];return new RegExp(t.join("|")).test(e)}var s=a(e.navigator.userAgent)?1:0;function c(e,t){this.scrollLeft=e;this.scrollTop=t}function u(e){return.5*(1-Math.cos(Math.PI*e))}function l(e){if(e===null||typeof e!=="object"||e.behavior===undefined||e.behavior==="auto"||e.behavior==="instant"){return true}if(typeof e==="object"&&e.behavior==="smooth"){return false}throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function p(e,t){if(t==="Y"){return e.clientHeight+s<e.scrollHeight}if(t==="X"){return e.clientWidth+s<e.scrollWidth}}function d(t,r){var n=e.getComputedStyle(t,null)["overflow"+r];return n==="auto"||n==="scroll"}function f(e){var t=p(e,"Y")&&d(e,"Y");var r=p(e,"X")&&d(e,"X");return t||r}function m(e){while(e!==t.body&&f(e)===false){e=e.parentNode||e.host}return e}function h(t){var r=i();var o;var a;var s;var c=(r-t.startTime)/n;c=c>1?1:c;o=u(c);a=t.startX+(t.x-t.startX)*o;s=t.startY+(t.y-t.startY)*o;t.method.call(t.scrollable,a,s);if(a!==t.x||s!==t.y){e.requestAnimationFrame(h.bind(e,t))}}function v(r,n,a){var s;var u;var l;var p;var d=i();if(r===t.body){s=e;u=e.scrollX||e.pageXOffset;l=e.scrollY||e.pageYOffset;p=o.scroll}else{s=r;u=r.scrollLeft;l=r.scrollTop;p=c}h({scrollable:s,method:p,startTime:d,startX:u,startY:l,x:n,y:a})}e.scroll=e.scrollTo=function(){if(arguments[0]===undefined){return}if(l(arguments[0])===true){o.scroll.call(e,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:e.scrollY||e.pageYOffset);return}v.call(e,t.body,arguments[0].left!==undefined?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==undefined?~~arguments[0].top:e.scrollY||e.pageYOffset)};e.scrollBy=function(){if(arguments[0]===undefined){return}if(l(arguments[0])){o.scrollBy.call(e,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:0,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:0);return}v.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))};r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]===undefined){return}if(l(arguments[0])===true){if(typeof arguments[0]==="number"&&arguments[1]===undefined){throw new SyntaxError("Value could not be converted")}o.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left:typeof arguments[0]!=="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top:arguments[1]!==undefined?~~arguments[1]:this.scrollTop);return}var e=arguments[0].left;var t=arguments[0].top;v.call(this,this,typeof e==="undefined"?this.scrollLeft:~~e,typeof t==="undefined"?this.scrollTop:~~t)};r.prototype.scrollBy=function(){if(arguments[0]===undefined){return}if(l(arguments[0])===true){o.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})};r.prototype.scrollIntoView=function(){if(l(arguments[0])===true){o.scrollIntoView.call(this,arguments[0]===undefined?true:arguments[0]);return}var r=m(this);var n=r.getBoundingClientRect();var i=this.getBoundingClientRect();if(r!==t.body){v.call(this,r,r.scrollLeft+i.left-n.left,r.scrollTop+i.top-n.top);if(e.getComputedStyle(r).position!=="fixed"){e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})}}else{e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}}var Mt=function(){function e(e,t){if(e===void 0){e=[]}this.timeOffset=0;this.raf=null;this.actions=e;this.speed=t}e.prototype.addAction=function(e){var t=this.findActionIndex(e);this.actions.splice(t,0,e)};e.prototype.addActions=function(e){this.actions=this.actions.concat(e)};e.prototype.start=function(){this.timeOffset=0;var e=performance.now();var t=this.actions;var r=this;function n(){var o=performance.now();r.timeOffset+=(o-e)*r.speed;e=o;while(t.length){var i=t[0];if(r.timeOffset>=i.delay){t.shift();i.doAction()}else{break}}if(t.length>0||r.liveMode){r.raf=requestAnimationFrame(n)}}this.raf=requestAnimationFrame(n)};e.prototype.clear=function(){if(this.raf){cancelAnimationFrame(this.raf);this.raf=null}this.actions.length=0};e.prototype.setSpeed=function(e){this.speed=e};e.prototype.toggleLiveMode=function(e){this.liveMode=e};e.prototype.isActive=function(){return this.raf!==null};e.prototype.findActionIndex=function(e){var t=0;var r=this.actions.length-1;while(t<=r){var n=Math.floor((t+r)/2);if(this.actions[n].delay<e.delay){t=n+1}else if(this.actions[n].delay>e.delay){r=n-1}else{return n+1}}return t};return e}();function It(e,t){if(e.type===exports.EventType.IncrementalSnapshot&&e.data.source===exports.IncrementalSource.MouseMove){var r=e.data.positions[0].timeOffset;var n=e.timestamp+r;e.delay=n-t;return n-t}e.delay=e.timestamp-t;return e.delay}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ct(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}var xt;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(xt||(xt={}));var Lt={type:"xstate.init"};function Dt(e){return void 0===e?[]:[].concat(e)}function kt(e){return{type:"xstate.assign",assignment:e}}function jt(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function Bt(e){return function(t){return e===t}}function Ut(e){return"string"==typeof e?{type:e}:e}function Ft(e,t){return{value:e,context:t,actions:[],changed:!1,matches:Bt(e)}}function Gt(e,t,r){var n=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](n,r):e.assignment[o]})),n=t,!1}return!0})),n,o]}function Vt(e,t){void 0===t&&(t={});var r=Ct(Gt(Dt(e.states[e.initial].entry).map((function(e){return jt(e,t.actions)})),e.context,Lt),2),n=r[0],o=r[1],i={config:e,_options:t,initialState:{value:e.initial,actions:n,context:o,matches:Bt(e.initial)},transition:function(t,r){var n,o,a="string"==typeof t?{value:t,context:e.context}:t,s=a.value,c=a.context,u=Ut(r),l=e.states[s];if(l.on){var p=Dt(l.on[u.type]);try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),f=d.next();!f.done;f=d.next()){var m=f.value;if(void 0===m)return Ft(s,c);var h="string"==typeof m?{target:m}:m,v=h.target,_=h.actions,g=void 0===_?[]:_,y=h.cond,E=void 0===y?function(){return!0}:y,T=void 0===v,S=null!=v?v:s,b=e.states[S];if(E(c,u)){var O=Ct(Gt((T?Dt(g):[].concat(l.exit,g,b.entry).filter((function(e){return e}))).map((function(e){return jt(e,i._options.actions)})),c,u),3),A=O[0],P=O[1],N=O[2],R=null!=v?v:s;return{value:R,context:P,actions:A,changed:v!==s||A.length>0||N,matches:Bt(R)}}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}return Ft(s,c)}};return i}var Ht=function(e,t){return e.actions.forEach((function(r){var n=r.exec;return n&&n(e.context,t)}))};function Xt(e){var t=e.initialState,r=xt.NotStarted,n=new Set,o={_machine:e,send:function(o){r===xt.Running&&(t=e.transition(t,o),Ht(t,Ut(o)),n.forEach((function(e){return e(t)})))},subscribe:function(e){return n.add(e),e(t),{unsubscribe:function(){return n.delete(e)}}},start:function(n){if(n){var i="object"==typeof n?n:{context:e.config.context,value:n};t={value:i.value,actions:[],context:i.context,matches:Bt(i.value)}}return r=xt.Running,Ht(t,Lt),o},stop:function(){return r=xt.Stopped,n.clear(),o},get state(){return t},get status(){return r}};return o}function zt(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.type===exports.EventType.Meta){if(n.timestamp<=t){return e.slice(r)}}}return e}function Wt(e,r){var o=r.getCastFn,i=r.applyEventsSynchronously,a=r.emitter;var s=Vt({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:kt({lastPlayedEvent:function(e,t){if(t.type==="CAST_EVENT"){return t.payload.event}return e.lastPlayedEvent}}),recordTimeOffset:kt((function(e,r){var n=e.timeOffset;if("payload"in r&&"timeOffset"in r.payload){n=r.payload.timeOffset}return t(t({},e),{timeOffset:n,baselineTime:e.events[0].timestamp+n})})),play:function(e){var t,r,s,c;var u;var l=e.timer,p=e.events,d=e.baselineTime,f=e.lastPlayedEvent;l.clear();try{for(var m=n(p),h=m.next();!h.done;h=m.next()){var v=h.value;It(v,d)}}catch(e){t={error:e}}finally{try{if(h&&!h.done&&(r=m.return))r.call(m)}finally{if(t)throw t.error}}var _=zt(p,d);var g=f===null||f===void 0?void 0:f.timestamp;if((f===null||f===void 0?void 0:f.type)===exports.EventType.IncrementalSnapshot&&f.data.source===exports.IncrementalSource.MouseMove){g=f.timestamp+((u=f.data.positions[0])===null||u===void 0?void 0:u.timeOffset)}if(d<(g||0)){a.emit(exports.ReplayerEvents.PlayBack)}var y=new Array;var E=new Array;var T=function(e){if(g&&g<d&&(e.timestamp<=g||e===f)){return"continue"}if(e.timestamp<d){y.push(e)}else{var t=o(e,false);E.push({doAction:function(){t()},delay:e.delay})}};try{for(var S=n(_),b=S.next();!b.done;b=S.next()){var O=b.value;T(O)}}catch(e){s={error:e}}finally{try{if(b&&!b.done&&(c=S.return))c.call(S)}finally{if(s)throw s.error}}i(y);a.emit(exports.ReplayerEvents.Flush);l.addActions(E);l.start()},pause:function(e){e.timer.clear()},resetLastPlayedEvent:kt((function(e){return t(t({},e),{lastPlayedEvent:null})})),startLive:kt({baselineTime:function(e,t){e.timer.toggleLiveMode(true);e.timer.start();if(t.type==="TO_LIVE"&&t.payload.baselineTime){return t.payload.baselineTime}return Date.now()}}),addEvent:kt((function(e,r){var n=e.baselineTime,i=e.timer,a=e.events;if(r.type==="ADD_EVENT"){var s=r.payload.event;It(s,n);var c=a.length-1;if(!a[c]||a[c].timestamp<=s.timestamp){a.push(s)}else{var u=-1;var l=0;while(l<=c){var p=Math.floor((l+c)/2);if(a[p].timestamp<=s.timestamp){l=p+1}else{c=p-1}}if(u===-1){u=l}a.splice(u,0,s)}var d=s.timestamp<n;var f=o(s,d);if(d){f()}else if(i.isActive()){i.addAction({doAction:function(){f()},delay:s.delay})}}return t(t({},e),{events:a})}))}});return Xt(s)}function Kt(e){var t=Vt({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:function(e,t){if("payload"in t){e.timer.setSpeed(t.payload.speed)}},recordSpeed:kt({normalSpeed:function(e){return e.timer.speed}}),restoreSpeed:function(e){e.timer.setSpeed(e.normalSpeed)}}});return Xt(t)}var $t=function(e){return[".".concat(e," { background: currentColor }"),"noscript { display: none !important; }"]};var Zt;(function(e){e[e["Insert"]=0]="Insert";e[e["Remove"]=1]="Remove";e[e["Snapshot"]=2]="Snapshot";e[e["SetProperty"]=3]="SetProperty";e[e["RemoveProperty"]=4]="RemoveProperty"})(Zt||(Zt={}));function Yt(e,t){var r=e[t[0]];if(t.length===1){return r}else{return Yt(r.cssRules[t[1]].cssRules,t.slice(2))}}function qt(e){var t=i([],o(e),false);var r=t.pop();return{positions:t,index:r}}function Qt(e,t){var r=t.sheet;if(!r){return}e.forEach((function(e){if(e.type===Zt.Insert){try{if(Array.isArray(e.index)){var n=qt(e.index),o=n.positions,i=n.index;var a=Yt(r.cssRules,o);a.insertRule(e.cssText,i)}else{r.insertRule(e.cssText,e.index)}}catch(e){}}else if(e.type===Zt.Remove){try{if(Array.isArray(e.index)){var s=qt(e.index),o=s.positions,i=s.index;var a=Yt(r.cssRules,o);a.deleteRule(i||0)}else{r.deleteRule(e.index)}}catch(e){}}else if(e.type===Zt.Snapshot){Jt(e.cssTexts,t)}else if(e.type===Zt.SetProperty){var c=Yt(r.cssRules,e.index);c.style.setProperty(e.property,e.value,e.priority)}else if(e.type===Zt.RemoveProperty){var c=Yt(r.cssRules,e.index);c.style.removeProperty(e.property)}}))}function Jt(e,t){var r;try{var n=Array.from(((r=t.sheet)===null||r===void 0?void 0:r.cssRules)||[]).map((function(e){return e.cssText}));var i=Object.entries(n).reverse();var a=n.length;i.forEach((function(r){var n;var i=o(r,2),s=i[0],c=i[1];var u=e.indexOf(c);if(u===-1||u>a){try{(n=t.sheet)===null||n===void 0?void 0:n.deleteRule(Number(s))}catch(e){}}a=u}));e.forEach((function(e,r){var n,o,i;try{if(((o=(n=t.sheet)===null||n===void 0?void 0:n.cssRules[r])===null||o===void 0?void 0:o.cssText)!==e){(i=t.sheet)===null||i===void 0?void 0:i.insertRule(e,r)}}catch(e){}}))}catch(e){}}function er(e,t){var r;try{var n=Array.from(((r=e.sheet)===null||r===void 0?void 0:r.cssRules)||[]).map((function(e){return e.cssText}));t.set(e,[{type:Zt.Snapshot,cssTexts:n}])}catch(e){}}var tr=new Map;function rr(e,t){var r=tr.get(e);if(!r){r=new Map;tr.set(e,r)}if(!r.has(t)){r.set(t,[])}return r.get(t)}function nr(e,t){try{if(t===ae.WebGL){return e.getContext("webgl")||e.getContext("experimental-webgl")}return e.getContext("webgl2")}catch(e){return null}}var or=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function ir(e,t){if(!(t===null||t===void 0?void 0:t.constructor))return;var r=t.constructor.name;if(!or.includes(r))return;var n=rr(e,r);if(!n.includes(t))n.push(t)}function ar(e,t){return function(r){if(r&&typeof r==="object"&&"rr_type"in r){if("index"in r){var n=r.rr_type,a=r.index;return rr(t,n)[a]}else if("args"in r){var s=r.rr_type,c=r.args;var u=window[s];return new(u.bind.apply(u,i([void 0],o(c.map(ar(e,t))),false)))}else if("base64"in r){return dt(r.base64)}else if("src"in r){var l=e.get(r.src);if(l){return l}else{var p=new Image;p.src=r.src;e.set(r.src,p);return p}}}else if(Array.isArray(r)){return r.map(ar(e,t))}return r}}function sr(e){var t=e.mutation,r=e.target,n=e.type,a=e.imageMap,s=e.errorHandler;try{var c=nr(r,n);if(!c)return;if(t.setter){c[t.property]=t.args[0];return}var u=c[t.property];var l=t.args.map(ar(a,c));var p=u.apply(c,l);ir(c,p);var d=false;if(d){if(t.property==="compileShader"){if(!c.getShaderParameter(l[0],c.COMPILE_STATUS))console.warn("something went wrong in replay",c.getShaderInfoLog(l[0]))}else if(t.property==="linkProgram"){c.validateProgram(l[0]);if(!c.getProgramParameter(l[0],c.LINK_STATUS))console.warn("something went wrong in replay",c.getProgramInfoLog(l[0]))}var f=c.getError();if(f!==c.NO_ERROR){console.warn.apply(console,i(["WEBGL ERROR",f,"on command:",t.property],o(l),false))}}}catch(e){s(t,e)}}function cr(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a=n.getContext("2d");if(r.setter){a[r.property]=r.args[0];return}var s=a[r.property];if(r.property==="drawImage"&&typeof r.args[0]==="string"){var c=o.get(t);r.args[0]=c;s.apply(a,r.args)}else{s.apply(a,r.args)}}catch(e){i(r,e)}}function ur(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a="commands"in r?r.commands:[r];if([ae.WebGL,ae.WebGL2].includes(r.type)){return a.forEach((function(e){sr({mutation:e,type:r.type,target:n,imageMap:o,errorHandler:i})}))}return a.forEach((function(e){cr({event:t,mutation:e,target:n,imageMap:o,errorHandler:i})}))}catch(e){i(r,e)}}var lr=10*1e3;var pr=5*1e3;var dr=Nt||Rt;var fr="[replayer]";var mr={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function hr(e){return e.type==exports.EventType.IncrementalSnapshot&&(e.data.source==exports.IncrementalSource.TouchMove||e.data.source==exports.IncrementalSource.MouseInteraction&&e.data.type==exports.MouseInteractions.TouchStart)}var vr=function(){function e(e,t){var r=this;this.mouseTail=null;this.tailPositions=[];this.emitter=dr();this.legacy_missingNodeRetryMap={};this.cache=ee();this.imageMap=new Map;this.mirror=ue();this.firstFullSnapshot=null;this.newDocumentQueue=[];this.mousePos=null;this.touchActive=null;if(!(t===null||t===void 0?void 0:t.liveMode)&&e.length<2){throw new Error("Replayer need at least 2 events.")}var o={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:false,showWarning:true,showDebug:false,blockClass:"rr-block",liveMode:false,insertStyleRules:[],triggerFocus:true,UNSAFE_replayCanvas:false,pauseAnimation:true,mouseTail:mr};this.config=Object.assign({},o,t);this.handleResize=this.handleResize.bind(this);this.getCastFn=this.getCastFn.bind(this);this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this);this.emitter.on(exports.ReplayerEvents.Resize,this.handleResize);this.setupDom();this.treeIndex=new Te;this.fragmentParentMap=new Map;this.elementStateMap=new Map;this.virtualStyleRulesMap=new Map;this.emitter.on(exports.ReplayerEvents.Flush,(function(){var e,t,o,i,a,s,c,u;var l=r.treeIndex.flush(),p=l.scrollMap,d=l.inputMap,f=l.mutationData;r.fragmentParentMap.forEach((function(e,t){return r.restoreRealParent(t,e)}));try{for(var m=n(f.texts),h=m.next();!h.done;h=m.next()){var v=h.value;r.applyText(v,f)}}catch(t){e={error:t}}finally{try{if(h&&!h.done&&(t=m.return))t.call(m)}finally{if(e)throw e.error}}try{for(var _=n(r.virtualStyleRulesMap.keys()),g=_.next();!g.done;g=_.next()){var y=g.value;r.restoreNodeSheet(y)}}catch(e){o={error:e}}finally{try{if(g&&!g.done&&(i=_.return))i.call(_)}finally{if(o)throw o.error}}r.fragmentParentMap.clear();r.elementStateMap.clear();r.virtualStyleRulesMap.clear();try{for(var E=n(p.values()),T=E.next();!T.done;T=E.next()){var v=T.value;r.applyScroll(v,true)}}catch(e){a={error:e}}finally{try{if(T&&!T.done&&(s=E.return))s.call(E)}finally{if(a)throw a.error}}try{for(var S=n(d.values()),b=S.next();!b.done;b=S.next()){var v=b.value;r.applyInput(v)}}catch(e){c={error:e}}finally{try{if(b&&!b.done&&(u=S.return))u.call(S)}finally{if(c)throw c.error}}}));this.emitter.on(exports.ReplayerEvents.PlayBack,(function(){r.firstFullSnapshot=null;r.mirror.reset()}));var i=new Mt([],(t===null||t===void 0?void 0:t.speed)||o.speed);this.service=Wt({events:e.map((function(e){if(t&&t.unpackFn){return t.unpackFn(e)}return e})).sort((function(e,t){return e.timestamp-t.timestamp})),timer:i,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter});this.service.start();this.service.subscribe((function(e){r.emitter.emit(exports.ReplayerEvents.StateChange,{player:e})}));this.speedService=Kt({normalSpeed:-1,timer:i});this.speedService.start();this.speedService.subscribe((function(e){r.emitter.emit(exports.ReplayerEvents.StateChange,{speed:e})}));var a=this.service.state.context.events.find((function(e){return e.type===exports.EventType.Meta}));var s=this.service.state.context.events.find((function(e){return e.type===exports.EventType.FullSnapshot}));if(a){var c=a.data,u=c.width,l=c.height;setTimeout((function(){r.emitter.emit(exports.ReplayerEvents.Resize,{width:u,height:l})}),0)}if(s){setTimeout((function(){if(r.firstFullSnapshot){return}r.firstFullSnapshot=s;r.rebuildFullSnapshot(s);r.iframe.contentWindow.scrollTo(s.data.initialOffset)}),1)}if(this.service.state.context.events.find(hr)){this.mouse.classList.add("touch-device")}}Object.defineProperty(e.prototype,"timer",{get:function(){return this.service.state.context.timer},enumerable:false,configurable:true});e.prototype.on=function(e,t){this.emitter.on(e,t);return this};e.prototype.off=function(e,t){this.emitter.off(e,t);return this};e.prototype.setConfig=function(e){var t=this;Object.keys(e).forEach((function(r){t.config[r]=e[r]}));if(!this.config.skipInactive){this.backToNormal()}if(typeof e.speed!=="undefined"){this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}})}if(typeof e.mouseTail!=="undefined"){if(e.mouseTail===false){if(this.mouseTail){this.mouseTail.style.display="none"}}else{if(!this.mouseTail){this.mouseTail=document.createElement("canvas");this.mouseTail.width=Number.parseFloat(this.iframe.width);this.mouseTail.height=Number.parseFloat(this.iframe.height);this.mouseTail.classList.add("replayer-mouse-tail");this.wrapper.insertBefore(this.mouseTail,this.iframe)}this.mouseTail.style.display="inherit"}}};e.prototype.getMetaData=function(){var e=this.service.state.context.events[0];var t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}};e.prototype.getCurrentTime=function(){return this.timer.timeOffset+this.getTimeOffset()};e.prototype.getTimeOffset=function(){var e=this.service.state.context,t=e.baselineTime,r=e.events;return t-r[0].timestamp};e.prototype.getMirror=function(){return this.mirror};e.prototype.play=function(e){var t;if(e===void 0){e=0}if(this.service.state.matches("paused")){this.service.send({type:"PLAY",payload:{timeOffset:e}})}else{this.service.send({type:"PAUSE"});this.service.send({type:"PLAY",payload:{timeOffset:e}})}(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0].classList.remove("rrweb-paused");this.emitter.emit(exports.ReplayerEvents.Start)};e.prototype.pause=function(e){var t;if(e===undefined&&this.service.state.matches("playing")){this.service.send({type:"PAUSE"})}if(typeof e==="number"){this.play(e);this.service.send({type:"PAUSE"})}(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0].classList.add("rrweb-paused");this.emitter.emit(exports.ReplayerEvents.Pause)};e.prototype.resume=function(e){if(e===void 0){e=0}console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface.");this.play(e);this.emitter.emit(exports.ReplayerEvents.Resume)};e.prototype.startLive=function(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})};e.prototype.addEvent=function(e){var t=this;var r=this.config.unpackFn?this.config.unpackFn(e):e;if(hr(r)){this.mouse.classList.add("touch-device")}Promise.resolve().then((function(){return t.service.send({type:"ADD_EVENT",payload:{event:r}})}))};e.prototype.enableInteract=function(){this.iframe.setAttribute("scrolling","auto");this.iframe.style.pointerEvents="auto"};e.prototype.disableInteract=function(){this.iframe.setAttribute("scrolling","no");this.iframe.style.pointerEvents="none"};e.prototype.resetCache=function(){this.cache=ee()};e.prototype.setupDom=function(){this.wrapper=document.createElement("div");this.wrapper.classList.add("replayer-wrapper");this.config.root.appendChild(this.wrapper);this.mouse=document.createElement("div");this.mouse.classList.add("replayer-mouse");this.wrapper.appendChild(this.mouse);if(this.config.mouseTail!==false){this.mouseTail=document.createElement("canvas");this.mouseTail.classList.add("replayer-mouse-tail");this.mouseTail.style.display="inherit";this.wrapper.appendChild(this.mouseTail)}this.iframe=document.createElement("iframe");var e=["allow-same-origin"];if(this.config.UNSAFE_replayCanvas){e.push("allow-scripts")}this.iframe.style.display="none";this.iframe.setAttribute("sandbox",e.join(" "));this.disableInteract();this.wrapper.appendChild(this.iframe);if(this.iframe.contentWindow&&this.iframe.contentDocument){wt(this.iframe.contentWindow,this.iframe.contentDocument);Ee(this.iframe.contentWindow)}};e.prototype.handleResize=function(e){var t,r;this.iframe.style.display="inherit";try{for(var o=n([this.mouseTail,this.iframe]),i=o.next();!i.done;i=o.next()){var a=i.value;if(!a){continue}a.setAttribute("width",String(e.width));a.setAttribute("height",String(e.height))}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}};e.prototype.applyEventsSynchronously=function(e){var t,r;try{for(var o=n(e),i=o.next();!i.done;i=o.next()){var a=i.value;switch(a.type){case exports.EventType.DomContentLoaded:case exports.EventType.Load:case exports.EventType.Custom:continue;case exports.EventType.FullSnapshot:case exports.EventType.Meta:case exports.EventType.Plugin:break;case exports.EventType.IncrementalSnapshot:switch(a.data.source){case exports.IncrementalSource.MediaInteraction:continue;default:break}break;default:break}var s=this.getCastFn(a,true);s()}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}if(this.mousePos){this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,true,this.mousePos.debugData)}this.mousePos=null;if(this.touchActive===true){this.mouse.classList.add("touch-active")}else if(this.touchActive===false){this.mouse.classList.remove("touch-active")}this.touchActive=null};e.prototype.getCastFn=function(e,t){var r=this;if(t===void 0){t=false}var o;switch(e.type){case exports.EventType.DomContentLoaded:case exports.EventType.Load:break;case exports.EventType.Custom:o=function(){r.emitter.emit(exports.ReplayerEvents.CustomEvent,e)};break;case exports.EventType.Meta:o=function(){return r.emitter.emit(exports.ReplayerEvents.Resize,{width:e.data.width,height:e.data.height})};break;case exports.EventType.FullSnapshot:o=function(){if(r.firstFullSnapshot){if(r.firstFullSnapshot===e){r.firstFullSnapshot=true;return}}else{r.firstFullSnapshot=true}r.rebuildFullSnapshot(e,t);r.iframe.contentWindow.scrollTo(e.data.initialOffset)};break;case exports.EventType.IncrementalSnapshot:o=function(){var o,i;r.applyIncremental(e,t);if(t){return}if(e===r.nextUserInteractionEvent){r.nextUserInteractionEvent=null;r.backToNormal()}if(r.config.skipInactive&&!r.nextUserInteractionEvent){try{for(var a=n(r.service.state.context.events),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.timestamp<=e.timestamp){continue}if(r.isUserInteraction(c)){if(c.delay-e.delay>lr*r.speedService.state.context.timer.speed){r.nextUserInteractionEvent=c}break}}}catch(e){o={error:e}}finally{try{if(s&&!s.done&&(i=a.return))i.call(a)}finally{if(o)throw o.error}}if(r.nextUserInteractionEvent){var u=r.nextUserInteractionEvent.delay-e.delay;var l={speed:Math.min(Math.round(u/pr),r.config.maxSpeed)};r.speedService.send({type:"FAST_FORWARD",payload:l});r.emitter.emit(exports.ReplayerEvents.SkipStart,l)}}};break}var i=function(){var i,a;if(o){o()}try{for(var s=n(r.config.plugins||[]),c=s.next();!c.done;c=s.next()){var u=c.value;u.handler(e,t,{replayer:r})}}catch(e){i={error:e}}finally{try{if(c&&!c.done&&(a=s.return))a.call(s)}finally{if(i)throw i.error}}r.service.send({type:"CAST_EVENT",payload:{event:e}});var l=r.service.state.context.events.length-1;if(e===r.service.state.context.events[l]){var p=function(){if(l<r.service.state.context.events.length-1){return}r.backToNormal();r.service.send("END");r.emitter.emit(exports.ReplayerEvents.Finish)};if(e.type===exports.EventType.IncrementalSnapshot&&e.data.source===exports.IncrementalSource.MouseMove&&e.data.positions.length){setTimeout((function(){p()}),Math.max(0,-e.data.positions[0].timeOffset+50))}else{p()}}r.emitter.emit(exports.ReplayerEvents.EventCast,e)};return i};e.prototype.rebuildFullSnapshot=function(e,t){var r,o;var i=this;if(t===void 0){t=false}if(!this.iframe.contentDocument){return console.warn("Looks like your replayer has been destroyed.")}if(Object.keys(this.legacy_missingNodeRetryMap).length){console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap)}this.legacy_missingNodeRetryMap={};var a=[];this.mirror.map=ie(e.data.node,{doc:this.iframe.contentDocument,afterAppend:function(e){i.collectIframeAndAttachDocument(a,e)},cache:this.cache})[1];var s=function(e,t){c.attachDocumentToIframe(e,t);c.newDocumentQueue=c.newDocumentQueue.filter((function(t){return t!==e}))};var c=this;try{for(var u=n(a),l=u.next();!l.done;l=u.next()){var p=l.value,d=p.mutationInQueue,f=p.builtNode;s(d,f)}}catch(e){r={error:e}}finally{try{if(l&&!l.done&&(o=u.return))o.call(u)}finally{if(r)throw r.error}}var m=this.iframe.contentDocument,h=m.documentElement,v=m.head;this.insertStyleRules(h,v);if(!this.service.state.matches("playing")){this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused")}this.emitter.emit(exports.ReplayerEvents.FullsnapshotRebuilded,e);if(!t){this.waitForStylesheetLoad()}if(this.config.UNSAFE_replayCanvas){this.preloadAllImages()}};e.prototype.insertStyleRules=function(e,t){var r=document.createElement("style");e.insertBefore(r,t);var n=$t(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation){n.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }")}for(var o=0;o<n.length;o++){r.sheet.insertRule(n[o],o)}};e.prototype.attachDocumentToIframe=function(e,t){var r,o;var i=this;var s=[];if(!t.contentDocument){var c=t.parentNode;while(c){if(this.fragmentParentMap.has(c)){var u=c;var l=this.fragmentParentMap.get(u);this.restoreRealParent(u,l);break}c=c.parentNode}}re(e.node,{doc:t.contentDocument,map:this.mirror.map,hackCss:true,skipChild:false,afterAppend:function(e){i.collectIframeAndAttachDocument(s,e);if(e.__sn.type===a.Element&&e.__sn.tagName.toUpperCase()==="HTML"){var r=t.contentDocument,n=r.documentElement,o=r.head;i.insertStyleRules(n,o)}},cache:this.cache});var p=function(e,t){d.attachDocumentToIframe(e,t);d.newDocumentQueue=d.newDocumentQueue.filter((function(t){return t!==e}))};var d=this;try{for(var f=n(s),m=f.next();!m.done;m=f.next()){var h=m.value,v=h.mutationInQueue,_=h.builtNode;p(v,_)}}catch(e){r={error:e}}finally{try{if(m&&!m.done&&(o=f.return))o.call(f)}finally{if(r)throw r.error}}};e.prototype.collectIframeAndAttachDocument=function(e,t){if(Oe(t)){var r=this.newDocumentQueue.find((function(e){return e.parentId===t.__sn.id}));if(r){e.push({mutationInQueue:r,builtNode:t})}}};e.prototype.waitForStylesheetLoad=function(){var e=this;var t;var r=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.head;if(r){var n=new Set;var o;var i=this.service.state;var a=function(){i=e.service.state};this.emitter.on(exports.ReplayerEvents.Start,a);this.emitter.on(exports.ReplayerEvents.Pause,a);var s=function(){e.emitter.off(exports.ReplayerEvents.Start,a);e.emitter.off(exports.ReplayerEvents.Pause,a)};r.querySelectorAll('link[rel="stylesheet"]').forEach((function(t){if(!t.sheet){n.add(t);t.addEventListener("load",(function(){n.delete(t);if(n.size===0&&o!==-1){if(i.matches("playing")){e.play(e.getCurrentTime())}e.emitter.emit(exports.ReplayerEvents.LoadStylesheetEnd);if(o){clearTimeout(o)}s()}}))}}));if(n.size>0){this.service.send({type:"PAUSE"});this.emitter.emit(exports.ReplayerEvents.LoadStylesheetStart);o=setTimeout((function(){if(i.matches("playing")){e.play(e.getCurrentTime())}o=-1;s()}),this.config.loadTimeout)}}};e.prototype.hasImageArg=function(e){var t,r;try{for(var o=n(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(!a||typeof a!=="object"){}else if("rr_type"in a&&"args"in a){if(this.hasImageArg(a.args))return true}else if("rr_type"in a&&a.rr_type==="HTMLImageElement"){return true}else if(a instanceof Array){if(this.hasImageArg(a))return true}}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}return false};e.prototype.getImageArgs=function(e){var t,r;var a=[];try{for(var s=n(e),c=s.next();!c.done;c=s.next()){var u=c.value;if(!u||typeof u!=="object"){}else if("rr_type"in u&&"args"in u){a.push.apply(a,i([],o(this.getImageArgs(u.args)),false))}else if("rr_type"in u&&u.rr_type==="HTMLImageElement"){a.push(u.src)}else if(u instanceof Array){a.push.apply(a,i([],o(this.getImageArgs(u)),false))}}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}return a};e.prototype.preloadAllImages=function(){var e,t;var r=this;this.service.state;var o=function(){r.service.state};this.emitter.on(exports.ReplayerEvents.Start,o);this.emitter.on(exports.ReplayerEvents.Pause,o);var i=function(e){if(e.type===exports.EventType.IncrementalSnapshot&&e.data.source===exports.IncrementalSource.CanvasMutation)if("commands"in e.data){e.data.commands.forEach((function(t){return r.preloadImages(t,e)}))}else{a.preloadImages(e.data,e)}};var a=this;try{for(var s=n(this.service.state.context.events),c=s.next();!c.done;c=s.next()){var u=c.value;i(u)}}catch(t){e={error:t}}finally{try{if(c&&!c.done&&(t=s.return))t.call(s)}finally{if(e)throw e.error}}};e.prototype.preloadImages=function(e,t){var r=this;if(e.property==="drawImage"&&typeof e.args[0]==="string"&&!this.imageMap.has(t)){var n=document.createElement("canvas");var o=n.getContext("2d");var i=o===null||o===void 0?void 0:o.createImageData(n.width,n.height);i===null||i===void 0?void 0:i.data;JSON.parse(e.args[0]);o===null||o===void 0?void 0:o.putImageData(i,0,0)}else if(this.hasImageArg(e.args)){this.getImageArgs(e.args).forEach((function(e){var t=new Image;t.src=e;r.imageMap.set(e,t)}))}};e.prototype.applyIncremental=function(e,r){var n=this;var o,i;var a=e.data;switch(a.source){case exports.IncrementalSource.Mutation:{if(r){a.adds.forEach((function(e){return n.treeIndex.add(e)}));a.texts.forEach((function(e){var t=n.mirror.getNode(e.id);var r=t===null||t===void 0?void 0:t.parentNode;if(r&&n.virtualStyleRulesMap.has(r))n.virtualStyleRulesMap.delete(r);n.treeIndex.text(e)}));a.attributes.forEach((function(e){return n.treeIndex.attribute(e)}));a.removes.forEach((function(e){return n.treeIndex.remove(e,n.mirror)}))}try{this.applyMutation(a,r)}catch(e){this.warn("Exception in mutation ".concat(e.message||e),a)}break}case exports.IncrementalSource.Drag:case exports.IncrementalSource.TouchMove:case exports.IncrementalSource.MouseMove:if(r){var s=a.positions[a.positions.length-1];this.mousePos={x:s.x,y:s.y,id:s.id,debugData:a}}else{a.positions.forEach((function(t){var o={doAction:function(){n.moveAndHover(t.x,t.y,t.id,r,a)},delay:t.timeOffset+e.timestamp-n.service.state.context.baselineTime};n.timer.addAction(o)}));this.timer.addAction({doAction:function(){},delay:e.delay-((o=a.positions[0])===null||o===void 0?void 0:o.timeOffset)})}break;case exports.IncrementalSource.MouseInteraction:{if(a.id===-1){break}var c=new Event(exports.MouseInteractions[a.type].toLowerCase());var u=this.mirror.getNode(a.id);if(!u){return this.debugNodeNotFound(a,a.id)}this.emitter.emit(exports.ReplayerEvents.MouseInteraction,{type:a.type,target:u});var l=this.config.triggerFocus;switch(a.type){case exports.MouseInteractions.Blur:if("blur"in u){u.blur()}break;case exports.MouseInteractions.Focus:if(l&&u.focus){u.focus({preventScroll:true})}break;case exports.MouseInteractions.Click:case exports.MouseInteractions.TouchStart:case exports.MouseInteractions.TouchEnd:if(r){if(a.type===exports.MouseInteractions.TouchStart){this.touchActive=true}else if(a.type===exports.MouseInteractions.TouchEnd){this.touchActive=false}this.mousePos={x:a.x,y:a.y,id:a.id,debugData:a}}else{if(a.type===exports.MouseInteractions.TouchStart){this.tailPositions.length=0}this.moveAndHover(a.x,a.y,a.id,r,a);if(a.type===exports.MouseInteractions.Click){this.mouse.classList.remove("active");void this.mouse.offsetWidth;this.mouse.classList.add("active")}else if(a.type===exports.MouseInteractions.TouchStart){void this.mouse.offsetWidth;this.mouse.classList.add("touch-active")}else if(a.type===exports.MouseInteractions.TouchEnd){this.mouse.classList.remove("touch-active")}}break;case exports.MouseInteractions.TouchCancel:if(r){this.touchActive=false}else{this.mouse.classList.remove("touch-active")}break;default:u.dispatchEvent(c)}break}case exports.IncrementalSource.Scroll:{if(a.id===-1){break}if(r){this.treeIndex.scroll(a);break}this.applyScroll(a,false);break}case exports.IncrementalSource.ViewportResize:this.emitter.emit(exports.ReplayerEvents.Resize,{width:a.width,height:a.height});break;case exports.IncrementalSource.Input:{if(a.id===-1){break}if(r){this.treeIndex.input(a);break}this.applyInput(a);break}case exports.IncrementalSource.MediaInteraction:{var u=this.mirror.getNode(a.id);if(!u){return this.debugNodeNotFound(a,a.id)}var p=u;try{if(a.currentTime){p.currentTime=a.currentTime}if(a.volume){p.volume=a.volume}if(a.muted){p.muted=a.muted}if(a.type===1){p.pause()}if(a.type===0){p.play()}}catch(e){if(this.config.showWarning){console.warn("Failed to replay media interactions: ".concat(e.message||e))}}break}case exports.IncrementalSource.StyleSheetRule:{var u=this.mirror.getNode(a.id);if(!u){return this.debugNodeNotFound(a,a.id)}var d=u;var f=u.parentNode;var m=this.fragmentParentMap.has(f);var h=m?null:d.sheet;var v;if(!h){if(this.virtualStyleRulesMap.has(u)){v=this.virtualStyleRulesMap.get(u)}else{v=[];this.virtualStyleRulesMap.set(u,v)}}if(a.adds){a.adds.forEach((function(e){var t=e.rule,r=e.index;if(h){try{if(Array.isArray(r)){var n=qt(r),o=n.positions,i=n.index;var a=Yt(h.cssRules,o);a.insertRule(t,i)}else{var i=r===undefined?undefined:Math.min(r,h.cssRules.length);h.insertRule(t,i)}}catch(e){}}else{v===null||v===void 0?void 0:v.push({cssText:t,index:r,type:Zt.Insert})}}))}if(a.removes){a.removes.forEach((function(e){var t=e.index;if(m){v===null||v===void 0?void 0:v.push({index:t,type:Zt.Remove})}else{try{if(Array.isArray(t)){var r=qt(t),n=r.positions,o=r.index;var i=Yt(h.cssRules,n);i.deleteRule(o||0)}else{h===null||h===void 0?void 0:h.deleteRule(t)}}catch(e){}}}))}break}case exports.IncrementalSource.StyleDeclaration:{var u=this.mirror.getNode(a.id);if(!u){return this.debugNodeNotFound(a,a.id)}var d=u;var _=u.parentNode;var g=this.fragmentParentMap.has(_);var y=g?null:d.sheet;var E=[];if(!y){if(this.virtualStyleRulesMap.has(u)){E=this.virtualStyleRulesMap.get(u)}else{E=[];this.virtualStyleRulesMap.set(u,E)}}if(a.set){if(y){var T=Yt(y.rules,a.index);T.style.setProperty(a.set.property,a.set.value,a.set.priority)}else{E.push(t({type:Zt.SetProperty,index:a.index},a.set))}}if(a.remove){if(y){var T=Yt(y.rules,a.index);T.style.removeProperty(a.remove.property)}else{E.push(t({type:Zt.RemoveProperty,index:a.index},a.remove))}}break}case exports.IncrementalSource.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas){return}var u=this.mirror.getNode(a.id);if(!u){return this.debugNodeNotFound(a,a.id)}ur({event:e,mutation:a,target:u,imageMap:this.imageMap,errorHandler:this.warnCanvasMutationFailed.bind(this)});break}case exports.IncrementalSource.Font:{try{var S=new FontFace(a.family,a.buffer?new Uint8Array(JSON.parse(a.fontSource)):a.fontSource,a.descriptors);(i=this.iframe.contentDocument)===null||i===void 0?void 0:i.fonts.add(S)}catch(e){if(this.config.showWarning){console.warn(e)}}break}}};e.prototype.applyMutation=function(e,r){var o,i;var s=this;e.removes.forEach((function(t){var r=s.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.parentId}))){return}return s.warnNodeNotFound(e,t.id)}if(s.virtualStyleRulesMap.has(r)){s.virtualStyleRulesMap.delete(r)}var n=s.mirror.getNode(t.parentId);if(!n){return s.warnNodeNotFound(e,t.parentId)}if(t.isShadow&&Pe(n)){n=n.shadowRoot}s.mirror.removeNodeFromMap(r);if(n){var o=null;var i="__sn"in n?s.fragmentParentMap.get(n):undefined;if(i&&i.contains(r)){n=i}else if(s.fragmentParentMap.has(r)){o=s.fragmentParentMap.get(r);s.fragmentParentMap.delete(r);r=o}try{n.removeChild(r)}catch(t){if(t instanceof DOMException){s.warn("parent could not remove child in mutation",n,i,r,o,e)}else{throw t}}}}));var c=t({},this.legacy_missingNodeRetryMap);var u=[];var l=function(e){var t=null;if(e.nextId){t=s.mirror.getNode(e.nextId)}if(e.nextId!==null&&e.nextId!==undefined&&e.nextId!==-1&&!t){return true}return false};var p=function(e){var t,o;var i,p;if(!s.iframe.contentDocument){return console.warn("Looks like your replayer has been destroyed.")}var d=s.mirror.getNode(e.parentId);if(!d){if(e.node.type===a.Document){return s.newDocumentQueue.push(e)}return u.push(e)}var f=null;if(s.iframe.contentDocument.contains){f=s.iframe.contentDocument.contains(d)}else if(s.iframe.contentDocument.body.contains){f=s.iframe.contentDocument.body.contains(d)}var m=((p=(i=d).getElementsByTagName)===null||p===void 0?void 0:p.call(i,"iframe").length)>0;if(r&&f&&!Oe(d)&&!m){var h=document.createDocumentFragment();s.mirror.map[e.parentId]=h;s.fragmentParentMap.set(h,d);s.storeState(d);while(d.firstChild){h.appendChild(d.firstChild)}d=h}if(e.node.isShadow){if(!Pe(d)){d.attachShadow({mode:"open"});d=d.shadowRoot}else d=d.shadowRoot}var v=null;var _=null;if(e.previousId){v=s.mirror.getNode(e.previousId)}if(e.nextId){_=s.mirror.getNode(e.nextId)}if(l(e)){return u.push(e)}if(e.node.rootId&&!s.mirror.getNode(e.node.rootId)){return}var g=e.node.rootId?s.mirror.getNode(e.node.rootId):s.iframe.contentDocument;if(Oe(d)){s.attachDocumentToIframe(e,d);return}var y=re(e.node,{doc:g,map:s.mirror.map,skipChild:true,hackCss:true,cache:s.cache});if(e.previousId===-1||e.nextId===-1){c[e.node.id]={node:y,mutation:e};return}if("__sn"in d&&d.__sn.type===a.Element&&d.__sn.tagName==="textarea"&&e.node.type===a.Text){try{for(var E=n(Array.from(d.childNodes)),T=E.next();!T.done;T=E.next()){var S=T.value;if(S.nodeType===d.TEXT_NODE){d.removeChild(S)}}}catch(e){t={error:e}}finally{try{if(T&&!T.done&&(o=E.return))o.call(E)}finally{if(t)throw t.error}}}if(v&&v.nextSibling&&v.nextSibling.parentNode){d.insertBefore(y,v.nextSibling)}else if(_&&_.parentNode){d.contains(_)?d.insertBefore(y,_):d.insertBefore(y,null)}else{if(d===g){while(g.firstChild){g.removeChild(g.firstChild)}}d.appendChild(y)}if(Oe(y)){var b=s.newDocumentQueue.find((function(e){return e.parentId===y.__sn.id}));if(b){s.attachDocumentToIframe(b,y);s.newDocumentQueue=s.newDocumentQueue.filter((function(e){return e!==b}))}}if(e.previousId||e.nextId){s.legacy_resolveMissingNode(c,d,y,e)}};e.adds.forEach((function(e){p(e)}));var d=Date.now();while(u.length){var f=Se(u);u.length=0;if(Date.now()-d>500){this.warn("Timeout in the loop, please check the resolve tree data:",f);break}try{for(var m=(o=void 0,n(f)),h=m.next();!h.done;h=m.next()){var v=h.value;var _=this.mirror.getNode(v.value.parentId);if(!_){this.debug("Drop resolve tree since there is no parent for the root node.",v)}else{be(v,(function(e){p(e)}))}}}catch(e){o={error:e}}finally{try{if(h&&!h.done&&(i=m.return))i.call(m)}finally{if(o)throw o.error}}}if(Object.keys(c).length){Object.assign(this.legacy_missingNodeRetryMap,c)}e.texts.forEach((function(t){var r=s.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id}))){return}return s.warnNodeNotFound(e,t.id)}if(s.fragmentParentMap.has(r)){r=s.fragmentParentMap.get(r)}r.textContent=t.value}));e.attributes.forEach((function(t){var r=s.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id}))){return}return s.warnNodeNotFound(e,t.id)}if(s.fragmentParentMap.has(r)){r=s.fragmentParentMap.get(r)}for(var n in t.attributes){if(typeof n==="string"){var o=t.attributes[n];if(o===null){r.removeAttribute(n)}else if(typeof o==="string"){try{r.setAttribute(n,o)}catch(e){if(s.config.showWarning){console.warn("An error occurred may due to the checkout feature.",e)}}}else if(n==="style"){var i=o;var a=r;for(var c in i){if(i[c]===false){a.style.removeProperty(c)}else if(i[c]instanceof Array){var u=i[c];a.style.setProperty(c,u[0],u[1])}else{var l=i[c];a.style.setProperty(c,l)}}}}}}))};e.prototype.applyScroll=function(e,t){var r=this.mirror.getNode(e.id);if(!r){return this.debugNodeNotFound(e,e.id)}if(r===this.iframe.contentDocument){this.iframe.contentWindow.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}else if(r.__sn.type===a.Document){r.defaultView.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}else{try{r.scrollTop=e.y;r.scrollLeft=e.x}catch(e){}}};e.prototype.applyInput=function(e){var t=this.mirror.getNode(e.id);if(!t){return this.debugNodeNotFound(e,e.id)}try{t.checked=e.isChecked;t.value=e.text}catch(e){}};e.prototype.applyText=function(e,t){var r=this.mirror.getNode(e.id);if(!r){return this.debugNodeNotFound(t,e.id)}try{r.textContent=e.value}catch(e){}};e.prototype.legacy_resolveMissingNode=function(e,t,r,n){var o=n.previousId,i=n.nextId;var a=o&&e[o];var s=i&&e[i];if(a){var c=a,u=c.node,l=c.mutation;t.insertBefore(u,r);delete e[l.node.id];delete this.legacy_missingNodeRetryMap[l.node.id];if(l.previousId||l.nextId){this.legacy_resolveMissingNode(e,t,u,l)}}if(s){var p=s,u=p.node,l=p.mutation;t.insertBefore(u,r.nextSibling);delete e[l.node.id];delete this.legacy_missingNodeRetryMap[l.node.id];if(l.previousId||l.nextId){this.legacy_resolveMissingNode(e,t,u,l)}}};e.prototype.moveAndHover=function(e,t,r,n,o){var i=this.mirror.getNode(r);if(!i){return this.debugNodeNotFound(o,r)}var a=Ae(i,this.iframe);var s=e*a.absoluteScale+a.x;var c=t*a.absoluteScale+a.y;this.mouse.style.left="".concat(s,"px");this.mouse.style.top="".concat(c,"px");if(!n){this.drawMouseTail({x:s,y:c})}this.hoverElements(i)};e.prototype.drawMouseTail=function(e){var t=this;if(!this.mouseTail){return}var r=this.config.mouseTail===true?mr:Object.assign({},mr,this.config.mouseTail),n=r.lineCap,o=r.lineWidth,i=r.strokeStyle,a=r.duration;var s=function(){if(!t.mouseTail){return}var e=t.mouseTail.getContext("2d");if(!e||!t.tailPositions.length){return}e.clearRect(0,0,t.mouseTail.width,t.mouseTail.height);e.beginPath();e.lineWidth=o;e.lineCap=n;e.strokeStyle=i;e.moveTo(t.tailPositions[0].x,t.tailPositions[0].y);t.tailPositions.forEach((function(t){return e.lineTo(t.x,t.y)}));e.stroke()};this.tailPositions.push(e);s();setTimeout((function(){t.tailPositions=t.tailPositions.filter((function(t){return t!==e}));s()}),a/this.speedService.state.context.timer.speed)};e.prototype.hoverElements=function(e){var t;(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.querySelectorAll(".\\:hover").forEach((function(e){e.classList.remove(":hover")}));var r=e;while(r){if(r.classList){r.classList.add(":hover")}r=r.parentElement}};e.prototype.isUserInteraction=function(e){if(e.type!==exports.EventType.IncrementalSnapshot){return false}return e.data.source>exports.IncrementalSource.Mutation&&e.data.source<=exports.IncrementalSource.Input};e.prototype.backToNormal=function(){this.nextUserInteractionEvent=null;if(this.speedService.state.matches("normal")){return}this.speedService.send({type:"BACK_TO_NORMAL"});this.emitter.emit(exports.ReplayerEvents.SkipEnd,{speed:this.speedService.state.context.normalSpeed})};e.prototype.restoreRealParent=function(e,t){this.mirror.map[t.__sn.id]=t;if(t.__sn.type===a.Element&&t.__sn.tagName==="textarea"&&e.textContent){t.value=e.textContent}t.appendChild(e);this.restoreState(t)};e.prototype.storeState=function(e){var t,r;if(e){if(e.nodeType===e.ELEMENT_NODE){var o=e;if(o.scrollLeft||o.scrollTop){this.elementStateMap.set(e,{scroll:[o.scrollLeft,o.scrollTop]})}if(o.tagName==="STYLE")er(o,this.virtualStyleRulesMap);var i=o.children;try{for(var a=n(Array.from(i)),s=a.next();!s.done;s=a.next()){var c=s.value;this.storeState(c)}}catch(e){t={error:e}}finally{try{if(s&&!s.done&&(r=a.return))r.call(a)}finally{if(t)throw t.error}}}}};e.prototype.restoreState=function(e){var t,r;if(e.nodeType===e.ELEMENT_NODE){var o=e;if(this.elementStateMap.has(e)){var i=this.elementStateMap.get(e);if(i.scroll){o.scrollLeft=i.scroll[0];o.scrollTop=i.scroll[1]}this.elementStateMap.delete(e)}var a=o.children;try{for(var s=n(Array.from(a)),c=s.next();!c.done;c=s.next()){var u=c.value;this.restoreState(u)}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}}};e.prototype.restoreNodeSheet=function(e){var t=this.virtualStyleRulesMap.get(e);if(e.nodeName!=="STYLE"){return}if(!t){return}var r=e;Qt(t,r)};e.prototype.warnNodeNotFound=function(e,t){if(this.treeIndex.idRemoved(t)){this.warn("Node with id '".concat(t,"' was previously removed. "),e)}else{this.warn("Node with id '".concat(t,"' not found. "),e)}};e.prototype.warnCanvasMutationFailed=function(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)};e.prototype.debugNodeNotFound=function(e,t){if(this.treeIndex.idRemoved(t)){this.debug(fr,"Node with id '".concat(t,"' was previously removed. "),e)}else{this.debug(fr,"Node with id '".concat(t,"' not found. "),e)}};e.prototype.warn=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!this.config.showWarning){return}console.warn.apply(console,i([fr],o(e),false))};e.prototype.debug=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!this.config.showDebug){return}console.log.apply(console,i([fr],o(e),false))};return e}();var _r=Pt.addCustomEvent;var gr=Pt.freezePage;var yr=Uint8Array,Er=Uint16Array,Tr=Uint32Array;var Sr=new yr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]);var br=new yr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]);var Or=new yr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var Ar=function(e,t){var r=new Er(31);for(var n=0;n<31;++n){r[n]=t+=1<<e[n-1]}var o=new Tr(r[30]);for(var n=1;n<30;++n){for(var i=r[n];i<r[n+1];++i){o[i]=i-r[n]<<5|n}}return[r,o]};var Pr=Ar(Sr,2),Nr=Pr[0],Rr=Pr[1];Nr[28]=258,Rr[258]=28;var wr=Ar(br,0),Mr=wr[0],Ir=wr[1];var Cr=new Er(32768);for(var xr=0;xr<32768;++xr){var Lr=(xr&43690)>>>1|(xr&21845)<<1;Lr=(Lr&52428)>>>2|(Lr&13107)<<2;Lr=(Lr&61680)>>>4|(Lr&3855)<<4;Cr[xr]=((Lr&65280)>>>8|(Lr&255)<<8)>>>1}var Dr=function(e,t,r){var n=e.length;var o=0;var i=new Er(t);for(;o<n;++o)++i[e[o]-1];var a=new Er(t);for(o=0;o<t;++o){a[o]=a[o-1]+i[o-1]<<1}var s;if(r){s=new Er(1<<t);var c=15-t;for(o=0;o<n;++o){if(e[o]){var u=o<<4|e[o];var l=t-e[o];var p=a[e[o]-1]++<<l;for(var d=p|(1<<l)-1;p<=d;++p){s[Cr[p]>>>c]=u}}}}else{s=new Er(n);for(o=0;o<n;++o)s[o]=Cr[a[e[o]-1]++]>>>15-e[o]}return s};var kr=new yr(288);for(var xr=0;xr<144;++xr)kr[xr]=8;for(var xr=144;xr<256;++xr)kr[xr]=9;for(var xr=256;xr<280;++xr)kr[xr]=7;for(var xr=280;xr<288;++xr)kr[xr]=8;var jr=new yr(32);for(var xr=0;xr<32;++xr)jr[xr]=5;var Br=Dr(kr,9,0),Ur=Dr(kr,9,1);var Fr=Dr(jr,5,0),Gr=Dr(jr,5,1);var Vr=function(e){var t=e[0];for(var r=1;r<e.length;++r){if(e[r]>t)t=e[r]}return t};var Hr=function(e,t,r){var n=t/8>>0;return(e[n]|e[n+1]<<8)>>>(t&7)&r};var Xr=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)};var zr=function(e){return(e/8>>0)+(e&7&&1)};var Wr=function(e,t,r){if(t==null||t<0)t=0;if(r==null||r>e.length)r=e.length;var n=new(e instanceof Er?Er:e instanceof Tr?Tr:yr)(r-t);n.set(e.subarray(t,r));return n};var Kr=function(e,t,r){var n=e.length;var o=!t||r;var i=!r||r.i;if(!r)r={};if(!t)t=new yr(n*3);var a=function(e){var r=t.length;if(e>r){var n=new yr(Math.max(r*2,e));n.set(t);t=n}};var s=r.f||0,c=r.p||0,u=r.b||0,l=r.l,p=r.d,d=r.m,f=r.n;var m=n*8;do{if(!l){r.f=s=Hr(e,c,1);var h=Hr(e,c+1,3);c+=3;if(!h){var v=zr(c)+4,_=e[v-4]|e[v-3]<<8,g=v+_;if(g>n){if(i)throw"unexpected EOF";break}if(o)a(u+_);t.set(e.subarray(v,g),u);r.b=u+=_,r.p=c=g*8;continue}else if(h==1)l=Ur,p=Gr,d=9,f=5;else if(h==2){var y=Hr(e,c,31)+257,E=Hr(e,c+10,15)+4;var T=y+Hr(e,c+5,31)+1;c+=14;var S=new yr(T);var b=new yr(19);for(var O=0;O<E;++O){b[Or[O]]=Hr(e,c+O*3,7)}c+=E*3;var A=Vr(b),P=(1<<A)-1;if(!i&&c+T*(A+7)>m)break;var N=Dr(b,A,1);for(var O=0;O<T;){var R=N[Hr(e,c,P)];c+=R&15;var v=R>>>4;if(v<16){S[O++]=v}else{var w=0,M=0;if(v==16)M=3+Hr(e,c,3),c+=2,w=S[O-1];else if(v==17)M=3+Hr(e,c,7),c+=3;else if(v==18)M=11+Hr(e,c,127),c+=7;while(M--)S[O++]=w}}var I=S.subarray(0,y),C=S.subarray(y);d=Vr(I);f=Vr(C);l=Dr(I,d,1);p=Dr(C,f,1)}else throw"invalid block type";if(c>m)throw"unexpected EOF"}if(o)a(u+131072);var x=(1<<d)-1,L=(1<<f)-1;var D=d+f+18;while(i||c+D<m){var w=l[Xr(e,c)&x],k=w>>>4;c+=w&15;if(c>m)throw"unexpected EOF";if(!w)throw"invalid length/literal";if(k<256)t[u++]=k;else if(k==256){l=null;break}else{var j=k-254;if(k>264){var O=k-257,B=Sr[O];j=Hr(e,c,(1<<B)-1)+Nr[O];c+=B}var U=p[Xr(e,c)&L],F=U>>>4;if(!U)throw"invalid distance";c+=U&15;var C=Mr[F];if(F>3){var B=br[F];C+=Xr(e,c)&(1<<B)-1,c+=B}if(c>m)throw"unexpected EOF";if(o)a(u+131072);var G=u+j;for(;u<G;u+=4){t[u]=t[u-C];t[u+1]=t[u+1-C];t[u+2]=t[u+2-C];t[u+3]=t[u+3-C]}u=G}}r.l=l,r.p=c,r.b=u;if(l)s=1,r.m=d,r.d=p,r.n=f}while(!s);return u==t.length?t:Wr(t,0,u)};var $r=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r;e[n+1]|=r>>>8};var Zr=function(e,t,r){r<<=t&7;var n=t/8>>0;e[n]|=r;e[n+1]|=r>>>8;e[n+2]|=r>>>16};var Yr=function(e,t){var r=[];for(var n=0;n<e.length;++n){if(e[n])r.push({s:n,f:e[n]})}var o=r.length;var i=r.slice();if(!o)return[new yr(0),0];if(o==1){var a=new yr(r[0].s+1);a[r[0].s]=1;return[a,1]}r.sort((function(e,t){return e.f-t.f}));r.push({s:-1,f:25001});var s=r[0],c=r[1],u=0,l=1,p=2;r[0]={s:-1,f:s.f+c.f,l:s,r:c};while(l!=o-1){s=r[r[u].f<r[p].f?u++:p++];c=r[u!=l&&r[u].f<r[p].f?u++:p++];r[l++]={s:-1,f:s.f+c.f,l:s,r:c}}var d=i[0].s;for(var n=1;n<o;++n){if(i[n].s>d)d=i[n].s}var f=new Er(d+1);var m=qr(r[l-1],f,0);if(m>t){var n=0,h=0;var v=m-t,_=1<<v;i.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));for(;n<o;++n){var g=i[n].s;if(f[g]>t){h+=_-(1<<m-f[g]);f[g]=t}else break}h>>>=v;while(h>0){var y=i[n].s;if(f[y]<t)h-=1<<t-f[y]++-1;else++n}for(;n>=0&&h;--n){var E=i[n].s;if(f[E]==t){--f[E];++h}}m=t}return[new yr(f),m]};var qr=function(e,t,r){return e.s==-1?Math.max(qr(e.l,t,r+1),qr(e.r,t,r+1)):t[e.s]=r};var Qr=function(e){var t=e.length;while(t&&!e[--t]);var r=new Er(++t);var n=0,o=e[0],i=1;var a=function(e){r[n++]=e};for(var s=1;s<=t;++s){if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);if(i>2){a(i>10?i-11<<5|28690:i-3<<5|12305);i=0}}else if(i>3){a(o),--i;for(;i>6;i-=6)a(8304);if(i>2)a(i-3<<5|8208),i=0}while(i--)a(o);i=1;o=e[s]}}return[r.subarray(0,n),t]};var Jr=function(e,t){var r=0;for(var n=0;n<t.length;++n)r+=e[n]*t[n];return r};var en=function(e,t,r){var n=r.length;var o=zr(t+2);e[o]=n&255;e[o+1]=n>>>8;e[o+2]=e[o]^255;e[o+3]=e[o+1]^255;for(var i=0;i<n;++i)e[o+i+4]=r[i];return(o+4+n)*8};var tn=function(e,t,r,n,o,i,a,s,c,u,l){$r(t,l++,r);++o[256];var p=Yr(o,15),d=p[0],f=p[1];var m=Yr(i,15),h=m[0],v=m[1];var _=Qr(d),g=_[0],y=_[1];var E=Qr(h),T=E[0],S=E[1];var b=new Er(19);for(var O=0;O<g.length;++O)b[g[O]&31]++;for(var O=0;O<T.length;++O)b[T[O]&31]++;var A=Yr(b,7),P=A[0],N=A[1];var R=19;for(;R>4&&!P[Or[R-1]];--R);var w=u+5<<3;var M=Jr(o,kr)+Jr(i,jr)+a;var I=Jr(o,d)+Jr(i,h)+a+14+3*R+Jr(b,P)+(2*b[16]+3*b[17]+7*b[18]);if(w<=M&&w<=I)return en(t,l,e.subarray(c,c+u));var C,x,L,D;$r(t,l,1+(I<M)),l+=2;if(I<M){C=Dr(d,f,0),x=d,L=Dr(h,v,0),D=h;var k=Dr(P,N,0);$r(t,l,y-257);$r(t,l+5,S-1);$r(t,l+10,R-4);l+=14;for(var O=0;O<R;++O)$r(t,l+3*O,P[Or[O]]);l+=3*R;var j=[g,T];for(var B=0;B<2;++B){var U=j[B];for(var O=0;O<U.length;++O){var F=U[O]&31;$r(t,l,k[F]),l+=P[F];if(F>15)$r(t,l,U[O]>>>5&127),l+=U[O]>>>12}}}else{C=Br,x=kr,L=Fr,D=jr}for(var O=0;O<s;++O){if(n[O]>255){var F=n[O]>>>18&31;Zr(t,l,C[F+257]),l+=x[F+257];if(F>7)$r(t,l,n[O]>>>23&31),l+=Sr[F];var G=n[O]&31;Zr(t,l,L[G]),l+=D[G];if(G>3)Zr(t,l,n[O]>>>5&8191),l+=br[G]}else{Zr(t,l,C[n[O]]),l+=x[n[O]]}}Zr(t,l,C[256]);return l+x[256]};var rn=new Tr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]);var nn=new yr(0);var on=function(e,t,r,n,o,i){var a=e.length;var s=new yr(n+a+5*(1+Math.floor(a/7e3))+o);var c=s.subarray(n,s.length-o);var u=0;if(!t||a<8){for(var l=0;l<=a;l+=65535){var p=l+65535;if(p<a){u=en(c,u,e.subarray(l,p))}else{c[l]=i;u=en(c,u,e.subarray(l,a))}}}else{var d=rn[t-1];var f=d>>>13,m=d&8191;var h=(1<<r)-1;var v=new Er(32768),_=new Er(h+1);var g=Math.ceil(r/3),y=2*g;var E=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<y)&h};var T=new Tr(25e3);var S=new Er(288),b=new Er(32);var O=0,A=0,l=0,P=0,N=0,R=0;for(;l<a;++l){var w=E(l);var M=l&32767;var I=_[w];v[M]=I;_[w]=M;if(N<=l){var C=a-l;if((O>7e3||P>24576)&&C>423){u=tn(e,c,0,T,S,b,A,P,R,l-R,u);P=O=A=0,R=l;for(var x=0;x<286;++x)S[x]=0;for(var x=0;x<30;++x)b[x]=0}var L=2,D=0,k=m,j=M-I&32767;if(C>2&&w==E(l-j)){var B=Math.min(f,C)-1;var U=Math.min(32767,l);var F=Math.min(258,C);while(j<=U&&--k&&M!=I){if(e[l+L]==e[l+L-j]){var G=0;for(;G<F&&e[l+G]==e[l+G-j];++G);if(G>L){L=G,D=j;if(G>B)break;var V=Math.min(j,G-2);var H=0;for(var x=0;x<V;++x){var X=l-j+x+32768&32767;var z=v[X];var W=X-z+32768&32767;if(W>H)H=W,I=X}}}M=I,I=v[M];j+=M-I+32768&32767}}if(D){T[P++]=268435456|Rr[L]<<18|Ir[D];var K=Rr[L]&31,Z=Ir[D]&31;A+=Sr[K]+br[Z];++S[257+K];++b[Z];N=l+L;++O}else{T[P++]=e[l];++S[e[l]]}}}u=tn(e,c,i,T,S,b,A,P,R,l-R,u);if(!i)u=en(c,u,nn)}return Wr(s,0,n+zr(u)+o)};var an=function(){var e=1,t=0;return{p:function(r){var n=e,o=t;var i=r.length;for(var a=0;a!=i;){var s=Math.min(a+5552,i);for(;a<s;++a)n+=r[a],o+=n;n%=65521,o%=65521}e=n,t=o},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}};var sn=function(e,t,r,n,o){return on(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,n,!o)};var cn=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};var un=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)};var ln=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function pn(e,t){if(t===void 0){t={}}var r=an();r.p(e);var n=sn(e,t,2,4);return un(n,t),cn(n,n.length-4,r.d()),n}function dn(e,t){return Kr((ln(e),e.subarray(2,-4)),t)}function fn(e,t){var r=e.length;if(!t&&typeof TextEncoder!="undefined")return(new TextEncoder).encode(e);var n=new yr(e.length+(e.length>>>1));var o=0;var i=function(e){n[o++]=e};for(var a=0;a<r;++a){if(o+5>n.length){var s=new yr(o+8+(r-a<<1));s.set(n);n=s}var c=e.charCodeAt(a);if(c<128||t)i(c);else if(c<2048)i(192|c>>>6),i(128|c&63);else if(c>55295&&c<57344)c=65536+(c&1023<<10)|e.charCodeAt(++a)&1023,i(240|c>>>18),i(128|c>>>12&63),i(128|c>>>6&63),i(128|c&63);else i(224|c>>>12),i(128|c>>>6&63),i(128|c&63)}return Wr(n,0,o)}function mn(e,t){var r="";if(!t&&typeof TextDecoder!="undefined")return(new TextDecoder).decode(e);for(var n=0;n<e.length;){var o=e[n++];if(o<128||t)r+=String.fromCharCode(o);else if(o<224)r+=String.fromCharCode((o&31)<<6|e[n++]&63);else if(o<240)r+=String.fromCharCode((o&15)<<12|(e[n++]&63)<<6|e[n++]&63);else o=((o&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023)}return r}var hn="v1";var vn=function(e){var r=t(t({},e),{v:hn});return mn(pn(fn(JSON.stringify(r))),true)};var _n=function(e){if(typeof e!=="string"){return e}try{var t=JSON.parse(e);if(t.timestamp){return t}}catch(e){}try{var t=JSON.parse(mn(dn(fn(e,true))));if(t.v===hn){return t}throw new Error("These events were packed with packer ".concat(t.v," which is incompatible with current packer ").concat(hn,"."))}catch(e){console.error(e);throw new Error("Unknown data format.")}};var gn=function(){function e(e){this.fileName=e.fileName||"";this.functionName=e.functionName||"";this.lineNumber=e.lineNumber;this.columnNumber=e.columnNumber}e.prototype.toString=function(){var e=this.lineNumber||"";var t=this.columnNumber||"";if(this.functionName){return this.functionName+" ("+this.fileName+":"+e+":"+t+")"}return this.fileName+":"+e+":"+t};return e}();var yn=/(^|@)\S+:\d+/;var En=/^\s*at .*(\S+:\d+|\(native\))/m;var Tn=/^(eval@)?(\[native code])?$/;var Sn={parse:function(e){if(!e){return[]}if(typeof e.stacktrace!=="undefined"||typeof e["opera#sourceloc"]!=="undefined"){return this.parseOpera(e)}else if(e.stack&&e.stack.match(En)){return this.parseV8OrIE(e)}else if(e.stack){return this.parseFFOrSafari(e)}else{throw new Error("Cannot parse given Error object")}},extractLocation:function(e){if(e.indexOf(":")===-1){return[e]}var t=/(.+?)(?::(\d+))?(?::(\d+))?$/;var r=t.exec(e.replace(/[()]/g,""));if(!r)throw new Error("Cannot parse given url: ".concat(e));return[r[1],r[2]||undefined,r[3]||undefined]},parseV8OrIE:function(e){var t=e.stack.split("\n").filter((function(e){return!!e.match(En)}),this);return t.map((function(e){if(e.indexOf("(eval ")>-1){e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,"")}var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");var r=t.match(/ (\((.+):(\d+):(\d+)\)$)/);t=r?t.replace(r[0],""):t;var n=t.split(/\s+/).slice(1);var o=this.extractLocation(r?r[1]:n.pop());var i=n.join(" ")||undefined;var a=["eval","<anonymous>"].indexOf(o[0])>-1?undefined:o[0];return new gn({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){var t=e.stack.split("\n").filter((function(e){return!e.match(Tn)}),this);return t.map((function(e){if(e.indexOf(" > eval")>-1){e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")}if(e.indexOf("@")===-1&&e.indexOf(":")===-1){return new gn({functionName:e})}else{var t=/((.*".+"[^@]*)?[^@]*)(?:@)/;var r=e.match(t);var n=r&&r[1]?r[1]:undefined;var o=this.extractLocation(e.replace(t,""));return new gn({functionName:n,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}}),this)},parseOpera:function(e){if(!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length){return this.parseOpera9(e)}else if(!e.stack){return this.parseOpera10(e)}else{return this.parseOpera11(e)}},parseOpera9:function(e){var t=/Line (\d+).*script (?:in )?(\S+)/i;var r=e.message.split("\n");var n=[];for(var o=2,i=r.length;o<i;o+=2){var a=t.exec(r[o]);if(a){n.push(new gn({fileName:a[2],lineNumber:parseFloat(a[1])}))}}return n},parseOpera10:function(e){var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var r=e.stacktrace.split("\n");var n=[];for(var o=0,i=r.length;o<i;o+=2){var a=t.exec(r[o]);if(a){n.push(new gn({functionName:a[3]||undefined,fileName:a[2],lineNumber:parseFloat(a[1])}))}}return n},parseOpera11:function(e){var t=e.stack.split("\n").filter((function(e){return!!e.match(yn)&&!e.match(/^Error created at/)}),this);return t.map((function(e){var t=e.split("@");var r=this.extractLocation(t.pop());var n=t.shift()||"";var o=n.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||undefined;return new gn({functionName:o,fileName:r[0],lineNumber:r[1],columnNumber:r[2]})}),this)}};function bn(e){if(!e||!e.outerHTML){return""}var t="";while(e.parentElement){var r=e.localName;if(!r){break}r=r.toLowerCase();var n=e.parentElement;var o=[];if(n.children&&n.children.length>0){for(var i=0;i<n.children.length;i++){var a=n.children[i];if(a.localName&&a.localName.toLowerCase){if(a.localName.toLowerCase()===r){o.push(a)}}}}if(o.length>1){r+=":eq("+o.indexOf(e)+")"}t=r+(t?">"+t:"");e=n}return t}function On(e){return Object.prototype.toString.call(e)==="[object Object]"}function An(e,t){var r,o;if(t===0){return true}var i=Object.keys(e);try{for(var a=n(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(On(e[c])&&An(e[c],t-1)){return true}}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(o=a.return))o.call(a)}finally{if(r)throw r.error}}return false}function Pn(e,t){var r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,t);var n=[];var o=[];return JSON.stringify(e,(function(e,t){if(n.length>0){var r=n.indexOf(this);~r?n.splice(r+1):n.push(this);~r?o.splice(r,Infinity,e):o.push(e);if(~n.indexOf(t)){if(n[0]===t){t="[Circular ~]"}else{t="[Circular ~."+o.slice(0,n.indexOf(t)).join(".")+"]"}}}else{n.push(t)}if(t===null||t===undefined){return t}if(i(t)){return a(t)}if(t instanceof Event){var s={};for(var c in t){var u=t[c];if(Array.isArray(u)){s[c]=bn(u.length?u[0]:null)}else{s[c]=u}}return s}else if(t instanceof Node){if(t instanceof HTMLElement){return t?t.outerHTML:""}return t.nodeName}else if(t instanceof Error){return t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message}return t}));function i(e){if(On(e)&&Object.keys(e).length>r.numOfKeysLimit){return true}if(typeof e==="function"){return true}if(On(e)&&An(e,r.depthOfLimit)){return true}return false}function a(e){var t=e.toString();if(r.stringLengthLimit&&t.length>r.stringLengthLimit){t="".concat(t.slice(0,r.stringLengthLimit),"...")}return t}}var Nn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Rn(e,t,r){var a,s;var c=r.logger;if(!c){return function(){}}var u;if(typeof c==="string"){u=t[c]}else{u=c}var l=0;var p=[];if(r.level.includes("error")){if(window){var d=function(t){var n=t.message,o=t.error;var i=Sn.parse(o).map((function(e){return e.toString()}));var a=[Pn(n,r.stringifyOptions)];e({level:"error",trace:i,payload:a})};window.addEventListener("error",d);p.push((function(){if(window)window.removeEventListener("error",d)}))}}try{for(var f=n(r.level),m=f.next();!m.done;m=f.next()){var h=m.value;p.push(v(u,h))}}catch(e){a={error:e}}finally{try{if(m&&!m.done&&(s=f.return))s.call(f)}finally{if(a)throw a.error}}return function(){p.forEach((function(e){return e()}))};function v(t,n){var a=this;if(!t[n]){return function(){}}return fe(t,n,(function(t){return function(){var s=[];for(var c=0;c<arguments.length;c++){s[c]=arguments[c]}t.apply(a,s);try{var u=Sn.parse(new Error).map((function(e){return e.toString()})).splice(1);var p=s.map((function(e){return Pn(e,r.stringifyOptions)}));l++;if(l<r.lengthThreshold){e({level:n,trace:u,payload:p})}else if(l===r.lengthThreshold){e({level:"warn",trace:[],payload:[Pn("The number of log records reached the threshold.")]})}}catch(e){t.apply(void 0,i(["rrweb logger error:",e],o(s),false))}}}))}}var wn="rrweb/console@1";var Mn=function(e){return{name:wn,observer:Rn,options:e?Object.assign({},Nn,e):Nn}};var In="__rrweb_original__";var Cn={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:undefined};var xn=function(){function e(e){this.config=Object.assign(Cn,e)}e.prototype.getConsoleLogger=function(){var e,t;var r=this;var a={};var s=function(e){if(e==="trace"){a[e]=function(e){var t=console.log[In]?console.log[In]:console.log;t.apply(void 0,i(i([],o(e.payload.map((function(e){return JSON.parse(e)}))),false),[r.formatMessage(e)],false))}}else{a[e]=function(t){var n=console[e][In]?console[e][In]:console[e];n.apply(void 0,i(i([],o(t.payload.map((function(e){return JSON.parse(e)}))),false),[r.formatMessage(t)],false))}}};try{for(var c=n(this.config.level),u=c.next();!u.done;u=c.next()){var l=u.value;s(l)}}catch(t){e={error:t}}finally{try{if(u&&!u.done&&(t=c.return))t.call(c)}finally{if(e)throw e.error}}return a};e.prototype.formatMessage=function(e){if(e.trace.length===0){return""}var t="\n\tat ";var r=t;r+=e.trace.join(t);return r};return e}();var Ln=function(e){var t=(e===null||e===void 0?void 0:e.replayLogger)||new xn(e).getConsoleLogger();return{handler:function(e,r,n){var o=null;if(e.type===exports.EventType.IncrementalSnapshot&&e.data.source===exports.IncrementalSource.Log){o=e.data}else if(e.type===exports.EventType.Plugin&&e.data.plugin===wn){o=e.data.payload}if(o){try{if(typeof t[o.level]==="function"){t[o.level](o)}}catch(e){if(n.replayer.config.showWarning){console.warn(e)}}}}}};exports.PLUGIN_NAME=wn;exports.Replayer=vr;exports.addCustomEvent=_r;exports.freezePage=gr;exports.getRecordConsolePlugin=Mn;exports.getReplayConsolePlugin=Ln;exports.pack=vn;exports.record=Pt;exports.unpack=_n;exports.utils=Ne},{}],384:[function(require,e,exports){"use strict";function t(e){return typeof e==="function"}var r=console.error.bind(console);function n(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:true,enumerable:n,writable:true,value:r})}function o(e){if(e&&e.logger){if(!t(e.logger))r("new logger isn't a function, not replacing");else r=e.logger}}function i(e,o,i){if(!e||!e[o]){r("no original function "+o+" to wrap");return}if(!i){r("no wrapper function");r((new Error).stack);return}if(!t(e[o])||!t(i)){r("original object and wrapper must be functions");return}var a=e[o];var s=i(a,o);n(s,"__original",a);n(s,"__unwrap",(function(){if(e[o]===s)n(e,o,a)}));n(s,"__wrapped",true);n(e,o,s);return s}function a(e,t,n){if(!e){r("must provide one or more modules to patch");r((new Error).stack);return}else if(!Array.isArray(e)){e=[e]}if(!(t&&Array.isArray(t))){r("must provide one or more functions to wrap on modules");return}e.forEach((function(e){t.forEach((function(t){i(e,t,n)}))}))}function s(e,t){if(!e||!e[t]){r("no function to unwrap.");r((new Error).stack);return}if(!e[t].__unwrap){r("no original to unwrap to -- has "+t+" already been unwrapped?")}else{return e[t].__unwrap()}}function c(e,t){if(!e){r("must provide one or more modules to patch");r((new Error).stack);return}else if(!Array.isArray(e)){e=[e]}if(!(t&&Array.isArray(t))){r("must provide one or more functions to unwrap on modules");return}e.forEach((function(e){t.forEach((function(t){s(e,t)}))}))}o.wrap=i;o.massWrap=a;o.unwrap=s;o.massUnwrap=c;e.exports=o},{}],385:[function(require,e,exports){(function(e,t){(function(){var r=require("process/browser.js").nextTick;var n=Function.prototype.apply;var o=Array.prototype.slice;var i={};var a=0;exports.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(e){e.close()};function s(e,t){this._id=e;this._clearFn=t}s.prototype.unref=s.prototype.ref=function(){};s.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};exports.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout((function t(){if(e._onTimeout)e._onTimeout()}),t)}};exports.setImmediate=typeof e==="function"?e:function(e){var t=a++;var n=arguments.length<2?false:o.call(arguments,1);i[t]=true;r((function r(){if(i[t]){if(n){e.apply(null,n)}else{e.call(null)}exports.clearImmediate(t)}}));return t};exports.clearImmediate=typeof t==="function"?t:function(e){delete i[e]}}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":382,timers:385}],386:[function(require,e,exports){(function(t){(function(){var r;var n;var o;var i;var a;var s;var c;var u;var l;var p;var d;var f;var m;var h;var v;var _;var g;var y;var E;var T;var S;var b;var O;var A;var P;var N;var R;var w;var M;var I;var C;(function(r){var n=typeof t==="object"?t:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(exports){r(o(n,o(exports)))}))}else if(typeof e==="object"&&typeof e.exports==="object"){r(o(n,o(e.exports)))}else{r(o(n))}function o(exports,e){if(exports!==n){if(typeof Object.create==="function"){Object.defineProperty(exports,"__esModule",{value:true})}else{exports.__esModule=true}}return function(t,r){return exports[t]=e?e(t,r):r}}})((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};r=function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)};n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};o=function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++){if(t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o]))r[n[o]]=e[n[o]]}return r};i=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};a=function(e,t){return function(r,n){t(r,n,e)}};s=function(e,t,r,n,o,i){function a(e){if(e!==void 0&&typeof e!=="function")throw new TypeError("Function expected");return e}var s=n.kind,c=s==="getter"?"get":s==="setter"?"set":"value";var u=!t&&e?n["static"]?e:e.prototype:null;var l=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{});var p,d=false;for(var f=r.length-1;f>=0;f--){var m={};for(var h in n)m[h]=h==="access"?{}:n[h];for(var h in n.access)m.access[h]=n.access[h];m.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var v=(0,r[f])(s==="accessor"?{get:l.get,set:l.set}:l[c],m);if(s==="accessor"){if(v===void 0)continue;if(v===null||typeof v!=="object")throw new TypeError("Object expected");if(p=a(v.get))l.get=p;if(p=a(v.set))l.set=p;if(p=a(v.init))o.unshift(p)}else if(p=a(v)){if(s==="field")o.unshift(p);else l[c]=p}}if(u)Object.defineProperty(u,n.name,l);d=true};c=function(e,t,r){var n=arguments.length>2;for(var o=0;o<t.length;o++){r=n?t[o].call(e,r):t[o].call(e)}return n?r:void 0};u=function(e){return typeof e==="symbol"?e:"".concat(e)};l=function(e,t,r){if(typeof t==="symbol")t=t.description?"[".concat(t.description,"]"):"";return Object.defineProperty(e,"name",{configurable:true,value:r?"".concat(r," ",t):t})};p=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};d=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n["throw"](e))}catch(e){i(e)}}function c(e){e.done?r(e.value):o(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())}))};f=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(a&&(a=0,s[0]&&(r=0)),r)try{if(n=1,o&&(i=s[0]&2?o["return"]:s[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;if(o=0,i)s=[s[0]&2,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;o=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1];i=s;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(s);break}if(i[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};m=function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))M(t,e,r)};M=Object.create?function(e,t,r,n){if(n===undefined)n=r;var o=Object.getOwnPropertyDescriptor(t,r);if(!o||("get"in o?!t.__esModule:o.writable||o.configurable)){o={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,o)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};h=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};v=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{while((t===void 0||t-- >0)&&!(o=n.next()).done)i.push(o.value)}catch(e){a={error:e}}finally{try{if(o&&!o.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return i};_=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e};g=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};y=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++){if(i||!(n in t)){if(!i)i=Array.prototype.slice.call(t,0,n);i[n]=t[n]}}return e.concat(i||Array.prototype.slice.call(t))};E=function(e){return this instanceof E?(this.v=e,this):new E(e)};T=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){if(n[e])o[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))}}function s(e,t){try{c(n[e](t))}catch(e){p(i[0][3],e)}}function c(e){e.value instanceof E?Promise.resolve(e.value.v).then(u,l):p(i[0][2],e)}function u(e){s("next",e)}function l(e){s("throw",e)}function p(e,t){if(e(t),i.shift(),i.length)s(i[0][0],i[0][1])}};S=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:E(e[n](t)),done:false}:o?o(t):t}:o}};b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof h==="function"?h(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=e[t]&&function(r){return new Promise((function(n,i){r=e[t](r),o(n,i,r.done,r.value)}))}}function o(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}};O=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var x=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};A=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))M(t,e,r);x(t,e);return t};P=function(e){return e&&e.__esModule?e:{default:e}};N=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};R=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r};w=function(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)};I=function(e,t,r){if(t!==null&&t!==void 0){if(typeof t!=="object"&&typeof t!=="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!=="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else if(r){e.stack.push({async:true})}return t};var L=typeof SuppressedError==="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};C=function(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t;e.hasError=true}function r(){while(e.stack.length){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,(function(e){t(e);return r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}return r()};e("__extends",r);e("__assign",n);e("__rest",o);e("__decorate",i);e("__param",a);e("__esDecorate",s);e("__runInitializers",c);e("__propKey",u);e("__setFunctionName",l);e("__metadata",p);e("__awaiter",d);e("__generator",f);e("__exportStar",m);e("__createBinding",M);e("__values",h);e("__read",v);e("__spread",_);e("__spreadArrays",g);e("__spreadArray",y);e("__await",E);e("__asyncGenerator",T);e("__asyncDelegator",S);e("__asyncValues",b);e("__makeTemplateObject",O);e("__importStar",A);e("__importDefault",P);e("__classPrivateFieldGet",N);e("__classPrivateFieldSet",R);e("__classPrivateFieldIn",w);e("__addDisposableResource",I);e("__disposeResources",C)}))}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],387:[function(require,e,exports){(function(e){(function(){"use strict";
/**
 * @license Angular v12.0.0-next.0
 * (c) 2010-2020 Google LLC. https://angular.io/
 * License: MIT
 */(function(e){typeof define==="function"&&define.amd?define(e):e()})((function(){"use strict";
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var t=function(e){var t=e["performance"];function r(e){t&&t["mark"]&&t["mark"](e)}function n(e,r){t&&t["measure"]&&t["measure"](e,r)}r("Zone");var o=e["__Zone_symbol_prefix"]||"__zone_symbol__";function i(e){return o+e}var a=e[i("forceDuplicateZoneCheck")]===true;if(e["Zone"]){if(a||typeof e["Zone"].__symbol__!=="function"){throw new Error("Zone already loaded.")}else{return e["Zone"]}}var s=function(){function t(e,t){this._parent=e;this._name=t?t.name||"unnamed":"<root>";this._properties=t&&t.properties||{};this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,t)}t.assertZonePatched=function(){if(e["Promise"]!==w["ZoneAwarePromise"]){throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` "+"has been overwritten.\n"+"Most likely cause is that a Promise polyfill has been loaded "+"after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. "+"If you must load one, do so before loading zone.js.)")}};Object.defineProperty(t,"root",{get:function(){var e=t.current;while(e.parent){e=e.parent}return e},enumerable:false,configurable:true});Object.defineProperty(t,"current",{get:function(){return I.zone},enumerable:false,configurable:true});Object.defineProperty(t,"currentTask",{get:function(){return C},enumerable:false,configurable:true});t.__load_patch=function(o,i,s){if(s===void 0){s=false}if(w.hasOwnProperty(o)){if(!s&&a){throw Error("Already loaded patch: "+o)}}else if(!e["__Zone_disable_"+o]){var c="Zone:"+o;r(c);w[o]=i(e,t,M);n(c,c)}};Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:false,configurable:true});t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]};t.prototype.getZoneWith=function(e){var t=this;while(t){if(t._properties.hasOwnProperty(e)){return t}t=t._parent}return null};t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)};t.prototype.wrap=function(e,t){if(typeof e!=="function"){throw new Error("Expecting function got: "+e)}var r=this._zoneDelegate.intercept(this,e,t);var n=this;return function(){return n.runGuarded(r,this,arguments,t)}};t.prototype.run=function(e,t,r,n){I={parent:I,zone:this};try{return this._zoneDelegate.invoke(this,e,t,r,n)}finally{I=I.parent}};t.prototype.runGuarded=function(e,t,r,n){if(t===void 0){t=null}I={parent:I,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,r,n)}catch(e){if(this._zoneDelegate.handleError(this,e)){throw e}}}finally{I=I.parent}};t.prototype.runTask=function(e,t,r){if(e.zone!=this){throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")")}if(e.state===E&&(e.type===R||e.type===N)){return}var n=e.state!=b;n&&e._transitionTo(b,S);e.runCount++;var o=C;C=e;I={parent:I,zone:this};try{if(e.type==N&&e.data&&!e.data.isPeriodic){e.cancelFn=undefined}try{return this._zoneDelegate.invokeTask(this,e,t,r)}catch(e){if(this._zoneDelegate.handleError(this,e)){throw e}}}finally{if(e.state!==E&&e.state!==A){if(e.type==R||e.data&&e.data.isPeriodic){n&&e._transitionTo(S,b)}else{e.runCount=0;this._updateTaskCount(e,-1);n&&e._transitionTo(E,b,E)}}I=I.parent;C=o}};t.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this){var t=this;while(t){if(t===e.zone){throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name)}t=t.parent}}e._transitionTo(T,E);var r=[];e._zoneDelegates=r;e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){e._transitionTo(A,T,E);this._zoneDelegate.handleError(this,t);throw t}if(e._zoneDelegates===r){this._updateTaskCount(e,1)}if(e.state==T){e._transitionTo(S,T)}return e};t.prototype.scheduleMicroTask=function(e,t,r,n){return this.scheduleTask(new l(P,e,t,r,n,undefined))};t.prototype.scheduleMacroTask=function(e,t,r,n,o){return this.scheduleTask(new l(N,e,t,r,n,o))};t.prototype.scheduleEventTask=function(e,t,r,n,o){return this.scheduleTask(new l(R,e,t,r,n,o))};t.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")");e._transitionTo(O,S,b);try{this._zoneDelegate.cancelTask(this,e)}catch(t){e._transitionTo(A,O);this._zoneDelegate.handleError(this,t);throw t}this._updateTaskCount(e,-1);e._transitionTo(E,O);e.runCount=0;return e};t.prototype._updateTaskCount=function(e,t){var r=e._zoneDelegates;if(t==-1){e._zoneDelegates=null}for(var n=0;n<r.length;n++){r[n]._updateTaskCount(e.type,t)}};return t}();s.__symbol__=i;var c={name:"",onHasTask:function(e,t,r,n){return e.hasTask(r,n)},onScheduleTask:function(e,t,r,n){return e.scheduleTask(r,n)},onInvokeTask:function(e,t,r,n,o,i){return e.invokeTask(r,n,o,i)},onCancelTask:function(e,t,r,n){return e.cancelTask(r,n)}};var u=function(){function e(e,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0};this.zone=e;this._parentDelegate=t;this._forkZS=r&&(r&&r.onFork?r:t._forkZS);this._forkDlgt=r&&(r.onFork?t:t._forkDlgt);this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone);this._interceptZS=r&&(r.onIntercept?r:t._interceptZS);this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt);this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone);this._invokeZS=r&&(r.onInvoke?r:t._invokeZS);this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt);this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone);this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS);this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt);this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone);this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS);this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt);this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone);this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS);this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt);this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone);this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS);this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt);this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone);this._hasTaskZS=null;this._hasTaskDlgt=null;this._hasTaskDlgtOwner=null;this._hasTaskCurrZone=null;var n=r&&r.onHasTask;var o=t&&t._hasTaskZS;if(n||o){this._hasTaskZS=n?r:c;this._hasTaskDlgt=t;this._hasTaskDlgtOwner=this;this._hasTaskCurrZone=e;if(!r.onScheduleTask){this._scheduleTaskZS=c;this._scheduleTaskDlgt=t;this._scheduleTaskCurrZone=this.zone}if(!r.onInvokeTask){this._invokeTaskZS=c;this._invokeTaskDlgt=t;this._invokeTaskCurrZone=this.zone}if(!r.onCancelTask){this._cancelTaskZS=c;this._cancelTaskDlgt=t;this._cancelTaskCurrZone=this.zone}}}e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new s(e,t)};e.prototype.intercept=function(e,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,r):t};e.prototype.invoke=function(e,t,r,n,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,r,n,o):t.apply(r,n)};e.prototype.handleError=function(e,t){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t):true};e.prototype.scheduleTask=function(e,t){var r=t;if(this._scheduleTaskZS){if(this._hasTaskZS){r._zoneDelegates.push(this._hasTaskDlgtOwner)}r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t);if(!r)r=t}else{if(t.scheduleFn){t.scheduleFn(t)}else if(t.type==P){_(t)}else{throw new Error("Task is missing scheduleFn.")}}return r};e.prototype.invokeTask=function(e,t,r,n){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,r,n):t.callback.apply(r,n)};e.prototype.cancelTask=function(e,t){var r;if(this._cancelTaskZS){r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t)}else{if(!t.cancelFn){throw Error("Task is not cancelable")}r=t.cancelFn(t)}return r};e.prototype.hasTask=function(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}};e.prototype._updateTaskCount=function(e,t){var r=this._taskCounts;var n=r[e];var o=r[e]=n+t;if(o<0){throw new Error("More tasks executed then were scheduled.")}if(n==0||o==0){var i={microTask:r["microTask"]>0,macroTask:r["macroTask"]>0,eventTask:r["eventTask"]>0,change:e};this.hasTask(this.zone,i)}};return e}();var l=function(){function t(r,n,o,i,a,s){this._zone=null;this.runCount=0;this._zoneDelegates=null;this._state="notScheduled";this.type=r;this.source=n;this.data=i;this.scheduleFn=a;this.cancelFn=s;if(!o){throw new Error("callback is not defined")}this.callback=o;var c=this;if(r===R&&i&&i.useG){this.invoke=t.invokeTask}else{this.invoke=function(){return t.invokeTask.call(e,c,this,arguments)}}}t.invokeTask=function(e,t,r){if(!e){e=this}x++;try{e.runCount++;return e.zone.runTask(e,t,r)}finally{if(x==1){g()}x--}};Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:false,configurable:true});t.prototype.cancelScheduleRequest=function(){this._transitionTo(E,T)};t.prototype._transitionTo=function(e,t,r){if(this._state===t||this._state===r){this._state=e;if(e==E){this._zoneDelegates=null}}else{throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(r?" or '"+r+"'":"")+", was '"+this._state+"'.")}};t.prototype.toString=function(){if(this.data&&typeof this.data.handleId!=="undefined"){return this.data.handleId.toString()}else{return Object.prototype.toString.call(this)}};t.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}};return t}();var p=i("setTimeout");var d=i("Promise");var f=i("then");var m=[];var h=false;var v;function _(t){if(x===0&&m.length===0){if(!v){if(e[d]){v=e[d].resolve(0)}}if(v){var r=v[f];if(!r){r=v["then"]}r.call(v,g)}else{e[p](g,0)}}t&&m.push(t)}function g(){if(!h){h=true;while(m.length){var e=m;m=[];for(var t=0;t<e.length;t++){var r=e[t];try{r.zone.runTask(r,null,null)}catch(e){M.onUnhandledError(e)}}}M.microtaskDrainDone();h=false}}var y={name:"NO ZONE"};var E="notScheduled",T="scheduling",S="scheduled",b="running",O="canceling",A="unknown";var P="microTask",N="macroTask",R="eventTask";var w={};var M={symbol:i,currentZoneFrame:function(){return I},onUnhandledError:L,microtaskDrainDone:L,scheduleMicroTask:_,showUncaughtError:function(){return!s[i("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:L,patchMethod:function(){return L},bindArguments:function(){return[]},patchThen:function(){return L},patchMacroTask:function(){return L},patchEventPrototype:function(){return L},isIEOrEdge:function(){return false},getGlobalObjects:function(){return undefined},ObjectDefineProperty:function(){return L},ObjectGetOwnPropertyDescriptor:function(){return undefined},ObjectCreate:function(){return undefined},ArraySlice:function(){return[]},patchClass:function(){return L},wrapWithCurrentZone:function(){return L},filterProperties:function(){return[]},attachOriginToPatched:function(){return L},_redefineProperty:function(){return L},patchCallbacks:function(){return L}};var I={parent:null,zone:new s(null,null)};var C=null;var x=0;function L(){}n("Zone","Zone");return e["Zone"]=s}(typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||e);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var r=Object.getOwnPropertyDescriptor;var n=Object.defineProperty;var o=Object.getPrototypeOf;var i=Object.create;var a=Array.prototype.slice;var s="addEventListener";var c="removeEventListener";var u=Zone.__symbol__(s);var l=Zone.__symbol__(c);var p="true";var d="false";var f=Zone.__symbol__("");function m(e,t){return Zone.current.wrap(e,t)}function h(e,t,r,n,o){return Zone.current.scheduleMacroTask(e,t,r,n,o)}var v=Zone.__symbol__;var _=typeof window!=="undefined";var g=_?window:undefined;var y=_&&g||typeof self==="object"&&self||e;var E="removeAttribute";var T=[null];function S(e,t){for(var r=e.length-1;r>=0;r--){if(typeof e[r]==="function"){e[r]=m(e[r],t+"_"+r)}}return e}function b(e,t){var n=e.constructor["name"];var o=function(o){var i=t[o];var a=e[i];if(a){var s=r(e,i);if(!O(s)){return"continue"}e[i]=function(e){var t=function(){return e.apply(this,S(arguments,n+"."+i))};j(t,e);return t}(a)}};for(var i=0;i<t.length;i++){o(i)}}function O(e){if(!e){return true}if(e.writable===false){return false}return!(typeof e.get==="function"&&typeof e.set==="undefined")}var A=typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope;var P=!("nw"in y)&&typeof y.process!=="undefined"&&{}.toString.call(y.process)==="[object process]";var N=!P&&!A&&!!(_&&g["HTMLElement"]);var R=typeof y.process!=="undefined"&&{}.toString.call(y.process)==="[object process]"&&!A&&!!(_&&g["HTMLElement"]);var w={};var M=function(e){e=e||y.event;if(!e){return}var t=w[e.type];if(!t){t=w[e.type]=v("ON_PROPERTY"+e.type)}var r=this||e.target||y;var n=r[t];var o;if(N&&r===g&&e.type==="error"){var i=e;o=n&&n.call(this,i.message,i.filename,i.lineno,i.colno,i.error);if(o===true){e.preventDefault()}}else{o=n&&n.apply(this,arguments);if(o!=undefined&&!o){e.preventDefault()}}return o};function I(e,t,o){var i=r(e,t);if(!i&&o){var a=r(o,t);if(a){i={enumerable:true,configurable:true}}}if(!i||!i.configurable){return}var s=v("on"+t+"patched");if(e.hasOwnProperty(s)&&e[s]){return}delete i.writable;delete i.value;var c=i.get;var u=i.set;var l=t.substr(2);var p=w[l];if(!p){p=w[l]=v("ON_PROPERTY"+l)}i.set=function(t){var r=this;if(!r&&e===y){r=y}if(!r){return}var n=r[p];if(n){r.removeEventListener(l,M)}if(u){u.apply(r,T)}if(typeof t==="function"){r[p]=t;r.addEventListener(l,M,false)}else{r[p]=null}};i.get=function(){var r=this;if(!r&&e===y){r=y}if(!r){return null}var n=r[p];if(n){return n}else if(c){var o=c&&c.call(this);if(o){i.set.call(this,o);if(typeof r[E]==="function"){r.removeAttribute(t)}return o}}return null};n(e,t,i);e[s]=true}function C(e,t,r){if(t){for(var n=0;n<t.length;n++){I(e,"on"+t[n],r)}}else{var o=[];for(var i in e){if(i.substr(0,2)=="on"){o.push(i)}}for(var a=0;a<o.length;a++){I(e,o[a],r)}}}var x=v("originalInstance");function L(e){var t=y[e];if(!t)return;y[v(e)]=t;y[e]=function(){var r=S(arguments,e);switch(r.length){case 0:this[x]=new t;break;case 1:this[x]=new t(r[0]);break;case 2:this[x]=new t(r[0],r[1]);break;case 3:this[x]=new t(r[0],r[1],r[2]);break;case 4:this[x]=new t(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}};j(y[e],t);var r=new t((function(){}));var o;for(o in r){if(e==="XMLHttpRequest"&&o==="responseBlob")continue;(function(t){if(typeof r[t]==="function"){y[e].prototype[t]=function(){return this[x][t].apply(this[x],arguments)}}else{n(y[e].prototype,t,{set:function(r){if(typeof r==="function"){this[x][t]=m(r,e+"."+t);j(this[x][t],r)}else{this[x][t]=r}},get:function(){return this[x][t]}})}})(o)}for(o in t){if(o!=="prototype"&&t.hasOwnProperty(o)){y[e][o]=t[o]}}}function D(e,t,n){var i=e;while(i&&!i.hasOwnProperty(t)){i=o(i)}if(!i&&e[t]){i=e}var a=v(t);var s=null;if(i&&(!(s=i[a])||!i.hasOwnProperty(a))){s=i[a]=i[t];var c=i&&r(i,t);if(O(c)){var u=n(s,a,t);i[t]=function(){return u(this,arguments)};j(i[t],s)}}return s}function k(e,t,r){var n=null;function o(e){var t=e.data;t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)};n.apply(t.target,t.args);return e}n=D(e,t,(function(e){return function(t,n){var i=r(t,n);if(i.cbIdx>=0&&typeof n[i.cbIdx]==="function"){return h(i.name,n[i.cbIdx],i,o)}else{return e.apply(t,n)}}}))}function j(e,t){e[v("OriginalDelegate")]=t}var B=false;var U=false;function F(){try{var e=g.navigator.userAgent;if(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1){return true}}catch(e){}return false}function G(){if(B){return U}B=true;try{var e=g.navigator.userAgent;if(e.indexOf("MSIE ")!==-1||e.indexOf("Trident/")!==-1||e.indexOf("Edge/")!==-1){U=true}}catch(e){}return U}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Zone.__load_patch("ZoneAwarePromise",(function(e,t,r){var n=Object.getOwnPropertyDescriptor;var o=Object.defineProperty;function i(e){if(e&&e.toString===Object.prototype.toString){var t=e.constructor&&e.constructor.name;return(t?t:"")+": "+JSON.stringify(e)}return e?e.toString():Object.prototype.toString.call(e)}var a=r.symbol;var s=[];var c=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]===true;var u=a("Promise");var l=a("then");var p="__creationTrace__";r.onUnhandledError=function(e){if(r.showUncaughtError()){var t=e&&e.rejection;if(t){console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:undefined)}else{console.error(e)}}};r.microtaskDrainDone=function(){var e=function(){var e=s.shift();try{e.zone.runGuarded((function(){if(e.throwOriginal){throw e.rejection}throw e}))}catch(e){f(e)}};while(s.length){e()}};var d=a("unhandledPromiseRejectionHandler");function f(e){r.onUnhandledError(e);try{var n=t[d];if(typeof n==="function"){n.call(this,e)}}catch(e){}}function m(e){return e&&e.then}function h(e){return e}function v(e){return B.reject(e)}var _=a("state");var g=a("value");var y=a("finally");var E=a("parentPromiseValue");var T=a("parentPromiseState");var S="Promise.then";var b=null;var O=true;var A=false;var P=0;function N(e,t){return function(r){try{I(e,t,r)}catch(t){I(e,false,t)}}}var R=function(){var e=false;return function t(r){return function(){if(e){return}e=true;r.apply(null,arguments)}}};var w="Promise resolved with itself";var M=a("currentTaskTrace");function I(e,n,a){var u=R();if(e===a){throw new TypeError(w)}if(e[_]===b){var l=null;try{if(typeof a==="object"||typeof a==="function"){l=a&&a.then}}catch(t){u((function(){I(e,false,t)}))();return e}if(n!==A&&a instanceof B&&a.hasOwnProperty(_)&&a.hasOwnProperty(g)&&a[_]!==b){x(a);I(e,a[_],a[g])}else if(n!==A&&typeof l==="function"){try{l.call(a,u(N(e,n)),u(N(e,false)))}catch(t){u((function(){I(e,false,t)}))()}}else{e[_]=n;var d=e[g];e[g]=a;if(e[y]===y){if(n===O){e[_]=e[T];e[g]=e[E]}}if(n===A&&a instanceof Error){var f=t.currentTask&&t.currentTask.data&&t.currentTask.data[p];if(f){o(a,M,{configurable:true,enumerable:false,writable:true,value:f})}}for(var m=0;m<d.length;){L(e,d[m++],d[m++],d[m++],d[m++])}if(d.length==0&&n==A){e[_]=P;var h=a;try{throw new Error("Uncaught (in promise): "+i(a)+(a&&a.stack?"\n"+a.stack:""))}catch(e){h=e}if(c){h.throwOriginal=true}h.rejection=a;h.promise=e;h.zone=t.current;h.task=t.currentTask;s.push(h);r.scheduleMicroTask()}}}return e}var C=a("rejectionHandledHandler");function x(e){if(e[_]===P){try{var r=t[C];if(r&&typeof r==="function"){r.call(this,{rejection:e[g],promise:e})}}catch(e){}e[_]=A;for(var n=0;n<s.length;n++){if(e===s[n].promise){s.splice(n,1)}}}}function L(e,t,r,n,o){x(e);var i=e[_];var a=i?typeof n==="function"?n:h:typeof o==="function"?o:v;t.scheduleMicroTask(S,(function(){try{var n=e[g];var o=!!r&&y===r[y];if(o){r[E]=n;r[T]=i}var s=t.run(a,undefined,o&&a!==v&&a!==h?[]:[n]);I(r,true,s)}catch(e){I(r,false,e)}}),r)}var k="function ZoneAwarePromise() { [native code] }";var j=function(){};var B=function(){function e(t){var r=this;if(!(r instanceof e)){throw new Error("Must be an instanceof Promise.")}r[_]=b;r[g]=[];try{t&&t(N(r,O),N(r,A))}catch(e){I(r,false,e)}}e.toString=function(){return k};e.resolve=function(e){return I(new this(null),O,e)};e.reject=function(e){return I(new this(null),A,e)};e.race=function(e){var t;var r;var n=new this((function(e,n){t=e;r=n}));function o(e){t(e)}function i(e){r(e)}for(var a=0,s=e;a<s.length;a++){var c=s[a];if(!m(c)){c=this.resolve(c)}c.then(o,i)}return n};e.all=function(t){return e.allWithCallback(t)};e.allSettled=function(t){var r=this&&this.prototype instanceof e?this:e;return r.allWithCallback(t,{thenCallback:function(e){return{status:"fulfilled",value:e}},errorCallback:function(e){return{status:"rejected",reason:e}}})};e.allWithCallback=function(e,t){var r;var n;var o=new this((function(e,t){r=e;n=t}));var i=2;var a=0;var s=[];var c=function(e){if(!m(e)){e=u.resolve(e)}var o=a;try{e.then((function(e){s[o]=t?t.thenCallback(e):e;i--;if(i===0){r(s)}}),(function(e){if(!t){n(e)}else{s[o]=t.errorCallback(e);i--;if(i===0){r(s)}}}))}catch(e){n(e)}i++;a++};var u=this;for(var l=0,p=e;l<p.length;l++){var d=p[l];c(d)}i-=2;if(i===0){r(s)}return o};Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"Promise"},enumerable:false,configurable:true});Object.defineProperty(e.prototype,Symbol.species,{get:function(){return e},enumerable:false,configurable:true});e.prototype.then=function(r,n){var o=this.constructor[Symbol.species];if(!o||typeof o!=="function"){o=this.constructor||e}var i=new o(j);var a=t.current;if(this[_]==b){this[g].push(a,i,r,n)}else{L(this,a,i,r,n)}return i};e.prototype.catch=function(e){return this.then(null,e)};e.prototype.finally=function(r){var n=this.constructor[Symbol.species];if(!n||typeof n!=="function"){n=e}var o=new n(j);o[y]=y;var i=t.current;if(this[_]==b){this[g].push(i,o,r,r)}else{L(this,i,o,r,r)}return o};return e}();B["resolve"]=B.resolve;B["reject"]=B.reject;B["race"]=B.race;B["all"]=B.all;var U=e[u]=e["Promise"];e["Promise"]=B;var F=a("thenPatched");function G(e){var t=e.prototype;var r=n(t,"then");if(r&&(r.writable===false||!r.configurable)){return}var o=t.then;t[l]=o;e.prototype.then=function(e,t){var r=this;var n=new B((function(e,t){o.call(r,e,t)}));return n.then(e,t)};e[F]=true}r.patchThen=G;function V(e){return function(t,r){var n=e.apply(t,r);if(n instanceof B){return n}var o=n.constructor;if(!o[F]){G(o)}return n}}if(U){G(U);D(e,"fetch",(function(e){return V(e)}))}Promise[t.__symbol__("uncaughtPromiseErrors")]=s;return B}));
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Zone.__load_patch("toString",(function(e){var t=Function.prototype.toString;var r=v("OriginalDelegate");var n=v("Promise");var o=v("Error");var i=function i(){if(typeof this==="function"){var a=this[r];if(a){if(typeof a==="function"){return t.call(a)}else{return Object.prototype.toString.call(a)}}if(this===Promise){var s=e[n];if(s){return t.call(s)}}if(this===Error){var c=e[o];if(c){return t.call(c)}}}return t.call(this)};i[r]=t;Function.prototype.toString=i;var a=Object.prototype.toString;var s="[object Promise]";Object.prototype.toString=function(){if(typeof Promise==="function"&&this instanceof Promise){return s}return a.call(this)}}));
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var V=false;if(typeof window!=="undefined"){try{var H=Object.defineProperty({},"passive",{get:function(){V=true}});window.addEventListener("test",H,H);window.removeEventListener("test",H,H)}catch(e){V=false}}var X={useG:true};var z={};var W={};var K=new RegExp("^"+f+"(\\w+)(true|false)$");var Z=v("propagationStopped");function Y(e,t){var r=(t?t(e):e)+d;var n=(t?t(e):e)+p;var o=f+r;var i=f+n;z[e]={};z[e][d]=o;z[e][p]=i}function q(e,t,r){var n=r&&r.add||s;var i=r&&r.rm||c;var a=r&&r.listeners||"eventListeners";var u=r&&r.rmAll||"removeAllListeners";var l=v(n);var m="."+n+":";var h="prependListener";var _="."+h+":";var g=function(e,t,r){if(e.isRemoved){return}var n=e.callback;if(typeof n==="object"&&n.handleEvent){e.callback=function(e){return n.handleEvent(e)};e.originalDelegate=n}e.invoke(e,t,[r]);var o=e.options;if(o&&typeof o==="object"&&o.once){var a=e.originalDelegate?e.originalDelegate:e.callback;t[i].call(t,r.type,a,o)}};var y=function(t){t=t||e.event;if(!t){return}var r=this||t.target||e;var n=r[z[t.type][d]];if(n){if(n.length===1){g(n[0],r,t)}else{var o=n.slice();for(var i=0;i<o.length;i++){if(t&&t[Z]===true){break}g(o[i],r,t)}}}};var E=function(t){t=t||e.event;if(!t){return}var r=this||t.target||e;var n=r[z[t.type][p]];if(n){if(n.length===1){g(n[0],r,t)}else{var o=n.slice();for(var i=0;i<o.length;i++){if(t&&t[Z]===true){break}g(o[i],r,t)}}}};function T(t,r){if(!t){return false}var s=true;if(r&&r.useG!==undefined){s=r.useG}var c=r&&r.vh;var g=true;if(r&&r.chkDup!==undefined){g=r.chkDup}var T=false;if(r&&r.rt!==undefined){T=r.rt}var S=t;while(S&&!S.hasOwnProperty(n)){S=o(S)}if(!S&&t[n]){S=t}if(!S){return false}if(S[l]){return false}var b=r&&r.eventNameToString;var O={};var A=S[l]=S[n];var N=S[v(i)]=S[i];var R=S[v(a)]=S[a];var w=S[v(u)]=S[u];var M;if(r&&r.prepend){M=S[v(r.prepend)]=S[r.prepend]}function I(e,t){if(!V&&typeof e==="object"&&e){return!!e.capture}if(!V||!t){return e}if(typeof e==="boolean"){return{capture:e,passive:true}}if(!e){return{passive:true}}if(typeof e==="object"&&e.passive!==false){return Object.assign(Object.assign({},e),{passive:true})}return e}var C=function(e){if(O.isExisting){return}return A.call(O.target,O.eventName,O.capture?E:y,O.options)};var x=function(e){if(!e.isRemoved){var t=z[e.eventName];var r=void 0;if(t){r=t[e.capture?p:d]}var n=r&&e.target[r];if(n){for(var o=0;o<n.length;o++){var i=n[o];if(i===e){n.splice(o,1);e.isRemoved=true;if(n.length===0){e.allRemoved=true;e.target[r]=null}break}}}}if(!e.allRemoved){return}return N.call(e.target,e.eventName,e.capture?E:y,e.options)};var L=function(e){return A.call(O.target,O.eventName,e.invoke,O.options)};var D=function(e){return M.call(O.target,O.eventName,e.invoke,O.options)};var k=function(e){return N.call(e.target,e.eventName,e.invoke,e.options)};var B=s?C:L;var U=s?x:k;var F=function(e,t){var r=typeof t;return r==="function"&&e.callback===t||r==="object"&&e.originalDelegate===t};var G=r&&r.diff?r.diff:F;var H=Zone[v("UNPATCHED_EVENTS")];var Z=e[v("PASSIVE_EVENTS")];var q=function(t,n,o,i,a,u){if(a===void 0){a=false}if(u===void 0){u=false}return function(){var l=this||e;var f=arguments[0];if(r&&r.transferEventName){f=r.transferEventName(f)}var m=arguments[1];if(!m){return t.apply(this,arguments)}if(P&&f==="uncaughtException"){return t.apply(this,arguments)}var h=false;if(typeof m!=="function"){if(!m.handleEvent){return t.apply(this,arguments)}h=true}if(c&&!c(t,m,l,arguments)){return}var v=V&&!!Z&&Z.indexOf(f)!==-1;var _=I(arguments[2],v);if(H){for(var y=0;y<H.length;y++){if(f===H[y]){if(v){return t.call(l,f,m,_)}else{return t.apply(this,arguments)}}}}var E=!_?false:typeof _==="boolean"?true:_.capture;var T=_&&typeof _==="object"?_.once:false;var S=Zone.current;var A=z[f];if(!A){Y(f,b);A=z[f]}var N=A[E?p:d];var R=l[N];var w=false;if(R){w=true;if(g){for(var y=0;y<R.length;y++){if(G(R[y],m)){return}}}}else{R=l[N]=[]}var M;var C=l.constructor["name"];var x=W[C];if(x){M=x[f]}if(!M){M=C+n+(b?b(f):f)}O.options=_;if(T){O.options.once=false}O.target=l;O.capture=E;O.eventName=f;O.isExisting=w;var L=s?X:undefined;if(L){L.taskData=O}var D=S.scheduleEventTask(M,m,L,o,i);O.target=null;if(L){L.taskData=null}if(T){_.once=true}if(!(!V&&typeof D.options==="boolean")){D.options=_}D.target=l;D.capture=E;D.eventName=f;if(h){D.originalDelegate=m}if(!u){R.push(D)}else{R.unshift(D)}if(a){return l}}};S[n]=q(A,m,B,U,T);if(M){S[h]=q(M,_,D,U,T,true)}S[i]=function(){var t=this||e;var n=arguments[0];if(r&&r.transferEventName){n=r.transferEventName(n)}var o=arguments[2];var i=!o?false:typeof o==="boolean"?true:o.capture;var a=arguments[1];if(!a){return N.apply(this,arguments)}if(c&&!c(N,a,t,arguments)){return}var s=z[n];var u;if(s){u=s[i?p:d]}var l=u&&t[u];if(l){for(var m=0;m<l.length;m++){var h=l[m];if(G(h,a)){l.splice(m,1);h.isRemoved=true;if(l.length===0){h.allRemoved=true;t[u]=null;if(typeof n==="string"){var v=f+"ON_PROPERTY"+n;t[v]=null}}h.zone.cancelTask(h);if(T){return t}return}}}return N.apply(this,arguments)};S[a]=function(){var t=this||e;var n=arguments[0];if(r&&r.transferEventName){n=r.transferEventName(n)}var o=[];var i=Q(t,b?b(n):n);for(var a=0;a<i.length;a++){var s=i[a];var c=s.originalDelegate?s.originalDelegate:s.callback;o.push(c)}return o};S[u]=function(){var t=this||e;var n=arguments[0];if(!n){var o=Object.keys(t);for(var a=0;a<o.length;a++){var s=o[a];var c=K.exec(s);var l=c&&c[1];if(l&&l!=="removeListener"){this[u].call(this,l)}}this[u].call(this,"removeListener")}else{if(r&&r.transferEventName){n=r.transferEventName(n)}var f=z[n];if(f){var m=f[d];var h=f[p];var v=t[m];var _=t[h];if(v){var g=v.slice();for(var a=0;a<g.length;a++){var y=g[a];var E=y.originalDelegate?y.originalDelegate:y.callback;this[i].call(this,n,E,y.options)}}if(_){var g=_.slice();for(var a=0;a<g.length;a++){var y=g[a];var E=y.originalDelegate?y.originalDelegate:y.callback;this[i].call(this,n,E,y.options)}}}}if(T){return this}};j(S[n],A);j(S[i],N);if(w){j(S[u],w)}if(R){j(S[a],R)}return true}var S=[];for(var b=0;b<t.length;b++){S[b]=T(t[b],r)}return S}function Q(e,t){if(!t){var r=[];for(var n in e){var o=K.exec(n);var i=o&&o[1];if(i&&(!t||i===t)){var a=e[n];if(a){for(var s=0;s<a.length;s++){r.push(a[s])}}}}return r}var c=z[t];if(!c){Y(t);c=z[t]}var u=e[c[d]];var l=e[c[p]];if(!u){return l?l.slice():[]}else{return l?u.concat(l):u.slice()}}function J(e,t){var r=e["Event"];if(r&&r.prototype){t.patchMethod(r.prototype,"stopImmediatePropagation",(function(e){return function(t,r){t[Z]=true;e&&e.apply(t,r)}}))}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function ee(e,t,r,n,o){var i=Zone.__symbol__(n);if(t[i]){return}var a=t[i]=t[n];t[n]=function(i,s,c){if(s&&s.prototype){o.forEach((function(t){var o=r+"."+n+"::"+t;var i=s.prototype;if(i.hasOwnProperty(t)){var a=e.ObjectGetOwnPropertyDescriptor(i,t);if(a&&a.value){a.value=e.wrapWithCurrentZone(a.value,o);e._redefineProperty(s.prototype,t,a)}else if(i[t]){i[t]=e.wrapWithCurrentZone(i[t],o)}}else if(i[t]){i[t]=e.wrapWithCurrentZone(i[t],o)}}))}return a.call(t,i,s,c)};e.attachOriginToPatched(t[n],a)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var te=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"];var re=["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"];var ne=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"];var oe=["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"];var ie=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"];var ae=["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"];var se=["webglcontextrestored","webglcontextlost","webglcontextcreationerror"];var ce=["autocomplete","autocompleteerror"];var ue=["toggle"];var le=["load"];var pe=["blur","error","focus","load","resize","scroll","messageerror"];var de=["bounce","finish","start"];var fe=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"];var me=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"];var he=["close","error","open","message"];var ve=["error","message"];var _e=te.concat(se,ce,ue,re,ne,oe,ae);function ge(e,t,r){if(!r||r.length===0){return t}var n=r.filter((function(t){return t.target===e}));if(!n||n.length===0){return t}var o=n[0].ignoreProperties;return t.filter((function(e){return o.indexOf(e)===-1}))}function ye(e,t,r,n){if(!e){return}var o=ge(e,t,r);C(e,o,n)}function Ee(e,t){if(P&&!R){return}if(Zone[e.symbol("patchEvents")]){return}var r=typeof WebSocket!=="undefined";var n=t["__Zone_ignore_on_properties"];if(N){var i=window;var a=F()?[{target:i,ignoreProperties:["error"]}]:[];ye(i,_e.concat(["messageerror"]),n?n.concat(a):n,o(i));ye(Document.prototype,_e,n);if(typeof i["SVGElement"]!=="undefined"){ye(i["SVGElement"].prototype,_e,n)}ye(Element.prototype,_e,n);ye(HTMLElement.prototype,_e,n);ye(HTMLMediaElement.prototype,ie,n);ye(HTMLFrameSetElement.prototype,ne.concat(pe),n);ye(HTMLBodyElement.prototype,ne.concat(pe),n);ye(HTMLFrameElement.prototype,le,n);ye(HTMLIFrameElement.prototype,le,n);var s=i["HTMLMarqueeElement"];if(s){ye(s.prototype,de,n)}var c=i["Worker"];if(c){ye(c.prototype,ve,n)}}var u=t["XMLHttpRequest"];if(u){ye(u.prototype,fe,n)}var l=t["XMLHttpRequestEventTarget"];if(l){ye(l&&l.prototype,fe,n)}if(typeof IDBIndex!=="undefined"){ye(IDBIndex.prototype,me,n);ye(IDBRequest.prototype,me,n);ye(IDBOpenDBRequest.prototype,me,n);ye(IDBDatabase.prototype,me,n);ye(IDBTransaction.prototype,me,n);ye(IDBCursor.prototype,me,n)}if(r){ye(WebSocket.prototype,he,n)}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Zone.__load_patch("util",(function(e,t,o){o.patchOnProperties=C;o.patchMethod=D;o.bindArguments=S;o.patchMacroTask=k;var u=t.__symbol__("BLACK_LISTED_EVENTS");var l=t.__symbol__("UNPATCHED_EVENTS");if(e[l]){e[u]=e[l]}if(e[u]){t[u]=t[l]=e[u]}o.patchEventPrototype=J;o.patchEventTarget=q;o.isIEOrEdge=G;o.ObjectDefineProperty=n;o.ObjectGetOwnPropertyDescriptor=r;o.ObjectCreate=i;o.ArraySlice=a;o.patchClass=L;o.wrapWithCurrentZone=m;o.filterProperties=ge;o.attachOriginToPatched=j;o._redefineProperty=Object.defineProperty;o.patchCallbacks=ee;o.getGlobalObjects=function(){return{globalSources:W,zoneSymbolEventNames:z,eventNames:_e,isBrowser:N,isMix:R,isNode:P,TRUE_STR:p,FALSE_STR:d,ZONE_SYMBOL_PREFIX:f,ADD_EVENT_LISTENER_STR:s,REMOVE_EVENT_LISTENER_STR:c}}}));
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Te;var Se;var be;var Oe;var Ae;function Pe(){Te=Zone.__symbol__;Se=Object[Te("defineProperty")]=Object.defineProperty;be=Object[Te("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor;Oe=Object.create;Ae=Te("unconfigurables");Object.defineProperty=function(e,t,r){if(Re(e,t)){throw new TypeError("Cannot assign to read only property '"+t+"' of "+e)}var n=r.configurable;if(t!=="prototype"){r=we(e,t,r)}return Me(e,t,r,n)};Object.defineProperties=function(e,t){Object.keys(t).forEach((function(r){Object.defineProperty(e,r,t[r])}));return e};Object.create=function(e,t){if(typeof t==="object"&&!Object.isFrozen(t)){Object.keys(t).forEach((function(r){t[r]=we(e,r,t[r])}))}return Oe(e,t)};Object.getOwnPropertyDescriptor=function(e,t){var r=be(e,t);if(r&&Re(e,t)){r.configurable=false}return r}}function Ne(e,t,r){var n=r.configurable;r=we(e,t,r);return Me(e,t,r,n)}function Re(e,t){return e&&e[Ae]&&e[Ae][t]}function we(e,t,r){if(!Object.isFrozen(r)){r.configurable=true}if(!r.configurable){if(!e[Ae]&&!Object.isFrozen(e)){Se(e,Ae,{writable:true,value:{}})}if(e[Ae]){e[Ae][t]=true}}return r}function Me(e,t,r,n){try{return Se(e,t,r)}catch(a){if(r.configurable){if(typeof n=="undefined"){delete r.configurable}else{r.configurable=n}try{return Se(e,t,r)}catch(n){var o=false;if(t==="createdCallback"||t==="attachedCallback"||t==="detachedCallback"||t==="attributeChangedCallback"){o=true}if(!o){throw n}var i=null;try{i=JSON.stringify(r)}catch(e){i=r.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+i+"' on object '"+e+"' and got error, giving up: "+n)}}else{throw a}}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Ie(e,t){var r=t.getGlobalObjects(),n=r.eventNames,o=r.globalSources,i=r.zoneSymbolEventNames,a=r.TRUE_STR,s=r.FALSE_STR,c=r.ZONE_SYMBOL_PREFIX;var u="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video";var l="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(",");var p="EventTarget";var d=[];var f=e["wtf"];var m=u.split(",");if(f){d=m.map((function(e){return"HTML"+e+"Element"})).concat(l)}else if(e[p]){d.push(p)}else{d=l}var h=e["__Zone_disable_IE_check"]||false;var v=e["__Zone_enable_cross_context_check"]||false;var _=t.isIEOrEdge();var g=".addEventListener:";var y="[object FunctionWrapper]";var E="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }";var T={MSPointerCancel:"pointercancel",MSPointerDown:"pointerdown",MSPointerEnter:"pointerenter",MSPointerHover:"pointerhover",MSPointerLeave:"pointerleave",MSPointerMove:"pointermove",MSPointerOut:"pointerout",MSPointerOver:"pointerover",MSPointerUp:"pointerup"};for(var S=0;S<n.length;S++){var b=n[S];var O=b+s;var A=b+a;var P=c+O;var N=c+A;i[b]={};i[b][s]=P;i[b][a]=N}for(var S=0;S<m.length;S++){var R=m[S];var w=o[R]={};for(var M=0;M<n.length;M++){var b=n[M];w[b]=R+g+b}}var I=function(e,t,r,n){if(!h&&_){if(v){try{var o=t.toString();if(o===y||o==E){e.apply(r,n);return false}}catch(t){e.apply(r,n);return false}}else{var o=t.toString();if(o===y||o==E){e.apply(r,n);return false}}}else if(v){try{t.toString()}catch(t){e.apply(r,n);return false}}return true};var C=[];for(var S=0;S<d.length;S++){var x=e[d[S]];C.push(x&&x.prototype)}t.patchEventTarget(e,C,{vh:I,transferEventName:function(e){var t=T[e];return t||e}});Zone[t.symbol("patchEventTarget")]=!!e[p];return true}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Ce(e,t){var r=e.getGlobalObjects(),n=r.ADD_EVENT_LISTENER_STR,o=r.REMOVE_EVENT_LISTENER_STR;var i=t.WebSocket;if(!t.EventTarget){e.patchEventTarget(t,[i.prototype])}t.WebSocket=function(t,r){var a=arguments.length>1?new i(t,r):new i(t);var s;var c;var u=e.ObjectGetOwnPropertyDescriptor(a,"onmessage");if(u&&u.configurable===false){s=e.ObjectCreate(a);c=a;[n,o,"send","close"].forEach((function(t){s[t]=function(){var r=e.ArraySlice.call(arguments);if(t===n||t===o){var i=r.length>0?r[0]:undefined;if(i){var c=Zone.__symbol__("ON_PROPERTY"+i);a[c]=s[c]}}return a[t].apply(a,r)}}))}else{s=a}e.patchOnProperties(s,["close","error","message","open"],c);return s};var a=t["WebSocket"];for(var s in i){a[s]=i[s]}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function xe(e,t){var r=e.getGlobalObjects(),n=r.isNode,o=r.isMix;if(n&&!o){return}if(!Le(e,t)){var i=typeof WebSocket!=="undefined";De(e);e.patchClass("XMLHttpRequest");if(i){Ce(e,t)}Zone[e.symbol("patchEvents")]=true}}function Le(e,t){var r=e.getGlobalObjects(),n=r.isBrowser,o=r.isMix;if((n||o)&&!e.ObjectGetOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&typeof Element!=="undefined"){var i=e.ObjectGetOwnPropertyDescriptor(Element.prototype,"onclick");if(i&&!i.configurable)return false;if(i){e.ObjectDefineProperty(Element.prototype,"onclick",{enumerable:true,configurable:true,get:function(){return true}});var a=document.createElement("div");var s=!!a.onclick;e.ObjectDefineProperty(Element.prototype,"onclick",i);return s}}var c=t["XMLHttpRequest"];if(!c){return false}var u="onreadystatechange";var l=c.prototype;var p=e.ObjectGetOwnPropertyDescriptor(l,u);if(p){e.ObjectDefineProperty(l,u,{enumerable:true,configurable:true,get:function(){return true}});var d=new c;var s=!!d.onreadystatechange;e.ObjectDefineProperty(l,u,p||{});return s}else{var f=e.symbol("fake");e.ObjectDefineProperty(l,u,{enumerable:true,configurable:true,get:function(){return this[f]},set:function(e){this[f]=e}});var d=new c;var m=function(){};d.onreadystatechange=m;var s=d[f]===m;d.onreadystatechange=null;return s}}function De(e){var t=e.getGlobalObjects().eventNames;var r=e.symbol("unbound");var n=function(n){var o=t[n];var i="on"+o;self.addEventListener(o,(function(t){var n=t.target,o,a;if(n){a=n.constructor["name"]+"."+i}else{a="unknown."+i}while(n){if(n[i]&&!n[i][r]){o=e.wrapWithCurrentZone(n[i],a);o[r]=n[i];n[i]=o}n=n.parentElement}}),true)};for(var o=0;o<t.length;o++){n(o)}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function ke(e,t){var r=t.getGlobalObjects(),n=r.isBrowser,o=r.isMix;if(!n&&!o||!("registerElement"in e.document)){return}var i=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];t.patchCallbacks(t,document,"Document","registerElement",i)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(function(e){var t=e["__Zone_symbol_prefix"]||"__zone_symbol__";function r(e){return t+e}e[r("legacyPatch")]=function(){var t=e["Zone"];t.__load_patch("defineProperty",(function(e,t,r){r._redefineProperty=Ne;Pe()}));t.__load_patch("registerElement",(function(e,t,r){ke(e,r)}));t.__load_patch("EventTargetLegacy",(function(e,t,r){Ie(e,r);xe(r,e)}))}})(typeof window!=="undefined"?window:typeof e!=="undefined"?e:typeof self!=="undefined"?self:{});
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var je=v("zoneTask");function Be(e,t,r,n){var o=null;var i=null;t+=n;r+=n;var a={};function s(t){var r=t.data;r.args[0]=function(){return t.invoke.apply(this,arguments)};r.handleId=o.apply(e,r.args);return t}function c(t){return i.call(e,t.data.handleId)}o=D(e,t,(function(r){return function(o,i){if(typeof i[0]==="function"){var u={isPeriodic:n==="Interval",delay:n==="Timeout"||n==="Interval"?i[1]||0:undefined,args:i};var l=i[0];i[0]=function e(){try{return l.apply(this,arguments)}finally{if(!u.isPeriodic){if(typeof u.handleId==="number"){delete a[u.handleId]}else if(u.handleId){u.handleId[je]=null}}}};var p=h(t,i[0],u,s,c);if(!p){return p}var d=p.data.handleId;if(typeof d==="number"){a[d]=p}else if(d){d[je]=p}if(d&&d.ref&&d.unref&&typeof d.ref==="function"&&typeof d.unref==="function"){p.ref=d.ref.bind(d);p.unref=d.unref.bind(d)}if(typeof d==="number"||d){return d}return p}else{return r.apply(e,i)}}}));i=D(e,r,(function(t){return function(r,n){var o=n[0];var i;if(typeof o==="number"){i=a[o]}else{i=o&&o[je];if(!i){i=o}}if(i&&typeof i.type==="string"){if(i.state!=="notScheduled"&&(i.cancelFn&&i.data.isPeriodic||i.runCount===0)){if(typeof o==="number"){delete a[o]}else if(o){o[je]=null}i.zone.cancelTask(i)}}else{t.apply(e,n)}}}))}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Ue(e,t){var r=t.getGlobalObjects(),n=r.isBrowser,o=r.isMix;if(!n&&!o||!e["customElements"]||!("customElements"in e)){return}var i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"];t.patchCallbacks(t,e.customElements,"customElements","define",i)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Fe(e,t){if(Zone[t.symbol("patchEventTarget")]){return}var r=t.getGlobalObjects(),n=r.eventNames,o=r.zoneSymbolEventNames,i=r.TRUE_STR,a=r.FALSE_STR,s=r.ZONE_SYMBOL_PREFIX;for(var c=0;c<n.length;c++){var u=n[c];var l=u+a;var p=u+i;var d=s+l;var f=s+p;o[u]={};o[u][a]=d;o[u][i]=f}var m=e["EventTarget"];if(!m||!m.prototype){return}t.patchEventTarget(e,[m&&m.prototype]);return true}function Ge(e,t){t.patchEventPrototype(e,t)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Zone.__load_patch("legacy",(function(e){var t=e[Zone.__symbol__("legacyPatch")];if(t){t()}}));Zone.__load_patch("queueMicrotask",(function(e,t,r){r.patchMethod(e,"queueMicrotask",(function(e){return function(e,r){t.current.scheduleMicroTask("queueMicrotask",r[0])}}))}));Zone.__load_patch("timers",(function(e){var t="set";var r="clear";Be(e,t,r,"Timeout");Be(e,t,r,"Interval");Be(e,t,r,"Immediate")}));Zone.__load_patch("requestAnimationFrame",(function(e){Be(e,"request","cancel","AnimationFrame");Be(e,"mozRequest","mozCancel","AnimationFrame");Be(e,"webkitRequest","webkitCancel","AnimationFrame")}));Zone.__load_patch("blocking",(function(e,t){var r=["alert","prompt","confirm"];for(var n=0;n<r.length;n++){var o=r[n];D(e,o,(function(r,n,o){return function(n,i){return t.current.run(r,e,i,o)}}))}}));Zone.__load_patch("EventTarget",(function(e,t,r){Ge(e,r);Fe(e,r);var n=e["XMLHttpRequestEventTarget"];if(n&&n.prototype){r.patchEventTarget(e,[n.prototype])}}));Zone.__load_patch("MutationObserver",(function(e,t,r){L("MutationObserver");L("WebKitMutationObserver")}));Zone.__load_patch("IntersectionObserver",(function(e,t,r){L("IntersectionObserver")}));Zone.__load_patch("FileReader",(function(e,t,r){L("FileReader")}));Zone.__load_patch("on_property",(function(e,t,r){Ee(r,e)}));Zone.__load_patch("customElements",(function(e,t,r){Ue(e,r)}));Zone.__load_patch("XHR",(function(e,t){c(e);var r=v("xhrTask");var n=v("xhrSync");var o=v("xhrListener");var i=v("xhrScheduled");var a=v("xhrURL");var s=v("xhrErrorBeforeScheduled");function c(e){var c=e["XMLHttpRequest"];if(!c){return}var p=c.prototype;function d(e){return e[r]}var f=p[u];var m=p[l];if(!f){var _=e["XMLHttpRequestEventTarget"];if(_){var g=_.prototype;f=g[u];m=g[l]}}var y="readystatechange";var E="scheduled";function T(e){var n=e.data;var a=n.target;a[i]=false;a[s]=false;var c=a[o];if(!f){f=a[u];m=a[l]}if(c){m.call(a,y,c)}var p=a[o]=function(){if(a.readyState===a.DONE){if(!n.aborted&&a[i]&&e.state===E){var r=a[t.__symbol__("loadfalse")];if(a.status!==0&&r&&r.length>0){var o=e.invoke;e.invoke=function(){var r=a[t.__symbol__("loadfalse")];for(var i=0;i<r.length;i++){if(r[i]===e){r.splice(i,1)}}if(!n.aborted&&e.state===E){o.call(e)}};r.push(e)}else{e.invoke()}}else if(!n.aborted&&a[i]===false){a[s]=true}}};f.call(a,y,p);var d=a[r];if(!d){a[r]=e}R.apply(a,n.args);a[i]=true;return e}function S(){}function b(e){var t=e.data;t.aborted=true;return w.apply(t.target,t.args)}var O=D(p,"open",(function(){return function(e,t){e[n]=t[2]==false;e[a]=t[1];return O.apply(e,t)}}));var A="XMLHttpRequest.send";var P=v("fetchTaskAborting");var N=v("fetchTaskScheduling");var R=D(p,"send",(function(){return function(e,r){if(t.current[N]===true){return R.apply(e,r)}if(e[n]){return R.apply(e,r)}else{var o={target:e,url:e[a],isPeriodic:false,args:r,aborted:false};var i=h(A,S,o,T,b);if(e&&e[s]===true&&!o.aborted&&i.state===E){i.invoke()}}}}));var w=D(p,"abort",(function(){return function(e,r){var n=d(e);if(n&&typeof n.type=="string"){if(n.cancelFn==null||n.data&&n.data.aborted){return}n.zone.cancelTask(n)}else if(t.current[P]===true){return w.apply(e,r)}}}))}}));Zone.__load_patch("geolocation",(function(e){if(e["navigator"]&&e["navigator"].geolocation){b(e["navigator"].geolocation,["getCurrentPosition","watchPosition"])}}));Zone.__load_patch("PromiseRejectionEvent",(function(e,t){function r(t){return function(r){var n=Q(e,t);n.forEach((function(n){var o=e["PromiseRejectionEvent"];if(o){var i=new o(t,{promise:r.promise,reason:r.rejection});n.invoke(i)}}))}}if(e["PromiseRejectionEvent"]){t[v("unhandledPromiseRejectionHandler")]=r("unhandledrejection");t[v("rejectionHandledHandler")]=r("rejectionhandled")}}))}))}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],388:[function(require,e,exports){e.exports={name:"@middleware.io/browser",version:"0.0.5",description:"",main:"index.js",scripts:{browserify:"./node_modules/.bin/browserify index.js > script/middleware-rum.js",minify:"./node_modules/.bin/terser -m reserved=['$','require','exports'] script/middleware-rum.js -o script/middleware-rum.min.js",test:'echo "Error: no test specified" && exit 1'},author:"@middleware.io",license:"ISC",dependencies:{"@opentelemetry/api":"^1.7.0","@opentelemetry/api-metrics":"^0.33.0","@opentelemetry/context-zone":"^1.19.0","@opentelemetry/core":"^1.19.0","@opentelemetry/exporter-collector":"^0.25.0","@opentelemetry/exporter-metrics-otlp-http":"^0.46.0","@opentelemetry/exporter-prometheus":"^0.46.0","@opentelemetry/exporter-trace-otlp-http":"^0.46.0","@opentelemetry/instrumentation":"^0.46.0","@opentelemetry/instrumentation-fetch":"^0.46.0","@opentelemetry/instrumentation-user-interaction":"^0.34.1","@opentelemetry/instrumentation-xml-http-request":"^0.46.0","@opentelemetry/propagator-b3":"^1.19.0","@opentelemetry/resources":"^1.19.0","@opentelemetry/sdk-metrics":"^1.19.0","@opentelemetry/sdk-node":"^0.46.0","@opentelemetry/sdk-trace-base":"^1.19.0","@opentelemetry/sdk-trace-web":"^1.19.0","@opentelemetry/semantic-conventions":"^1.19.0","auto-instrumentations-web":"^0.0.2","instrumentation-document-load":"^0.0.4","middleware.io-instrumentation-xml-http-request":"^0.0.1",rrweb:"^1.1.3"},devDependencies:{"@opentelemetry/instrumentation-document-load":"^0.34.1","@opentelemetry/instrumentation-long-task":"^0.34.1",browserify:"^17.0.0",terser:"^5.26.0"}}},{}],389:[function(require,e,exports){const{diag:t,DiagConsoleLogger:r,DiagLogLevel:n}=require("@opentelemetry/api");const o=require("./tracing");const i={accountKey:"",env:"prod",target:"",DEBUG:n.NONE,projectName:window.location.host,serviceName:"web-app",recording:"1",defaultAttributes:{},ignoreUrls:[],tracePropagationTargets:[],tracePropagationFormat:"b3"};e.exports.init=(e={})=>{Object.keys(i).forEach((t=>{i[t]=e[t]?e[t]:i[t]}));if(i.target){i.target=new URL(i.target).origin}t.setLogger(new r,i["DEBUG"]?n.DEBUG:n.NONE);o.init(i);return i};e.exports.setAttributes=(e={})=>{o.setAttributes(e)};e.exports.info=e=>{o.recordLog("info",e)};e.exports.warn=e=>{o.recordLog("warn",e)};e.exports.debug=e=>{o.recordLog("debug",e)};e.exports.error=e=>{o.recordLog("error",e)}},{"./tracing":396,"@opentelemetry/api":19}],390:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_SERVICE_NAME=exports.HTTP_ACTION_TYPE=exports.XHR_IS_ROOT_SPAN=exports.ROOT_SPAN_HTTP_URL=exports.ROOT_SPAN_OPERATION=exports.INSTRUMENTED_EVENT_NAMES=exports.DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT=exports.BUFFER_TIMEOUT=exports.MAX_EXPORT_BATCH_SIZE=exports.BUFFER_MAX_SPANS=exports.UNKNOWN_SERVICE_NAME=void 0;exports.UNKNOWN_SERVICE_NAME="unknown";exports.BUFFER_MAX_SPANS=2048;exports.MAX_EXPORT_BATCH_SIZE=50;exports.BUFFER_TIMEOUT=2e3;exports.DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT=20;exports.INSTRUMENTED_EVENT_NAMES=["click","dblclick","submit","reset","pause","play","dragstart","dragend","drop"];exports.ROOT_SPAN_OPERATION="root_span.operation";exports.ROOT_SPAN_HTTP_URL="root_span.http.url";exports.XHR_IS_ROOT_SPAN="xhr.is_root_span";exports.HTTP_ACTION_TYPE="http.action_type";exports.DEFAULT_SERVICE_NAME="default.service.name"},{}],391:[function(require,e,exports){function t(e={}){if(!e.accountKey){return"accountKey is required"}else if(!e.target){return"target is required"}else{require("./config").init(e)}}e.exports.track=t;function r(e={}){if(typeof e==="object"&&Object.keys(e).length>0){require("./config").setAttributes(e)}else{console.error("Invalid attributes format. Please provide a non-empty object.")}}e.exports.setAttributes=r;var n={};n.track=t;n.setAttributes=r;n.info=(e="")=>{require("./config").info(e)};n.warn=(e="")=>{require("./config").warn(e)};n.debug=(e="")=>{require("./config").debug(e)};n.error=(e="")=>{require("./config").error(e)};if(typeof window!=="undefined"){window.Middleware=n}},{"./config":389}],392:[function(require,e,exports){"use strict";var t=this&&this.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++){if(i||!(n in t)){if(!i)i=Array.prototype.slice.call(t,0,n);i[n]=t[n]}}return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:true});exports.LogsExporter=void 0;var r=require("@opentelemetry/resources").Resource;var n=require("../package.json"),o=n.name,i=n.version;var a=require("@opentelemetry/core"),s=a.hrTime,c=a.hrTimeToNanoseconds;var u=require("@opentelemetry/api"),l=u,p=u.Attributes;var d=function(e){switch(typeof e){case"number":if(Number.isInteger(e)){return{intValue:e}}return{doubleValue:e};case"boolean":return{boolValue:e};case"object":if(Array.isArray(e)){return{arrayValue:{values:e.map((function(e){return d(e)}))}}}if(e!=null){return{kvlistValue:{values:Object.entries(e).map((function(e){var t=e[0],r=e[1];return m(t,r)}))}}}default:return{stringValue:String(e)}}};var f=function(e,t){var r=new Blob([t],{type:"application/json"});fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:t}).catch((()=>{}))};var m=function(e,t){return{key:e,value:d(t)}};var h=function(e={}){return Object.entries(e).map((function(e){var t=e[0],r=e[1];return m(t,r)}))};var v=function(){function e(e){var t=e.resource,r=e.collectorUrl,n=e.attributes,o=e.maxQueueSize,i=e.scheduledDelayMillis,a=e.serviceName,s=e.projectName;this.resource=t;this.collectorUrl=r;this.defaultAttributes=n;this.maxQueueSize=o;this.scheduledDelayMillis=i;this.logs=[];this.projectName=s;this.serviceName=a}e.prototype.recordLog=function(e){let r=u.trace.getTracer("error-trace");let n=r.startSpan(e.message);var o=this;var i=t(t([],h(this.defaultAttributes),true),[m("type",e.type),m("http.url",location.href),m("level","error"),m("project.name",this.projectName),m("service.name",this.serviceName),m("browser.trace",true)],false);n.setAttribute("type",e.type);n.setAttribute("http.url",location.href);n.setAttribute("level","error");n.setAttribute("project.name",this.projectName);n.setAttribute("service.name",this.serviceName);n.setAttribute("browser.trace",true);n.setAttribute("event.type","error");n.setStatus({code:l.SpanStatusCode.ERROR,message:String(e.message)});n.recordException(e.message);if(e.element){i.push(m("element.xpath",e.element.xpath));n.setAttribute("element.xpath",e.element.xpath)}if(e.error){i.push(m("error.name",e.error.name));i.push(m("error.message",e.error.message));n.setAttribute("error.name",e.error.name);n.setAttribute("error.message",e.error.message);if(e.error.stack){i.push(m("error.stack",e.error.stack));n.setAttribute("error.stack",e.error.stack)}}if(e.arguments){i.push(m("arguments",e.arguments));n.setAttribute("arguments",e.arguments)}if(e.attributes){Object.entries(e.attributes).forEach((function(e){let t=e[0],r=e[1];i.push(m(t,r));n.setAttribute(t,r)}))}this.logs.push({observedTimeUnixNano:c(s()),body:{stringValue:e.message},attributes:i,droppedAttributesCount:0,traceId:n===null||n===void 0?"":n.spanContext().traceId,spanId:n===null||n===void 0?"":n.spanContext().spanId});if(this.logs.length>=this.maxQueueSize){this.export()}else if(this.timer===undefined){this.timer=Number(setTimeout((function(){return o.export()}),this.scheduledDelayMillis))}n.end()};e.prototype.export=function(){clearTimeout(this.timer);this.timer=undefined;var e=this.logs;if(!e.length)return;this.logs=[];var t=JSON.stringify({resourceLogs:[{resource:{attributes:h(this.resource.attributes)},scopeLogs:[{instrumentationLibrary:{name:o,version:i},logRecords:e}],schemaUrl:"https://opentelemetry.io/schemas/1.6.1"}]});f(this.collectorUrl,t)};return e}();exports.LogsExporter=v},{"../package.json":388,"@opentelemetry/api":19,"@opentelemetry/core":63,"@opentelemetry/resources":155}],393:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LogsInstrumentation=void 0;var t=require("@opentelemetry/sdk-trace-web").getElementXPath;var r=require("../packages/logs-exporter"),n=r.LogRecord,o=r.LogsExporter;var i=500;var a=5e3;var s=function(e,t){return e.length>t?"".concat(e.slice(0,t),"..."):e};var c=function(e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack?s(e.stack,a):undefined}:undefined};var u=function(e,t){if(t===void 0){t=0}if(typeof e==="string"){var r=s(e,i);return t>0?'"'.concat(r,'"'):r}if(Array.isArray(e)){if(t>0){return"..."}return"[".concat(e.map((function(e){return u(e,t+1)})).join(", "),"]")}if(e instanceof Error){return u({name:e.name,message:e.message},t)}if(e!=null&&typeof e==="object"){if(t>0){return"..."}return"{ ".concat(Object.getOwnPropertyNames(e).map((function(r){return"".concat(r,": ").concat(u(e[r],t+1))})).join(", ")," }")}return String(e)};var l=function(e,t){if(t===void 0){t=new Set}var r=!t.has(e);t.add(e);if(Array.isArray(e)){return e.map((function(e){return l(e,t)}))}if(e!=null&&typeof e==="object"){var n={};Object.getOwnPropertyNames(e).forEach((function(o){var i=e[o];n[o]=t.has(i)&&(i!==e||r)?"[Circular]":l(i)}));return n}return e};var p=function(){function e(e){var r=this;var n=e.exporter;this.isEnabled=false;this.onError=function(e){r.exporter.recordLog({type:"uncaughtException",message:e.message,error:c(e.error)})};this.onUnhandledRejection=function(e){var t=e.reason;if(!t)return;var n=c(t);r.exporter.recordLog({type:"unhandledRejection",message:n?"Unhandled rejection ".concat(t):String(t),error:n})};this.onDocumentError=function(e){var n=e.target;if(!n)return;var o=t(n);if(!o)return;r.exporter.recordLog({type:"documentError",message:"Uncaught error in element ".concat(n.currentSrc?n.currentSrc:o),element:{xpath:o}})};this.onConsoleError=function(e){var t=e.find(c);var n=e.length>3||e.find((function(e){return e!=null&&typeof e==="object"&&!(e instanceof Error)}))?e.map((function(e){return l(e)})):undefined;r.exporter.recordLog({type:"consoleError",message:e.map((function(e){return u(e)})).join(" "),arguments:n,error:t})};this.exporter=n;var o=console.error;console.error=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(r.isEnabled){r.onConsoleError(e)}o.apply(console,e)}}e.prototype.enable=function(){this.disable();window.addEventListener("error",this.onError);window.addEventListener("unhandledrejection",this.onUnhandledRejection);document.documentElement.addEventListener("error",this.onDocumentError,{capture:true});this.isEnabled=true};e.prototype.disable=function(){window.removeEventListener("error",this.onError);window.removeEventListener("unhandledrejection",this.onUnhandledRejection);document.documentElement.removeEventListener("error",this.onDocumentError,{capture:true});this.isEnabled=false};return e}();exports.LogsInstrumentation=p;exports.maybeErrorToObject=c},{"../packages/logs-exporter":392,"@opentelemetry/sdk-trace-web":244}],394:[function(require,e,exports){"use strict";const t=require("rrweb");const r=4*60*60*1e3;let n;let o;let i;let a;let s=[];const c=(e,t,r)=>{if(s.length>0){const n={attributes:[{key:"origin",value:{stringValue:e}},{key:"mw.client_origin",value:{stringValue:e}},{key:"mw.account_key",value:{stringValue:t}},{key:"rum_origin",value:{stringValue:e}},{key:"session_id",value:{stringValue:o}}],droppedAttributesCount:0};const i={};i["scope"]={};const a=[];s.forEach((e=>{const t={name:"rum_event",gauge:{dataPoints:[{attributes:[{key:"type",value:{stringValue:String(e.type)}},{key:"timestamp",value:{stringValue:String(e.timestamp)}},{key:"data",value:{stringValue:JSON.stringify(e.data)}}],timeUnixNano:String(e.timestamp*1e6),asDouble:0}]}};a.push(t)}));i["metrics"]=a;const c={resourceMetrics:[{resource:n,scopeMetrics:[i]}]};const u=JSON.stringify(c);s=[];fetch(`${r}/v1/metrics`,{method:"POST",headers:{"Content-Type":"application/json",MW_API_KEY:t},body:u}).then((e=>{if(!e.ok){e.json().then((t=>{if(e.status===500){if(t&&t.message){console.error("Middleware:",t.message)}}}))}})).catch((()=>{}))}};const u=e=>{a=e;const{target:u,origin:l,accountKey:p,session_id:d}=a;i=Date.now();t.record({maskInputOptions:{password:true},maskTextClass:"mw-mask",emit(e){if(d!==o){if(document.hidden){return}o=d;i=Date.now();t.record.takeFullSnapshot()}if(e.timestamp>i+r){return}s.push(e)}});n=setInterval((()=>{c(l,p,u)}),10*1e3)};const l=()=>{if(n){const{origin:e,accountKey:t,target:r}=a;c(e,t,r);clearInterval(n)}};e.exports={deinitSessionRecording:l,initSessionRecording:u}},{rrweb:383}],395:[function(require,e,exports){const{RandomIdGenerator:t}=require("@opentelemetry/sdk-trace-web");const{findCookieValue:r,isIframe:n}=require("./util");const o=4*60*60*1e3;const i=15*60;const a=60;const s="_mwRumSessionId_0_3";let c;let u=false;let l;const p=()=>{u=true};const d=e=>{const t=Date.now();return e>t||t>e+o};const f=()=>{const e=r(s);if(!e){return undefined}const t=decodeURIComponent(e);if(!t){return undefined}let n=undefined;try{n=JSON.parse(t)}catch(e){return undefined}if(!n||typeof n!=="object"){return undefined}if(!n.id||typeof n.id!=="string"){return undefined}if(!n.startTime||typeof n.startTime!=="number"||d(n.startTime)){return undefined}return n};const m=()=>({id:(new t).generateTraceId(),startTime:Date.now()});const h=e=>{if(d(e.startTime)){return}const t=encodeURIComponent(JSON.stringify(e));const r=l?`domain=${l};`:"";let o=s+"="+t+"; path=/;"+r+"max-age="+i;if(n()){o+=";SameSite=None; Secure"}else{o+=";SameSite=Strict"}document.cookie=o};const v=e=>{let t=f();if(!t){t=m();c=t.id;u=true;e()}c=t.id;if(u){h(t)}u=false};const _=()=>{const e=m();h(e);return e};exports.sessionInit=_;const g=(e,t)=>{if(t){l=t}u=true;v(e);const r=setInterval((()=>v(e)),a*1e3);["click","scroll","mousedown","keydown","touchend","visibilitychange"].forEach((e=>document.addEventListener(e,p,{capture:true,passive:true})));return{deinit:()=>{clearInterval(r)}}};exports.initSessionTracking=g;const y=()=>c;exports.getRumSessionId=y},{"./util":397,"@opentelemetry/sdk-trace-web":244}],396:[function(require,e,exports){class t{constructor(e,t){this.attributeName=e;this.attributeValue=t}onStart(e){}onEnd(e){const t=e.attributes;t[this.attributeName]=this.attributeValue;e.setAttributes(t)}shutdown(){}}const{maybeErrorToObject:r}=require("../packages/logs-instrumentation");const{B3Propagator:n,B3InjectEncoding:o}=require("@opentelemetry/propagator-b3");const{initSessionRecording:i,deinitSessionRecording:a}=require("./recording");const{CompositePropagator:s,W3CTraceContextPropagator:c}=require("@opentelemetry/core");const{initSessionTracking:u,getRumSessionId:l,sessionInit:p}=require("./session");const d="session.id";exports.SESSION_ID_ATTRIBUTE=d;let f={};function m(){let e=window.navigator.userAgent,t=window.navigator.platform,r=["Macintosh","MacIntel","MacPPC","Mac68K"],n=["Win32","Win64","Windows","WinCE"],o=["iPhone","iPad","iPod"],i=null;if(r.indexOf(t)!==-1){i="Mac OS"}else if(o.indexOf(t)!==-1){i="iOS"}else if(n.indexOf(t)!==-1){i="Windows"}else if(/Android/.test(e)){i="Android"}else if(!i&&/Linux/.test(t)){i="Linux"}return i}function h(){let e=navigator.userAgent;let t;if(e.match(/chrome|chromium|crios/i)){t="Chrome"}else if(e.match(/firefox|fxios/i)){t="Firefox"}else if(e.match(/safari/i)){t="Safari"}else if(e.match(/opr\//i)){t="Opera"}else if(e.match(/edg/i)){t="Edge"}else{t="No browser detection"}return t}let v;let _;let g;let y;e.exports.init=e=>{y=e;const r=require("@opentelemetry/api");const{trace:a,context:T,propagation:S}=require("@opentelemetry/api");const{WebTracerProvider:b}=require("@opentelemetry/sdk-trace-web");const{BatchSpanProcessor:O}=require("@opentelemetry/sdk-trace-base");const{OTLPTraceExporter:A}=require("@opentelemetry/exporter-trace-otlp-http");const{ZoneContextManager:P}=require("@opentelemetry/context-zone");const{registerInstrumentations:N}=require("@opentelemetry/instrumentation");const{Resource:R}=require("@opentelemetry/resources");const{SemanticResourceAttributes:w}=require("@opentelemetry/semantic-conventions");const{LogsExporter:M}=require("../packages/logs-exporter");const{LogsInstrumentation:I}=require("../packages/logs-instrumentation");const{DocumentLoadInstrumentation:C}=require("instrumentation-document-load");const{XMLHttpRequestInstrumentation:x}=require("middleware.io-instrumentation-xml-http-request");const{FetchInstrumentation:L}=require("@opentelemetry/instrumentation-fetch");const{MeterProvider:D,PeriodicExportingMetricReader:k}=require("@opentelemetry/sdk-metrics");const{OTLPMetricExporter:j}=require("@opentelemetry/exporter-metrics-otlp-http");const{INSTRUMENTED_EVENT_NAMES:B,DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT:U}=require("./constants");const{getUserInteractionSpanName:F}=require("./util");const G=2e3;const V=2048;const H=p();g=u(E);let X=new R({[w.SERVICE_NAME]:e.serviceName,["mw_agent"]:true,["project.name"]:e.projectName,["mw.account_key"]:e.accountKey,["env"]:e.env,["browser.trace"]:true,["type"]:"rum",["origin"]:window.location.origin,["rum_origin"]:window.location.origin,[d]:l()});v=new b({resource:X});Object.defineProperty(v.resource.attributes,d,{get(){return l()},configurable:true,enumerable:true});a.setGlobalTracerProvider(v);if(e.tracePropagationFormat==="w3c"){v.register({propagator:new c})}else if(e.tracePropagationFormat==="b3"){v.register({propagator:new s({propagators:[new n,new n({injectEncoding:o.MULTI_HEADER})]})})}else{v.register({propagator:new s({propagators:[new c,new n,new n({injectEncoding:o.MULTI_HEADER})]})})}const z={};S.inject(T.active(),z);const W=m();const K=h();v.addSpanProcessor(new O(new A({url:`${e.target}/v1/traces`,headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"*"},concurrencyLimit:10,exportTimeoutMillis:1e4})));v.addSpanProcessor(new t(d,l()));v.addSpanProcessor(new t("os",W));v.addSpanProcessor(new t("browser.name",K));v.addSpanProcessor(new t("navigator.userAgent",navigator.userAgent.toString()));v.addSpanProcessor(new t("env",e.env));v.addSpanProcessor(new t("root.url",window.location.pathname));v.addSpanProcessor(new t("recording.available",e.recording=="1"?"true":"false"));f={...f,...e.defaultAttributes};for(const e in f){v.addSpanProcessor(new t(e,f[e]))}v.register({contextManager:new P});_=new M({resource:X,collectorUrl:`${e.target}/v1/logs`,maxQueueSize:V,scheduledDelayMillis:G,projectName:e.projectName,serviceName:e.serviceName});const Z=new I({exporter:_});Z.enable();document.addEventListener("click",(e=>{const t=new Set(["click"]);const n=e.target;if(!(n instanceof HTMLElement)){return undefined}if(!n.getAttribute){return undefined}if(n.hasAttribute("disabled")){return undefined}if(!t.has(e.type)){return undefined}let o=r.trace.getTracer("user-interaction");const i=F(e.type,n,U);let a=o.startSpan(i);e.target.dataset.spanId=a.spanContext().spanId;a.setAttribute("event.type",e.type);a.setAttribute("component","user-interaction");a.setAttribute("target_element",n.tagName);a.setAttribute("target_xpath","xpath");a.setAttribute("http.url",window.location.href);a.setAttribute("http.user_agent",navigator.userAgent);a.end()}));const Y=[`${e.target}/v1/metrics`,`${e.target}/v1/traces`,`${e.target}/v1/logs`,...e.ignoreUrls];N({instrumentations:[new C,new x({enabled:false,ignoreUrls:Y,propagateTraceHeaderCorsUrls:e.tracePropagationTargets}),new L({enabled:false,ignoreUrls:Y,propagateTraceHeaderCorsUrls:e.tracePropagationTargets,clearTimingResources:true})]});const q={url:`${e.target}/v1/metrics`,headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"*"},concurrencyLimit:1};const Q=new j(q);let J=new D({resource:X});J.addMetricReader(new k({exporter:Q,exportIntervalMillis:2e4}));const ee=v.resource.attributes||{};ee["os"]=W;ee["browser.name"]=K;ee["navigator.userAgent"]=navigator.userAgent.toString();ee["env"]=e.env;ee["root.url"]=window.location.pathname;ee["type"]="rum";const te=new PerformanceObserver((e=>{const t=e.getEntries();t.forEach((e=>{switch(e.entryType){case"paint":if(e.name==="first-paint"){if(e.startTime){let t=J.getMeter("mw-counter").createCounter("first-paint",{description:"Time to first paint",unit:"ms",valueType:1});t.add(e.startTime,ee)}}else if(e.name==="first-contentful-paint"){if(e.startTime){let t=J.getMeter("mw-counter").createCounter("first-contentful-paint",{description:"Time to first contentful paint",unit:"ms",valueType:1});t.add(e.startTime,ee)}}break;case"layout-shift":if(e.value){let t=J.getMeter("mw-counter").createCounter("layout-shift",{description:"Layout shift score",unit:"",valueType:1});t.add(e.value,ee)}break;case"first-input":let t=e.processingStart-e.startTime;if(t&&t>=0){let e=J.getMeter("mw-counter").createCounter("first-input-delay",{description:"First input delay",unit:"ms",valueType:1});e.add(t,ee)}break;case"largest-contentful-paint":let r=e.renderTime-e.loadTime;if(r&&r>=0){let e=J.getMeter("mw-counter").createCounter("largest-contentful-paint",{description:"Largest Contentful Paint",unit:"ms",valueType:1});e.add(r,ee)}break;case"longtask":if(e.duration){let t=J.getMeter("mw-counter").createCounter("longtask",{description:"Long task duration",unit:"ms",valueType:1});t.add(e.duration,ee)}break;default:break}}))}));te.observe({entryTypes:["longtask","largest-contentful-paint","navigation","paint","resource","layout-shift","first-input"]});let re=J.getMeter("mw-counter").createCounter("user.status",{description:"User Status ",unit:"",valueType:1});re.add(1,ee);if(e.recording=="1"){const t={target:e.target,origin:window.location.origin,session_id:l(),accountKey:e.accountKey};i(t)}};const E=()=>{if(g){a();v.addSpanProcessor(new t(d,l()));const e=y;if(e.recording=="1"){const t={target:e.target,origin:window.location.origin,session_id:l(),accountKey:e.accountKey};i(t)}}};e.exports.setAttributes=(e={})=>{f={...f,...e};for(const e in f){v.addSpanProcessor(new t(e,f[e]))}};e.exports.recordLog=(e,t)=>{_.recordLog({type:e,message:t instanceof Error?t.message:String(t),error:t instanceof Error?r(t):r(new Error(String(t)))})}},{"../packages/logs-exporter":392,"../packages/logs-instrumentation":393,"./constants":390,"./recording":394,"./session":395,"./util":397,"@opentelemetry/api":19,"@opentelemetry/context-zone":52,"@opentelemetry/core":63,"@opentelemetry/exporter-metrics-otlp-http":96,"@opentelemetry/exporter-trace-otlp-http":99,"@opentelemetry/instrumentation":108,"@opentelemetry/instrumentation-fetch":104,"@opentelemetry/propagator-b3":142,"@opentelemetry/resources":155,"@opentelemetry/sdk-metrics":192,"@opentelemetry/sdk-trace-base":231,"@opentelemetry/sdk-trace-web":244,"@opentelemetry/semantic-conventions":247,"instrumentation-document-load":254,"middleware.io-instrumentation-xml-http-request":269}],397:[function(require,e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCollectionSourceUrl=exports.tryNumber=exports.getUserInteractionSpanName=void 0;var t=require("./constants");var r=function(e,t,r){var n;var o="";var i=t;while(i&&!o){o=i.getAttribute("aria-label")||i.id||i.textContent||i.value||"";o=o.trim();i=i.parentElement}if(o){return"".concat(e," on '").concat(o,"'")}};exports.getUserInteractionSpanName=r;var n=function(e){if(typeof e==="number"){return e}return e!=null&&Number.isFinite(+e)?+e:undefined};exports.tryNumber=n;var o=function(e){var t=new URL(e);t.pathname=t.pathname.replace(/\/v1\/(traces|metrics|logs)\/?$/,"");if(!t.pathname.endsWith("/")){t.pathname+="/"}return t.href};exports.getCollectionSourceUrl=o;const i=e=>{const t=decodeURIComponent(document.cookie);const r=t.split(";");for(let t=0;t<r.length;t++){const n=r[t].trim();if(n.indexOf(e+"=")===0){return n.substring((e+"=").length,n.length)}}return undefined};exports.findCookieValue=i;const a=()=>{try{return window.self!==window.top}catch(e){return true}};exports.isIframe=a},{"./constants":390}]},{},[1]);