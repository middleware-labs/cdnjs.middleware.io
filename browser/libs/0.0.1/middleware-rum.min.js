!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){return o(t[s][1][e]||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,l=[],p=!1,d=-1;function m(){p&&u&&(p=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!p){var e=c(m);p=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new _(e,t)),1!==l.length||p||c(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,r){(function(t,n){(function(){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,s=Array.prototype.slice,a={},c=0;function u(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new u(i.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new u(i.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r.setImmediate="function"==typeof t?t:function(e){var t=c++,n=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,o((function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))})),t},r.clearImmediate="function"==typeof n?n:function(e){delete a[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:2}],3:[function(e,t,r){"use strict";t.exports=e("./packages/init")},{"./packages/init":630}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContextAPI=void 0;const n=e("../context/NoopContextManager"),o=e("../internal/global-utils"),i=e("./diag"),s="context",a=new n.NoopContextManager;class c{constructor(){}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalContextManager(e){return(0,o.registerGlobal)(s,e,i.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,o.getGlobal)(s)||a}disable(){this._getContextManager().disable(),(0,o.unregisterGlobal)(s,i.DiagAPI.instance())}}r.ContextAPI=c},{"../context/NoopContextManager":14,"../internal/global-utils":22,"./diag":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagAPI=void 0;const n=e("../diag/ComponentLogger"),o=e("../diag/internal/logLevelLogger"),i=e("../diag/types"),s=e("../internal/global-utils");class a{constructor(){function e(e){return function(...t){const r=(0,s.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:i.DiagLogLevel.INFO})=>{var n,a,c;if(e===t){const e=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=e.stack)&&void 0!==n?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});const u=(0,s.getGlobal)("diag"),l=(0,o.createLogLevelDiagLogger)(null!==(a=r.logLevel)&&void 0!==a?a:i.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){const e=null!==(c=(new Error).stack)&&void 0!==c?c:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),l.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,s.registerGlobal)("diag",l,t,!0)},t.disable=()=>{(0,s.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new a),this._instance}}r.DiagAPI=a},{"../diag/ComponentLogger":17,"../diag/internal/logLevelLogger":19,"../diag/types":20,"../internal/global-utils":22}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricsAPI=void 0;const n=e("../metrics/NoopMeterProvider"),o=e("../internal/global-utils"),i=e("./diag"),s="metrics";class a{constructor(){}static getInstance(){return this._instance||(this._instance=new a),this._instance}setGlobalMeterProvider(e){return(0,o.registerGlobal)(s,e,i.DiagAPI.instance())}getMeterProvider(){return(0,o.getGlobal)(s)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,o.unregisterGlobal)(s,i.DiagAPI.instance())}}r.MetricsAPI=a},{"../internal/global-utils":22,"../metrics/NoopMeterProvider":27,"./diag":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PropagationAPI=void 0;const n=e("../internal/global-utils"),o=e("../propagation/NoopTextMapPropagator"),i=e("../propagation/TextMapPropagator"),s=e("../baggage/context-helpers"),a=e("../baggage/utils"),c=e("./diag"),u="propagation",l=new o.NoopTextMapPropagator;class p{constructor(){this.createBaggage=a.createBaggage,this.getBaggage=s.getBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,c.DiagAPI.instance())}inject(e,t,r=i.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=i.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,c.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||l}}r.PropagationAPI=p},{"../baggage/context-helpers":9,"../baggage/utils":12,"../internal/global-utils":22,"../propagation/NoopTextMapPropagator":31,"../propagation/TextMapPropagator":32,"./diag":5}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceAPI=void 0;const n=e("../internal/global-utils"),o=e("../trace/ProxyTracerProvider"),i=e("../trace/spancontext-utils"),s=e("../trace/context-utils"),a=e("./diag"),c="trace";class u{constructor(){this._proxyTracerProvider=new o.ProxyTracerProvider,this.wrapSpanContext=i.wrapSpanContext,this.isSpanContextValid=i.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getActiveSpan=s.getActiveSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){const t=(0,n.registerGlobal)(c,this._proxyTracerProvider,a.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(c)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(c,a.DiagAPI.instance()),this._proxyTracerProvider=new o.ProxyTracerProvider}}r.TraceAPI=u},{"../internal/global-utils":22,"../trace/ProxyTracerProvider":38,"../trace/context-utils":40,"../trace/spancontext-utils":46,"./diag":5}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteBaggage=r.setBaggage=r.getBaggage=void 0;const n=(0,e("../context/context").createContextKey)("OpenTelemetry Baggage Key");r.getBaggage=function(e){return e.getValue(n)||void 0},r.setBaggage=function(e,t){return e.setValue(n,t)},r.deleteBaggage=function(e){return e.deleteValue(n)}},{"../context/context":15}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaggageImpl=void 0;class n{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){const t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map((([e,t])=>[e,t]))}setEntry(e,t){const r=new n(this._entries);return r._entries.set(e,t),r}removeEntry(e){const t=new n(this._entries);return t._entries.delete(e),t}removeEntries(...e){const t=new n(this._entries);for(const r of e)t._entries.delete(r);return t}clear(){return new n}}r.BaggageImpl=n},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.baggageEntryMetadataSymbol=void 0,r.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.baggageEntryMetadataFromString=r.createBaggage=void 0;const n=e("../api/diag"),o=e("./internal/baggage-impl"),i=e("./internal/symbol"),s=n.DiagAPI.instance();r.createBaggage=function(e={}){return new o.BaggageImpl(new Map(Object.entries(e)))},r.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(s.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:i.baggageEntryMetadataSymbol,toString:()=>e}}},{"../api/diag":5,"./internal/baggage-impl":10,"./internal/symbol":11}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.context=void 0;const n=e("./api/context");r.context=n.ContextAPI.getInstance()},{"./api/context":4}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopContextManager=void 0;const n=e("./context");r.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},{"./context":15}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ROOT_CONTEXT=r.createContextKey=void 0,r.createContextKey=function(e){return Symbol.for(e)};class n{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,r)=>{const o=new n(t._currentContext);return o._currentContext.set(e,r),o},t.deleteValue=e=>{const r=new n(t._currentContext);return r._currentContext.delete(e),r}}}r.ROOT_CONTEXT=new n},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.diag=void 0;const n=e("./api/diag");r.diag=n.DiagAPI.instance()},{"./api/diag":5}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagComponentLogger=void 0;const n=e("../internal/global-utils");function o(e,t,r){const o=(0,n.getGlobal)("diag");if(o)return r.unshift(t),o[e](...r)}r.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return o("debug",this._namespace,e)}error(...e){return o("error",this._namespace,e)}info(...e){return o("info",this._namespace,e)}warn(...e){return o("warn",this._namespace,e)}verbose(...e){return o("verbose",this._namespace,e)}}},{"../internal/global-utils":22}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagConsoleLogger=void 0;const n=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];r.DiagConsoleLogger=class{constructor(){function e(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(let t=0;t<n.length;t++)this[n[t].n]=e(n[t].c)}}},{}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLogLevelDiagLogger=void 0;const n=e("../types");r.createLogLevelDiagLogger=function(e,t){function r(r,n){const o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},{"../types":20}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r.DiagLogLevel||(r.DiagLogLevel={}))},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.trace=r.propagation=r.metrics=r.diag=r.context=r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=r.isValidSpanId=r.isValidTraceId=r.isSpanContextValid=r.createTraceState=r.TraceFlags=r.SpanStatusCode=r.SpanKind=r.SamplingDecision=r.ProxyTracerProvider=r.ProxyTracer=r.defaultTextMapSetter=r.defaultTextMapGetter=r.ValueType=r.createNoopMeter=r.DiagLogLevel=r.DiagConsoleLogger=r.ROOT_CONTEXT=r.createContextKey=r.baggageEntryMetadataFromString=void 0;var n=e("./baggage/utils");Object.defineProperty(r,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}});var o=e("./context/context");Object.defineProperty(r,"createContextKey",{enumerable:!0,get:function(){return o.createContextKey}}),Object.defineProperty(r,"ROOT_CONTEXT",{enumerable:!0,get:function(){return o.ROOT_CONTEXT}});var i=e("./diag/consoleLogger");Object.defineProperty(r,"DiagConsoleLogger",{enumerable:!0,get:function(){return i.DiagConsoleLogger}});var s=e("./diag/types");Object.defineProperty(r,"DiagLogLevel",{enumerable:!0,get:function(){return s.DiagLogLevel}});var a=e("./metrics/NoopMeter");Object.defineProperty(r,"createNoopMeter",{enumerable:!0,get:function(){return a.createNoopMeter}});var c=e("./metrics/Metric");Object.defineProperty(r,"ValueType",{enumerable:!0,get:function(){return c.ValueType}});var u=e("./propagation/TextMapPropagator");Object.defineProperty(r,"defaultTextMapGetter",{enumerable:!0,get:function(){return u.defaultTextMapGetter}}),Object.defineProperty(r,"defaultTextMapSetter",{enumerable:!0,get:function(){return u.defaultTextMapSetter}});var l=e("./trace/ProxyTracer");Object.defineProperty(r,"ProxyTracer",{enumerable:!0,get:function(){return l.ProxyTracer}});var p=e("./trace/ProxyTracerProvider");Object.defineProperty(r,"ProxyTracerProvider",{enumerable:!0,get:function(){return p.ProxyTracerProvider}});var d=e("./trace/SamplingResult");Object.defineProperty(r,"SamplingDecision",{enumerable:!0,get:function(){return d.SamplingDecision}});var m=e("./trace/span_kind");Object.defineProperty(r,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var h=e("./trace/status");Object.defineProperty(r,"SpanStatusCode",{enumerable:!0,get:function(){return h.SpanStatusCode}});var _=e("./trace/trace_flags");Object.defineProperty(r,"TraceFlags",{enumerable:!0,get:function(){return _.TraceFlags}});var f=e("./trace/internal/utils");Object.defineProperty(r,"createTraceState",{enumerable:!0,get:function(){return f.createTraceState}});var g=e("./trace/spancontext-utils");Object.defineProperty(r,"isSpanContextValid",{enumerable:!0,get:function(){return g.isSpanContextValid}}),Object.defineProperty(r,"isValidTraceId",{enumerable:!0,get:function(){return g.isValidTraceId}}),Object.defineProperty(r,"isValidSpanId",{enumerable:!0,get:function(){return g.isValidSpanId}});var E=e("./trace/invalid-span-constants");Object.defineProperty(r,"INVALID_SPANID",{enumerable:!0,get:function(){return E.INVALID_SPANID}}),Object.defineProperty(r,"INVALID_TRACEID",{enumerable:!0,get:function(){return E.INVALID_TRACEID}}),Object.defineProperty(r,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return E.INVALID_SPAN_CONTEXT}});const T=e("./context-api");Object.defineProperty(r,"context",{enumerable:!0,get:function(){return T.context}});const y=e("./diag-api");Object.defineProperty(r,"diag",{enumerable:!0,get:function(){return y.diag}});const S=e("./metrics-api");Object.defineProperty(r,"metrics",{enumerable:!0,get:function(){return S.metrics}});const v=e("./propagation-api");Object.defineProperty(r,"propagation",{enumerable:!0,get:function(){return v.propagation}});const O=e("./trace-api");Object.defineProperty(r,"trace",{enumerable:!0,get:function(){return O.trace}}),r.default={context:T.context,diag:y.diag,metrics:S.metrics,propagation:v.propagation,trace:O.trace}},{"./baggage/utils":12,"./context-api":13,"./context/context":15,"./diag-api":16,"./diag/consoleLogger":18,"./diag/types":20,"./metrics-api":24,"./metrics/Metric":25,"./metrics/NoopMeter":26,"./propagation-api":30,"./propagation/TextMapPropagator":32,"./trace-api":33,"./trace/ProxyTracer":37,"./trace/ProxyTracerProvider":38,"./trace/SamplingResult":39,"./trace/internal/utils":43,"./trace/invalid-span-constants":44,"./trace/span_kind":45,"./trace/spancontext-utils":46,"./trace/status":47,"./trace/trace_flags":48}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unregisterGlobal=r.getGlobal=r.registerGlobal=void 0;const n=e("../platform"),o=e("../version"),i=e("./semver"),s=o.VERSION.split(".")[0],a=Symbol.for(`opentelemetry.js.api.${s}`),c=n._globalThis;r.registerGlobal=function(e,t,r,n=!1){var i;const s=c[a]=null!==(i=c[a])&&void 0!==i?i:{version:o.VERSION};if(!n&&s[e]){const t=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(s.version!==o.VERSION){const e=new Error("@opentelemetry/api: All API registration versions must match");return r.error(e.stack||e.message),!1}return s[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${o.VERSION}.`),!0},r.getGlobal=function(e){var t,r;const n=null===(t=c[a])||void 0===t?void 0:t.version;if(n&&(0,i.isCompatible)(n))return null===(r=c[a])||void 0===r?void 0:r[e]},r.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${o.VERSION}.`);const r=c[a];r&&delete r[e]}},{"../platform":29,"../version":49,"./semver":23}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCompatible=r._makeCompatibilityCheck=void 0;const n=e("../version"),o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function i(e){const t=new Set([e]),r=new Set,n=e.match(o);if(!n)return()=>!1;const i=+n[1],s=+n[2],a=+n[3];if(null!=n[4])return function(t){return t===e};function c(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;const n=e.match(o);if(!n)return c(e);const l=+n[1],p=+n[2],d=+n[3];return null!=n[4]||i!==l?c(e):0===i?s===p&&a<=d?u(e):c(e):s<=p?u(e):c(e)}}r._makeCompatibilityCheck=i,r.isCompatible=i(n.VERSION)},{"../version":49}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.metrics=void 0;const n=e("./api/metrics");r.metrics=n.MetricsAPI.getInstance()},{"./api/metrics":6}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(r.ValueType||(r.ValueType={}))},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createNoopMeter=r.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=r.NOOP_OBSERVABLE_GAUGE_METRIC=r.NOOP_OBSERVABLE_COUNTER_METRIC=r.NOOP_UP_DOWN_COUNTER_METRIC=r.NOOP_HISTOGRAM_METRIC=r.NOOP_COUNTER_METRIC=r.NOOP_METER=r.NoopObservableUpDownCounterMetric=r.NoopObservableGaugeMetric=r.NoopObservableCounterMetric=r.NoopObservableMetric=r.NoopHistogramMetric=r.NoopUpDownCounterMetric=r.NoopCounterMetric=r.NoopMetric=r.NoopMeter=void 0;class n{constructor(){}createHistogram(e,t){return r.NOOP_HISTOGRAM_METRIC}createCounter(e,t){return r.NOOP_COUNTER_METRIC}createUpDownCounter(e,t){return r.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,t){return r.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,t){return r.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,t){return r.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}r.NoopMeter=n;class o{}r.NoopMetric=o;class i extends o{add(e,t){}}r.NoopCounterMetric=i;class s extends o{add(e,t){}}r.NoopUpDownCounterMetric=s;class a extends o{record(e,t){}}r.NoopHistogramMetric=a;class c{addCallback(e){}removeCallback(e){}}r.NoopObservableMetric=c;class u extends c{}r.NoopObservableCounterMetric=u;class l extends c{}r.NoopObservableGaugeMetric=l;class p extends c{}r.NoopObservableUpDownCounterMetric=p,r.NOOP_METER=new n,r.NOOP_COUNTER_METRIC=new i,r.NOOP_HISTOGRAM_METRIC=new a,r.NOOP_UP_DOWN_COUNTER_METRIC=new s,r.NOOP_OBSERVABLE_COUNTER_METRIC=new u,r.NOOP_OBSERVABLE_GAUGE_METRIC=new l,r.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new p,r.createNoopMeter=function(){return r.NOOP_METER}},{}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NOOP_METER_PROVIDER=r.NoopMeterProvider=void 0;const n=e("./NoopMeter");class o{getMeter(e,t,r){return n.NOOP_METER}}r.NoopMeterProvider=o,r.NOOP_METER_PROVIDER=new o},{"./NoopMeter":26}],28:[function(e,t,r){(function(e){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof e?e:{}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./globalThis"),r)},{"./globalThis":28}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.propagation=void 0;const n=e("./api/propagation");r.propagation=n.PropagationAPI.getInstance()},{"./api/propagation":7}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTextMapPropagator=void 0;r.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},{}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultTextMapSetter=r.defaultTextMapGetter=void 0,r.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},r.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},{}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.trace=void 0;const n=e("./api/trace");r.trace=n.TraceAPI.getInstance()},{"./api/trace":8}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NonRecordingSpan=void 0;const n=e("./invalid-span-constants");r.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},{"./invalid-span-constants":44}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTracer=void 0;const n=e("../api/context"),o=e("../trace/context-utils"),i=e("./NonRecordingSpan"),s=e("./spancontext-utils"),a=n.ContextAPI.getInstance();r.NoopTracer=class{startSpan(e,t,r){if(Boolean(null==t?void 0:t.root))return new i.NonRecordingSpan;const n=r&&(0,o.getSpanContext)(r);return"object"==typeof(a=n)&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags&&(0,s.isSpanContextValid)(n)?new i.NonRecordingSpan(n):new i.NonRecordingSpan;var a}startActiveSpan(e,t,r,n){let i,s,c;if(arguments.length<2)return;2===arguments.length?c=t:3===arguments.length?(i=t,c=r):(i=t,s=r,c=n);const u=null!=s?s:a.active(),l=this.startSpan(e,i,u),p=(0,o.setSpan)(u,l);return a.with(p,c,void 0,l)}}},{"../api/context":4,"../trace/context-utils":40,"./NonRecordingSpan":34,"./spancontext-utils":46}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTracerProvider=void 0;const n=e("./NoopTracer");r.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},{"./NoopTracer":35}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProxyTracer=void 0;const n=new(e("./NoopTracer").NoopTracer);r.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){const o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)}_getTracer(){if(this._delegate)return this._delegate;const e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},{"./NoopTracer":35}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProxyTracerProvider=void 0;const n=e("./ProxyTracer"),o=new(e("./NoopTracerProvider").NoopTracerProvider);r.ProxyTracerProvider=class{getTracer(e,t,r){var o;return null!==(o=this.getDelegateTracer(e,t,r))&&void 0!==o?o:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)}}},{"./NoopTracerProvider":36,"./ProxyTracer":37}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r.SamplingDecision||(r.SamplingDecision={}))},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSpanContext=r.setSpanContext=r.deleteSpan=r.setSpan=r.getActiveSpan=r.getSpan=void 0;const n=e("../context/context"),o=e("./NonRecordingSpan"),i=e("../api/context"),s=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(s)||void 0}function c(e,t){return e.setValue(s,t)}r.getSpan=a,r.getActiveSpan=function(){return a(i.ContextAPI.getInstance().active())},r.setSpan=c,r.deleteSpan=function(e){return e.deleteValue(s)},r.setSpanContext=function(e,t){return c(e,new o.NonRecordingSpan(t))},r.getSpanContext=function(e){var t;return null===(t=a(e))||void 0===t?void 0:t.spanContext()}},{"../api/context":4,"../context/context":15,"./NonRecordingSpan":34}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceStateImpl=void 0;const n=e("./tracestate-validators");class o{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){const r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){const t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,t)=>{const r=t.trim(),o=r.indexOf("=");if(-1!==o){const i=r.slice(0,o),s=r.slice(o+1,t.length);(0,n.validateKey)(i)&&(0,n.validateValue)(s)&&e.set(i,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new o;return e._internalState=new Map(this._internalState),e}}r.TraceStateImpl=o},{"./tracestate-validators":42}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateValue=r.validateKey=void 0;const n="[_0-9a-z-*/]",o=new RegExp(`^(?:${`[a-z]${n}{0,255}`}|${`[a-z0-9]${n}{0,240}@[a-z]${n}{0,13}`})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;r.validateKey=function(e){return o.test(e)},r.validateValue=function(e){return i.test(e)&&!s.test(e)}},{}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTraceState=void 0;const n=e("./tracestate-impl");r.createTraceState=function(e){return new n.TraceStateImpl(e)}},{"./tracestate-impl":41}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=void 0;const n=e("./trace_flags");r.INVALID_SPANID="0000000000000000",r.INVALID_TRACEID="00000000000000000000000000000000",r.INVALID_SPAN_CONTEXT={traceId:r.INVALID_TRACEID,spanId:r.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},{"./trace_flags":48}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r.SpanKind||(r.SpanKind={}))},{}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapSpanContext=r.isSpanContextValid=r.isValidSpanId=r.isValidTraceId=void 0;const n=e("./invalid-span-constants"),o=e("./NonRecordingSpan"),i=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(e){return i.test(e)&&e!==n.INVALID_TRACEID}function c(e){return s.test(e)&&e!==n.INVALID_SPANID}r.isValidTraceId=a,r.isValidSpanId=c,r.isSpanContextValid=function(e){return a(e.traceId)&&c(e.spanId)},r.wrapSpanContext=function(e){return new o.NonRecordingSpan(e)}},{"./NonRecordingSpan":34,"./invalid-span-constants":44}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r.SpanStatusCode||(r.SpanStatusCode={}))},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r.TraceFlags||(r.TraceFlags={}))},{}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.3.0"},{}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZoneContextManager=void 0;const n=e("@opentelemetry/api"),o=e("./util"),i="OT_ZONE_CONTEXT";r.ZoneContextManager=class{constructor(){this._enabled=!1,this._zoneCounter=0}_activeContextFromZone(e){return e&&e.get(i)||n.ROOT_CONTEXT}_bindFunction(e,t){const r=this,n=function(...n){return r.with(e,(()=>t.apply(this,n)))};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),n}_bindListener(e,t){const r=t;return void 0!==r.__ot_listeners||(r.__ot_listeners={},"function"==typeof r.addEventListener&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,e)),"function"==typeof r.removeEventListener&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),t}_createZoneName(){this._zoneCounter++;const e=Math.random();return`${this._zoneCounter}-${e}`}_createZone(e,t){return Zone.current.fork({name:e,properties:{[i]:t}})}_getActiveZone(){return Zone.current}_patchAddEventListener(e,t,r){const n=this;return function(o,i,s){void 0===e.__ot_listeners&&(e.__ot_listeners={});let a=e.__ot_listeners[o];void 0===a&&(a=new WeakMap,e.__ot_listeners[o]=a);const c=n.bind(r,i);return a.set(i,c),t.call(this,o,c,s)}}_patchRemoveEventListener(e,t){return function(r,n){if(void 0===e.__ot_listeners||void 0===e.__ot_listeners[r])return t.call(this,r,n);const o=e.__ot_listeners[r],i=o.get(n);return o.delete(n),t.call(this,r,i||n)}}active(){if(!this._enabled)return n.ROOT_CONTEXT;const e=this._getActiveZone(),t=this._activeContextFromZone(e);return t||n.ROOT_CONTEXT}bind(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):((0,o.isListenerObject)(t)&&this._bindListener(e,t),t)}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}with(e,t,r,...n){const o=this._createZoneName();return this._createZone(o,e).run(t,r,n)}}},{"./util":53,"@opentelemetry/api":21}],51:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./ZoneContextManager"),r),o(e("./types"),r)},{"./ZoneContextManager":50,"./types":52}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isListenerObject=void 0,r.isListenerObject=function(e={}){return"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}},{}],54:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("@opentelemetry/context-zone-peer-dep"),r),e("zone.js")},{"@opentelemetry/context-zone-peer-dep":51,"zone.js":626}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExportResultCode=void 0,function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(r.ExportResultCode||(r.ExportResultCode={}))},{}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BAGGAGE_MAX_TOTAL_LENGTH=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=r.BAGGAGE_MAX_NAME_VALUE_PAIRS=r.BAGGAGE_HEADER=r.BAGGAGE_ITEMS_SEPARATOR=r.BAGGAGE_PROPERTIES_SEPARATOR=r.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,r.BAGGAGE_KEY_PAIR_SEPARATOR="=",r.BAGGAGE_PROPERTIES_SEPARATOR=";",r.BAGGAGE_ITEMS_SEPARATOR=",",r.BAGGAGE_HEADER="baggage",r.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,r.BAGGAGE_MAX_TOTAL_LENGTH=8192},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.W3CBaggagePropagator=void 0;const n=e("@opentelemetry/api"),o=e("../../trace/suppress-tracing"),i=e("../constants"),s=e("../utils");r.W3CBaggagePropagator=class{inject(e,t,r){const a=n.propagation.getBaggage(e);if(!a||(0,o.isTracingSuppressed)(e))return;const c=(0,s.getKeyPairs)(a).filter((e=>e.length<=i.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,i.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=(0,s.serializeKeyPairs)(c);u.length>0&&r.set(t,i.BAGGAGE_HEADER,u)}extract(e,t,r){const o=r.get(t,i.BAGGAGE_HEADER),a=Array.isArray(o)?o.join(i.BAGGAGE_ITEMS_SEPARATOR):o;if(!a)return e;const c={};if(0===a.length)return e;return a.split(i.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{const t=(0,s.parsePairKeyValue)(e);if(t){const e={value:t.value};t.metadata&&(e.metadata=t.metadata),c[t.key]=e}})),0===Object.entries(c).length?e:n.propagation.setBaggage(e,n.propagation.createBaggage(c))}fields(){return[i.BAGGAGE_HEADER]}}},{"../../trace/suppress-tracing":85,"../constants":56,"../utils":58,"@opentelemetry/api":21}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseKeyPairsIntoRecord=r.parsePairKeyValue=r.getKeyPairs=r.serializeKeyPairs=void 0;const n=e("@opentelemetry/api"),o=e("./constants");function i(e){const t=e.split(o.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;const r=t.shift();if(!r)return;const i=r.split(o.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==i.length)return;const s=decodeURIComponent(i[0].trim()),a=decodeURIComponent(i[1].trim());let c;return t.length>0&&(c=(0,n.baggageEntryMetadataFromString)(t.join(o.BAGGAGE_PROPERTIES_SEPARATOR))),{key:s,value:a,metadata:c}}r.serializeKeyPairs=function(e){return e.reduce(((e,t)=>{const r=`${e}${""!==e?o.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return r.length>o.BAGGAGE_MAX_TOTAL_LENGTH?e:r}),"")},r.getKeyPairs=function(e){return e.getAllEntries().map((([e,t])=>{let r=`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`;return void 0!==t.metadata&&(r+=o.BAGGAGE_PROPERTIES_SEPARATOR+t.metadata.toString()),r}))},r.parsePairKeyValue=i,r.parseKeyPairsIntoRecord=function(e){return"string"!=typeof e||0===e.length?{}:e.split(o.BAGGAGE_ITEMS_SEPARATOR).map((e=>i(e))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})}},{"./constants":56,"@opentelemetry/api":21}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AnchoredClock=void 0;r.AnchoredClock=class{constructor(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}now(){const e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}}},{}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAttributeValue=r.isAttributeKey=r.sanitizeAttributes=void 0;const n=e("@opentelemetry/api");function o(e){return"string"==typeof e&&e.length>0}function i(e){return null==e||(Array.isArray(e)?function(e){let t;for(const r of e)if(null!=r){if(!t){if(s(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}(e):s(e))}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}r.sanitizeAttributes=function(e){const t={};if("object"!=typeof e||null==e)return t;for(const[r,s]of Object.entries(e))o(r)?i(s)?Array.isArray(s)?t[r]=s.slice():t[r]=s:n.diag.warn(`Invalid attribute value set for key: ${r}`):n.diag.warn(`Invalid attribute key: ${r}`);return t},r.isAttributeKey=o,r.isAttributeValue=i},{"@opentelemetry/api":21}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.globalErrorHandler=r.setGlobalErrorHandler=void 0;let n=(0,e("./logging-error-handler").loggingErrorHandler)();r.setGlobalErrorHandler=function(e){n=e},r.globalErrorHandler=function(e){try{n(e)}catch(e){}}},{"./logging-error-handler":62}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loggingErrorHandler=void 0;const n=e("@opentelemetry/api");r.loggingErrorHandler=function(){return e=>{n.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){const t={};let r=e;for(;null!==r;)Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;const n=r[e];n&&(t[e]=String(n))})),r=Object.getPrototypeOf(r);return t}(e))}(e))}}},{"@opentelemetry/api":21}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTimeInput=r.isTimeInputHrTime=r.hrTimeToMicroseconds=r.hrTimeToMilliseconds=r.hrTimeToNanoseconds=r.hrTimeToTimeStamp=r.hrTimeDuration=r.timeInputToHrTime=r.hrTime=void 0;const n=e("../platform"),o=9,i=Math.pow(10,o);function s(e){const t=e/1e3,r=Math.trunc(t);return[r,Number((t-r).toFixed(o))*i]}function a(){let e=n.otperformance.timeOrigin;if("number"!=typeof e){const t=n.otperformance;e=t.timing&&t.timing.fetchStart}return e}function c(e){const t=s(a()),r=s("number"==typeof e?e:n.otperformance.now());let o=t[0]+r[0],c=t[1]+r[1];return c>i&&(c-=i,o+=1),[o,c]}function u(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}r.hrTime=c,r.timeInputToHrTime=function(e){if(u(e))return e;if("number"==typeof e)return e<a()?c(e):s(e);if(e instanceof Date)return s(e.getTime());throw TypeError("Invalid input type")},r.hrTimeDuration=function(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=i),[r,n]},r.hrTimeToTimeStamp=function(e){const t=o,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",n)},r.hrTimeToNanoseconds=function(e){return e[0]*i+e[1]},r.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},r.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},r.isTimeInputHrTime=u,r.isTimeInput=function(e){return u(e)||"number"==typeof e||e instanceof Date}},{"../platform":72}],64:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],65:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.internal=r.baggageUtils=void 0,o(e("./baggage/propagation/W3CBaggagePropagator"),r),o(e("./common/anchored-clock"),r),o(e("./common/attributes"),r),o(e("./common/global-error-handler"),r),o(e("./common/logging-error-handler"),r),o(e("./common/time"),r),o(e("./common/types"),r),o(e("./ExportResult"),r),o(e("./version"),r),r.baggageUtils=e("./baggage/utils"),o(e("./platform"),r),o(e("./propagation/composite"),r),o(e("./trace/W3CTraceContextPropagator"),r),o(e("./trace/IdGenerator"),r),o(e("./trace/rpc-metadata"),r),o(e("./trace/sampler/AlwaysOffSampler"),r),o(e("./trace/sampler/AlwaysOnSampler"),r),o(e("./trace/sampler/ParentBasedSampler"),r),o(e("./trace/sampler/TraceIdRatioBasedSampler"),r),o(e("./trace/suppress-tracing"),r),o(e("./trace/TraceState"),r),o(e("./utils/environment"),r),o(e("./utils/merge"),r),o(e("./utils/sampling"),r),o(e("./utils/url"),r),o(e("./utils/wrap"),r),o(e("./utils/callback"),r),o(e("./version"),r);const i=e("./internal/exporter");r.internal={_export:i._export}},{"./ExportResult":55,"./baggage/propagation/W3CBaggagePropagator":57,"./baggage/utils":58,"./common/anchored-clock":59,"./common/attributes":60,"./common/global-error-handler":61,"./common/logging-error-handler":62,"./common/time":63,"./common/types":64,"./internal/exporter":66,"./platform":72,"./propagation/composite":76,"./trace/IdGenerator":77,"./trace/TraceState":78,"./trace/W3CTraceContextPropagator":79,"./trace/rpc-metadata":80,"./trace/sampler/AlwaysOffSampler":81,"./trace/sampler/AlwaysOnSampler":82,"./trace/sampler/ParentBasedSampler":83,"./trace/sampler/TraceIdRatioBasedSampler":84,"./trace/suppress-tracing":85,"./utils/callback":86,"./utils/environment":87,"./utils/merge":89,"./utils/sampling":91,"./utils/url":92,"./utils/wrap":93,"./version":94}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._export=void 0;const n=e("@opentelemetry/api"),o=e("../trace/suppress-tracing");r._export=function(e,t){return new Promise((r=>{n.context.with((0,o.suppressTracing)(n.context.active()),(()=>{e.export(t,(e=>{r(e)}))}))}))}},{"../trace/suppress-tracing":85,"@opentelemetry/api":21}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateValue=r.validateKey=void 0;const n="[_0-9a-z-*/]",o=new RegExp(`^(?:${`[a-z]${n}{0,255}`}|${`[a-z0-9]${n}{0,240}@[a-z]${n}{0,13}`})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;r.validateKey=function(e){return o.test(e)},r.validateValue=function(e){return i.test(e)&&!s.test(e)}},{}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RandomIdGenerator=void 0;r.RandomIdGenerator=class{constructor(){this.generateTraceId=o(16),this.generateSpanId=o(8)}};const n=Array(32);function o(e){return function(){for(let t=0;t<2*e;t++)n[t]=Math.floor(16*Math.random())+48,n[t]>=58&&(n[t]+=39);return String.fromCharCode.apply(null,n.slice(0,2*e))}}},{}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEnv=void 0;const n=e("../../utils/environment"),o=e("./globalThis");r.getEnv=function(){const e=(0,n.parseEnvironment)(o._globalThis);return Object.assign({},n.DEFAULT_ENVIRONMENT,e)}},{"../../utils/environment":87,"./globalThis":70}],70:[function(e,t,r){(function(e){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof e?e:{}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBase64=void 0,r.hexToBase64=function(e){const t=e.length;let r="";for(let n=0;n<t;n+=2){const t=e.substring(n,n+2),o=parseInt(t,16);r+=String.fromCharCode(o)}return btoa(r)}},{}],72:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./environment"),r),o(e("./globalThis"),r),o(e("./hex-to-base64"),r),o(e("./RandomIdGenerator"),r),o(e("./performance"),r),o(e("./sdk-info"),r),o(e("./timer-util"),r)},{"./RandomIdGenerator":68,"./environment":69,"./globalThis":70,"./hex-to-base64":71,"./performance":73,"./sdk-info":74,"./timer-util":75}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.otperformance=void 0,r.otperformance=performance},{}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SDK_INFO=void 0;const n=e("../../version"),o=e("@opentelemetry/semantic-conventions");r.SDK_INFO={[o.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[o.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[o.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:o.TelemetrySdkLanguageValues.WEBJS,[o.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:n.VERSION}},{"../../version":94,"@opentelemetry/semantic-conventions":490}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unrefTimer=void 0,r.unrefTimer=function(e){}},{}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositePropagator=void 0;const n=e("@opentelemetry/api");r.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,t,r){for(const o of this._propagators)try{o.inject(e,t,r)}catch(e){n.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}}extract(e,t,r){return this._propagators.reduce(((e,o)=>{try{return o.extract(e,t,r)}catch(e){n.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}},{"@opentelemetry/api":21}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceState=void 0;const n=e("../internal/validators");class o{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){const r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){const t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,t)=>{const r=t.trim(),o=r.indexOf("=");if(-1!==o){const i=r.slice(0,o),s=r.slice(o+1,t.length);(0,n.validateKey)(i)&&(0,n.validateValue)(s)&&e.set(i,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new o;return e._internalState=new Map(this._internalState),e}}r.TraceState=o},{"../internal/validators":67}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.W3CTraceContextPropagator=r.parseTraceParent=r.TRACE_STATE_HEADER=r.TRACE_PARENT_HEADER=void 0;const n=e("@opentelemetry/api"),o=e("./suppress-tracing"),i=e("./TraceState");r.TRACE_PARENT_HEADER="traceparent",r.TRACE_STATE_HEADER="tracestate";const s=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function a(e){const t=s.exec(e);return t?"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}r.parseTraceParent=a;r.W3CTraceContextPropagator=class{inject(e,t,i){const s=n.trace.getSpanContext(e);if(!s||(0,o.isTracingSuppressed)(e)||!(0,n.isSpanContextValid)(s))return;const a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||n.TraceFlags.NONE).toString(16)}`;i.set(t,r.TRACE_PARENT_HEADER,a),s.traceState&&i.set(t,r.TRACE_STATE_HEADER,s.traceState.serialize())}extract(e,t,o){const s=o.get(t,r.TRACE_PARENT_HEADER);if(!s)return e;const c=Array.isArray(s)?s[0]:s;if("string"!=typeof c)return e;const u=a(c);if(!u)return e;u.isRemote=!0;const l=o.get(t,r.TRACE_STATE_HEADER);if(l){const e=Array.isArray(l)?l.join(","):l;u.traceState=new i.TraceState("string"==typeof e?e:void 0)}return n.trace.setSpanContext(e,u)}fields(){return[r.TRACE_PARENT_HEADER,r.TRACE_STATE_HEADER]}}},{"./TraceState":78,"./suppress-tracing":85,"@opentelemetry/api":21}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRPCMetadata=r.deleteRPCMetadata=r.setRPCMetadata=r.RPCType=void 0;const n=(0,e("@opentelemetry/api").createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA");!function(e){e.HTTP="http"}(r.RPCType||(r.RPCType={})),r.setRPCMetadata=function(e,t){return e.setValue(n,t)},r.deleteRPCMetadata=function(e){return e.deleteValue(n)},r.getRPCMetadata=function(e){return e.getValue(n)}},{"@opentelemetry/api":21}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOffSampler=void 0;const n=e("@opentelemetry/api");r.AlwaysOffSampler=class{shouldSample(){return{decision:n.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}},{"@opentelemetry/api":21}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOnSampler=void 0;const n=e("@opentelemetry/api");r.AlwaysOnSampler=class{shouldSample(){return{decision:n.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}},{"@opentelemetry/api":21}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParentBasedSampler=void 0;const n=e("@opentelemetry/api"),o=e("../../common/global-error-handler"),i=e("./AlwaysOffSampler"),s=e("./AlwaysOnSampler");r.ParentBasedSampler=class{constructor(e){var t,r,n,a;this._root=e.root,this._root||((0,o.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new s.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new s.AlwaysOnSampler,this._remoteParentNotSampled=null!==(r=e.remoteParentNotSampled)&&void 0!==r?r:new i.AlwaysOffSampler,this._localParentSampled=null!==(n=e.localParentSampled)&&void 0!==n?n:new s.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new i.AlwaysOffSampler}shouldSample(e,t,r,o,i,s){const a=n.trace.getSpanContext(e);return a&&(0,n.isSpanContextValid)(a)?a.isRemote?a.traceFlags&n.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,o,i,s):this._remoteParentNotSampled.shouldSample(e,t,r,o,i,s):a.traceFlags&n.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,t,r,o,i,s):this._localParentNotSampled.shouldSample(e,t,r,o,i,s):this._root.shouldSample(e,t,r,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}},{"../../common/global-error-handler":61,"./AlwaysOffSampler":81,"./AlwaysOnSampler":82,"@opentelemetry/api":21}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceIdRatioBasedSampler=void 0;const n=e("@opentelemetry/api");r.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,t){return{decision:(0,n.isValidTraceId)(t)&&this._accumulate(t)<this._upperBound?n.SamplingDecision.RECORD_AND_SAMPLED:n.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){const n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}},{"@opentelemetry/api":21}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTracingSuppressed=r.unsuppressTracing=r.suppressTracing=void 0;const n=(0,e("@opentelemetry/api").createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");r.suppressTracing=function(e){return e.setValue(n,!0)},r.unsuppressTracing=function(e){return e.deleteValue(n)},r.isTracingSuppressed=function(e){return!0===e.getValue(n)}},{"@opentelemetry/api":21}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BindOnceFuture=void 0;const n=e("./promise");r.BindOnceFuture=class{constructor(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new n.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then((e=>this._deferred.resolve(e)),(e=>this._deferred.reject(e)))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}},{"./promise":90}],87:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEnvWithoutDefaults=r.parseEnvironment=r.DEFAULT_ENVIRONMENT=r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;const n=e("@opentelemetry/api"),o=e("./sampling"),i=e("../platform/browser/globalThis"),s=",",a=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function c(e){return a.indexOf(e)>-1}const u=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function l(e){return u.indexOf(e)>-1}function p(e,t,r,n=-1/0,o=1/0){if(void 0!==r[e]){const i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>o?o:i)}}function d(e,t,r,n=s){const o=r[e];"string"==typeof o&&(t[e]=o.split(n).map((e=>e.trim())))}r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128,r.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"otlp",OTEL_TRACES_SAMPLER:o.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};const m={ALL:n.DiagLogLevel.ALL,VERBOSE:n.DiagLogLevel.VERBOSE,DEBUG:n.DiagLogLevel.DEBUG,INFO:n.DiagLogLevel.INFO,WARN:n.DiagLogLevel.WARN,ERROR:n.DiagLogLevel.ERROR,NONE:n.DiagLogLevel.NONE};function h(e,t,r){const n=r[e];if("string"==typeof n){const r=m[n.toUpperCase()];null!=r&&(t[e]=r)}}function _(e){const t={};for(const n in r.DEFAULT_ENVIRONMENT){const r=n;if("OTEL_LOG_LEVEL"===r)h(r,t,e);else if(c(r))p(r,t,e);else if(l(r))d(r,t,e);else{const n=e[r];null!=n&&(t[r]=String(n))}}return t}r.parseEnvironment=_,r.getEnvWithoutDefaults=function(){return _(void 0!==t?t.env:i._globalThis)}}).call(this)}).call(this,e("_process"))},{"../platform/browser/globalThis":70,"./sampling":91,"@opentelemetry/api":21,_process:1}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPlainObject=void 0;const n="[object Null]",o="[object Undefined]",i=Function.prototype.toString,s=i.call(Object),a=(c=Object.getPrototypeOf,u=Object,function(e){return c(u(e))});var c,u;const l=Object.prototype,p=l.hasOwnProperty,d=Symbol?Symbol.toStringTag:void 0,m=l.toString;r.isPlainObject=function(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!==function(e){if(null==e)return void 0===e?o:n;return d&&d in Object(e)?function(e){const t=p.call(e,d),r=e[d];let n=!1;try{e[d]=void 0,n=!0}catch(e){}const o=m.call(e);n&&(t?e[d]=r:delete e[d]);return o}(e):function(e){return m.call(e)}(e)}(e))return!1;const t=a(e);if(null===t)return!0;const r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)===s}},{}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.merge=void 0;const n=e("./lodash.merge"),o=20;function i(e){return c(e)?e.slice():e}function s(e,t,r=0,d){let m;if(!(r>o)){if(r++,p(e)||p(t)||u(t))m=i(t);else if(c(e)){if(m=e.slice(),c(t))for(let e=0,r=t.length;e<r;e++)m.push(i(t[e]));else if(l(t)){const e=Object.keys(t);for(let r=0,n=e.length;r<n;r++){const n=e[r];m[n]=i(t[n])}}}else if(l(e))if(l(t)){if(!function(e,t){if(!(0,n.isPlainObject)(e)||!(0,n.isPlainObject)(t))return!1;return!0}(e,t))return t;m=Object.assign({},e);const o=Object.keys(t);for(let n=0,i=o.length;n<i;n++){const i=o[n],c=t[i];if(p(c))void 0===c?delete m[i]:m[i]=c;else{const n=m[i],o=c;if(a(e,i,d)||a(t,i,d))delete m[i];else{if(l(n)&&l(o)){const r=d.get(n)||[],s=d.get(o)||[];r.push({obj:e,key:i}),s.push({obj:t,key:i}),d.set(n,r),d.set(o,s)}m[i]=s(m[i],c,r,d)}}}}else m=t;return m}}function a(e,t,r){const n=r.get(e[t])||[];for(let r=0,o=n.length;r<o;r++){const o=n[r];if(o.key===t&&o.obj===e)return!0}return!1}function c(e){return Array.isArray(e)}function u(e){return"function"==typeof e}function l(e){return!p(e)&&!c(e)&&!u(e)&&"object"==typeof e}function p(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}r.merge=function(...e){let t=e.shift();const r=new WeakMap;for(;e.length>0;)t=s(t,e.shift(),0,r);return t}},{"./lodash.merge":88}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Deferred=void 0;r.Deferred=class{constructor(){this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}},{}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TracesSamplerValues=void 0,function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(r.TracesSamplerValues||(r.TracesSamplerValues={}))},{}],92:[function(e,t,r){"use strict";function n(e,t){return"string"==typeof t?e===t:!!e.match(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.isUrlIgnored=r.urlMatches=void 0,r.urlMatches=n,r.isUrlIgnored=function(e,t){if(!t)return!1;for(const r of t)if(n(e,r))return!0;return!1}},{}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isWrapped=void 0,r.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}},{}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.8.0"},{}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPMetricExporterBase=r.DeltaTemporalitySelector=r.CumulativeTemporalitySelector=void 0;const n=e("@opentelemetry/core"),o=e("@opentelemetry/sdk-metrics"),i=e("@opentelemetry/api");r.CumulativeTemporalitySelector=()=>o.AggregationTemporality.CUMULATIVE;function s(e){return null!=e?e===o.AggregationTemporality.DELTA?r.DeltaTemporalitySelector:r.CumulativeTemporalitySelector:function(){const e=(0,n.getEnv)(),t=e.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();return"cumulative"===t?r.CumulativeTemporalitySelector:"delta"===t?r.DeltaTemporalitySelector:(i.diag.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${e.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),r.CumulativeTemporalitySelector)}()}r.DeltaTemporalitySelector=e=>{switch(e){case o.InstrumentType.COUNTER:case o.InstrumentType.OBSERVABLE_COUNTER:case o.InstrumentType.HISTOGRAM:case o.InstrumentType.OBSERVABLE_GAUGE:return o.AggregationTemporality.DELTA;case o.InstrumentType.UP_DOWN_COUNTER:case o.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return o.AggregationTemporality.CUMULATIVE}};r.OTLPMetricExporterBase=class{constructor(e,t){this._otlpExporter=e,this._aggregationTemporalitySelector=s(null==t?void 0:t.temporalityPreference)}export(e,t){this._otlpExporter.export([e],t)}async shutdown(){await this._otlpExporter.shutdown()}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}}},{"@opentelemetry/api":21,"@opentelemetry/core":110,"@opentelemetry/sdk-metrics":273}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],97:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./platform"),r),o(e("./OTLPMetricExporterOptions"),r),o(e("./OTLPMetricExporterBase"),r)},{"./OTLPMetricExporterBase":95,"./OTLPMetricExporterOptions":96,"./platform":99}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPMetricExporter=void 0;const n=e("@opentelemetry/core"),o=e("../../OTLPMetricExporterBase"),i=e("@opentelemetry/otlp-exporter-base"),s=e("@opentelemetry/otlp-transformer"),a="v1/metrics",c=`http://localhost:4318/${a}`;class u extends i.OTLPExporterBrowserBase{constructor(e){super(e),this._headers=Object.assign(this._headers,n.baggageUtils.parseKeyPairsIntoRecord((0,n.getEnv)().OTEL_EXPORTER_OTLP_METRICS_HEADERS))}getDefaultUrl(e){return"string"==typeof e.url?e.url:(0,n.getEnv)().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT.length>0?(0,i.appendRootPathToUrlIfNeeded)((0,n.getEnv)().OTEL_EXPORTER_OTLP_METRICS_ENDPOINT):(0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,i.appendResourcePathToUrl)((0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,a):c}convert(e){return(0,s.createExportMetricsServiceRequest)(e)}}class l extends o.OTLPMetricExporterBase{constructor(e){super(new u(e),e)}}r.OTLPMetricExporter=l},{"../../OTLPMetricExporterBase":95,"@opentelemetry/core":110,"@opentelemetry/otlp-exporter-base":141,"@opentelemetry/otlp-transformer":149}],99:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./OTLPMetricExporter"),r)},{"./OTLPMetricExporter":98}],100:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],101:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{dup:56}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.W3CBaggagePropagator=void 0;const n=e("@opentelemetry/api"),o=e("../../trace/suppress-tracing"),i=e("../constants"),s=e("../utils");r.W3CBaggagePropagator=class{inject(e,t,r){const a=n.propagation.getBaggage(e);if(!a||(0,o.isTracingSuppressed)(e))return;const c=(0,s.getKeyPairs)(a).filter((e=>e.length<=i.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,i.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=(0,s.serializeKeyPairs)(c);u.length>0&&r.set(t,i.BAGGAGE_HEADER,u)}extract(e,t,r){const o=r.get(t,i.BAGGAGE_HEADER),a=Array.isArray(o)?o.join(i.BAGGAGE_ITEMS_SEPARATOR):o;if(!a)return e;const c={};if(0===a.length)return e;return a.split(i.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{const t=(0,s.parsePairKeyValue)(e);if(t){const e={value:t.value};t.metadata&&(e.metadata=t.metadata),c[t.key]=e}})),0===Object.entries(c).length?e:n.propagation.setBaggage(e,n.propagation.createBaggage(c))}fields(){return[i.BAGGAGE_HEADER]}}},{"../../trace/suppress-tracing":130,"../constants":101,"../utils":103,"@opentelemetry/api":21}],103:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{"./constants":101,"@opentelemetry/api":21,dup:58}],104:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],105:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:60}],106:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./logging-error-handler":107,dup:61}],107:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:62}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addHrTimes=r.isTimeInput=r.isTimeInputHrTime=r.hrTimeToMicroseconds=r.hrTimeToMilliseconds=r.hrTimeToNanoseconds=r.hrTimeToTimeStamp=r.hrTimeDuration=r.timeInputToHrTime=r.hrTime=r.getTimeOrigin=r.millisToHrTime=void 0;const n=e("../platform"),o=Math.pow(10,6),i=Math.pow(10,9);function s(e){const t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*o)]}function a(){let e=n.otperformance.timeOrigin;if("number"!=typeof e){const t=n.otperformance;e=t.timing&&t.timing.fetchStart}return e}function c(e){return l(s(a()),s("number"==typeof e?e:n.otperformance.now()))}function u(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function l(e,t){const r=[e[0]+t[0],e[1]+t[1]];return r[1]>=i&&(r[1]-=i,r[0]+=1),r}r.millisToHrTime=s,r.getTimeOrigin=a,r.hrTime=c,r.timeInputToHrTime=function(e){if(u(e))return e;if("number"==typeof e)return e<a()?c(e):s(e);if(e instanceof Date)return s(e.getTime());throw TypeError("Invalid input type")},r.hrTimeDuration=function(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=i),[r,n]},r.hrTimeToTimeStamp=function(e){const t=`${"0".repeat(9)}${e[1]}Z`,r=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)},r.hrTimeToNanoseconds=function(e){return e[0]*i+e[1]},r.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},r.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},r.isTimeInputHrTime=u,r.isTimeInput=function(e){return u(e)||"number"==typeof e||e instanceof Date},r.addHrTimes=l},{"../platform":117}],109:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],110:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.internal=r.baggageUtils=void 0,o(e("./baggage/propagation/W3CBaggagePropagator"),r),o(e("./common/anchored-clock"),r),o(e("./common/attributes"),r),o(e("./common/global-error-handler"),r),o(e("./common/logging-error-handler"),r),o(e("./common/time"),r),o(e("./common/types"),r),o(e("./ExportResult"),r),o(e("./version"),r),r.baggageUtils=e("./baggage/utils"),o(e("./platform"),r),o(e("./propagation/composite"),r),o(e("./trace/W3CTraceContextPropagator"),r),o(e("./trace/IdGenerator"),r),o(e("./trace/rpc-metadata"),r),o(e("./trace/sampler/AlwaysOffSampler"),r),o(e("./trace/sampler/AlwaysOnSampler"),r),o(e("./trace/sampler/ParentBasedSampler"),r),o(e("./trace/sampler/TraceIdRatioBasedSampler"),r),o(e("./trace/suppress-tracing"),r),o(e("./trace/TraceState"),r),o(e("./utils/environment"),r),o(e("./utils/merge"),r),o(e("./utils/sampling"),r),o(e("./utils/url"),r),o(e("./utils/wrap"),r),o(e("./utils/callback"),r),o(e("./version"),r);const i=e("./internal/exporter");r.internal={_export:i._export}},{"./ExportResult":100,"./baggage/propagation/W3CBaggagePropagator":102,"./baggage/utils":103,"./common/anchored-clock":104,"./common/attributes":105,"./common/global-error-handler":106,"./common/logging-error-handler":107,"./common/time":108,"./common/types":109,"./internal/exporter":111,"./platform":117,"./propagation/composite":121,"./trace/IdGenerator":122,"./trace/TraceState":123,"./trace/W3CTraceContextPropagator":124,"./trace/rpc-metadata":125,"./trace/sampler/AlwaysOffSampler":126,"./trace/sampler/AlwaysOnSampler":127,"./trace/sampler/ParentBasedSampler":128,"./trace/sampler/TraceIdRatioBasedSampler":129,"./trace/suppress-tracing":130,"./utils/callback":131,"./utils/environment":132,"./utils/merge":134,"./utils/sampling":136,"./utils/url":137,"./utils/wrap":138,"./version":139}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._export=void 0;const n=e("@opentelemetry/api"),o=e("../trace/suppress-tracing");r._export=function(e,t){return new Promise((r=>{n.context.with((0,o.suppressTracing)(n.context.active()),(()=>{e.export(t,(e=>{r(e)}))}))}))}},{"../trace/suppress-tracing":130,"@opentelemetry/api":21}],112:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],113:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{dup:68}],114:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../../utils/environment":132,"./globalThis":115,dup:69}],115:[function(e,t,r){(function(e){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof e?e:{}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],116:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],117:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./RandomIdGenerator":113,"./environment":114,"./globalThis":115,"./hex-to-base64":116,"./performance":118,"./sdk-info":119,"./timer-util":120,dup:72}],118:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{dup:73}],119:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"../../version":139,"@opentelemetry/semantic-conventions":157,dup:74}],120:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{dup:75}],121:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:76}],122:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],123:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"../internal/validators":112,dup:78}],124:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./TraceState":123,"./suppress-tracing":130,"@opentelemetry/api":21,dup:79}],125:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:80}],126:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:81}],127:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:82}],128:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"../../common/global-error-handler":106,"./AlwaysOffSampler":126,"./AlwaysOnSampler":127,"@opentelemetry/api":21,dup:83}],129:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:84}],130:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:85}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BindOnceFuture=void 0;const n=e("./promise");r.BindOnceFuture=class{constructor(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new n.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then((e=>this._deferred.resolve(e)),(e=>this._deferred.reject(e)))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}},{"./promise":135}],132:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEnvWithoutDefaults=r.parseEnvironment=r.DEFAULT_ENVIRONMENT=r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;const n=e("@opentelemetry/api"),o=e("./sampling"),i=e("../platform/browser/globalThis"),s=",",a=["OTEL_SDK_DISABLED"];function c(e){return a.indexOf(e)>-1}const u=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function l(e){return u.indexOf(e)>-1}const p=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function d(e){return p.indexOf(e)>-1}function m(e,t,r){if(void 0===r[e])return;const n=String(r[e]);t[e]="true"===n.toLowerCase()}function h(e,t,r,n=-1/0,o=1/0){if(void 0!==r[e]){const i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>o?o:i)}}function _(e,t,r,n=s){const o=r[e];"string"==typeof o&&(t[e]=o.split(n).map((e=>e.trim())))}r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128,r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128,r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128,r.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};const f={ALL:n.DiagLogLevel.ALL,VERBOSE:n.DiagLogLevel.VERBOSE,DEBUG:n.DiagLogLevel.DEBUG,INFO:n.DiagLogLevel.INFO,WARN:n.DiagLogLevel.WARN,ERROR:n.DiagLogLevel.ERROR,NONE:n.DiagLogLevel.NONE};function g(e,t,r){const n=r[e];if("string"==typeof n){const r=f[n.toUpperCase()];null!=r&&(t[e]=r)}}function E(e){const t={};for(const n in r.DEFAULT_ENVIRONMENT){const r=n;if("OTEL_LOG_LEVEL"===r)g(r,t,e);else if(c(r))m(r,t,e);else if(l(r))h(r,t,e);else if(d(r))_(r,t,e);else{const n=e[r];null!=n&&(t[r]=String(n))}}return t}r.parseEnvironment=E,r.getEnvWithoutDefaults=function(){return void 0!==t&&t&&t.env?E(t.env):E(i._globalThis)}}).call(this)}).call(this,e("_process"))},{"../platform/browser/globalThis":115,"./sampling":136,"@opentelemetry/api":21,_process:1}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPlainObject=void 0;const n="[object Null]",o="[object Undefined]",i=Function.prototype.toString,s=i.call(Object),a=(c=Object.getPrototypeOf,u=Object,function(e){return c(u(e))});var c,u;const l=Object.prototype,p=l.hasOwnProperty,d=Symbol?Symbol.toStringTag:void 0,m=l.toString;r.isPlainObject=function(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||"[object Object]"!==function(e){if(null==e)return void 0===e?o:n;return d&&d in Object(e)?function(e){const t=p.call(e,d),r=e[d];let n=!1;try{e[d]=void 0,n=!0}catch(e){}const o=m.call(e);n&&(t?e[d]=r:delete e[d]);return o}(e):function(e){return m.call(e)}(e)}(e))return!1;const t=a(e);if(null===t)return!0;const r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)===s}},{}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.merge=void 0;const n=e("./lodash.merge"),o=20;function i(e){return c(e)?e.slice():e}function s(e,t,r=0,d){let m;if(!(r>o)){if(r++,p(e)||p(t)||u(t))m=i(t);else if(c(e)){if(m=e.slice(),c(t))for(let e=0,r=t.length;e<r;e++)m.push(i(t[e]));else if(l(t)){const e=Object.keys(t);for(let r=0,n=e.length;r<n;r++){const n=e[r];m[n]=i(t[n])}}}else if(l(e))if(l(t)){if(!function(e,t){if(!(0,n.isPlainObject)(e)||!(0,n.isPlainObject)(t))return!1;return!0}(e,t))return t;m=Object.assign({},e);const o=Object.keys(t);for(let n=0,i=o.length;n<i;n++){const i=o[n],c=t[i];if(p(c))void 0===c?delete m[i]:m[i]=c;else{const n=m[i],o=c;if(a(e,i,d)||a(t,i,d))delete m[i];else{if(l(n)&&l(o)){const r=d.get(n)||[],s=d.get(o)||[];r.push({obj:e,key:i}),s.push({obj:t,key:i}),d.set(n,r),d.set(o,s)}m[i]=s(m[i],c,r,d)}}}}else m=t;return m}}function a(e,t,r){const n=r.get(e[t])||[];for(let r=0,o=n.length;r<o;r++){const o=n[r];if(o.key===t&&o.obj===e)return!0}return!1}function c(e){return Array.isArray(e)}function u(e){return"function"==typeof e}function l(e){return!p(e)&&!c(e)&&!u(e)&&"object"==typeof e}function p(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}r.merge=function(...e){let t=e.shift();const r=new WeakMap;for(;e.length>0;)t=s(t,e.shift(),0,r);return t}},{"./lodash.merge":133}],135:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],136:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],137:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{dup:92}],138:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{dup:93}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.10.1"},{}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPExporterBase=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./util");r.OTLPExporterBase=class{constructor(e={}){this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:1/0,this.timeoutMillis=(0,i.configureExporterTimeout)(e.timeoutMillis),this.onInit(e)}export(e,t){this._shutdownOnce.isCalled?t({code:o.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:o.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then((()=>{t({code:o.ExportResultCode.SUCCESS})})).catch((e=>{t({code:o.ExportResultCode.FAILED,error:e})}))}_export(e){return new Promise(((t,r)=>{try{n.diag.debug("items to be sent",e),this.send(e,t,r)}catch(e){r(e)}}))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return n.diag.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then((()=>{}))}}},{"./util":146,"@opentelemetry/api":21,"@opentelemetry/core":110}],141:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.invalidTimeout=r.configureExporterTimeout=r.appendRootPathToUrlIfNeeded=r.appendResourcePathToUrl=r.parseHeaders=r.OTLPExporterError=r.OTLPExporterBase=void 0,o(e("./platform"),r);var i=e("./OTLPExporterBase");Object.defineProperty(r,"OTLPExporterBase",{enumerable:!0,get:function(){return i.OTLPExporterBase}});var s=e("./types");Object.defineProperty(r,"OTLPExporterError",{enumerable:!0,get:function(){return s.OTLPExporterError}});var a=e("./util");Object.defineProperty(r,"parseHeaders",{enumerable:!0,get:function(){return a.parseHeaders}}),Object.defineProperty(r,"appendResourcePathToUrl",{enumerable:!0,get:function(){return a.appendResourcePathToUrl}}),Object.defineProperty(r,"appendRootPathToUrlIfNeeded",{enumerable:!0,get:function(){return a.appendRootPathToUrlIfNeeded}}),Object.defineProperty(r,"configureExporterTimeout",{enumerable:!0,get:function(){return a.configureExporterTimeout}}),Object.defineProperty(r,"invalidTimeout",{enumerable:!0,get:function(){return a.invalidTimeout}})},{"./OTLPExporterBase":140,"./platform":143,"./types":145,"./util":146}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPExporterBrowserBase=void 0;const n=e("../../OTLPExporterBase"),o=e("../../util"),i=e("./util"),s=e("@opentelemetry/api"),a=e("@opentelemetry/core");class c extends n.OTLPExporterBase{constructor(e={}){super(e),this._useXHR=!1,this._useXHR=!!e.headers||"function"!=typeof navigator.sendBeacon,this._useXHR?this._headers=Object.assign({},(0,o.parseHeaders)(e.headers),a.baggageUtils.parseKeyPairsIntoRecord((0,a.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){window.addEventListener("unload",this.shutdown)}onShutdown(){window.removeEventListener("unload",this.shutdown)}send(e,t,r){if(this._shutdownOnce.isCalled)return void s.diag.debug("Shutdown already started. Cannot send objects");const n=this.convert(e),o=JSON.stringify(n),a=new Promise(((e,t)=>{this._useXHR?(0,i.sendWithXhr)(o,this.url,this._headers,this.timeoutMillis,e,t):(0,i.sendWithBeacon)(o,this.url,{type:"application/json"},e,t)})).then(t,r);this._sendingPromises.push(a);const c=()=>{const e=this._sendingPromises.indexOf(a);this._sendingPromises.splice(e,1)};a.then(c,c)}}r.OTLPExporterBrowserBase=c},{"../../OTLPExporterBase":140,"../../util":146,"./util":144,"@opentelemetry/api":21,"@opentelemetry/core":110}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sendWithXhr=r.OTLPExporterBrowserBase=void 0;var n=e("./OTLPExporterBrowserBase");Object.defineProperty(r,"OTLPExporterBrowserBase",{enumerable:!0,get:function(){return n.OTLPExporterBrowserBase}});var o=e("./util");Object.defineProperty(r,"sendWithXhr",{enumerable:!0,get:function(){return o.sendWithXhr}})},{"./OTLPExporterBrowserBase":142,"./util":144}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sendWithXhr=r.sendWithBeacon=void 0;const n=e("@opentelemetry/api"),o=e("../../types"),i=e("../../util");r.sendWithBeacon=function(e,t,r,i,s){if(navigator.sendBeacon(t,new Blob([e],r)))n.diag.debug("sendBeacon - can send",e),i();else{s(new o.OTLPExporterError(`sendBeacon - cannot send ${e}`))}},r.sendWithXhr=function(e,t,r,s,a,c){let u,l,p=!1;const d=setTimeout((()=>{if(clearTimeout(u),p=!0,l.readyState===XMLHttpRequest.DONE){const e=new o.OTLPExporterError("Request Timeout");c(e)}else l.abort()}),s),m=(s=i.DEFAULT_EXPORT_MAX_ATTEMPTS,h=i.DEFAULT_EXPORT_INITIAL_BACKOFF)=>{l=new XMLHttpRequest,l.open("POST",t);Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach((([e,t])=>{l.setRequestHeader(e,t)})),l.send(e),l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE&&!1===p)if(l.status>=200&&l.status<=299)n.diag.debug("xhr success",e),a(),clearTimeout(d),clearTimeout(u);else if(l.status&&(0,i.isExportRetryable)(l.status)&&s>0){let e;h=i.DEFAULT_EXPORT_BACKOFF_MULTIPLIER*h,e=l.getResponseHeader("Retry-After")?(0,i.parseRetryAfterToMills)(l.getResponseHeader("Retry-After")):Math.round(Math.random()*(i.DEFAULT_EXPORT_MAX_BACKOFF-h)+h),u=setTimeout((()=>{m(s-1,h)}),e)}else{const e=new o.OTLPExporterError(`Failed to export with XHR (status: ${l.status})`,l.status);c(e),clearTimeout(d),clearTimeout(u)}},l.onabort=()=>{if(p){const e=new o.OTLPExporterError("Request Timeout");c(e)}clearTimeout(d),clearTimeout(u)},l.onerror=()=>{if(p){const e=new o.OTLPExporterError("Request Timeout");c(e)}clearTimeout(d),clearTimeout(u)}};m()}},{"../../types":145,"../../util":146,"@opentelemetry/api":21}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPExporterError=void 0;class n extends Error{constructor(e,t,r){super(e),this.name="OTLPExporterError",this.data=r,this.code=t}}r.OTLPExporterError=n},{}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRetryAfterToMills=r.isExportRetryable=r.invalidTimeout=r.configureExporterTimeout=r.appendRootPathToUrlIfNeeded=r.appendResourcePathToUrl=r.parseHeaders=r.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=r.DEFAULT_EXPORT_MAX_BACKOFF=r.DEFAULT_EXPORT_INITIAL_BACKOFF=r.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=1e4;function s(e,t){return n.diag.warn("Timeout must be greater than 0",e),t}r.DEFAULT_EXPORT_MAX_ATTEMPTS=5,r.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3,r.DEFAULT_EXPORT_MAX_BACKOFF=5e3,r.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5,r.parseHeaders=function(e={}){const t={};return Object.entries(e).forEach((([e,r])=>{void 0!==r?t[e]=String(r):n.diag.warn(`Header "${e}" has wrong value and will be ignored`)})),t},r.appendResourcePathToUrl=function(e,t){return e.endsWith("/")||(e+="/"),e+t},r.appendRootPathToUrlIfNeeded=function(e){try{const t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return n.diag.warn(`Could not parse export URL: '${e}'`),e}},r.configureExporterTimeout=function(e){return"number"==typeof e?e<=0?s(e,i):e:function(){var e;const t=Number(null!==(e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==e?e:(0,o.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?s(t,i):t}()},r.invalidTimeout=s,r.isExportRetryable=function(e){return[429,502,503,504].includes(e)},r.parseRetryAfterToMills=function(e){if(null==e)return-1;const t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?1e3*t:-1;const r=new Date(e).getTime()-Date.now();return r>=0?r:0}},{"@opentelemetry/api":21,"@opentelemetry/core":110}],147:[function(e,t,r){"use strict";function n(e,t){return{key:e,value:o(t)}}function o(e){const t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(o)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((([e,t])=>n(e,t)))}}:{}}function i(e){return("0"+e.toString(16)).slice(-2)}Object.defineProperty(r,"__esModule",{value:!0}),r.bufToHex=r.hexToBuf=r.toAnyValue=r.toKeyValue=r.toAttributes=void 0,r.toAttributes=function(e){return Object.keys(e).map((t=>n(t,e[t])))},r.toKeyValue=n,r.toAnyValue=o,r.hexToBuf=function(e){var t;const r=null===(t=e.match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return r&&new Uint8Array(r)},r.bufToHex=function(e){if(null!=e&&0!==e.length)return Array.from(e).map(i).join("")}},{}],148:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],149:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.createExportMetricsServiceRequest=r.createExportTraceServiceRequest=void 0,o(e("./common/types"),r),o(e("./metrics/types"),r),o(e("./resource/types"),r),o(e("./trace/types"),r);var i=e("./trace");Object.defineProperty(r,"createExportTraceServiceRequest",{enumerable:!0,get:function(){return i.createExportTraceServiceRequest}});var s=e("./metrics");Object.defineProperty(r,"createExportMetricsServiceRequest",{enumerable:!0,get:function(){return s.createExportMetricsServiceRequest}})},{"./common/types":148,"./metrics":150,"./metrics/types":152,"./resource/types":153,"./trace":154,"./trace/types":156}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExportMetricsServiceRequest=void 0;const n=e("./internal");r.createExportMetricsServiceRequest=function(e){return{resourceMetrics:e.map((e=>(0,n.toResourceMetrics)(e)))}}},{"./internal":151}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toMetric=r.toScopeMetrics=r.toResourceMetrics=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/sdk-metrics"),s=e("../common/internal");function a(e){return Array.from(e.map((e=>({scope:{name:e.scope.name,version:e.scope.version},metrics:e.metrics.map((e=>c(e))),schemaUrl:e.scope.schemaUrl}))))}function c(e){const t={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},r=function(e){if(e===i.AggregationTemporality.DELTA)return 1;if(e===i.AggregationTemporality.CUMULATIVE)return 2;return 0}(e.aggregationTemporality);return e.dataPointType===i.DataPointType.SUM?t.sum={aggregationTemporality:r,isMonotonic:e.isMonotonic,dataPoints:u(e)}:e.dataPointType===i.DataPointType.GAUGE?t.gauge={dataPoints:u(e)}:e.dataPointType===i.DataPointType.HISTOGRAM&&(t.histogram={aggregationTemporality:r,dataPoints:l(e)}),t}function u(e){return e.dataPoints.map((t=>function(e,t){const r={attributes:(0,s.toAttributes)(e.attributes),startTimeUnixNano:(0,o.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,o.hrTimeToNanoseconds)(e.endTime)};return t===n.ValueType.INT?r.asInt=e.value:t===n.ValueType.DOUBLE&&(r.asDouble=e.value),r}(t,e.descriptor.valueType)))}function l(e){return e.dataPoints.map((e=>{const t=e.value;return{attributes:(0,s.toAttributes)(e.attributes),bucketCounts:t.buckets.counts,explicitBounds:t.buckets.boundaries,count:t.count,sum:t.sum,min:t.min,max:t.max,startTimeUnixNano:(0,o.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,o.hrTimeToNanoseconds)(e.endTime)}}))}r.toResourceMetrics=function(e){return{resource:{attributes:(0,s.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:a(e.scopeMetrics)}},r.toScopeMetrics=a,r.toMetric=c},{"../common/internal":147,"@opentelemetry/api":21,"@opentelemetry/core":110,"@opentelemetry/sdk-metrics":273}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],153:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExportTraceServiceRequest=void 0;const n=e("../common/internal"),o=e("./internal");function i(e,t){const r=function(e){const t=new Map;for(const r of e){let e=t.get(r.resource);e||(e=new Map,t.set(r.resource,e));const n=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`;let o=e.get(n);o||(o=[],e.set(n,o)),o.push(r)}return t}(e),i=[],s=r.entries();let a=s.next();for(;!a.done;){const[e,r]=a.value,c=[],u=r.values();let l=u.next();for(;!l.done;){const e=l.value;if(e.length>0){const{name:r,version:n,schemaUrl:i}=e[0].instrumentationLibrary,s=e.map((e=>(0,o.sdkSpanToOtlpSpan)(e,t)));c.push({scope:{name:r,version:n},spans:s,schemaUrl:i})}l=u.next()}const p={resource:{attributes:(0,n.toAttributes)(e.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};i.push(p),a=s.next()}return i}r.createExportTraceServiceRequest=function(e,t){return{resourceSpans:i(e,t)}}},{"../common/internal":147,"./internal":155}],155:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toOtlpSpanEvent=r.toOtlpLink=r.sdkSpanToOtlpSpan=void 0;const n=e("@opentelemetry/core"),o=e("../common/internal"),i=e("@opentelemetry/core");function s(e,t){var r;return{attributes:e.attributes?(0,o.toAttributes)(e.attributes):[],spanId:t?e.context.spanId:i.hexToBase64(e.context.spanId),traceId:t?e.context.traceId:i.hexToBase64(e.context.traceId),traceState:null===(r=e.context.traceState)||void 0===r?void 0:r.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function a(e){return{attributes:e.attributes?(0,o.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:(0,n.hrTimeToNanoseconds)(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}r.sdkSpanToOtlpSpan=function(e,t){var r;const c=e.spanContext(),u=e.status,l=t?e.parentSpanId:null!=e.parentSpanId?i.hexToBase64(e.parentSpanId):void 0;return{traceId:t?c.traceId:i.hexToBase64(c.traceId),spanId:t?c.spanId:i.hexToBase64(c.spanId),parentSpanId:l,traceState:null===(r=c.traceState)||void 0===r?void 0:r.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.startTime),endTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.endTime),attributes:(0,o.toAttributes)(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(a),droppedEventsCount:e.droppedEventsCount,status:{code:u.code,message:u.message},links:e.links.map((e=>s(e,t))),droppedLinksCount:e.droppedLinksCount}},r.toOtlpLink=s,r.toOtlpSpanEvent=a},{"../common/internal":147,"@opentelemetry/core":110}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ESpanKind=void 0,function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"}(r.ESpanKind||(r.ESpanKind={}))},{}],157:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./trace"),r),o(e("./resource"),r)},{"./resource":159,"./trace":161}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetrySdkLanguageValues=r.OsTypeValues=r.HostArchValues=r.AwsEcsLaunchtypeValues=r.CloudPlatformValues=r.CloudProviderValues=r.SemanticResourceAttributes=void 0,r.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},r.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},r.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},r.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"},r.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},r.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},r.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}},{}],159:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./SemanticResourceAttributes"),r)},{"./SemanticResourceAttributes":158}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageTypeValues=r.RpcGrpcStatusCodeValues=r.MessagingOperationValues=r.MessagingDestinationKindValues=r.HttpFlavorValues=r.NetHostConnectionSubtypeValues=r.NetHostConnectionTypeValues=r.NetTransportValues=r.FaasInvokedProviderValues=r.FaasDocumentOperationValues=r.FaasTriggerValues=r.DbCassandraConsistencyLevelValues=r.DbSystemValues=r.SemanticAttributes=void 0,r.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},r.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},r.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},r.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},r.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"},r.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},r.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},r.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},r.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},r.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},r.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"},r.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"},r.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},r.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}},{}],161:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./SemanticAttributes"),r)},{"./SemanticAttributes":160}],162:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./platform"),r)},{"./platform":164}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPTraceExporter=void 0;const n=e("@opentelemetry/core"),o=e("@opentelemetry/otlp-exporter-base"),i=e("@opentelemetry/otlp-transformer"),s="v1/traces",a=`http://localhost:4318/${s}`;class c extends o.OTLPExporterBrowserBase{constructor(e={}){super(e),this._headers=Object.assign(this._headers,n.baggageUtils.parseKeyPairsIntoRecord((0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS))}convert(e){return(0,i.createExportTraceServiceRequest)(e,!0)}getDefaultUrl(e){return"string"==typeof e.url?e.url:(0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?(0,o.appendRootPathToUrlIfNeeded)((0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(0,o.appendResourcePathToUrl)((0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT,s):a}}r.OTLPTraceExporter=c},{"@opentelemetry/core":65,"@opentelemetry/otlp-exporter-base":185,"@opentelemetry/otlp-transformer":193}],164:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./OTLPTraceExporter"),r)},{"./OTLPTraceExporter":163}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AttributeNames=void 0,function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"}(r.AttributeNames||(r.AttributeNames={}))},{}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FetchInstrumentation=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/instrumentation"),i=e("@opentelemetry/core"),s=e("@opentelemetry/sdk-trace-web"),a=e("./enums/AttributeNames"),c=e("@opentelemetry/semantic-conventions"),u=e("./version"),l=e("@opentelemetry/core");class p extends o.InstrumentationBase{constructor(e){super("@opentelemetry/instrumentation-fetch",u.VERSION,e),this.component="fetch",this.version=u.VERSION,this.moduleName=this.component,this._usedResources=new WeakSet,this._tasksCount=0}init(){}_getConfig(){return this._config}_addChildSpan(e,t){const r=this.tracer.startSpan("CORS Preflight",{startTime:t[s.PerformanceTimingNames.FETCH_START]},n.trace.setSpan(n.context.active(),e));this._getConfig().ignoreNetworkEvents||s.addSpanNetworkEvents(r,t),r.end(t[s.PerformanceTimingNames.RESPONSE_END])}_addFinalSpanAttributes(e,t){const r=s.parseUrl(t.url);e.setAttribute(c.SemanticAttributes.HTTP_STATUS_CODE,t.status),null!=t.statusText&&e.setAttribute(a.AttributeNames.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(c.SemanticAttributes.HTTP_HOST,r.host),e.setAttribute(c.SemanticAttributes.HTTP_SCHEME,r.protocol.replace(":","")),e.setAttribute(c.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent)}_addHeaders(e,t){if(!s.shouldPropagateTraceHeaders(t,this._getConfig().propagateTraceHeaderCorsUrls)){const e={};return n.propagation.inject(n.context.active(),e),void(Object.keys(e).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}if(e instanceof Request)n.propagation.inject(n.context.active(),e.headers,{set:(e,t,r)=>e.set(t,"string"==typeof r?r:String(r))});else if(e.headers instanceof Headers)n.propagation.inject(n.context.active(),e.headers,{set:(e,t,r)=>e.set(t,"string"==typeof r?r:String(r))});else{const t={};n.propagation.inject(n.context.active(),t),e.headers=Object.assign({},t,e.headers||{})}}_clearResources(){0===this._tasksCount&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(e,t={}){if(i.isUrlIgnored(e,this._getConfig().ignoreUrls))return void this._diag.debug("ignoring span as url matches ignored url");const r=(t.method||"GET").toUpperCase(),o=`HTTP ${r}`;return this.tracer.startSpan(o,{kind:n.SpanKind.CLIENT,attributes:{[a.AttributeNames.COMPONENT]:this.moduleName,[c.SemanticAttributes.HTTP_METHOD]:r,[c.SemanticAttributes.HTTP_URL]:e}})}_findResourceAndAddNetworkEvents(e,t,r){let n=t.entries;if(!n.length){if(!performance.getEntriesByType)return;n=performance.getEntriesByType("resource")}const o=s.getResource(t.spanUrl,t.startTime,r,n,this._usedResources,"fetch");if(o.mainRequest){const t=o.mainRequest;this._markResourceAsUsed(t);const r=o.corsPreFlightRequest;r&&(this._addChildSpan(e,r),this._markResourceAsUsed(r)),this._getConfig().ignoreNetworkEvents||s.addSpanNetworkEvents(e,t)}}_markResourceAsUsed(e){this._usedResources.add(e)}_endSpan(e,t,r){const n=i.hrTime();this._addFinalSpanAttributes(e,r),setTimeout((()=>{var r;null===(r=t.observer)||void 0===r||r.disconnect(),this._findResourceAndAddNetworkEvents(e,t,n),this._tasksCount--,this._clearResources(),e.end(n)}),300)}_patchConstructor(){return e=>{const t=this;return function(...r){const o=this,i=s.parseUrl(r[0]instanceof Request?r[0].url:r[0]).href,a=r[0]instanceof Request?r[0]:r[1]||{},c=t._createSpan(i,a);if(!c)return e.apply(this,r);const u=t._prepareSpanData(i);function l(e,r){t._applyAttributesAfterFetch(e,a,r),t._endSpan(e,u,{status:r.status||0,statusText:r.message,url:i})}function p(e,r){t._applyAttributesAfterFetch(e,a,r),r.status>=200&&r.status<400?t._endSpan(e,u,r):t._endSpan(e,u,{status:r.status,statusText:r.statusText,url:i})}function d(e,t,r){try{const t=r.clone(),n=r.clone(),o=t.body;if(o){const t=o.getReader(),r=()=>{t.read().then((({done:t})=>{t?p(e,n):r()}),(t=>{l(e,t)}))};r()}else p(e,r)}finally{t(r)}}function m(e,t,r){try{l(e,r)}finally{t(r)}}return new Promise(((r,s)=>n.context.with(n.trace.setSpan(n.context.active(),c),(()=>(t._addHeaders(a,i),t._tasksCount++,e.apply(o,a instanceof Request?[a]:[i,a]).then(d.bind(o,c,r),m.bind(o,c,s)))))))}}}_applyAttributesAfterFetch(e,t,r){const n=this._getConfig().applyCustomAttributesOnSpan;n&&(0,o.safeExecuteInTheMiddle)((()=>n(e,t,r)),(e=>{e&&this._diag.error("applyCustomAttributesOnSpan",e)}),!0)}_prepareSpanData(e){const t=i.hrTime(),r=[];if("function"!=typeof PerformanceObserver)return{entries:r,startTime:t,spanUrl:e};const n=new PerformanceObserver((t=>{t.getEntries().forEach((t=>{"fetch"===t.initiatorType&&t.name===e&&r.push(t)}))}));return n.observe({entryTypes:["resource"]}),{entries:r,observer:n,startTime:t,spanUrl:e}}enable(){(0,o.isWrapped)(fetch)&&(this._unwrap(l._globalThis,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(l._globalThis,"fetch",this._patchConstructor())}disable(){this._unwrap(l._globalThis,"fetch"),this._usedResources=new WeakSet}}r.FetchInstrumentation=p},{"./enums/AttributeNames":165,"./version":168,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/instrumentation":177,"@opentelemetry/sdk-trace-web":172,"@opentelemetry/semantic-conventions":490}],167:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./fetch"),r)},{"./fetch":166}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="0.34.0"},{}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StackContextManager=void 0;const n=e("@opentelemetry/api");r.StackContextManager=class{constructor(){this._enabled=!1,this._currentContext=n.ROOT_CONTEXT}_bindFunction(e=n.ROOT_CONTEXT,t){const r=this,o=function(...n){return r.with(e,(()=>t.apply(this,n)))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),o}active(){return this._currentContext}bind(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t}disable(){return this._currentContext=n.ROOT_CONTEXT,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=n.ROOT_CONTEXT),this}with(e,t,r,...o){const i=this._currentContext;this._currentContext=e||n.ROOT_CONTEXT;try{return t.call(r,...o)}finally{this._currentContext=i}}}},{"@opentelemetry/api":21}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebTracerProvider=void 0;const n=e("@opentelemetry/sdk-trace-base"),o=e("./StackContextManager");class i extends n.BasicTracerProvider{constructor(e={}){if(super(e),e.contextManager)throw"contextManager should be defined in register method not in constructor";if(e.propagator)throw"propagator should be defined in register method not in constructor"}register(e={}){void 0===e.contextManager&&(e.contextManager=new o.StackContextManager),e.contextManager&&e.contextManager.enable(),super.register(e)}}r.WebTracerProvider=i},{"./StackContextManager":169,"@opentelemetry/sdk-trace-base":379}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PerformanceTimingNames=void 0,function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"}(r.PerformanceTimingNames||(r.PerformanceTimingNames={}))},{}],172:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./WebTracerProvider"),r),o(e("./StackContextManager"),r),o(e("./enums/PerformanceTimingNames"),r),o(e("./types"),r),o(e("./utils"),r),o(e("@opentelemetry/sdk-trace-base"),r)},{"./StackContextManager":169,"./WebTracerProvider":170,"./enums/PerformanceTimingNames":171,"./types":173,"./utils":174,"@opentelemetry/sdk-trace-base":379}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e("./enums/PerformanceTimingNames")},{"./enums/PerformanceTimingNames":171}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shouldPropagateTraceHeaders=r.getElementXPath=r.normalizeUrl=r.parseUrl=r.getResource=r.sortResources=r.addSpanNetworkEvents=r.addSpanNetworkEvent=r.hasKey=void 0;const n=e("./enums/PerformanceTimingNames"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions");let s;function a(e,t){return t in e}function c(e,t,r){if(a(r,t)&&"number"==typeof r[t])return e.addEvent(t,r[t]),e}function u(e){return e.slice().sort(((e,t)=>{const r=e[n.PerformanceTimingNames.FETCH_START],o=t[n.PerformanceTimingNames.FETCH_START];return r>o?1:r<o?-1:0}))}function l(e){if("function"==typeof URL)return new URL(e,location.href);const t=(s||(s=document.createElement("a")),s);return t.href=e,t}r.hasKey=a,r.addSpanNetworkEvent=c,r.addSpanNetworkEvents=function(e,t){c(e,n.PerformanceTimingNames.FETCH_START,t),c(e,n.PerformanceTimingNames.DOMAIN_LOOKUP_START,t),c(e,n.PerformanceTimingNames.DOMAIN_LOOKUP_END,t),c(e,n.PerformanceTimingNames.CONNECT_START,t),c(e,n.PerformanceTimingNames.SECURE_CONNECTION_START,t),c(e,n.PerformanceTimingNames.CONNECT_END,t),c(e,n.PerformanceTimingNames.REQUEST_START,t),c(e,n.PerformanceTimingNames.RESPONSE_START,t),c(e,n.PerformanceTimingNames.RESPONSE_END,t);const r=t[n.PerformanceTimingNames.ENCODED_BODY_SIZE];void 0!==r&&e.setAttribute(i.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH,r);const o=t[n.PerformanceTimingNames.DECODED_BODY_SIZE];void 0!==o&&r!==o&&e.setAttribute(i.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,o)},r.sortResources=u,r.getResource=function(e,t,r,i,s=new WeakSet,a){const c=l(e),p=function(e,t,r,i,s,a){const c=(0,o.hrTimeToNanoseconds)(t),u=(0,o.hrTimeToNanoseconds)(r);let l=i.filter((t=>{const r=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t[n.PerformanceTimingNames.FETCH_START])),i=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t[n.PerformanceTimingNames.RESPONSE_END]));return t.initiatorType.toLowerCase()===(a||"xmlhttprequest")&&t.name===e&&r>=c&&i<=u}));l.length>0&&(l=l.filter((e=>!s.has(e))));return l}(e=c.toString(),t,r,i,s,a);if(0===p.length)return{mainRequest:void 0};if(1===p.length)return{mainRequest:p[0]};const d=u(p);if(c.origin!==location.origin&&d.length>1){let e=d[0],t=function(e,t,r){const i=(0,o.hrTimeToNanoseconds)(r),s=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t));let a,c=e[1];const u=e.length;for(let t=1;t<u;t++){const r=e[t],u=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(r[n.PerformanceTimingNames.FETCH_START])),l=i-(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(r[n.PerformanceTimingNames.RESPONSE_END]));u>=s&&(!a||l<a)&&(a=l,c=r)}return c}(d,e[n.PerformanceTimingNames.RESPONSE_END],r);const i=e[n.PerformanceTimingNames.RESPONSE_END];return t[n.PerformanceTimingNames.FETCH_START]<i&&(t=e,e=void 0),{corsPreFlightRequest:e,mainRequest:t}}return{mainRequest:p[0]}},r.parseUrl=l,r.normalizeUrl=function(e){return l(e).href},r.getElementXPath=function e(t,r){if(t.nodeType===Node.DOCUMENT_NODE)return"/";const n=function(e,t){const r=e.nodeType,n=function(e){if(!e.parentNode)return 0;const t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);let r=Array.from(e.parentNode.childNodes);if(r=r.filter((r=>{const n=r.localName;return t.indexOf(r.nodeType)>=0&&n===e.localName})),r.length>=1)return r.indexOf(e)+1;return 0}(e);let o="";if(r===Node.ELEMENT_NODE){const r=e.getAttribute("id");if(t&&r)return`//*[@id="${r}"]`;o=e.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE)o="text()";else{if(r!==Node.COMMENT_NODE)return"";o="comment()"}if(o&&n>1)return`/${o}[${n}]`;return`/${o}`}(t,r);if(r&&n.indexOf("@id")>0)return n;let o="";return t.parentNode&&(o+=e(t.parentNode,!1)),o+=n,o},r.shouldPropagateTraceHeaders=function(e,t){let r=t||[];return("string"==typeof r||r instanceof RegExp)&&(r=[r]),l(e).origin===location.origin||r.some((t=>(0,o.urlMatches)(e,t)))}},{"./enums/PerformanceTimingNames":171,"@opentelemetry/core":65,"@opentelemetry/semantic-conventions":490}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerInstrumentations=void 0;const n=e("@opentelemetry/api"),o=e("./autoLoaderUtils");r.registerInstrumentations=function(e){const{instrumentations:t}=(0,o.parseInstrumentationOptions)(e.instrumentations),r=e.tracerProvider||n.trace.getTracerProvider(),i=e.meterProvider||n.metrics.getMeterProvider();return(0,o.enableInstrumentations)(t,r,i),()=>{(0,o.disableInstrumentations)(t)}}},{"./autoLoaderUtils":176,"@opentelemetry/api":21}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.disableInstrumentations=r.enableInstrumentations=r.parseInstrumentationOptions=void 0,r.parseInstrumentationOptions=function e(t=[]){let r=[];for(let n=0,o=t.length;n<o;n++){const o=t[n];if(Array.isArray(o)){const t=e(o);r=r.concat(t.instrumentations)}else"function"==typeof o?r.push(new o):o.instrumentationName&&r.push(o)}return{instrumentations:r}},r.enableInstrumentations=function(e,t,r){for(let n=0,o=e.length;n<o;n++){const o=e[n];t&&o.setTracerProvider(t),r&&o.setMeterProvider(r),o.getConfig().enabled||o.enable()}},r.disableInstrumentations=function(e){e.forEach((e=>e.disable()))}},{}],177:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./autoLoader"),r),o(e("./platform/index"),r),o(e("./types"),r),o(e("./types_internal"),r),o(e("./utils"),r)},{"./autoLoader":175,"./platform/index":179,"./types":181,"./types_internal":182,"./utils":183}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentationAbstract=void 0;const n=e("@opentelemetry/api"),o=e("shimmer");r.InstrumentationAbstract=class{constructor(e,t,r={}){this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=o.wrap,this._unwrap=o.unwrap,this._massWrap=o.massWrap,this._massUnwrap=o.massUnwrap,this._config=Object.assign({enabled:!0},r),this._diag=n.diag.createComponentLogger({namespace:e}),this._tracer=n.trace.getTracer(e,t),this._meter=n.metrics.getMeter(e,t)}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion)}getConfig(){return this._config}setConfig(e={}){this._config=Object.assign({},e)}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}},{"@opentelemetry/api":21,shimmer:624}],179:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./instrumentation"),r)},{"./instrumentation":180}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentationBase=void 0;const n=e("../../instrumentation");class o extends n.InstrumentationAbstract{constructor(e,t,r={}){super(e,t,r),this._config.enabled&&this.enable()}}r.InstrumentationBase=o},{"../../instrumentation":178}],181:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isWrapped=r.safeExecuteInTheMiddleAsync=r.safeExecuteInTheMiddle=void 0,r.safeExecuteInTheMiddle=function(e,t,r){let n,o;try{o=e()}catch(e){n=e}finally{if(t(n,o),n&&!r)throw n;return o}},r.safeExecuteInTheMiddleAsync=async function(e,t,r){let n,o;try{o=await e()}catch(e){n=e}finally{if(t(n,o),n&&!r)throw n;return o}},r.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}},{}],184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPExporterBase=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./util");r.OTLPExporterBase=class{constructor(e={}){this._sendingPromises=[],this.url=this.getDefaultUrl(e),"string"==typeof e.hostname&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this),this._concurrencyLimit="number"==typeof e.concurrencyLimit?e.concurrencyLimit:1/0,this.timeoutMillis=(0,i.configureExporterTimeout)(e.timeoutMillis),this.onInit(e)}export(e,t){this._shutdownOnce.isCalled?t({code:o.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?t({code:o.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")}):this._export(e).then((()=>{t({code:o.ExportResultCode.SUCCESS})})).catch((e=>{t({code:o.ExportResultCode.FAILED,error:e})}))}_export(e){return new Promise(((t,r)=>{try{n.diag.debug("items to be sent",e),this.send(e,t,r)}catch(e){r(e)}}))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return n.diag.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then((()=>{}))}}},{"./util":190,"@opentelemetry/api":21,"@opentelemetry/core":65}],185:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./OTLPExporterBase"),r),o(e("./platform"),r),o(e("./types"),r),o(e("./util"),r)},{"./OTLPExporterBase":184,"./platform":187,"./types":189,"./util":190}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OTLPExporterBrowserBase=void 0;const n=e("../../OTLPExporterBase"),o=e("../../util"),i=e("./util"),s=e("@opentelemetry/api"),a=e("@opentelemetry/core");class c extends n.OTLPExporterBase{constructor(e={}){super(e),this._useXHR=!1,this._useXHR=!!e.headers||"function"!=typeof navigator.sendBeacon,this._useXHR?this._headers=Object.assign({},(0,o.parseHeaders)(e.headers),a.baggageUtils.parseKeyPairsIntoRecord((0,a.getEnv)().OTEL_EXPORTER_OTLP_HEADERS)):this._headers={}}onInit(){window.addEventListener("unload",this.shutdown)}onShutdown(){window.removeEventListener("unload",this.shutdown)}send(e,t,r){if(this._shutdownOnce.isCalled)return void s.diag.debug("Shutdown already started. Cannot send objects");const n=this.convert(e),o=JSON.stringify(n),a=new Promise(((e,t)=>{this._useXHR?(0,i.sendWithXhr)(o,this.url,this._headers,this.timeoutMillis,e,t):(0,i.sendWithBeacon)(o,this.url,{type:"application/json"},e,t)})).then(t,r);this._sendingPromises.push(a);const c=()=>{const e=this._sendingPromises.indexOf(a);this._sendingPromises.splice(e,1)};a.then(c,c)}}r.OTLPExporterBrowserBase=c},{"../../OTLPExporterBase":184,"../../util":190,"./util":188,"@opentelemetry/api":21,"@opentelemetry/core":65}],187:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./OTLPExporterBrowserBase"),r)},{"./OTLPExporterBrowserBase":186}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sendWithXhr=r.sendWithBeacon=void 0;const n=e("@opentelemetry/api"),o=e("../../types");r.sendWithBeacon=function(e,t,r,i,s){if(navigator.sendBeacon(t,new Blob([e],r)))n.diag.debug("sendBeacon - can send",e),i();else{s(new o.OTLPExporterError(`sendBeacon - cannot send ${e}`))}},r.sendWithXhr=function(e,t,r,i,s,a){let c;const u=setTimeout((()=>{c=!0,l.abort()}),i),l=new XMLHttpRequest;l.open("POST",t),Object.entries(Object.assign(Object.assign({},{Accept:"application/json","Content-Type":"application/json"}),r)).forEach((([e,t])=>{l.setRequestHeader(e,t)})),l.send(e),l.onreadystatechange=()=>{if(l.readyState===XMLHttpRequest.DONE)if(l.status>=200&&l.status<=299)clearTimeout(u),n.diag.debug("xhr success",e),s();else if(c){const e=new o.OTLPExporterError("Request Timeout",l.status);a(e)}else{const e=new o.OTLPExporterError(`Failed to export with XHR (status: ${l.status})`,l.status);clearTimeout(u),a(e)}}}},{"../../types":189,"@opentelemetry/api":21}],189:[function(e,t,r){arguments[4][145][0].apply(r,arguments)},{dup:145}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.invalidTimeout=r.configureExporterTimeout=r.appendRootPathToUrlIfNeeded=r.appendResourcePathToUrl=r.parseHeaders=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=1e4;function s(e,t){return n.diag.warn("Timeout must be greater than 0",e),t}r.parseHeaders=function(e={}){const t={};return Object.entries(e).forEach((([e,r])=>{void 0!==r?t[e]=String(r):n.diag.warn(`Header "${e}" has wrong value and will be ignored`)})),t},r.appendResourcePathToUrl=function(e,t){return e.endsWith("/")||(e+="/"),e+t},r.appendRootPathToUrlIfNeeded=function(e){try{const t=new URL(e);return""===t.pathname&&(t.pathname=t.pathname+"/"),t.toString()}catch(t){return n.diag.warn(`Could not parse export URL: '${e}'`),e}},r.configureExporterTimeout=function(e){return"number"==typeof e?e<=0?s(e,i):e:function(){var e;const t=Number(null!==(e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==e?e:(0,o.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?s(t,i):t}()},r.invalidTimeout=s},{"@opentelemetry/api":21,"@opentelemetry/core":65}],191:[function(e,t,r){"use strict";function n(e,t){return{key:e,value:o(t)}}function o(e){const t=typeof e;return"string"===t?{stringValue:e}:"number"===t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"===t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(o)}}:"object"===t&&null!=e?{kvlistValue:{values:Object.entries(e).map((([e,t])=>n(e,t)))}}:{}}function i(e){return("0"+e.toString(16)).slice(-2)}Object.defineProperty(r,"__esModule",{value:!0}),r.bufToHex=r.hexToBuf=r.toAnyValue=r.toKeyValue=r.toAttributes=void 0,r.toAttributes=function(e){return Object.keys(e).map((t=>n(t,e[t])))},r.toKeyValue=n,r.toAnyValue=o,r.hexToBuf=function(e){var t;const r=null===(t=e.match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return r&&new Uint8Array(r)},r.bufToHex=function(e){if(null!=e&&0!==e.length)return Array.from(e).map(i).join("")}},{}],192:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],193:[function(e,t,r){arguments[4][149][0].apply(r,arguments)},{"./common/types":192,"./metrics":194,"./metrics/types":196,"./resource/types":197,"./trace":198,"./trace/types":200,dup:149}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExportMetricsServiceRequest=void 0;const n=e("./internal");r.createExportMetricsServiceRequest=function(e){return{resourceMetrics:e.map((e=>(0,n.toResourceMetrics)(e)))}}},{"./internal":195}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toMetric=r.toScopeMetrics=r.toResourceMetrics=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/sdk-metrics"),s=e("../common/internal");function a(e){return Array.from(e.map((e=>({scope:{name:e.scope.name,version:e.scope.version},metrics:e.metrics.map((e=>c(e))),schemaUrl:e.scope.schemaUrl}))))}function c(e){const t={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit},r=function(e){if(e===i.AggregationTemporality.DELTA)return 1;if(e===i.AggregationTemporality.CUMULATIVE)return 2;return 0}(e.aggregationTemporality);return e.dataPointType===i.DataPointType.SUM?t.sum={aggregationTemporality:r,isMonotonic:e.isMonotonic,dataPoints:u(e)}:e.dataPointType===i.DataPointType.GAUGE?t.gauge={dataPoints:u(e)}:e.dataPointType===i.DataPointType.HISTOGRAM&&(t.histogram={aggregationTemporality:r,dataPoints:l(e)}),t}function u(e){return e.dataPoints.map((t=>function(e,t){const r={attributes:(0,s.toAttributes)(e.attributes),startTimeUnixNano:(0,o.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,o.hrTimeToNanoseconds)(e.endTime)};return t===n.ValueType.INT?r.asInt=e.value:t===n.ValueType.DOUBLE&&(r.asDouble=e.value),r}(t,e.descriptor.valueType)))}function l(e){return e.dataPoints.map((e=>{const t=e.value;return{attributes:(0,s.toAttributes)(e.attributes),bucketCounts:t.buckets.counts,explicitBounds:t.buckets.boundaries,count:t.count,sum:t.sum,min:t.min,max:t.max,startTimeUnixNano:(0,o.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,o.hrTimeToNanoseconds)(e.endTime)}}))}r.toResourceMetrics=function(e){return{resource:{attributes:(0,s.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:a(e.scopeMetrics)}},r.toScopeMetrics=a,r.toMetric=c},{"../common/internal":191,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/sdk-metrics":219}],196:[function(e,t,r){arguments[4][152][0].apply(r,arguments)},{dup:152}],197:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createExportTraceServiceRequest=void 0;const n=e("../common/internal"),o=e("./internal");function i(e,t){const r=function(e){const t=new Map;for(const r of e){let e=t.get(r.resource);e||(e=new Map,t.set(r.resource,e));const n=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`;let o=e.get(n);o||(o=[],e.set(n,o)),o.push(r)}return t}(e),i=[],s=r.entries();let a=s.next();for(;!a.done;){const[e,r]=a.value,c=[],u=r.values();let l=u.next();for(;!l.done;){const e=l.value;if(e.length>0){const{name:r,version:n,schemaUrl:i}=e[0].instrumentationLibrary,s=e.map((e=>(0,o.sdkSpanToOtlpSpan)(e,t)));c.push({scope:{name:r,version:n},spans:s,schemaUrl:i})}l=u.next()}const p={resource:{attributes:(0,n.toAttributes)(e.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};i.push(p),a=s.next()}return i}r.createExportTraceServiceRequest=function(e,t){return{resourceSpans:i(e,t)}}},{"../common/internal":191,"./internal":199}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toOtlpSpanEvent=r.toOtlpLink=r.sdkSpanToOtlpSpan=void 0;const n=e("@opentelemetry/core"),o=e("../common/internal"),i=e("@opentelemetry/core");function s(e,t){return{attributes:e.attributes?(0,o.toAttributes)(e.attributes):[],spanId:t?e.context.spanId:i.hexToBase64(e.context.spanId),traceId:t?e.context.traceId:i.hexToBase64(e.context.traceId),droppedAttributesCount:0}}function a(e){return{attributes:e.attributes?(0,o.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:(0,n.hrTimeToNanoseconds)(e.time),droppedAttributesCount:0}}r.sdkSpanToOtlpSpan=function(e,t){const r=e.spanContext(),c=e.status,u=t?e.parentSpanId:null!=e.parentSpanId?i.hexToBase64(e.parentSpanId):void 0;return{traceId:t?r.traceId:i.hexToBase64(r.traceId),spanId:t?r.spanId:i.hexToBase64(r.spanId),parentSpanId:u,name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.startTime),endTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.endTime),attributes:(0,o.toAttributes)(e.attributes),droppedAttributesCount:0,events:e.events.map(a),droppedEventsCount:0,status:{code:c.code,message:c.message},links:e.links.map((e=>s(e,t))),droppedLinksCount:0}},r.toOtlpLink=s,r.toOtlpSpanEvent=a},{"../common/internal":191,"@opentelemetry/core":65}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ESpanKind=void 0,function(e){e[e.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",e[e.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",e[e.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",e[e.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",e[e.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",e[e.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"}(r.ESpanKind||(r.ESpanKind={}))},{}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDescriptorCompatibleWith=r.createInstrumentDescriptorWithView=r.createInstrumentDescriptor=r.InstrumentType=void 0;const n=e("@opentelemetry/api");!function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(r.InstrumentType||(r.InstrumentType={})),r.createInstrumentDescriptor=function(e,t,r){var o,i,s;return{name:e,type:t,description:null!==(o=null==r?void 0:r.description)&&void 0!==o?o:"",unit:null!==(i=null==r?void 0:r.unit)&&void 0!==i?i:"",valueType:null!==(s=null==r?void 0:r.valueType)&&void 0!==s?s:n.ValueType.DOUBLE}},r.createInstrumentDescriptorWithView=function(e,t){var r,n;return{name:null!==(r=e.name)&&void 0!==r?r:t.name,description:null!==(n=e.description)&&void 0!==n?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType}},r.isDescriptorCompatibleWith=function(e,t){return e.name===t.name&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}},{"@opentelemetry/api":21}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObservableInstrument=r.ObservableUpDownCounterInstrument=r.ObservableGaugeInstrument=r.ObservableCounterInstrument=r.ObservableInstrument=r.HistogramInstrument=r.CounterInstrument=r.UpDownCounterInstrument=r.SyncInstrument=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");class i{constructor(e,t){this._writableMetricStorage=e,this._descriptor=t}_record(e,t={},r=n.context.active()){this._descriptor.valueType!==n.ValueType.INT||Number.isInteger(e)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e)),this._writableMetricStorage.record(e,t,r,(0,o.hrTime)())}}r.SyncInstrument=i;r.UpDownCounterInstrument=class extends i{add(e,t,r){this._record(e,t,r)}};r.CounterInstrument=class extends i{add(e,t,r){e<0?n.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`):this._record(e,t,r)}};r.HistogramInstrument=class extends i{record(e,t,r){e<0?n.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`):this._record(e,t,r)}};class s{constructor(e,t,r){this._observableRegistry=r,this._descriptor=e,this._metricStorages=t}addCallback(e){this._observableRegistry.addCallback(e,this)}removeCallback(e){this._observableRegistry.removeCallback(e,this)}}r.ObservableInstrument=s;r.ObservableCounterInstrument=class extends s{};r.ObservableGaugeInstrument=class extends s{};r.ObservableUpDownCounterInstrument=class extends s{},r.isObservableInstrument=function(e){return e instanceof s}},{"@opentelemetry/api":21,"@opentelemetry/core":65}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Meter=void 0;const n=e("./InstrumentDescriptor"),o=e("./Instruments");r.Meter=class{constructor(e){this._meterSharedState=e}createHistogram(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.HISTOGRAM,t),i=this._meterSharedState.registerMetricStorage(r);return new o.HistogramInstrument(i,r)}createCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.COUNTER,t),i=this._meterSharedState.registerMetricStorage(r);return new o.CounterInstrument(i,r)}createUpDownCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.UP_DOWN_COUNTER,t),i=this._meterSharedState.registerMetricStorage(r);return new o.UpDownCounterInstrument(i,r)}createObservableGauge(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_GAUGE,t),i=this._meterSharedState.registerAsyncMetricStorage(r);return new o.ObservableGaugeInstrument(r,i,this._meterSharedState.observableRegistry)}createObservableCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(r);return new o.ObservableCounterInstrument(r,i,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(r);return new o.ObservableUpDownCounterInstrument(r,i,this._meterSharedState.observableRegistry)}addBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)}removeBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)}}},{"./InstrumentDescriptor":201,"./Instruments":202}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterProvider=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/resources"),i=e("./state/MeterProviderSharedState"),s=e("./state/MetricCollector");r.MeterProvider=class{constructor(e){var t;if(this._shutdown=!1,this._sharedState=new i.MeterProviderSharedState(null!==(t=null==e?void 0:e.resource)&&void 0!==t?t:o.Resource.empty()),null!=(null==e?void 0:e.views)&&e.views.length>0)for(const t of e.views)this._sharedState.viewRegistry.addView(t)}getMeter(e,t="",r={}){return this._shutdown?(n.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,n.createNoopMeter)()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:r.schemaUrl}).meter}addMetricReader(e){const t=new s.MetricCollector(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)}async shutdown(e){this._shutdown?n.diag.warn("shutdown may only be called once per MeterProvider"):(this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map((t=>t.shutdown(e)))))}async forceFlush(e){this._shutdown?n.diag.warn("invalid attempt to force flush after MeterProvider shutdown"):await Promise.all(this._sharedState.metricCollectors.map((t=>t.forceFlush(e))))}}},{"./state/MeterProviderSharedState":223,"./state/MetricCollector":225,"@opentelemetry/api":21,"@opentelemetry/resources":248}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchObservableResultImpl=r.ObservableResultImpl=void 0;const n=e("@opentelemetry/api"),o=e("./state/HashMap"),i=e("./Instruments");r.ObservableResultImpl=class{constructor(e){this._descriptor=e,this._buffer=new o.AttributeHashMap}observe(e,t={}){this._descriptor.valueType!==n.ValueType.INT||Number.isInteger(e)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e)),this._buffer.set(t,e)}};r.BatchObservableResultImpl=class{constructor(){this._buffer=new Map}observe(e,t,r={}){if(!(0,i.isObservableInstrument)(e))return;let s=this._buffer.get(e);null==s&&(s=new o.AttributeHashMap,this._buffer.set(e,s)),e._descriptor.valueType!==n.ValueType.INT||Number.isInteger(t)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),s.set(r,t)}}},{"./Instruments":202,"./state/HashMap":222,"@opentelemetry/api":21}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DropAggregator=void 0;const n=e("./types");r.DropAggregator=class{constructor(){this.kind=n.AggregatorKind.DROP}createAccumulation(){}merge(e,t){}diff(e,t){}toMetricData(e,t,r,n){}}},{"./types":211}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HistogramAggregator=r.HistogramAccumulation=void 0;const n=e("./types"),o=e("../export/MetricData"),i=e("../InstrumentDescriptor");class s{constructor(e,t,r=!0,n=function(e){const t=e.map((()=>0));return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}(t)){this.startTime=e,this._boundaries=t,this._recordMinMax=r,this._current=n}record(e){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);for(let t=0;t<this._boundaries.length;t++)if(e<this._boundaries[t])return void(this._current.buckets.counts[t]+=1);this._current.buckets.counts[this._boundaries.length]+=1}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.HistogramAccumulation=s;r.HistogramAggregator=class{constructor(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=n.AggregatorKind.HISTOGRAM}createAccumulation(e){return new s(e,this._boundaries,this._recordMinMax)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=new Array(o.length);for(let e=0;e<o.length;e++)a[e]=o[e]+i[e];let c=1/0,u=-1/0;return this._recordMinMax&&(r.hasMinMax&&n.hasMinMax?(c=Math.min(r.min,n.min),u=Math.max(r.max,n.max)):r.hasMinMax?(c=r.min,u=r.max):n.hasMinMax&&(c=n.min,u=n.max)),new s(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:c,max:u})}diff(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,a=new Array(o.length);for(let e=0;e<o.length;e++)a[e]=i[e]-o[e];return new s(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:a},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:o.DataPointType.HISTOGRAM,dataPoints:r.map((([t,r])=>{const o=r.toPointValue(),s=e.type===i.InstrumentType.UP_DOWN_COUNTER||e.type===i.InstrumentType.OBSERVABLE_GAUGE||e.type===i.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:n,value:{min:o.hasMinMax?o.min:void 0,max:o.hasMinMax?o.max:void 0,sum:s?void 0:o.sum,buckets:o.buckets,count:o.count}}}))}}}},{"../InstrumentDescriptor":201,"../export/MetricData":216,"./types":211}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LastValueAggregator=r.LastValueAccumulation=void 0;const n=e("./types"),o=e("@opentelemetry/core"),i=e("../export/MetricData");class s{constructor(e,t=0,r=[0,0]){this.startTime=e,this._current=t,this.sampleTime=r}record(e){this._current=e,this.sampleTime=(0,o.hrTime)()}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.LastValueAccumulation=s;r.LastValueAggregator=class{constructor(){this.kind=n.AggregatorKind.LAST_VALUE}createAccumulation(e){return new s(e)}merge(e,t){const r=(0,o.hrTimeToMicroseconds)(t.sampleTime)>=(0,o.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new s(e.startTime,r.toPointValue(),r.sampleTime)}diff(e,t){const r=(0,o.hrTimeToMicroseconds)(t.sampleTime)>=(0,o.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new s(t.startTime,r.toPointValue(),r.sampleTime)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.DataPointType.GAUGE,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()})))}}}},{"../export/MetricData":216,"./types":211,"@opentelemetry/core":65}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SumAggregator=r.SumAccumulation=void 0;const n=e("./types"),o=e("../export/MetricData");class i{constructor(e,t,r=0,n=!1){this.startTime=e,this.monotonic=t,this._current=r,this.reset=n}record(e){this.monotonic&&e<0||(this._current+=e)}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.SumAccumulation=i;r.SumAggregator=class{constructor(e){this.monotonic=e,this.kind=n.AggregatorKind.SUM}createAccumulation(e){return new i(e,this.monotonic)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue();return t.reset?new i(t.startTime,this.monotonic,n,t.reset):new i(e.startTime,this.monotonic,r+n)}diff(e,t){const r=e.toPointValue(),n=t.toPointValue();return this.monotonic&&r>n?new i(t.startTime,this.monotonic,n,!0):new i(t.startTime,this.monotonic,n-r)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:o.DataPointType.SUM,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()}))),isMonotonic:this.monotonic}}}},{"../export/MetricData":216,"./types":211}],210:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./Drop"),r),o(e("./Histogram"),r),o(e("./LastValue"),r),o(e("./Sum"),r)},{"./Drop":206,"./Histogram":207,"./LastValue":208,"./Sum":209}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AggregatorKind=void 0,function(e){e[e.DROP=0]="DROP",e[e.SUM=1]="SUM",e[e.LAST_VALUE=2]="LAST_VALUE",e[e.HISTOGRAM=3]="HISTOGRAM"}(r.AggregatorKind||(r.AggregatorKind={}))},{}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=r.DEFAULT_AGGREGATION_SELECTOR=void 0;const n=e("../view/Aggregation"),o=e("./AggregationTemporality");r.DEFAULT_AGGREGATION_SELECTOR=e=>n.Aggregation.Default();r.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR=e=>o.AggregationTemporality.CUMULATIVE},{"../view/Aggregation":233,"./AggregationTemporality":213}],213:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AggregationTemporality=void 0,function(e){e[e.DELTA=0]="DELTA",e[e.CUMULATIVE=1]="CUMULATIVE"}(r.AggregationTemporality||(r.AggregationTemporality={}))},{}],214:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleMetricExporter=void 0;const n=e("@opentelemetry/core"),o=e("./AggregationTemporality");class i{constructor(){this._shutdown=!1}export(e,r){if(!this._shutdown)return i._sendMetrics(e,r);t(r,{code:n.ExportResultCode.FAILED})}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return o.AggregationTemporality.CUMULATIVE}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(e,t){for(const t of e.scopeMetrics)for(const e of t.metrics)console.dir({descriptor:e.descriptor,dataPointType:e.dataPointType,dataPoints:e.dataPoints});t({code:n.ExportResultCode.SUCCESS})}}r.ConsoleMetricExporter=i}).call(this)}).call(this,e("timers").setImmediate)},{"./AggregationTemporality":213,"@opentelemetry/core":65,timers:2}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InMemoryMetricExporter=void 0;const n=e("@opentelemetry/core");r.InMemoryMetricExporter=class{constructor(e){this._shutdown=!1,this._metrics=[],this._aggregationTemporality=e}export(e,t){this._shutdown?setTimeout((()=>t({code:n.ExportResultCode.FAILED})),0):(this._metrics.push(e),setTimeout((()=>t({code:n.ExportResultCode.SUCCESS})),0))}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(e){return this._aggregationTemporality}shutdown(){return this._shutdown=!0,Promise.resolve()}}},{"@opentelemetry/core":65}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DataPointType=void 0,function(e){e[e.HISTOGRAM=0]="HISTOGRAM",e[e.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",e[e.GAUGE=2]="GAUGE",e[e.SUM=3]="SUM"}(r.DataPointType||(r.DataPointType={}))},{}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricReader=void 0;const n=e("@opentelemetry/api"),o=e("../utils"),i=e("./AggregationSelector");r.MetricReader=class{constructor(e){var t,r;this._shutdown=!1,this._aggregationSelector=null!==(t=null==e?void 0:e.aggregationSelector)&&void 0!==t?t:i.DEFAULT_AGGREGATION_SELECTOR,this._aggregationTemporalitySelector=null!==(r=null==e?void 0:e.aggregationTemporalitySelector)&&void 0!==r?r:i.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}setMetricProducer(e){if(this._metricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._metricProducer=e,this.onInitialized()}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}onInitialized(){}async collect(e){if(void 0===this._metricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return this._metricProducer.collect({timeoutMillis:null==e?void 0:e.timeoutMillis})}async shutdown(e){this._shutdown?n.diag.error("Cannot call shutdown twice."):(null==(null==e?void 0:e.timeoutMillis)?await this.onShutdown():await(0,o.callWithTimeout)(this.onShutdown(),e.timeoutMillis),this._shutdown=!0)}async forceFlush(e){this._shutdown?n.diag.warn("Cannot forceFlush on already shutdown MetricReader."):null!=(null==e?void 0:e.timeoutMillis)?await(0,o.callWithTimeout)(this.onForceFlush(),e.timeoutMillis):await this.onForceFlush()}}},{"../utils":232,"./AggregationSelector":212,"@opentelemetry/api":21}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PeriodicExportingMetricReader=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./MetricReader"),s=e("../utils");class a extends i.MetricReader{constructor(e){var t,r,n,o;if(super({aggregationSelector:null===(t=e.exporter.selectAggregation)||void 0===t?void 0:t.bind(e.exporter),aggregationTemporalitySelector:null===(r=e.exporter.selectAggregationTemporality)||void 0===r?void 0:r.bind(e.exporter)}),void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&e.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<e.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=null!==(n=e.exportIntervalMillis)&&void 0!==n?n:6e4,this._exportTimeout=null!==(o=e.exportTimeoutMillis)&&void 0!==o?o:3e4,this._exporter=e.exporter}async _runOnce(){const{resourceMetrics:e,errors:t}=await this.collect({});t.length>0&&n.diag.error("PeriodicExportingMetricReader: metrics collection errors",...t);const r=await o.internal._export(this._exporter,e);if(r.code!==o.ExportResultCode.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${r.error})`)}onInitialized(){this._interval=setInterval((async()=>{try{await(0,s.callWithTimeout)(this._runOnce(),this._exportTimeout)}catch(e){if(e instanceof s.TimeoutError)return void n.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);(0,o.globalErrorHandler)(e)}}),this._exportInterval),(0,o.unrefTimer)(this._interval)}async onForceFlush(){await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}}r.PeriodicExportingMetricReader=a},{"../utils":232,"./MetricReader":217,"@opentelemetry/api":21,"@opentelemetry/core":65}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimeoutError=r.View=r.Aggregation=r.SumAggregation=r.LastValueAggregation=r.HistogramAggregation=r.DropAggregation=r.ExplicitBucketHistogramAggregation=r.DefaultAggregation=r.MeterProvider=r.InstrumentType=r.ConsoleMetricExporter=r.InMemoryMetricExporter=r.PeriodicExportingMetricReader=r.MetricReader=r.DataPointType=r.AggregationTemporality=void 0;var n=e("./export/AggregationTemporality");Object.defineProperty(r,"AggregationTemporality",{enumerable:!0,get:function(){return n.AggregationTemporality}});var o=e("./export/MetricData");Object.defineProperty(r,"DataPointType",{enumerable:!0,get:function(){return o.DataPointType}});var i=e("./export/MetricReader");Object.defineProperty(r,"MetricReader",{enumerable:!0,get:function(){return i.MetricReader}});var s=e("./export/PeriodicExportingMetricReader");Object.defineProperty(r,"PeriodicExportingMetricReader",{enumerable:!0,get:function(){return s.PeriodicExportingMetricReader}});var a=e("./export/InMemoryMetricExporter");Object.defineProperty(r,"InMemoryMetricExporter",{enumerable:!0,get:function(){return a.InMemoryMetricExporter}});var c=e("./export/ConsoleMetricExporter");Object.defineProperty(r,"ConsoleMetricExporter",{enumerable:!0,get:function(){return c.ConsoleMetricExporter}});var u=e("./InstrumentDescriptor");Object.defineProperty(r,"InstrumentType",{enumerable:!0,get:function(){return u.InstrumentType}});var l=e("./MeterProvider");Object.defineProperty(r,"MeterProvider",{enumerable:!0,get:function(){return l.MeterProvider}});var p=e("./view/Aggregation");Object.defineProperty(r,"DefaultAggregation",{enumerable:!0,get:function(){return p.DefaultAggregation}}),Object.defineProperty(r,"ExplicitBucketHistogramAggregation",{enumerable:!0,get:function(){return p.ExplicitBucketHistogramAggregation}}),Object.defineProperty(r,"DropAggregation",{enumerable:!0,get:function(){return p.DropAggregation}}),Object.defineProperty(r,"HistogramAggregation",{enumerable:!0,get:function(){return p.HistogramAggregation}}),Object.defineProperty(r,"LastValueAggregation",{enumerable:!0,get:function(){return p.LastValueAggregation}}),Object.defineProperty(r,"SumAggregation",{enumerable:!0,get:function(){return p.SumAggregation}}),Object.defineProperty(r,"Aggregation",{enumerable:!0,get:function(){return p.Aggregation}});var d=e("./view/View");Object.defineProperty(r,"View",{enumerable:!0,get:function(){return d.View}});var m=e("./utils");Object.defineProperty(r,"TimeoutError",{enumerable:!0,get:function(){return m.TimeoutError}})},{"./InstrumentDescriptor":201,"./MeterProvider":204,"./export/AggregationTemporality":213,"./export/ConsoleMetricExporter":214,"./export/InMemoryMetricExporter":215,"./export/MetricData":216,"./export/MetricReader":217,"./export/PeriodicExportingMetricReader":218,"./utils":232,"./view/Aggregation":233,"./view/View":239}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncMetricStorage=void 0;const n=e("./MetricStorage"),o=e("./DeltaMetricProcessor"),i=e("./TemporalMetricProcessor"),s=e("./HashMap");class a extends n.MetricStorage{constructor(e,t,r){super(e),this._attributesProcessor=r,this._deltaMetricStorage=new o.DeltaMetricProcessor(t),this._temporalMetricStorage=new i.TemporalMetricProcessor(t)}record(e,t){const r=new s.AttributeHashMap;Array.from(e.entries()).forEach((([e,t])=>{r.set(this._attributesProcessor.process(e),t)})),this._deltaMetricStorage.batchCumulate(r,t)}collect(e,t,r){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,t,this._instrumentDescriptor,n,r)}}r.AsyncMetricStorage=a},{"./DeltaMetricProcessor":221,"./HashMap":222,"./MetricStorage":226,"./TemporalMetricProcessor":231}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DeltaMetricProcessor=void 0;const n=e("./HashMap");r.DeltaMetricProcessor=class{constructor(e){this._aggregator=e,this._activeCollectionStorage=new n.AttributeHashMap,this._cumulativeMemoStorage=new n.AttributeHashMap}record(e,t,r,n){const o=this._activeCollectionStorage.getOrDefault(t,(()=>this._aggregator.createAccumulation(n)));null==o||o.record(e)}batchCumulate(e,t){Array.from(e.entries()).forEach((([e,r,n])=>{const o=this._aggregator.createAccumulation(t);null==o||o.record(r);let i=o;if(this._cumulativeMemoStorage.has(e,n)){const t=this._cumulativeMemoStorage.get(e,n);i=this._aggregator.diff(t,o)}this._cumulativeMemoStorage.set(e,o,n),this._activeCollectionStorage.set(e,i,n)}))}collect(){const e=this._activeCollectionStorage;return this._activeCollectionStorage=new n.AttributeHashMap,e}}},{"./HashMap":222}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AttributeHashMap=r.HashMap=void 0;const n=e("../utils");class o{constructor(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}get(e,t){return null!=t||(t=this._hash(e)),this._valueMap.get(t)}getOrDefault(e,t){const r=this._hash(e);if(this._valueMap.has(r))return this._valueMap.get(r);const n=t();return this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,n),n}set(e,t,r){null!=r||(r=this._hash(e)),this._keyMap.has(r)||this._keyMap.set(r,e),this._valueMap.set(r,t)}has(e,t){return null!=t||(t=this._hash(e)),this._valueMap.has(t)}*keys(){const e=this._keyMap.entries();let t=e.next();for(;!0!==t.done;)yield[t.value[1],t.value[0]],t=e.next()}*entries(){const e=this._valueMap.entries();let t=e.next();for(;!0!==t.done;)yield[this._keyMap.get(t.value[0]),t.value[1],t.value[0]],t=e.next()}get size(){return this._valueMap.size}}r.HashMap=o;r.AttributeHashMap=class extends o{constructor(){super(n.hashAttributes)}}},{"../utils":232}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterProviderSharedState=void 0;const n=e("../utils"),o=e("../view/ViewRegistry"),i=e("./MeterSharedState");r.MeterProviderSharedState=class{constructor(e){this.resource=e,this.viewRegistry=new o.ViewRegistry,this.metricCollectors=[],this.meterSharedStates=new Map}getMeterSharedState(e){const t=(0,n.instrumentationScopeId)(e);let r=this.meterSharedStates.get(t);return null==r&&(r=new i.MeterSharedState(this,e),this.meterSharedStates.set(t,r)),r}selectAggregations(e){const t=[];for(const r of this.metricCollectors)t.push([r,r.selectAggregation(e)]);return t}}},{"../utils":232,"../view/ViewRegistry":240,"./MeterSharedState":224}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterSharedState=void 0;const n=e("../InstrumentDescriptor"),o=e("../Meter"),i=e("../utils"),s=e("./AsyncMetricStorage"),a=e("./MetricStorageRegistry"),c=e("./MultiWritableMetricStorage"),u=e("./ObservableRegistry"),l=e("./SyncMetricStorage"),p=e("../view/AttributesProcessor");r.MeterSharedState=class{constructor(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new a.MetricStorageRegistry,this.observableRegistry=new u.ObservableRegistry,this.meter=new o.Meter(this)}registerMetricStorage(e){const t=this._registerMetricStorage(e,l.SyncMetricStorage);return 1===t.length?t[0]:new c.MultiMetricStorage(t)}registerAsyncMetricStorage(e){return this._registerMetricStorage(e,s.AsyncMetricStorage)}async collect(e,t,r){const n=await this.observableRegistry.observe(t,null==r?void 0:r.timeoutMillis),o=Array.from(this.metricStorageRegistry.getStorages(e)).map((r=>r.collect(e,this._meterProviderSharedState.metricCollectors,t))).filter(i.isNotNullish);return{scopeMetrics:{scope:this._instrumentationScope,metrics:o.filter(i.isNotNullish)},errors:n}}_registerMetricStorage(e,t){let r=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope).map((r=>{const o=(0,n.createInstrumentDescriptorWithView)(r,e),i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(null!=i)return i;const s=r.aggregation.createAggregator(o),a=new t(o,s,r.attributesProcessor);return this.metricStorageRegistry.register(a),a}));if(0===r.length){const n=this._meterProviderSharedState.selectAggregations(e.type).map((([r,n])=>{const o=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(r,e);if(null!=o)return o;const i=n.createAggregator(e),s=new t(e,i,p.AttributesProcessor.Noop());return this.metricStorageRegistry.registerForCollector(r,s),s}));r=r.concat(n)}return r}}},{"../InstrumentDescriptor":201,"../Meter":203,"../utils":232,"../view/AttributesProcessor":234,"./AsyncMetricStorage":220,"./MetricStorageRegistry":227,"./MultiWritableMetricStorage":228,"./ObservableRegistry":229,"./SyncMetricStorage":230}],225:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricCollector=void 0;const n=e("@opentelemetry/core"),o=e("../utils");r.MetricCollector=class{constructor(e,t){this._sharedState=e,this._metricReader=t}async collect(e){const t=(0,n.hrTime)(),r=Array.from(this._sharedState.meterSharedStates.values()).map((r=>r.collect(this,t,e))),i=await Promise.all(r);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:i.map((e=>e.scopeMetrics))},errors:(0,o.FlatMap)(i,(e=>e.errors))}}async forceFlush(e){await this._metricReader.forceFlush(e)}async shutdown(e){await this._metricReader.shutdown(e)}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}selectAggregation(e){return this._metricReader.selectAggregation(e)}}},{"../utils":232,"@opentelemetry/core":65}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricStorage=void 0;const n=e("../InstrumentDescriptor");r.MetricStorage=class{constructor(e){this._instrumentDescriptor=e}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=(0,n.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})}}},{"../InstrumentDescriptor":201}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricStorageRegistry=void 0;const n=e("../InstrumentDescriptor"),o=e("@opentelemetry/api"),i=e("../view/RegistrationConflicts");class s{constructor(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}static create(){return new s}getStorages(e){let t=[];for(const e of this._sharedRegistry.values())t=t.concat(e);const r=this._perCollectorRegistry.get(e);if(null!=r)for(const e of r.values())t=t.concat(e);return t}register(e){this._registerStorage(e,this._sharedRegistry)}registerForCollector(e,t){let r=this._perCollectorRegistry.get(e);null==r&&(r=new Map,this._perCollectorRegistry.set(e,r)),this._registerStorage(t,r)}findOrUpdateCompatibleStorage(e){const t=this._sharedRegistry.get(e.name);return void 0===t?null:this._findOrUpdateCompatibleStorage(e,t)}findOrUpdateCompatibleCollectorStorage(e,t){if(void 0===this._perCollectorRegistry.get(e))return null;const r=this._sharedRegistry.get(t.name);return void 0===r?null:this._findOrUpdateCompatibleStorage(t,r)}_registerStorage(e,t){const r=e.getInstrumentDescriptor(),n=t.get(r.name);void 0!==n?n.push(e):t.set(r.name,[e])}_findOrUpdateCompatibleStorage(e,t){let r=null;for(const s of t){const t=s.getInstrumentDescriptor();(0,n.isDescriptorCompatibleWith)(t,e)?(t.description!==e.description&&(e.description.length>t.description.length&&s.updateDescription(e.description),o.diag.warn("A view or instrument with the name ",e.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",(0,i.getIncompatibilityDetails)(t,e),"The longer description will be used.\nTo resolve the conflict:",(0,i.getConflictResolutionRecipe)(t,e))),r=s):o.diag.warn("A view or instrument with the name ",e.name," has already been registered and is incompatible with another registered view.\n","Details:\n",(0,i.getIncompatibilityDetails)(t,e),"To resolve the conflict:\n",(0,i.getConflictResolutionRecipe)(t,e))}return r}}r.MetricStorageRegistry=s},{"../InstrumentDescriptor":201,"../view/RegistrationConflicts":238,"@opentelemetry/api":21}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MultiMetricStorage=void 0;r.MultiMetricStorage=class{constructor(e){this._backingStorages=e}record(e,t,r,n){this._backingStorages.forEach((o=>{o.record(e,t,r,n)}))}}},{}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableRegistry=void 0;const n=e("@opentelemetry/api"),o=e("../Instruments"),i=e("../ObservableResult"),s=e("../utils");r.ObservableRegistry=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(e,t){this._findCallback(e,t)>=0||this._callbacks.push({callback:e,instrument:t})}removeCallback(e,t){const r=this._findCallback(e,t);r<0||this._callbacks.splice(r,1)}addBatchCallback(e,t){const r=new Set(t.filter(o.isObservableInstrument));if(0===r.size)return void n.diag.error("BatchObservableCallback is not associated with valid instruments",t);this._findBatchCallback(e,r)>=0||this._batchCallbacks.push({callback:e,instruments:r})}removeBatchCallback(e,t){const r=new Set(t.filter(o.isObservableInstrument)),n=this._findBatchCallback(e,r);n<0||this._batchCallbacks.splice(n,1)}async observe(e,t){const r=this._observeCallbacks(e,t),n=this._observeBatchCallbacks(e,t);return(await(0,s.PromiseAllSettled)([...r,...n])).filter(s.isPromiseAllSettledRejectionResult).map((e=>e.reason))}_observeCallbacks(e,t){return this._callbacks.map((async({callback:r,instrument:n})=>{const o=new i.ObservableResultImpl(n._descriptor);let a=Promise.resolve(r(o));null!=t&&(a=(0,s.callWithTimeout)(a,t)),await a,n._metricStorages.forEach((t=>{t.record(o._buffer,e)}))}))}_observeBatchCallbacks(e,t){return this._batchCallbacks.map((async({callback:r,instruments:n})=>{const o=new i.BatchObservableResultImpl;let a=Promise.resolve(r(o));null!=t&&(a=(0,s.callWithTimeout)(a,t)),await a,n.forEach((t=>{const r=o._buffer.get(t);null!=r&&t._metricStorages.forEach((t=>{t.record(r,e)}))}))}))}_findCallback(e,t){return this._callbacks.findIndex((r=>r.callback===e&&r.instrument===t))}_findBatchCallback(e,t){return this._batchCallbacks.findIndex((r=>r.callback===e&&(0,s.setEquals)(r.instruments,t)))}}},{"../Instruments":202,"../ObservableResult":205,"../utils":232,"@opentelemetry/api":21}],230:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SyncMetricStorage=void 0;const n=e("./MetricStorage"),o=e("./DeltaMetricProcessor"),i=e("./TemporalMetricProcessor");class s extends n.MetricStorage{constructor(e,t,r){super(e),this._attributesProcessor=r,this._deltaMetricStorage=new o.DeltaMetricProcessor(t),this._temporalMetricStorage=new i.TemporalMetricProcessor(t)}record(e,t,r,n){t=this._attributesProcessor.process(t,r),this._deltaMetricStorage.record(e,t,r,n)}collect(e,t,r){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,t,this._instrumentDescriptor,n,r)}}r.SyncMetricStorage=s},{"./DeltaMetricProcessor":221,"./MetricStorage":226,"./TemporalMetricProcessor":231}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TemporalMetricProcessor=void 0;const n=e("../export/AggregationTemporality"),o=e("./HashMap");class i{constructor(e){this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map}buildMetrics(e,t,r,o,s){this._stashAccumulations(t,o);const a=this._getMergedUnreportedAccumulations(e);let c,u=a;if(this._reportHistory.has(e)){const t=this._reportHistory.get(e),r=t.collectionTime;c=t.aggregationTemporality,u=c===n.AggregationTemporality.CUMULATIVE?i.merge(t.accumulations,a,this._aggregator):i.calibrateStartTime(t.accumulations,a,r)}else c=e.selectAggregationTemporality(r.type);return this._reportHistory.set(e,{accumulations:u,collectionTime:s,aggregationTemporality:c}),this._aggregator.toMetricData(r,c,(l=u,Array.from(l.entries())),s);var l}_stashAccumulations(e,t){e.forEach((e=>{let r=this._unreportedAccumulations.get(e);void 0===r&&(r=[],this._unreportedAccumulations.set(e,r)),r.push(t)}))}_getMergedUnreportedAccumulations(e){let t=new o.AttributeHashMap;const r=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),void 0===r)return t;for(const e of r)t=i.merge(t,e,this._aggregator);return t}static merge(e,t,r){const n=e,o=t.entries();let i=o.next();for(;!0!==i.done;){const[t,s,a]=i.value;if(e.has(t,a)){const o=e.get(t,a),i=r.merge(o,s);n.set(t,i,a)}else n.set(t,s,a);i=o.next()}return n}static calibrateStartTime(e,t,r){for(const[n,o]of e.keys()){const e=t.get(n,o);null==e||e.setStartTime(r)}return t}}r.TemporalMetricProcessor=i},{"../export/AggregationTemporality":213,"./HashMap":222}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setEquals=r.FlatMap=r.isPromiseAllSettledRejectionResult=r.PromiseAllSettled=r.callWithTimeout=r.TimeoutError=r.instrumentationScopeId=r.hashAttributes=r.isNotNullish=void 0,r.isNotNullish=function(e){return null!=e},r.hashAttributes=function(e){let t=Object.keys(e);return 0===t.length?"":(t=t.sort(),JSON.stringify(t.map((t=>[t,e[t]]))))},r.instrumentationScopeId=function(e){var t,r;return`${e.name}:${null!==(t=e.version)&&void 0!==t?t:""}:${null!==(r=e.schemaUrl)&&void 0!==r?r:""}`};class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.TimeoutError=n,r.callWithTimeout=function(e,t){let r;const o=new Promise((function(e,o){r=setTimeout((function(){o(new n("Operation timed out."))}),t)}));return Promise.race([e,o]).then((e=>(clearTimeout(r),e)),(e=>{throw clearTimeout(r),e}))},r.PromiseAllSettled=async function(e){return Promise.all(e.map((async e=>{try{return{status:"fulfilled",value:await e}}catch(e){return{status:"rejected",reason:e}}})))},r.isPromiseAllSettledRejectionResult=function(e){return"rejected"===e.status},r.FlatMap=function(e,t){const r=[];return e.forEach((e=>{r.push(...t(e))})),r},r.setEquals=function(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}},{}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultAggregation=r.ExplicitBucketHistogramAggregation=r.HistogramAggregation=r.LastValueAggregation=r.SumAggregation=r.DropAggregation=r.Aggregation=void 0;const n=e("@opentelemetry/api"),o=e("../aggregator"),i=e("../InstrumentDescriptor");class s{static Drop(){return d}static Sum(){return m}static LastValue(){return h}static Histogram(){return _}static Default(){return f}}r.Aggregation=s;class a extends s{createAggregator(e){return a.DEFAULT_INSTANCE}}r.DropAggregation=a,a.DEFAULT_INSTANCE=new o.DropAggregator;class c extends s{createAggregator(e){switch(e.type){case i.InstrumentType.COUNTER:case i.InstrumentType.OBSERVABLE_COUNTER:case i.InstrumentType.HISTOGRAM:return c.MONOTONIC_INSTANCE;default:return c.NON_MONOTONIC_INSTANCE}}}r.SumAggregation=c,c.MONOTONIC_INSTANCE=new o.SumAggregator(!0),c.NON_MONOTONIC_INSTANCE=new o.SumAggregator(!1);class u extends s{createAggregator(e){return u.DEFAULT_INSTANCE}}r.LastValueAggregation=u,u.DEFAULT_INSTANCE=new o.LastValueAggregator;class l extends s{createAggregator(e){return l.DEFAULT_INSTANCE}}r.HistogramAggregation=l,l.DEFAULT_INSTANCE=new o.HistogramAggregator([0,5,10,25,50,75,100,250,500,1e3],!0);r.ExplicitBucketHistogramAggregation=class extends s{constructor(e,t=!0){if(super(),this._recordMinMax=t,void 0===e||0===e.length)throw new Error("HistogramAggregator should be created with boundaries.");const r=(e=(e=e.concat()).sort(((e,t)=>e-t))).lastIndexOf(-1/0);let n=e.indexOf(1/0);-1===n&&(n=void 0),this._boundaries=e.slice(r+1,n)}createAggregator(e){return new o.HistogramAggregator(this._boundaries,this._recordMinMax)}};class p extends s{_resolve(e){switch(e.type){case i.InstrumentType.COUNTER:case i.InstrumentType.UP_DOWN_COUNTER:case i.InstrumentType.OBSERVABLE_COUNTER:case i.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:return m;case i.InstrumentType.OBSERVABLE_GAUGE:return h;case i.InstrumentType.HISTOGRAM:return _}return n.diag.warn(`Unable to recognize instrument type: ${e.type}`),d}createAggregator(e){return this._resolve(e).createAggregator(e)}}r.DefaultAggregation=p;const d=new a,m=new c,h=new u,_=new l,f=new p},{"../InstrumentDescriptor":201,"../aggregator":210,"@opentelemetry/api":21}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FilteringAttributesProcessor=r.NoopAttributesProcessor=r.AttributesProcessor=void 0;class n{static Noop(){return i}}r.AttributesProcessor=n;class o extends n{process(e,t){return e}}r.NoopAttributesProcessor=o;r.FilteringAttributesProcessor=class extends n{constructor(e){super(),this._allowedAttributeNames=e}process(e,t){const r={};return Object.keys(e).filter((e=>this._allowedAttributeNames.includes(e))).forEach((t=>r[t]=e[t])),r}};const i=new o},{}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentSelector=void 0;const n=e("./Predicate");r.InstrumentSelector=class{constructor(e){var t;this._nameFilter=new n.PatternPredicate(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"*"),this._type=null==e?void 0:e.type}getType(){return this._type}getNameFilter(){return this._nameFilter}}},{"./Predicate":237}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterSelector=void 0;const n=e("./Predicate");r.MeterSelector=class{constructor(e){this._nameFilter=new n.ExactPredicate(null==e?void 0:e.name),this._versionFilter=new n.ExactPredicate(null==e?void 0:e.version),this._schemaUrlFilter=new n.ExactPredicate(null==e?void 0:e.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}},{"./Predicate":237}],237:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExactPredicate=r.PatternPredicate=void 0;const n=/[\^$\\.+?()[\]{}|]/g;class o{constructor(e){"*"===e?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(o.escapePattern(e)))}match(e){return!!this._matchAll||this._regexp.test(e)}static escapePattern(e){return`^${e.replace(n,"\\$&").replace("*",".*")}$`}static hasWildcard(e){return e.includes("*")}}r.PatternPredicate=o;r.ExactPredicate=class{constructor(e){this._matchAll=void 0===e,this._pattern=e}match(e){return!!this._matchAll||e===this._pattern}}},{}],238:[function(e,t,r){"use strict";function n(e,t){return`\t- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}function o(e,t){return`\t- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}function i(e,t){const r={name:t.name,type:t.type},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}function s(e,t){const r={name:t.name,type:t.type},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'\n    \t- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}\n    \t- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}Object.defineProperty(r,"__esModule",{value:!0}),r.getConflictResolutionRecipe=r.getDescriptionResolutionRecipe=r.getTypeConflictResolutionRecipe=r.getUnitConflictResolutionRecipe=r.getValueTypeConflictResolutionRecipe=r.getIncompatibilityDetails=void 0,r.getIncompatibilityDetails=function(e,t){let r="";return e.unit!==t.unit&&(r+=`\t- Unit '${e.unit}' does not match '${t.unit}'\n`),e.type!==t.type&&(r+=`\t- Type '${e.type}' does not match '${t.type}'\n`),e.valueType!==t.valueType&&(r+=`\t- Value Type '${e.valueType}' does not match '${t.valueType}'\n`),e.description!==t.description&&(r+=`\t- Description '${e.description}' does not match '${t.description}'\n`),r},r.getValueTypeConflictResolutionRecipe=n,r.getUnitConflictResolutionRecipe=o,r.getTypeConflictResolutionRecipe=i,r.getDescriptionResolutionRecipe=s,r.getConflictResolutionRecipe=function(e,t){return e.valueType!==t.valueType?n(e,t):e.unit!==t.unit?o(e,t):e.type!==t.type?i(e,t):e.description!==t.description?s(e,t):""}},{}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.View=void 0;const n=e("./Predicate"),o=e("./AttributesProcessor"),i=e("./InstrumentSelector"),s=e("./MeterSelector"),a=e("./Aggregation");r.View=class{constructor(e){var t,r;if(null==(r=e).instrumentName&&null==r.instrumentType&&null==r.meterName&&null==r.meterVersion&&null==r.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");if(null!=e.name&&(null==(null==e?void 0:e.instrumentName)||n.PatternPredicate.hasWildcard(e.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");null!=e.attributeKeys?this.attributesProcessor=new o.FilteringAttributesProcessor(e.attributeKeys):this.attributesProcessor=o.AttributesProcessor.Noop(),this.name=e.name,this.description=e.description,this.aggregation=null!==(t=e.aggregation)&&void 0!==t?t:a.Aggregation.Default(),this.instrumentSelector=new i.InstrumentSelector({name:e.instrumentName,type:e.instrumentType}),this.meterSelector=new s.MeterSelector({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl})}}},{"./Aggregation":233,"./AttributesProcessor":234,"./InstrumentSelector":235,"./MeterSelector":236,"./Predicate":237}],240:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewRegistry=void 0;r.ViewRegistry=class{constructor(){this._registeredViews=[]}addView(e){this._registeredViews.push(e)}findViews(e,t){return this._registeredViews.filter((r=>this._matchInstrument(r.instrumentSelector,e)&&this._matchMeter(r.meterSelector,t)))}_matchInstrument(e,t){return(void 0===e.getType()||t.type===e.getType())&&e.getNameFilter().match(t.name)}_matchMeter(e,t){return e.getNameFilter().match(t.name)&&(void 0===t.version||e.getVersionFilter().match(t.version))&&(void 0===t.schemaUrl||e.getSchemaUrlFilter().match(t.schemaUrl))}}},{}],241:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Resource=void 0;const n=e("@opentelemetry/semantic-conventions"),o=e("@opentelemetry/core"),i=e("./platform");class s{constructor(e){this.attributes=e}static empty(){return s.EMPTY}static default(){return new s({[n.SemanticResourceAttributes.SERVICE_NAME]:(0,i.defaultServiceName)(),[n.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:o.SDK_INFO[n.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[n.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:o.SDK_INFO[n.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[n.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:o.SDK_INFO[n.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;const t=Object.assign({},this.attributes,e.attributes);return new s(t)}}r.Resource=s,s.EMPTY=new s({})},{"./platform":253,"@opentelemetry/core":65,"@opentelemetry/semantic-conventions":490}],242:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],243:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.browserDetector=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/semantic-conventions"),i=e("..");r.browserDetector=new class{async detect(e){if(!("undefined"!=typeof navigator))return i.Resource.empty();const t={[o.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[o.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,t){return""===e[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]?(n.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),i.Resource.empty()):new i.Resource(Object.assign({},e))}}},{"..":248,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":490}],244:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.envDetector=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions"),s=e("../Resource");r.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){const t={},r=(0,o.getEnv)(),a=r.OTEL_RESOURCE_ATTRIBUTES,c=r.OTEL_SERVICE_NAME;if(a)try{const e=this._parseResourceAttributes(a);Object.assign(t,e)}catch(e){n.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(t[i.SemanticResourceAttributes.SERVICE_NAME]=c),new s.Resource(t)}_parseResourceAttributes(e){if(!e)return{};const t={},r=e.split(this._COMMA_SEPARATOR,-1);for(const e of r){const r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,o]=r;if(n=n.trim(),o=o.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=decodeURIComponent(o)}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<33||44===r||59===r||92===r||r>126)return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}},{"../Resource":241,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/semantic-conventions":490}],245:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noopDetector=r.NoopDetector=void 0;const n=e("../Resource");class o{async detect(){return new n.Resource({})}}r.NoopDetector=o,r.noopDetector=new o},{"../Resource":241}],246:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetector=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/semantic-conventions"),i=e("../Resource");r.processDetector=new class{async detect(e){if("object"!=typeof t)return i.Resource.empty();const r={[o.SemanticResourceAttributes.PROCESS_PID]:t.pid,[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:t.title||"",[o.SemanticResourceAttributes.PROCESS_COMMAND]:t.argv[1]||"",[o.SemanticResourceAttributes.PROCESS_COMMAND_LINE]:t.argv.join(" ")||"",[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:t.versions.node,[o.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[o.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};return this._getResourceAttributes(r,e)}_getResourceAttributes(e,t){return""===e[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[o.SemanticResourceAttributes.PROCESS_COMMAND]||""===e[o.SemanticResourceAttributes.PROCESS_COMMAND_LINE]||""===e[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]?(n.diag.debug("ProcessDetector failed: Unable to find required process resources. "),i.Resource.empty()):new i.Resource(Object.assign({},e))}}}).call(this)}).call(this,e("_process"))},{"../Resource":241,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":490,_process:1}],247:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./BrowserDetector"),r),o(e("./EnvDetector"),r),o(e("./ProcessDetector"),r)},{"./BrowserDetector":243,"./EnvDetector":244,"./ProcessDetector":246}],248:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./Resource"),r),o(e("./platform"),r),o(e("./types"),r),o(e("./config"),r),o(e("./detectors"),r)},{"./Resource":241,"./config":242,"./detectors":247,"./platform":253,"./types":254}],249:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hostDetector=void 0;const n=e("../../detectors/NoopDetector");r.hostDetector=n.noopDetector},{"../../detectors/NoopDetector":245}],250:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.osDetector=void 0;const n=e("../../detectors/NoopDetector");r.osDetector=n.noopDetector},{"../../detectors/NoopDetector":245}],251:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultServiceName=void 0,r.defaultServiceName=function(){return"unknown_service"}},{}],252:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.detectResources=void 0;const n=e("../../Resource"),o=e("@opentelemetry/api");r.detectResources=async(e={})=>{const t=Object.assign(e);return(await Promise.all((t.detectors||[]).map((async e=>{try{const r=await e.detect(t);return o.diag.debug(`${e.constructor.name} found resource.`,r),r}catch(t){return o.diag.debug(`${e.constructor.name} failed: ${t.message}`),n.Resource.empty()}})))).reduce(((e,t)=>e.merge(t)),n.Resource.empty())}},{"../../Resource":241,"@opentelemetry/api":21}],253:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./default-service-name"),r),o(e("./detect-resources"),r),o(e("./HostDetector"),r),o(e("./OSDetector"),r)},{"./HostDetector":249,"./OSDetector":250,"./default-service-name":251,"./detect-resources":252}],254:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDescriptorCompatibleWith=r.createInstrumentDescriptorWithView=r.createInstrumentDescriptor=r.InstrumentType=void 0;const n=e("@opentelemetry/api");!function(e){e.COUNTER="COUNTER",e.HISTOGRAM="HISTOGRAM",e.UP_DOWN_COUNTER="UP_DOWN_COUNTER",e.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",e.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",e.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(r.InstrumentType||(r.InstrumentType={})),r.createInstrumentDescriptor=function(e,t,r){var o,i,s;return{name:e,type:t,description:null!==(o=null==r?void 0:r.description)&&void 0!==o?o:"",unit:null!==(i=null==r?void 0:r.unit)&&void 0!==i?i:"",valueType:null!==(s=null==r?void 0:r.valueType)&&void 0!==s?s:n.ValueType.DOUBLE}},r.createInstrumentDescriptorWithView=function(e,t){var r,n;return{name:null!==(r=e.name)&&void 0!==r?r:t.name,description:null!==(n=e.description)&&void 0!==n?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType}},r.isDescriptorCompatibleWith=function(e,t){return e.name===t.name&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}},{"@opentelemetry/api":21}],256:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObservableInstrument=r.ObservableUpDownCounterInstrument=r.ObservableGaugeInstrument=r.ObservableCounterInstrument=r.ObservableInstrument=r.HistogramInstrument=r.CounterInstrument=r.UpDownCounterInstrument=r.SyncInstrument=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");class i{constructor(e,t){this._writableMetricStorage=e,this._descriptor=t}_record(e,t={},r=n.context.active()){this._descriptor.valueType!==n.ValueType.INT||Number.isInteger(e)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e)),this._writableMetricStorage.record(e,t,r,(0,o.millisToHrTime)(Date.now()))}}r.SyncInstrument=i;r.UpDownCounterInstrument=class extends i{add(e,t,r){this._record(e,t,r)}};r.CounterInstrument=class extends i{add(e,t,r){e<0?n.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`):this._record(e,t,r)}};r.HistogramInstrument=class extends i{record(e,t,r){e<0?n.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`):this._record(e,t,r)}};class s{constructor(e,t,r){this._observableRegistry=r,this._descriptor=e,this._metricStorages=t}addCallback(e){this._observableRegistry.addCallback(e,this)}removeCallback(e){this._observableRegistry.removeCallback(e,this)}}r.ObservableInstrument=s;r.ObservableCounterInstrument=class extends s{};r.ObservableGaugeInstrument=class extends s{};r.ObservableUpDownCounterInstrument=class extends s{},r.isObservableInstrument=function(e){return e instanceof s}},{"@opentelemetry/api":21,"@opentelemetry/core":305}],257:[function(e,t,r){arguments[4][203][0].apply(r,arguments)},{"./InstrumentDescriptor":255,"./Instruments":256,dup:203}],258:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterProvider=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/resources"),i=e("./state/MeterProviderSharedState"),s=e("./state/MetricCollector");r.MeterProvider=class{constructor(e){var t;this._shutdown=!1;const r=o.Resource.default().merge(null!==(t=null==e?void 0:e.resource)&&void 0!==t?t:o.Resource.empty());if(this._sharedState=new i.MeterProviderSharedState(r),null!=(null==e?void 0:e.views)&&e.views.length>0)for(const t of e.views)this._sharedState.viewRegistry.addView(t)}getMeter(e,t="",r={}){return this._shutdown?(n.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,n.createNoopMeter)()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:r.schemaUrl}).meter}addMetricReader(e){const t=new s.MetricCollector(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)}async shutdown(e){this._shutdown?n.diag.warn("shutdown may only be called once per MeterProvider"):(this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map((t=>t.shutdown(e)))))}async forceFlush(e){this._shutdown?n.diag.warn("invalid attempt to force flush after MeterProvider shutdown"):await Promise.all(this._sharedState.metricCollectors.map((t=>t.forceFlush(e))))}}},{"./state/MeterProviderSharedState":277,"./state/MetricCollector":279,"@opentelemetry/api":21,"@opentelemetry/resources":348}],259:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchObservableResultImpl=r.ObservableResultImpl=void 0;const n=e("@opentelemetry/api"),o=e("./state/HashMap"),i=e("./Instruments");r.ObservableResultImpl=class{constructor(e){this._descriptor=e,this._buffer=new o.AttributeHashMap}observe(e,t={}){this._descriptor.valueType!==n.ValueType.INT||Number.isInteger(e)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e)),this._buffer.set(t,e)}};r.BatchObservableResultImpl=class{constructor(){this._buffer=new Map}observe(e,t,r={}){if(!(0,i.isObservableInstrument)(e))return;let s=this._buffer.get(e);null==s&&(s=new o.AttributeHashMap,this._buffer.set(e,s)),e._descriptor.valueType!==n.ValueType.INT||Number.isInteger(t)||(n.diag.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t)),s.set(r,t)}}},{"./Instruments":256,"./state/HashMap":276,"@opentelemetry/api":21}],260:[function(e,t,r){arguments[4][206][0].apply(r,arguments)},{"./types":265,dup:206}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HistogramAggregator=r.HistogramAccumulation=void 0;const n=e("./types"),o=e("../export/MetricData"),i=e("../InstrumentDescriptor"),s=e("../utils");class a{constructor(e,t,r=!0,n=function(e){const t=e.map((()=>0));return t.push(0),{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}(t)){this.startTime=e,this._boundaries=t,this._recordMinMax=r,this._current=n}record(e){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);const t=(0,s.binarySearchLB)(this._boundaries,e);this._current.buckets.counts[t+1]+=1}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.HistogramAccumulation=a;r.HistogramAggregator=class{constructor(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=n.AggregatorKind.HISTOGRAM}createAccumulation(e){return new a(e,this._boundaries,this._recordMinMax)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,s=new Array(o.length);for(let e=0;e<o.length;e++)s[e]=o[e]+i[e];let c=1/0,u=-1/0;return this._recordMinMax&&(r.hasMinMax&&n.hasMinMax?(c=Math.min(r.min,n.min),u=Math.max(r.max,n.max)):r.hasMinMax?(c=r.min,u=r.max):n.hasMinMax&&(c=n.min,u=n.max)),new a(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:s},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:c,max:u})}diff(e,t){const r=e.toPointValue(),n=t.toPointValue(),o=r.buckets.counts,i=n.buckets.counts,s=new Array(o.length);for(let e=0;e<o.length;e++)s[e]=i[e]-o[e];return new a(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:s},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:o.DataPointType.HISTOGRAM,dataPoints:r.map((([t,r])=>{const o=r.toPointValue(),s=e.type===i.InstrumentType.UP_DOWN_COUNTER||e.type===i.InstrumentType.OBSERVABLE_GAUGE||e.type===i.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:n,value:{min:o.hasMinMax?o.min:void 0,max:o.hasMinMax?o.max:void 0,sum:s?void 0:o.sum,buckets:o.buckets,count:o.count}}}))}}}},{"../InstrumentDescriptor":255,"../export/MetricData":270,"../utils":286,"./types":265}],262:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LastValueAggregator=r.LastValueAccumulation=void 0;const n=e("./types"),o=e("@opentelemetry/core"),i=e("../export/MetricData");class s{constructor(e,t=0,r=[0,0]){this.startTime=e,this._current=t,this.sampleTime=r}record(e){this._current=e,this.sampleTime=(0,o.millisToHrTime)(Date.now())}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.LastValueAccumulation=s;r.LastValueAggregator=class{constructor(){this.kind=n.AggregatorKind.LAST_VALUE}createAccumulation(e){return new s(e)}merge(e,t){const r=(0,o.hrTimeToMicroseconds)(t.sampleTime)>=(0,o.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new s(e.startTime,r.toPointValue(),r.sampleTime)}diff(e,t){const r=(0,o.hrTimeToMicroseconds)(t.sampleTime)>=(0,o.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new s(t.startTime,r.toPointValue(),r.sampleTime)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.DataPointType.GAUGE,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()})))}}}},{"../export/MetricData":270,"./types":265,"@opentelemetry/core":305}],263:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SumAggregator=r.SumAccumulation=void 0;const n=e("./types"),o=e("../export/MetricData");class i{constructor(e,t,r=0,n=!1){this.startTime=e,this.monotonic=t,this._current=r,this.reset=n}record(e){this.monotonic&&e<0||(this._current+=e)}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}r.SumAccumulation=i;r.SumAggregator=class{constructor(e){this.monotonic=e,this.kind=n.AggregatorKind.SUM}createAccumulation(e){return new i(e,this.monotonic)}merge(e,t){const r=e.toPointValue(),n=t.toPointValue();return t.reset?new i(t.startTime,this.monotonic,n,t.reset):new i(e.startTime,this.monotonic,r+n)}diff(e,t){const r=e.toPointValue(),n=t.toPointValue();return this.monotonic&&r>n?new i(t.startTime,this.monotonic,n,!0):new i(t.startTime,this.monotonic,n-r)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:o.DataPointType.SUM,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()}))),isMonotonic:this.monotonic}}}},{"../export/MetricData":270,"./types":265}],264:[function(e,t,r){arguments[4][210][0].apply(r,arguments)},{"./Drop":260,"./Histogram":261,"./LastValue":262,"./Sum":263,dup:210}],265:[function(e,t,r){arguments[4][211][0].apply(r,arguments)},{dup:211}],266:[function(e,t,r){arguments[4][212][0].apply(r,arguments)},{"../view/Aggregation":287,"./AggregationTemporality":267,dup:212}],267:[function(e,t,r){arguments[4][213][0].apply(r,arguments)},{dup:213}],268:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleMetricExporter=void 0;const n=e("@opentelemetry/core"),o=e("./AggregationSelector");class i{constructor(e){var t;this._shutdown=!1,this._temporalitySelector=null!==(t=null==e?void 0:e.temporalitySelector)&&void 0!==t?t:o.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}export(e,r){if(!this._shutdown)return i._sendMetrics(e,r);t(r,{code:n.ExportResultCode.FAILED})}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return this._temporalitySelector(e)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(e,t){for(const t of e.scopeMetrics)for(const e of t.metrics)console.dir({descriptor:e.descriptor,dataPointType:e.dataPointType,dataPoints:e.dataPoints});t({code:n.ExportResultCode.SUCCESS})}}r.ConsoleMetricExporter=i}).call(this)}).call(this,e("timers").setImmediate)},{"./AggregationSelector":266,"@opentelemetry/core":305,timers:2}],269:[function(e,t,r){arguments[4][215][0].apply(r,arguments)},{"@opentelemetry/core":305,dup:215}],270:[function(e,t,r){arguments[4][216][0].apply(r,arguments)},{dup:216}],271:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricReader=void 0;const n=e("@opentelemetry/api"),o=e("../utils"),i=e("./AggregationSelector");r.MetricReader=class{constructor(e){var t,r;this._shutdown=!1,this._aggregationSelector=null!==(t=null==e?void 0:e.aggregationSelector)&&void 0!==t?t:i.DEFAULT_AGGREGATION_SELECTOR,this._aggregationTemporalitySelector=null!==(r=null==e?void 0:e.aggregationTemporalitySelector)&&void 0!==r?r:i.DEFAULT_AGGREGATION_TEMPORALITY_SELECTOR}setMetricProducer(e){if(this._metricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._metricProducer=e,this.onInitialized()}selectAggregation(e){return this._aggregationSelector(e)}selectAggregationTemporality(e){return this._aggregationTemporalitySelector(e)}onInitialized(){}async collect(e){if(void 0===this._metricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return this._metricProducer.collect({timeoutMillis:null==e?void 0:e.timeoutMillis})}async shutdown(e){this._shutdown?n.diag.error("Cannot call shutdown twice."):(null==(null==e?void 0:e.timeoutMillis)?await this.onShutdown():await(0,o.callWithTimeout)(this.onShutdown(),e.timeoutMillis),this._shutdown=!0)}async forceFlush(e){this._shutdown?n.diag.warn("Cannot forceFlush on already shutdown MetricReader."):null!=(null==e?void 0:e.timeoutMillis)?await(0,o.callWithTimeout)(this.onForceFlush(),e.timeoutMillis):await this.onForceFlush()}}},{"../utils":286,"./AggregationSelector":266,"@opentelemetry/api":21}],272:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PeriodicExportingMetricReader=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./MetricReader"),s=e("../utils"),a=e("@opentelemetry/api");class c extends i.MetricReader{constructor(e){var t,r,n,o;if(super({aggregationSelector:null===(t=e.exporter.selectAggregation)||void 0===t?void 0:t.bind(e.exporter),aggregationTemporalitySelector:null===(r=e.exporter.selectAggregationTemporality)||void 0===r?void 0:r.bind(e.exporter)}),void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&e.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==e.exportTimeoutMillis&&void 0!==e.exportIntervalMillis&&e.exportIntervalMillis<e.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=null!==(n=e.exportIntervalMillis)&&void 0!==n?n:6e4,this._exportTimeout=null!==(o=e.exportTimeoutMillis)&&void 0!==o?o:3e4,this._exporter=e.exporter}async _runOnce(){try{await(0,s.callWithTimeout)(this._doRun(),this._exportTimeout)}catch(e){if(e instanceof s.TimeoutError)return void n.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);(0,o.globalErrorHandler)(e)}}async _doRun(){var e,t;const{resourceMetrics:r,errors:i}=await this.collect({timeoutMillis:this._exportTimeout});i.length>0&&n.diag.error("PeriodicExportingMetricReader: metrics collection errors",...i);const s=async()=>{const e=await o.internal._export(this._exporter,r);if(e.code!==o.ExportResultCode.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${e.error})`)};r.resource.asyncAttributesPending?null===(t=(e=r.resource).waitForAsyncAttributes)||void 0===t||t.call(e).then(s,(e=>a.diag.debug("Error while resolving async portion of resource: ",e))):await s()}onInitialized(){this._interval=setInterval((()=>{this._runOnce()}),this._exportInterval),(0,o.unrefTimer)(this._interval)}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this._exporter.shutdown()}}r.PeriodicExportingMetricReader=c},{"../utils":286,"./MetricReader":271,"@opentelemetry/api":21,"@opentelemetry/core":305}],273:[function(e,t,r){arguments[4][219][0].apply(r,arguments)},{"./InstrumentDescriptor":255,"./MeterProvider":258,"./export/AggregationTemporality":267,"./export/ConsoleMetricExporter":268,"./export/InMemoryMetricExporter":269,"./export/MetricData":270,"./export/MetricReader":271,"./export/PeriodicExportingMetricReader":272,"./utils":286,"./view/Aggregation":287,"./view/View":293,dup:219}],274:[function(e,t,r){arguments[4][220][0].apply(r,arguments)},{"./DeltaMetricProcessor":275,"./HashMap":276,"./MetricStorage":280,"./TemporalMetricProcessor":285,dup:220}],275:[function(e,t,r){arguments[4][221][0].apply(r,arguments)},{"./HashMap":276,dup:221}],276:[function(e,t,r){arguments[4][222][0].apply(r,arguments)},{"../utils":286,dup:222}],277:[function(e,t,r){arguments[4][223][0].apply(r,arguments)},{"../utils":286,"../view/ViewRegistry":294,"./MeterSharedState":278,dup:223}],278:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeterSharedState=void 0;const n=e("../InstrumentDescriptor"),o=e("../Meter"),i=e("../utils"),s=e("./AsyncMetricStorage"),a=e("./MetricStorageRegistry"),c=e("./MultiWritableMetricStorage"),u=e("./ObservableRegistry"),l=e("./SyncMetricStorage"),p=e("../view/AttributesProcessor");r.MeterSharedState=class{constructor(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new a.MetricStorageRegistry,this.observableRegistry=new u.ObservableRegistry,this.meter=new o.Meter(this)}registerMetricStorage(e){const t=this._registerMetricStorage(e,l.SyncMetricStorage);return 1===t.length?t[0]:new c.MultiMetricStorage(t)}registerAsyncMetricStorage(e){return this._registerMetricStorage(e,s.AsyncMetricStorage)}async collect(e,t,r){const n=await this.observableRegistry.observe(t,null==r?void 0:r.timeoutMillis),o=Array.from(this.metricStorageRegistry.getStorages(e)).map((r=>r.collect(e,this._meterProviderSharedState.metricCollectors,t))).filter(i.isNotNullish);return{scopeMetrics:{scope:this._instrumentationScope,metrics:o.filter(i.isNotNullish)},errors:n}}_registerMetricStorage(e,t){let r=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope).map((r=>{const o=(0,n.createInstrumentDescriptorWithView)(r,e),i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(null!=i)return i;const s=r.aggregation.createAggregator(o),a=new t(o,s,r.attributesProcessor);return this.metricStorageRegistry.register(a),a}));if(0===r.length){const n=this._meterProviderSharedState.selectAggregations(e.type).map((([r,n])=>{const o=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(r,e);if(null!=o)return o;const i=n.createAggregator(e),s=new t(e,i,p.AttributesProcessor.Noop());return this.metricStorageRegistry.registerForCollector(r,s),s}));r=r.concat(n)}return r}}},{"../InstrumentDescriptor":255,"../Meter":257,"../utils":286,"../view/AttributesProcessor":288,"./AsyncMetricStorage":274,"./MetricStorageRegistry":281,"./MultiWritableMetricStorage":282,"./ObservableRegistry":283,"./SyncMetricStorage":284}],279:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricCollector=void 0;const n=e("@opentelemetry/core"),o=e("../utils");r.MetricCollector=class{constructor(e,t){this._sharedState=e,this._metricReader=t}async collect(e){const t=(0,n.millisToHrTime)(Date.now()),r=Array.from(this._sharedState.meterSharedStates.values()).map((r=>r.collect(this,t,e))),i=await Promise.all(r);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:i.map((e=>e.scopeMetrics))},errors:(0,o.FlatMap)(i,(e=>e.errors))}}async forceFlush(e){await this._metricReader.forceFlush(e)}async shutdown(e){await this._metricReader.shutdown(e)}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}selectAggregation(e){return this._metricReader.selectAggregation(e)}}},{"../utils":286,"@opentelemetry/core":305}],280:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricStorage=void 0;const n=e("../InstrumentDescriptor");r.MetricStorage=class{constructor(e){this._instrumentDescriptor=e}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=(0,n.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})}}},{"../InstrumentDescriptor":255}],281:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MetricStorageRegistry=void 0;const n=e("../InstrumentDescriptor"),o=e("@opentelemetry/api"),i=e("../view/RegistrationConflicts");class s{constructor(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}static create(){return new s}getStorages(e){let t=[];for(const e of this._sharedRegistry.values())t=t.concat(e);const r=this._perCollectorRegistry.get(e);if(null!=r)for(const e of r.values())t=t.concat(e);return t}register(e){this._registerStorage(e,this._sharedRegistry)}registerForCollector(e,t){let r=this._perCollectorRegistry.get(e);null==r&&(r=new Map,this._perCollectorRegistry.set(e,r)),this._registerStorage(t,r)}findOrUpdateCompatibleStorage(e){const t=this._sharedRegistry.get(e.name);return void 0===t?null:this._findOrUpdateCompatibleStorage(e,t)}findOrUpdateCompatibleCollectorStorage(e,t){const r=this._perCollectorRegistry.get(e);if(void 0===r)return null;const n=r.get(t.name);return void 0===n?null:this._findOrUpdateCompatibleStorage(t,n)}_registerStorage(e,t){const r=e.getInstrumentDescriptor(),n=t.get(r.name);void 0!==n?n.push(e):t.set(r.name,[e])}_findOrUpdateCompatibleStorage(e,t){let r=null;for(const s of t){const t=s.getInstrumentDescriptor();(0,n.isDescriptorCompatibleWith)(t,e)?(t.description!==e.description&&(e.description.length>t.description.length&&s.updateDescription(e.description),o.diag.warn("A view or instrument with the name ",e.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",(0,i.getIncompatibilityDetails)(t,e),"The longer description will be used.\nTo resolve the conflict:",(0,i.getConflictResolutionRecipe)(t,e))),r=s):o.diag.warn("A view or instrument with the name ",e.name," has already been registered and is incompatible with another registered view.\n","Details:\n",(0,i.getIncompatibilityDetails)(t,e),"To resolve the conflict:\n",(0,i.getConflictResolutionRecipe)(t,e))}return r}}r.MetricStorageRegistry=s},{"../InstrumentDescriptor":255,"../view/RegistrationConflicts":292,"@opentelemetry/api":21}],282:[function(e,t,r){arguments[4][228][0].apply(r,arguments)},{dup:228}],283:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableRegistry=void 0;const n=e("@opentelemetry/api"),o=e("../Instruments"),i=e("../ObservableResult"),s=e("../utils");r.ObservableRegistry=class{constructor(){this._callbacks=[],this._batchCallbacks=[]}addCallback(e,t){this._findCallback(e,t)>=0||this._callbacks.push({callback:e,instrument:t})}removeCallback(e,t){const r=this._findCallback(e,t);r<0||this._callbacks.splice(r,1)}addBatchCallback(e,t){const r=new Set(t.filter(o.isObservableInstrument));if(0===r.size)return void n.diag.error("BatchObservableCallback is not associated with valid instruments",t);this._findBatchCallback(e,r)>=0||this._batchCallbacks.push({callback:e,instruments:r})}removeBatchCallback(e,t){const r=new Set(t.filter(o.isObservableInstrument)),n=this._findBatchCallback(e,r);n<0||this._batchCallbacks.splice(n,1)}async observe(e,t){const r=this._observeCallbacks(e,t),n=this._observeBatchCallbacks(e,t);return(await(0,s.PromiseAllSettled)([...r,...n])).filter(s.isPromiseAllSettledRejectionResult).map((e=>e.reason))}_observeCallbacks(e,t){return this._callbacks.map((async({callback:r,instrument:n})=>{const o=new i.ObservableResultImpl(n._descriptor);let a=Promise.resolve(r(o));null!=t&&(a=(0,s.callWithTimeout)(a,t)),await a,n._metricStorages.forEach((t=>{t.record(o._buffer,e)}))}))}_observeBatchCallbacks(e,t){return this._batchCallbacks.map((async({callback:r,instruments:n})=>{const o=new i.BatchObservableResultImpl;let a=Promise.resolve(r(o));null!=t&&(a=(0,s.callWithTimeout)(a,t)),await a,n.forEach((t=>{const r=o._buffer.get(t);null!=r&&t._metricStorages.forEach((t=>{t.record(r,e)}))}))}))}_findCallback(e,t){return this._callbacks.findIndex((r=>r.callback===e&&r.instrument===t))}_findBatchCallback(e,t){return this._batchCallbacks.findIndex((r=>r.callback===e&&(0,s.setEquals)(r.instruments,t)))}}},{"../Instruments":256,"../ObservableResult":259,"../utils":286,"@opentelemetry/api":21}],284:[function(e,t,r){arguments[4][230][0].apply(r,arguments)},{"./DeltaMetricProcessor":275,"./MetricStorage":280,"./TemporalMetricProcessor":285,dup:230}],285:[function(e,t,r){arguments[4][231][0].apply(r,arguments)},{"../export/AggregationTemporality":267,"./HashMap":276,dup:231}],286:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.binarySearchLB=r.setEquals=r.FlatMap=r.isPromiseAllSettledRejectionResult=r.PromiseAllSettled=r.callWithTimeout=r.TimeoutError=r.instrumentationScopeId=r.hashAttributes=r.isNotNullish=void 0,r.isNotNullish=function(e){return null!=e},r.hashAttributes=function(e){let t=Object.keys(e);return 0===t.length?"":(t=t.sort(),JSON.stringify(t.map((t=>[t,e[t]]))))},r.instrumentationScopeId=function(e){var t,r;return`${e.name}:${null!==(t=e.version)&&void 0!==t?t:""}:${null!==(r=e.schemaUrl)&&void 0!==r?r:""}`};class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.TimeoutError=n,r.callWithTimeout=function(e,t){let r;const o=new Promise((function(e,o){r=setTimeout((function(){o(new n("Operation timed out."))}),t)}));return Promise.race([e,o]).then((e=>(clearTimeout(r),e)),(e=>{throw clearTimeout(r),e}))},r.PromiseAllSettled=async function(e){return Promise.all(e.map((async e=>{try{return{status:"fulfilled",value:await e}}catch(e){return{status:"rejected",reason:e}}})))},r.isPromiseAllSettledRejectionResult=function(e){return"rejected"===e.status},r.FlatMap=function(e,t){const r=[];return e.forEach((e=>{r.push(...t(e))})),r},r.setEquals=function(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},r.binarySearchLB=function(e,t){let r=0,n=e.length-1;for(;n-r>1;){const o=Math.trunc((n+r)/2);e[o]<=t?r=o:n=o-1}return e[n]<=t?n:e[r]<=t?r:-1}},{}],287:[function(e,t,r){arguments[4][233][0].apply(r,arguments)},{"../InstrumentDescriptor":255,"../aggregator":264,"@opentelemetry/api":21,dup:233}],288:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FilteringAttributesProcessor=r.NoopAttributesProcessor=r.AttributesProcessor=void 0;class n{static Noop(){return i}}r.AttributesProcessor=n;class o extends n{process(e,t){return e}}r.NoopAttributesProcessor=o;r.FilteringAttributesProcessor=class extends n{constructor(e){super(),this._allowedAttributeNames=e}process(e,t){const r={};return Object.keys(e).filter((e=>this._allowedAttributeNames.includes(e))).forEach((t=>r[t]=e[t])),r}};const i=new o},{}],289:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentSelector=void 0;const n=e("./Predicate");r.InstrumentSelector=class{constructor(e){var t;this._nameFilter=new n.PatternPredicate(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"*"),this._type=null==e?void 0:e.type,this._unitFilter=new n.ExactPredicate(null==e?void 0:e.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}},{"./Predicate":291}],290:[function(e,t,r){arguments[4][236][0].apply(r,arguments)},{"./Predicate":291,dup:236}],291:[function(e,t,r){arguments[4][237][0].apply(r,arguments)},{dup:237}],292:[function(e,t,r){"use strict";function n(e,t){return`\t- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}function o(e,t){return`\t- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}function i(e,t){const r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}function s(e,t){const r={name:t.name,type:t.type,unit:t.unit},n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'\n    \t- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}\n    \t- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}Object.defineProperty(r,"__esModule",{value:!0}),r.getConflictResolutionRecipe=r.getDescriptionResolutionRecipe=r.getTypeConflictResolutionRecipe=r.getUnitConflictResolutionRecipe=r.getValueTypeConflictResolutionRecipe=r.getIncompatibilityDetails=void 0,r.getIncompatibilityDetails=function(e,t){let r="";return e.unit!==t.unit&&(r+=`\t- Unit '${e.unit}' does not match '${t.unit}'\n`),e.type!==t.type&&(r+=`\t- Type '${e.type}' does not match '${t.type}'\n`),e.valueType!==t.valueType&&(r+=`\t- Value Type '${e.valueType}' does not match '${t.valueType}'\n`),e.description!==t.description&&(r+=`\t- Description '${e.description}' does not match '${t.description}'\n`),r},r.getValueTypeConflictResolutionRecipe=n,r.getUnitConflictResolutionRecipe=o,r.getTypeConflictResolutionRecipe=i,r.getDescriptionResolutionRecipe=s,r.getConflictResolutionRecipe=function(e,t){return e.valueType!==t.valueType?n(e,t):e.unit!==t.unit?o(e,t):e.type!==t.type?i(e,t):e.description!==t.description?s(e,t):""}},{}],293:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.View=void 0;const n=e("./Predicate"),o=e("./AttributesProcessor"),i=e("./InstrumentSelector"),s=e("./MeterSelector"),a=e("./Aggregation");r.View=class{constructor(e){var t,r;if(null==(r=e).instrumentName&&null==r.instrumentType&&null==r.instrumentUnit&&null==r.meterName&&null==r.meterVersion&&null==r.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");if(null!=e.name&&(null==(null==e?void 0:e.instrumentName)||n.PatternPredicate.hasWildcard(e.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");null!=e.attributeKeys?this.attributesProcessor=new o.FilteringAttributesProcessor(e.attributeKeys):this.attributesProcessor=o.AttributesProcessor.Noop(),this.name=e.name,this.description=e.description,this.aggregation=null!==(t=e.aggregation)&&void 0!==t?t:a.Aggregation.Default(),this.instrumentSelector=new i.InstrumentSelector({name:e.instrumentName,type:e.instrumentType,unit:e.instrumentUnit}),this.meterSelector=new s.MeterSelector({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl})}}},{"./Aggregation":287,"./AttributesProcessor":288,"./InstrumentSelector":289,"./MeterSelector":290,"./Predicate":291}],294:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewRegistry=void 0;r.ViewRegistry=class{constructor(){this._registeredViews=[]}addView(e){this._registeredViews.push(e)}findViews(e,t){return this._registeredViews.filter((r=>this._matchInstrument(r.instrumentSelector,e)&&this._matchMeter(r.meterSelector,t)))}_matchInstrument(e,t){return(void 0===e.getType()||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)}_matchMeter(e,t){return e.getNameFilter().match(t.name)&&(void 0===t.version||e.getVersionFilter().match(t.version))&&(void 0===t.schemaUrl||e.getSchemaUrlFilter().match(t.schemaUrl))}}},{}],295:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],296:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{dup:56}],297:[function(e,t,r){arguments[4][102][0].apply(r,arguments)},{"../../trace/suppress-tracing":325,"../constants":296,"../utils":298,"@opentelemetry/api":21,dup:102}],298:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{"./constants":296,"@opentelemetry/api":21,dup:58}],299:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],300:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:60}],301:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./logging-error-handler":302,dup:61}],302:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:62}],303:[function(e,t,r){arguments[4][108][0].apply(r,arguments)},{"../platform":312,dup:108}],304:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],305:[function(e,t,r){arguments[4][110][0].apply(r,arguments)},{"./ExportResult":295,"./baggage/propagation/W3CBaggagePropagator":297,"./baggage/utils":298,"./common/anchored-clock":299,"./common/attributes":300,"./common/global-error-handler":301,"./common/logging-error-handler":302,"./common/time":303,"./common/types":304,"./internal/exporter":306,"./platform":312,"./propagation/composite":316,"./trace/IdGenerator":317,"./trace/TraceState":318,"./trace/W3CTraceContextPropagator":319,"./trace/rpc-metadata":320,"./trace/sampler/AlwaysOffSampler":321,"./trace/sampler/AlwaysOnSampler":322,"./trace/sampler/ParentBasedSampler":323,"./trace/sampler/TraceIdRatioBasedSampler":324,"./trace/suppress-tracing":325,"./utils/callback":326,"./utils/environment":327,"./utils/merge":329,"./utils/sampling":331,"./utils/url":332,"./utils/wrap":333,"./version":334,dup:110}],306:[function(e,t,r){arguments[4][111][0].apply(r,arguments)},{"../trace/suppress-tracing":325,"@opentelemetry/api":21,dup:111}],307:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],308:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{dup:68}],309:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../../utils/environment":327,"./globalThis":310,dup:69}],310:[function(e,t,r){arguments[4][115][0].apply(r,arguments)},{dup:115}],311:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],312:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./RandomIdGenerator":308,"./environment":309,"./globalThis":310,"./hex-to-base64":311,"./performance":313,"./sdk-info":314,"./timer-util":315,dup:72}],313:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{dup:73}],314:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"../../version":334,"@opentelemetry/semantic-conventions":357,dup:74}],315:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{dup:75}],316:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:76}],317:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],318:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"../internal/validators":307,dup:78}],319:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./TraceState":318,"./suppress-tracing":325,"@opentelemetry/api":21,dup:79}],320:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:80}],321:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:81}],322:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:82}],323:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"../../common/global-error-handler":301,"./AlwaysOffSampler":321,"./AlwaysOnSampler":322,"@opentelemetry/api":21,dup:83}],324:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:84}],325:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:85}],326:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{"./promise":330,dup:131}],327:[function(e,t,r){arguments[4][132][0].apply(r,arguments)},{"../platform/browser/globalThis":310,"./sampling":331,"@opentelemetry/api":21,_process:1,dup:132}],328:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{dup:133}],329:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./lodash.merge":328,dup:134}],330:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],331:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],332:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{dup:92}],333:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{dup:93}],334:[function(e,t,r){arguments[4][139][0].apply(r,arguments)},{dup:139}],335:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],336:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Resource=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/semantic-conventions"),i=e("@opentelemetry/core"),s=e("./platform");class a{constructor(e,t){var r;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(r=this._attributes)&&void 0!==r?r:{},this._asyncAttributesPromise=null==t?void 0:t.then((e=>(this._attributes=Object.assign({},this._attributes,e),this.asyncAttributesPending=!1,e)),(e=>(n.diag.debug("a resource's async attributes promise rejected: %s",e),this.asyncAttributesPending=!1,{})))}static empty(){return a.EMPTY}static default(){return new a({[o.SemanticResourceAttributes.SERVICE_NAME]:(0,s.defaultServiceName)(),[o.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:i.SDK_INFO[o.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],[o.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:i.SDK_INFO[o.SemanticResourceAttributes.TELEMETRY_SDK_NAME],[o.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:i.SDK_INFO[o.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]})}get attributes(){var e;return this.asyncAttributesPending&&n.diag.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(e){var t;if(!e)return this;const r=Object.assign(Object.assign({},this._syncAttributes),null!==(t=e._syncAttributes)&&void 0!==t?t:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new a(r);const n=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then((([t,r])=>{var n;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),t),null!==(n=e._syncAttributes)&&void 0!==n?n:e.attributes),r)}));return new a(r,n)}}r.Resource=a,a.EMPTY=new a({})},{"./platform":354,"@opentelemetry/api":21,"@opentelemetry/core":305,"@opentelemetry/semantic-conventions":357}],337:[function(e,t,r){arguments[4][242][0].apply(r,arguments)},{dup:242}],338:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.detectResourcesSync=r.detectResources=void 0;const n=e("./Resource"),o=e("@opentelemetry/api"),i=e("./utils");r.detectResources=async(e={})=>{const t=await Promise.all((e.detectors||[]).map((async t=>{try{const r=await t.detect(e);return o.diag.debug(`${t.constructor.name} found resource.`,r),r}catch(e){return o.diag.debug(`${t.constructor.name} failed: ${e.message}`),n.Resource.empty()}})));return s(t),t.reduce(((e,t)=>e.merge(t)),n.Resource.empty())};r.detectResourcesSync=(e={})=>{var t;const r=(null!==(t=e.detectors)&&void 0!==t?t:[]).map((t=>{try{const r=t.detect(e);let s;if((0,i.isPromiseLike)(r)){const e=async()=>(await r).attributes;s=new n.Resource({},e())}else s=r;return s.waitForAsyncAttributes?s.waitForAsyncAttributes().then((()=>o.diag.debug(`${t.constructor.name} found resource.`,s))):o.diag.debug(`${t.constructor.name} found resource.`,s),s}catch(e){return o.diag.error(`${t.constructor.name} failed: ${e.message}`),n.Resource.empty()}})),a=r.reduce(((e,t)=>e.merge(t)),n.Resource.empty());return a.waitForAsyncAttributes&&a.waitForAsyncAttributes().then((()=>{s(r)})),a};const s=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){const t=JSON.stringify(e.attributes,null,4);o.diag.verbose(t)}}))}},{"./Resource":336,"./utils":356,"@opentelemetry/api":21}],339:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.browserDetector=void 0;const n=e("..");r.browserDetector=new class{detect(e){return Promise.resolve(n.browserDetectorSync.detect(e))}}},{"..":348}],340:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.browserDetectorSync=void 0;const n=e("@opentelemetry/semantic-conventions"),o=e(".."),i=e("@opentelemetry/api");r.browserDetectorSync=new class{detect(e){if(!("undefined"!=typeof navigator))return o.Resource.empty();const t={[n.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[n.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Web Browser",[n.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:navigator.userAgent};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,t){return""===e[n.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]?(i.diag.debug("BrowserDetector failed: Unable to find required browser resources. "),o.Resource.empty()):new o.Resource(Object.assign({},e))}}},{"..":348,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":357}],341:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.envDetector=void 0;const n=e("./EnvDetectorSync");r.envDetector=new class{detect(e){return Promise.resolve(n.envDetectorSync.detect(e))}}},{"./EnvDetectorSync":342}],342:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.envDetectorSync=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions"),s=e("../Resource");r.envDetectorSync=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}detect(e){const t={},r=(0,o.getEnv)(),a=r.OTEL_RESOURCE_ATTRIBUTES,c=r.OTEL_SERVICE_NAME;if(a)try{const e=this._parseResourceAttributes(a);Object.assign(t,e)}catch(e){n.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(t[i.SemanticResourceAttributes.SERVICE_NAME]=c),new s.Resource(t)}_parseResourceAttributes(e){if(!e)return{};const t={},r=e.split(this._COMMA_SEPARATOR,-1);for(const e of r){const r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,o]=r;if(n=n.trim(),o=o.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=decodeURIComponent(o)}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isBaggageOctetString(e)}_isBaggageOctetString(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<33||44===r||59===r||92===r||r>126)return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}},{"../Resource":336,"@opentelemetry/api":21,"@opentelemetry/core":305,"@opentelemetry/semantic-conventions":357}],343:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noopDetector=r.NoopDetector=void 0;const n=e("./NoopDetectorSync");class o{detect(){return Promise.resolve(n.noopDetectorSync.detect())}}r.NoopDetector=o,r.noopDetector=new o},{"./NoopDetectorSync":344}],344:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noopDetectorSync=r.NoopDetectorSync=void 0;const n=e("../Resource");class o{detect(){return new n.Resource({})}}r.NoopDetectorSync=o,r.noopDetectorSync=new o},{"../Resource":336}],345:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetector=void 0;const n=e("./ProcessDetectorSync");r.processDetector=new class{detect(e){return Promise.resolve(n.processDetectorSync.detect(e))}}},{"./ProcessDetectorSync":346}],346:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetectorSync=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/semantic-conventions"),i=e("../Resource");r.processDetectorSync=new class{detect(e){if("object"!=typeof t)return i.Resource.empty();const r={[o.SemanticResourceAttributes.PROCESS_PID]:t.pid,[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]:t.title||"",[o.SemanticResourceAttributes.PROCESS_COMMAND]:t.argv[1]||"",[o.SemanticResourceAttributes.PROCESS_COMMAND_LINE]:t.argv.join(" ")||"",[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]:t.versions.node,[o.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"nodejs",[o.SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION]:"Node.js"};return this._getResourceAttributes(r,e)}_getResourceAttributes(e,t){return""===e[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[o.SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[o.SemanticResourceAttributes.PROCESS_COMMAND]||""===e[o.SemanticResourceAttributes.PROCESS_COMMAND_LINE]||""===e[o.SemanticResourceAttributes.PROCESS_RUNTIME_VERSION]?(n.diag.debug("ProcessDetector failed: Unable to find required process resources. "),i.Resource.empty()):new i.Resource(Object.assign({},e))}}}).call(this)}).call(this,e("_process"))},{"../Resource":336,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":357,_process:1}],347:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./BrowserDetector"),r),o(e("./EnvDetector"),r),o(e("./ProcessDetector"),r),o(e("./BrowserDetectorSync"),r),o(e("./EnvDetectorSync"),r),o(e("./ProcessDetectorSync"),r)},{"./BrowserDetector":339,"./BrowserDetectorSync":340,"./EnvDetector":341,"./EnvDetectorSync":342,"./ProcessDetector":345,"./ProcessDetectorSync":346}],348:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./Resource"),r),o(e("./IResource"),r),o(e("./platform"),r),o(e("./types"),r),o(e("./config"),r),o(e("./detectors"),r),o(e("./detect-resources"),r)},{"./IResource":335,"./Resource":336,"./config":337,"./detect-resources":338,"./detectors":347,"./platform":354,"./types":355}],349:[function(e,t,r){arguments[4][249][0].apply(r,arguments)},{"../../detectors/NoopDetector":343,dup:249}],350:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hostDetectorSync=void 0;const n=e("../../detectors/NoopDetectorSync");r.hostDetectorSync=n.noopDetectorSync},{"../../detectors/NoopDetectorSync":344}],351:[function(e,t,r){arguments[4][250][0].apply(r,arguments)},{"../../detectors/NoopDetector":343,dup:250}],352:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.osDetectorSync=void 0;const n=e("../../detectors/NoopDetectorSync");r.osDetectorSync=n.noopDetectorSync},{"../../detectors/NoopDetectorSync":344}],353:[function(e,t,r){arguments[4][251][0].apply(r,arguments)},{dup:251}],354:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./default-service-name"),r),o(e("./HostDetector"),r),o(e("./OSDetector"),r),o(e("./HostDetectorSync"),r),o(e("./OSDetectorSync"),r)},{"./HostDetector":349,"./HostDetectorSync":350,"./OSDetector":351,"./OSDetectorSync":352,"./default-service-name":353}],355:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],356:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromiseLike=void 0;r.isPromiseLike=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then},{}],357:[function(e,t,r){arguments[4][157][0].apply(r,arguments)},{"./resource":359,"./trace":361,dup:157}],358:[function(e,t,r){arguments[4][158][0].apply(r,arguments)},{dup:158}],359:[function(e,t,r){arguments[4][159][0].apply(r,arguments)},{"./SemanticResourceAttributes":358,dup:159}],360:[function(e,t,r){arguments[4][160][0].apply(r,arguments)},{dup:160}],361:[function(e,t,r){arguments[4][161][0].apply(r,arguments)},{"./SemanticAttributes":360,dup:161}],362:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BasicTracerProvider=r.ForceFlushState=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/resources"),s=e("."),a=e("./config"),c=e("./MultiSpanProcessor"),u=e("./export/NoopSpanProcessor"),l=e("./platform"),p=e("./utility");var d;!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(d=r.ForceFlushState||(r.ForceFlushState={}));class m{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;const r=(0,o.merge)({},(0,a.loadDefaultConfig)(),(0,p.reconfigureLimits)(e));this.resource=null!==(t=r.resource)&&void 0!==t?t:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});const n=this._buildExporterFromEnv();if(void 0!==n){const e=new l.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t,r){const n=`${e}@${t||""}:${(null==r?void 0:r.schemaUrl)||""}`;return this._tracers.has(n)||this._tracers.set(n,new s.Tracer({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){const e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((t=>new Promise((r=>{let n;const o=setTimeout((()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`)),n=d.timeout}),e);t.forceFlush().then((()=>{clearTimeout(o),n!==d.timeout&&(n=d.resolved,r(n))})).catch((e=>{clearTimeout(o),n=d.error,r(e)}))}))));return new Promise(((e,r)=>{Promise.all(t).then((t=>{const n=t.filter((e=>e!==d.resolved));n.length>0?r(n):e()})).catch((e=>r([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){const e=Array.from(new Set((0,o.getEnv)().OTEL_PROPAGATORS)),t=e.map((e=>{const t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);return 0===t.length?void 0:1===e.length?t[0]:new o.CompositePropagator({propagators:t})}_buildExporterFromEnv(){const e=(0,o.getEnv)().OTEL_TRACES_EXPORTER;if("none"===e)return;const t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}}r.BasicTracerProvider=m,m._registeredPropagators=new Map([["tracecontext",()=>new o.W3CTraceContextPropagator],["baggage",()=>new o.W3CBaggagePropagator]]),m._registeredExporters=new Map},{".":379,"./MultiSpanProcessor":364,"./config":370,"./export/NoopSpanProcessor":375,"./platform":382,"./utility":388,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/resources":248}],363:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],364:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MultiSpanProcessor=void 0;const n=e("@opentelemetry/core");r.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){const e=[];for(const t of this._spanProcessors)e.push(t.forceFlush());return new Promise((t=>{Promise.all(e).then((()=>{t()})).catch((e=>{(0,n.globalErrorHandler)(e||new Error("MultiSpanProcessor: forceFlush failed")),t()}))}))}onStart(e,t){for(const r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(const t of this._spanProcessors)t.onEnd(e)}shutdown(){const e=[];for(const t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}},{"@opentelemetry/core":65}],365:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r.SamplingDecision||(r.SamplingDecision={}))},{}],366:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Span=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions"),s=e("./enums");r.Span=class{constructor(e,t,r,i,s,a,c=[],u,l=o.otperformance){this.attributes={},this.links=[],this.events=[],this.status={code:n.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this._clock=l,this.name=r,this._spanContext=i,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=(0,o.timeInputToHrTime)(null!=u?u:l.now()),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(n.diag.warn(`Invalid attribute key: ${e}`),this):(0,o.isAttributeValue)(t)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=this._truncateToSize(t)),this):(n.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(const[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,t,r){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return n.diag.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(n.diag.warn("Dropping extra events."),this.events.shift()),(0,o.isTimeInput)(t)&&(void 0===r&&(r=t),t=void 0),void 0===r&&(r=this._clock.now());const i=(0,o.sanitizeAttributes)(t);return this.events.push({name:e,attributes:i,time:(0,o.timeInputToHrTime)(r)}),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e){this._isSpanEnded()?n.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=(0,o.timeInputToHrTime)(null!=e?e:this._clock.now()),this._duration=(0,o.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(n.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,t=this._clock.now()){const r={};"string"==typeof e?r[i.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?r[i.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(r[i.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(r[i.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(r[i.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),r[i.SemanticAttributes.EXCEPTION_TYPE]||r[i.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(s.ExceptionEventName,r,t):n.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&n.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substr(0,t)}_truncateToSize(e){const t=this._attributeValueLengthLimit;return t<=0?(n.diag.warn(`Attribute value limit must be positive, got ${t}`),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map((e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e)):e}}},{"./enums":371,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/semantic-conventions":490}],367:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],368:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],369:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Tracer=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./Span"),s=e("./utility"),a=e("./platform");r.Tracer=class{constructor(e,t,r){this._tracerProvider=r;const n=(0,s.mergeConfig)(t);this._sampler=n.sampler,this._generalLimits=n.generalLimits,this._spanLimits=n.spanLimits,this._idGenerator=t.idGenerator||new a.RandomIdGenerator,this.resource=r.resource,this.instrumentationLibrary=e}startSpan(e,t={},r=n.context.active()){var s,a;t.root&&(r=n.trace.deleteSpan(r));const c=n.trace.getSpan(r);if((0,o.isTracingSuppressed)(r)){n.diag.debug("Instrumentation suppressed, returning Noop Span");return n.trace.wrapSpanContext(n.INVALID_SPAN_CONTEXT)}const u=null==c?void 0:c.spanContext(),l=this._idGenerator.generateSpanId();let p,d,m;u&&n.trace.isSpanContextValid(u)?(p=u.traceId,d=u.traceState,m=u.spanId):p=this._idGenerator.generateTraceId();const h=null!==(s=t.kind)&&void 0!==s?s:n.SpanKind.INTERNAL,_=(null!==(a=t.links)&&void 0!==a?a:[]).map((e=>({context:e.context,attributes:(0,o.sanitizeAttributes)(e.attributes)}))),f=(0,o.sanitizeAttributes)(t.attributes),g=this._sampler.shouldSample(r,p,e,h,f,_),E={traceId:p,spanId:l,traceFlags:g.decision===n.SamplingDecision.RECORD_AND_SAMPLED?n.TraceFlags.SAMPLED:n.TraceFlags.NONE,traceState:d};if(g.decision===n.SamplingDecision.NOT_RECORD){n.diag.debug("Recording is off, propagating context in a non-recording span");return n.trace.wrapSpanContext(E)}const T=new i.Span(this,r,e,E,h,m,_,t.startTime),y=(0,o.sanitizeAttributes)(Object.assign(f,g.attributes));return T.setAttributes(y),T}startActiveSpan(e,t,r,o){let i,s,a;if(arguments.length<2)return;2===arguments.length?a=t:3===arguments.length?(i=t,a=r):(i=t,s=r,a=o);const c=null!=s?s:n.context.active(),u=this.startSpan(e,i,c),l=n.trace.setSpan(c,u);return n.context.with(l,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}},{"./Span":366,"./platform":382,"./utility":388,"@opentelemetry/api":21,"@opentelemetry/core":65}],370:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildSamplerFromEnv=r.loadDefaultConfig=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./sampler/AlwaysOffSampler"),s=e("./sampler/AlwaysOnSampler"),a=e("./sampler/ParentBasedSampler"),c=e("./sampler/TraceIdRatioBasedSampler"),u=(0,o.getEnv)(),l=o.TracesSamplerValues.AlwaysOn,p=1;function d(e=(0,o.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case o.TracesSamplerValues.AlwaysOn:return new s.AlwaysOnSampler;case o.TracesSamplerValues.AlwaysOff:return new i.AlwaysOffSampler;case o.TracesSamplerValues.ParentBasedAlwaysOn:return new a.ParentBasedSampler({root:new s.AlwaysOnSampler});case o.TracesSamplerValues.ParentBasedAlwaysOff:return new a.ParentBasedSampler({root:new i.AlwaysOffSampler});case o.TracesSamplerValues.TraceIdRatio:return new c.TraceIdRatioBasedSampler(m(e));case o.TracesSamplerValues.ParentBasedTraceIdRatio:return new a.ParentBasedSampler({root:new c.TraceIdRatioBasedSampler(m(e))});default:return n.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${l}".`),new s.AlwaysOnSampler}}function m(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return n.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${p}.`),p;const t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${p}.`),p):t<0||t>1?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${p}.`),p):t}r.loadDefaultConfig=function(){return{sampler:d(u),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,o.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,o.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,o.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,o.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT}}},r.buildSamplerFromEnv=d},{"./sampler/AlwaysOffSampler":383,"./sampler/AlwaysOnSampler":384,"./sampler/ParentBasedSampler":385,"./sampler/TraceIdRatioBasedSampler":386,"@opentelemetry/api":21,"@opentelemetry/core":65}],371:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExceptionEventName=void 0,r.ExceptionEventName="exception"},{}],372:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessorBase=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");r.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[];const r=(0,o.getEnv)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(n.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&n.TraceFlags.SAMPLED)&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{const r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,t)=>{const r=setTimeout((()=>{t(new Error("Timeout"))}),this._exportTimeoutMillis);n.context.with((0,o.suppressTracing)(n.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(n=>{var i;clearTimeout(r),n.code===o.ExportResultCode.SUCCESS?e():t(null!==(i=n.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{(0,o.globalErrorHandler)(e)}))}),this._scheduledDelayMillis),(0,o.unrefTimer)(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}},{"@opentelemetry/api":21,"@opentelemetry/core":65}],373:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleSpanExporter=void 0;const n=e("@opentelemetry/core");r.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,n.hrTimeToMicroseconds)(e.startTime),duration:(0,n.hrTimeToMicroseconds)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,t){for(const t of e)console.dir(this._exportInfo(t),{depth:3});if(t)return t({code:n.ExportResultCode.SUCCESS})}}},{"@opentelemetry/core":65}],374:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InMemorySpanExporter=void 0;const n=e("@opentelemetry/core");r.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,t){if(this._stopped)return t({code:n.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>t({code:n.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}},{"@opentelemetry/core":65}],375:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopSpanProcessor=void 0;r.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}},{}],376:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],377:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleSpanProcessor=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");r.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this)}forceFlush(){return Promise.resolve()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&n.TraceFlags.SAMPLED)&&o.internal._export(this._exporter,[e]).then((e=>{var t;e.code!==o.ExportResultCode.SUCCESS&&(0,o.globalErrorHandler)(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))})).catch((e=>{(0,o.globalErrorHandler)(e)}))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}},{"@opentelemetry/api":21,"@opentelemetry/core":65}],378:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],379:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./Tracer"),r),o(e("./BasicTracerProvider"),r),o(e("./platform"),r),o(e("./export/ConsoleSpanExporter"),r),o(e("./export/InMemorySpanExporter"),r),o(e("./export/ReadableSpan"),r),o(e("./export/SimpleSpanProcessor"),r),o(e("./export/SpanExporter"),r),o(e("./export/NoopSpanProcessor"),r),o(e("./sampler/AlwaysOffSampler"),r),o(e("./sampler/AlwaysOnSampler"),r),o(e("./sampler/ParentBasedSampler"),r),o(e("./sampler/TraceIdRatioBasedSampler"),r),o(e("./Sampler"),r),o(e("./Span"),r),o(e("./SpanProcessor"),r),o(e("./TimedEvent"),r),o(e("./types"),r),o(e("./IdGenerator"),r)},{"./BasicTracerProvider":362,"./IdGenerator":363,"./Sampler":365,"./Span":366,"./SpanProcessor":367,"./TimedEvent":368,"./Tracer":369,"./export/ConsoleSpanExporter":373,"./export/InMemorySpanExporter":374,"./export/NoopSpanProcessor":375,"./export/ReadableSpan":376,"./export/SimpleSpanProcessor":377,"./export/SpanExporter":378,"./platform":382,"./sampler/AlwaysOffSampler":383,"./sampler/AlwaysOnSampler":384,"./sampler/ParentBasedSampler":385,"./sampler/TraceIdRatioBasedSampler":386,"./types":387}],380:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RandomIdGenerator=void 0;r.RandomIdGenerator=class{constructor(){this.generateTraceId=o(16),this.generateSpanId=o(8)}};const n=Array(32);function o(e){return function(){for(let t=0;t<2*e;t++)n[t]=Math.floor(16*Math.random())+48,n[t]>=58&&(n[t]+=39);return String.fromCharCode.apply(null,n.slice(0,2*e))}}},{}],381:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessor=void 0;const n=e("../../../export/BatchSpanProcessorBase");class o extends n.BatchSpanProcessorBase{constructor(e,t){super(e,t),this.onInit(t)}onInit(e){!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush()},this._pageHideListener=()=>{this.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}r.BatchSpanProcessor=o},{"../../../export/BatchSpanProcessorBase":372}],382:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./export/BatchSpanProcessor"),r),o(e("./RandomIdGenerator"),r)},{"./RandomIdGenerator":380,"./export/BatchSpanProcessor":381}],383:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOffSampler=void 0;const n=e("../Sampler");r.AlwaysOffSampler=class{shouldSample(){return{decision:n.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}},{"../Sampler":365}],384:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOnSampler=void 0;const n=e("../Sampler");r.AlwaysOnSampler=class{shouldSample(){return{decision:n.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}},{"../Sampler":365}],385:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParentBasedSampler=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./AlwaysOffSampler"),s=e("./AlwaysOnSampler");r.ParentBasedSampler=class{constructor(e){var t,r,n,a;this._root=e.root,this._root||((0,o.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new s.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new s.AlwaysOnSampler,this._remoteParentNotSampled=null!==(r=e.remoteParentNotSampled)&&void 0!==r?r:new i.AlwaysOffSampler,this._localParentSampled=null!==(n=e.localParentSampled)&&void 0!==n?n:new s.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new i.AlwaysOffSampler}shouldSample(e,t,r,o,i,s){const a=n.trace.getSpanContext(e);return a&&(0,n.isSpanContextValid)(a)?a.isRemote?a.traceFlags&n.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,o,i,s):this._remoteParentNotSampled.shouldSample(e,t,r,o,i,s):a.traceFlags&n.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,t,r,o,i,s):this._localParentNotSampled.shouldSample(e,t,r,o,i,s):this._root.shouldSample(e,t,r,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}},{"./AlwaysOffSampler":383,"./AlwaysOnSampler":384,"@opentelemetry/api":21,"@opentelemetry/core":65}],386:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceIdRatioBasedSampler=void 0;const n=e("@opentelemetry/api"),o=e("../Sampler");r.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,t){return{decision:(0,n.isValidTraceId)(t)&&this._accumulate(t)<this._upperBound?o.SamplingDecision.RECORD_AND_SAMPLED:o.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){const n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}},{"../Sampler":365,"@opentelemetry/api":21}],387:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],388:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reconfigureLimits=r.mergeConfig=void 0;const n=e("./config"),o=e("@opentelemetry/core");r.mergeConfig=function(e){const t={sampler:(0,n.buildSamplerFromEnv)()},r=(0,n.loadDefaultConfig)(),o=Object.assign({},r,t,e);return o.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),o.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),o},r.reconfigureLimits=function(e){var t,r,n,i,s,a,c,u,l,p,d,m;const h=Object.assign({},e.spanLimits),_=(0,o.getEnvWithoutDefaults)();return h.attributeCountLimit=null!==(a=null!==(s=null!==(i=null!==(r=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==r?r:null===(n=e.generalLimits)||void 0===n?void 0:n.attributeCountLimit)&&void 0!==i?i:_.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:_.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:o.DEFAULT_ATTRIBUTE_COUNT_LIMIT,h.attributeValueLengthLimit=null!==(m=null!==(d=null!==(p=null!==(u=null===(c=e.spanLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==u?u:null===(l=e.generalLimits)||void 0===l?void 0:l.attributeValueLengthLimit)&&void 0!==p?p:_.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:_.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==m?m:o.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},e,{spanLimits:h})}},{"./config":370,"@opentelemetry/core":65}],389:[function(e,t,r){arguments[4][169][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:169}],390:[function(e,t,r){arguments[4][170][0].apply(r,arguments)},{"./StackContextManager":389,"@opentelemetry/sdk-trace-base":475,dup:170}],391:[function(e,t,r){arguments[4][171][0].apply(r,arguments)},{dup:171}],392:[function(e,t,r){arguments[4][172][0].apply(r,arguments)},{"./StackContextManager":389,"./WebTracerProvider":390,"./enums/PerformanceTimingNames":391,"./types":393,"./utils":394,"@opentelemetry/sdk-trace-base":475,dup:172}],393:[function(e,t,r){arguments[4][173][0].apply(r,arguments)},{"./enums/PerformanceTimingNames":391,dup:173}],394:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shouldPropagateTraceHeaders=r.getElementXPath=r.normalizeUrl=r.parseUrl=r.getResource=r.sortResources=r.addSpanNetworkEvents=r.addSpanNetworkEvent=r.hasKey=void 0;const n=e("./enums/PerformanceTimingNames"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions");let s;function a(e,t){return t in e}function c(e,t,r){if(a(r,t)&&"number"==typeof r[t])return e.addEvent(t,r[t]),e}function u(e){return e.slice().sort(((e,t)=>{const r=e[n.PerformanceTimingNames.FETCH_START],o=t[n.PerformanceTimingNames.FETCH_START];return r>o?1:r<o?-1:0}))}function l(e){if("function"==typeof URL)return new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0);const t=(s||(s=document.createElement("a")),s);return t.href=e,t}r.hasKey=a,r.addSpanNetworkEvent=c,r.addSpanNetworkEvents=function(e,t){c(e,n.PerformanceTimingNames.FETCH_START,t),c(e,n.PerformanceTimingNames.DOMAIN_LOOKUP_START,t),c(e,n.PerformanceTimingNames.DOMAIN_LOOKUP_END,t),c(e,n.PerformanceTimingNames.CONNECT_START,t),a(t,"name")&&t.name.startsWith("https:")&&c(e,n.PerformanceTimingNames.SECURE_CONNECTION_START,t),c(e,n.PerformanceTimingNames.CONNECT_END,t),c(e,n.PerformanceTimingNames.REQUEST_START,t),c(e,n.PerformanceTimingNames.RESPONSE_START,t),c(e,n.PerformanceTimingNames.RESPONSE_END,t);const r=t[n.PerformanceTimingNames.ENCODED_BODY_SIZE];void 0!==r&&e.setAttribute(i.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH,r);const o=t[n.PerformanceTimingNames.DECODED_BODY_SIZE];void 0!==o&&r!==o&&e.setAttribute(i.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,o)},r.sortResources=u,r.getResource=function(e,t,r,i,s=new WeakSet,a){const c=l(e),p=function(e,t,r,i,s,a){const c=(0,o.hrTimeToNanoseconds)(t),u=(0,o.hrTimeToNanoseconds)(r);let l=i.filter((t=>{const r=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t[n.PerformanceTimingNames.FETCH_START])),i=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t[n.PerformanceTimingNames.RESPONSE_END]));return t.initiatorType.toLowerCase()===(a||"xmlhttprequest")&&t.name===e&&r>=c&&i<=u}));l.length>0&&(l=l.filter((e=>!s.has(e))));return l}(e=c.toString(),t,r,i,s,a);if(0===p.length)return{mainRequest:void 0};if(1===p.length)return{mainRequest:p[0]};const d=u(p);if(c.origin!==location.origin&&d.length>1){let e=d[0],t=function(e,t,r){const i=(0,o.hrTimeToNanoseconds)(r),s=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(t));let a,c=e[1];const u=e.length;for(let t=1;t<u;t++){const r=e[t],u=(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(r[n.PerformanceTimingNames.FETCH_START])),l=i-(0,o.hrTimeToNanoseconds)((0,o.timeInputToHrTime)(r[n.PerformanceTimingNames.RESPONSE_END]));u>=s&&(!a||l<a)&&(a=l,c=r)}return c}(d,e[n.PerformanceTimingNames.RESPONSE_END],r);const i=e[n.PerformanceTimingNames.RESPONSE_END];return t[n.PerformanceTimingNames.FETCH_START]<i&&(t=e,e=void 0),{corsPreFlightRequest:e,mainRequest:t}}return{mainRequest:p[0]}},r.parseUrl=l,r.normalizeUrl=function(e){return l(e).href},r.getElementXPath=function e(t,r){if(t.nodeType===Node.DOCUMENT_NODE)return"/";const n=function(e,t){const r=e.nodeType,n=function(e){if(!e.parentNode)return 0;const t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);let r=Array.from(e.parentNode.childNodes);if(r=r.filter((r=>{const n=r.localName;return t.indexOf(r.nodeType)>=0&&n===e.localName})),r.length>=1)return r.indexOf(e)+1;return 0}(e);let o="";if(r===Node.ELEMENT_NODE){const r=e.getAttribute("id");if(t&&r)return`//*[@id="${r}"]`;o=e.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE)o="text()";else{if(r!==Node.COMMENT_NODE)return"";o="comment()"}if(o&&n>1)return`/${o}[${n}]`;return`/${o}`}(t,r);if(r&&n.indexOf("@id")>0)return n;let o="";return t.parentNode&&(o+=e(t.parentNode,!1)),o+=n,o},r.shouldPropagateTraceHeaders=function(e,t){let r=t||[];return("string"==typeof r||r instanceof RegExp)&&(r=[r]),l(e).origin===location.origin||r.some((t=>(0,o.urlMatches)(e,t)))}},{"./enums/PerformanceTimingNames":391,"@opentelemetry/core":405,"@opentelemetry/semantic-conventions":485}],395:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],396:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{dup:56}],397:[function(e,t,r){arguments[4][102][0].apply(r,arguments)},{"../../trace/suppress-tracing":425,"../constants":396,"../utils":398,"@opentelemetry/api":21,dup:102}],398:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{"./constants":396,"@opentelemetry/api":21,dup:58}],399:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],400:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:60}],401:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./logging-error-handler":402,dup:61}],402:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:62}],403:[function(e,t,r){arguments[4][108][0].apply(r,arguments)},{"../platform":412,dup:108}],404:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],405:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.internal=r.baggageUtils=void 0,o(e("./baggage/propagation/W3CBaggagePropagator"),r),o(e("./common/anchored-clock"),r),o(e("./common/attributes"),r),o(e("./common/global-error-handler"),r),o(e("./common/logging-error-handler"),r),o(e("./common/time"),r),o(e("./common/types"),r),o(e("./ExportResult"),r),o(e("./version"),r),r.baggageUtils=e("./baggage/utils"),o(e("./platform"),r),o(e("./propagation/composite"),r),o(e("./trace/W3CTraceContextPropagator"),r),o(e("./trace/IdGenerator"),r),o(e("./trace/rpc-metadata"),r),o(e("./trace/sampler/AlwaysOffSampler"),r),o(e("./trace/sampler/AlwaysOnSampler"),r),o(e("./trace/sampler/ParentBasedSampler"),r),o(e("./trace/sampler/TraceIdRatioBasedSampler"),r),o(e("./trace/suppress-tracing"),r),o(e("./trace/TraceState"),r),o(e("./utils/environment"),r),o(e("./utils/merge"),r),o(e("./utils/sampling"),r),o(e("./utils/timeout"),r),o(e("./utils/url"),r),o(e("./utils/wrap"),r),o(e("./utils/callback"),r),o(e("./version"),r);const i=e("./internal/exporter");r.internal={_export:i._export}},{"./ExportResult":395,"./baggage/propagation/W3CBaggagePropagator":397,"./baggage/utils":398,"./common/anchored-clock":399,"./common/attributes":400,"./common/global-error-handler":401,"./common/logging-error-handler":402,"./common/time":403,"./common/types":404,"./internal/exporter":406,"./platform":412,"./propagation/composite":416,"./trace/IdGenerator":417,"./trace/TraceState":418,"./trace/W3CTraceContextPropagator":419,"./trace/rpc-metadata":420,"./trace/sampler/AlwaysOffSampler":421,"./trace/sampler/AlwaysOnSampler":422,"./trace/sampler/ParentBasedSampler":423,"./trace/sampler/TraceIdRatioBasedSampler":424,"./trace/suppress-tracing":425,"./utils/callback":426,"./utils/environment":427,"./utils/merge":429,"./utils/sampling":431,"./utils/timeout":432,"./utils/url":433,"./utils/wrap":434,"./version":435}],406:[function(e,t,r){arguments[4][111][0].apply(r,arguments)},{"../trace/suppress-tracing":425,"@opentelemetry/api":21,dup:111}],407:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],408:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{dup:68}],409:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../../utils/environment":427,"./globalThis":410,dup:69}],410:[function(e,t,r){arguments[4][115][0].apply(r,arguments)},{dup:115}],411:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],412:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./RandomIdGenerator":408,"./environment":409,"./globalThis":410,"./hex-to-base64":411,"./performance":413,"./sdk-info":414,"./timer-util":415,dup:72}],413:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{dup:73}],414:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"../../version":435,"@opentelemetry/semantic-conventions":485,dup:74}],415:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{dup:75}],416:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:76}],417:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],418:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"../internal/validators":407,dup:78}],419:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./TraceState":418,"./suppress-tracing":425,"@opentelemetry/api":21,dup:79}],420:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:80}],421:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:81}],422:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:82}],423:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"../../common/global-error-handler":401,"./AlwaysOffSampler":421,"./AlwaysOnSampler":422,"@opentelemetry/api":21,dup:83}],424:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:84}],425:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:85}],426:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{"./promise":430,dup:131}],427:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEnvWithoutDefaults=r.parseEnvironment=r.DEFAULT_ENVIRONMENT=r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;const n=e("@opentelemetry/api"),o=e("./sampling"),i=e("../platform/browser/globalThis"),s=",",a=["OTEL_SDK_DISABLED"];function c(e){return a.indexOf(e)>-1}const u=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function l(e){return u.indexOf(e)>-1}const p=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function d(e){return p.indexOf(e)>-1}function m(e,t,r){if(void 0===r[e])return;const n=String(r[e]);t[e]="true"===n.toLowerCase()}function h(e,t,r,n=-1/0,o=1/0){if(void 0!==r[e]){const i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>o?o:i)}}function _(e,t,r,n=s){const o=r[e];"string"==typeof o&&(t[e]=o.split(n).map((e=>e.trim())))}r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,r.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128,r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128,r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128,r.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:r.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:r.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:r.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:r.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:o.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};const f={ALL:n.DiagLogLevel.ALL,VERBOSE:n.DiagLogLevel.VERBOSE,DEBUG:n.DiagLogLevel.DEBUG,INFO:n.DiagLogLevel.INFO,WARN:n.DiagLogLevel.WARN,ERROR:n.DiagLogLevel.ERROR,NONE:n.DiagLogLevel.NONE};function g(e,t,r){const n=r[e];if("string"==typeof n){const r=f[n.toUpperCase()];null!=r&&(t[e]=r)}}function E(e){const t={};for(const n in r.DEFAULT_ENVIRONMENT){const r=n;if("OTEL_LOG_LEVEL"===r)g(r,t,e);else if(c(r))m(r,t,e);else if(l(r))h(r,t,e);else if(d(r))_(r,t,e);else{const n=e[r];null!=n&&(t[r]=String(n))}}return t}r.parseEnvironment=E,r.getEnvWithoutDefaults=function(){return void 0!==t&&t&&t.env?E(t.env):E(i._globalThis)}}).call(this)}).call(this,e("_process"))},{"../platform/browser/globalThis":410,"./sampling":431,"@opentelemetry/api":21,_process:1}],428:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{dup:133}],429:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./lodash.merge":428,dup:134}],430:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],431:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],432:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.callWithTimeout=r.TimeoutError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.TimeoutError=n,r.callWithTimeout=function(e,t){let r;const o=new Promise((function(e,o){r=setTimeout((function(){o(new n("Operation timed out."))}),t)}));return Promise.race([e,o]).then((e=>(clearTimeout(r),e)),(e=>{throw clearTimeout(r),e}))}},{}],433:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{dup:92}],434:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{dup:93}],435:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.15.1"},{}],436:[function(e,t,r){arguments[4][335][0].apply(r,arguments)},{dup:335}],437:[function(e,t,r){arguments[4][336][0].apply(r,arguments)},{"./platform":455,"@opentelemetry/api":21,"@opentelemetry/core":405,"@opentelemetry/semantic-conventions":485,dup:336}],438:[function(e,t,r){arguments[4][242][0].apply(r,arguments)},{dup:242}],439:[function(e,t,r){arguments[4][338][0].apply(r,arguments)},{"./Resource":437,"./utils":457,"@opentelemetry/api":21,dup:338}],440:[function(e,t,r){arguments[4][339][0].apply(r,arguments)},{"..":447,dup:339}],441:[function(e,t,r){arguments[4][340][0].apply(r,arguments)},{"..":447,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":485,dup:340}],442:[function(e,t,r){arguments[4][341][0].apply(r,arguments)},{"./EnvDetectorSync":443,dup:341}],443:[function(e,t,r){arguments[4][342][0].apply(r,arguments)},{"../Resource":437,"@opentelemetry/api":21,"@opentelemetry/core":405,"@opentelemetry/semantic-conventions":485,dup:342}],444:[function(e,t,r){arguments[4][343][0].apply(r,arguments)},{"./NoopDetectorSync":445,dup:343}],445:[function(e,t,r){arguments[4][344][0].apply(r,arguments)},{"../Resource":437,dup:344}],446:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./BrowserDetector"),r),o(e("./EnvDetector"),r),o(e("./BrowserDetectorSync"),r),o(e("./EnvDetectorSync"),r)},{"./BrowserDetector":440,"./BrowserDetectorSync":441,"./EnvDetector":442,"./EnvDetectorSync":443}],447:[function(e,t,r){arguments[4][348][0].apply(r,arguments)},{"./IResource":436,"./Resource":437,"./config":438,"./detect-resources":439,"./detectors":446,"./platform":455,"./types":456,dup:348}],448:[function(e,t,r){arguments[4][249][0].apply(r,arguments)},{"../../detectors/NoopDetector":444,dup:249}],449:[function(e,t,r){arguments[4][350][0].apply(r,arguments)},{"../../detectors/NoopDetectorSync":445,dup:350}],450:[function(e,t,r){arguments[4][250][0].apply(r,arguments)},{"../../detectors/NoopDetector":444,dup:250}],451:[function(e,t,r){arguments[4][352][0].apply(r,arguments)},{"../../detectors/NoopDetectorSync":445,dup:352}],452:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetector=void 0;const n=e("../../detectors/NoopDetector");r.processDetector=n.noopDetector},{"../../detectors/NoopDetector":444}],453:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetectorSync=void 0;const n=e("../../detectors/NoopDetector");r.processDetectorSync=n.noopDetector},{"../../detectors/NoopDetector":444}],454:[function(e,t,r){arguments[4][251][0].apply(r,arguments)},{dup:251}],455:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),o(e("./default-service-name"),r),o(e("./HostDetector"),r),o(e("./OSDetector"),r),o(e("./HostDetectorSync"),r),o(e("./OSDetectorSync"),r),o(e("./ProcessDetector"),r),o(e("./ProcessDetectorSync"),r)},{"./HostDetector":448,"./HostDetectorSync":449,"./OSDetector":450,"./OSDetectorSync":451,"./ProcessDetector":452,"./ProcessDetectorSync":453,"./default-service-name":454}],456:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],457:[function(e,t,r){arguments[4][356][0].apply(r,arguments)},{dup:356}],458:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BasicTracerProvider=r.ForceFlushState=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/resources"),s=e("."),a=e("./config"),c=e("./MultiSpanProcessor"),u=e("./export/NoopSpanProcessor"),l=e("./platform"),p=e("./utility");var d;!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(d=r.ForceFlushState||(r.ForceFlushState={}));class m{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;const r=(0,o.merge)({},(0,a.loadDefaultConfig)(),(0,p.reconfigureLimits)(e));this.resource=null!==(t=r.resource)&&void 0!==t?t:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});const n=this._buildExporterFromEnv();if(void 0!==n){const e=new l.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t,r){const n=`${e}@${t||""}:${(null==r?void 0:r.schemaUrl)||""}`;return this._tracers.has(n)||this._tracers.set(n,new s.Tracer({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){const e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((t=>new Promise((r=>{let n;const o=setTimeout((()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`)),n=d.timeout}),e);t.forceFlush().then((()=>{clearTimeout(o),n!==d.timeout&&(n=d.resolved,r(n))})).catch((e=>{clearTimeout(o),n=d.error,r(e)}))}))));return new Promise(((e,r)=>{Promise.all(t).then((t=>{const n=t.filter((e=>e!==d.resolved));n.length>0?r(n):e()})).catch((e=>r([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){const e=Array.from(new Set((0,o.getEnv)().OTEL_PROPAGATORS)),t=e.map((e=>{const t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);return 0===t.length?void 0:1===e.length?t[0]:new o.CompositePropagator({propagators:t})}_buildExporterFromEnv(){const e=(0,o.getEnv)().OTEL_TRACES_EXPORTER;if("none"===e||""===e)return;const t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}}r.BasicTracerProvider=m,m._registeredPropagators=new Map([["tracecontext",()=>new o.W3CTraceContextPropagator],["baggage",()=>new o.W3CBaggagePropagator]]),m._registeredExporters=new Map},{".":475,"./MultiSpanProcessor":460,"./config":466,"./export/NoopSpanProcessor":471,"./platform":478,"./utility":484,"@opentelemetry/api":21,"@opentelemetry/core":405,"@opentelemetry/resources":447}],459:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],460:[function(e,t,r){arguments[4][364][0].apply(r,arguments)},{"@opentelemetry/core":405,dup:364}],461:[function(e,t,r){arguments[4][365][0].apply(r,arguments)},{dup:365}],462:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Span=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/semantic-conventions"),s=e("./enums");r.Span=class{constructor(e,t,r,i,s,a,c=[],u,l){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:n.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=i,this.parentSpanId=a,this.kind=s,this.links=c;const p=Date.now();this._performanceStartTime=o.otperformance.now(),this._performanceOffset=p-(this._performanceStartTime+(0,o.getTimeOrigin)()),this._startTimeProvided=null!=u,this.startTime=this._getTime(null!=u?u:p),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}spanContext(){return this._spanContext}setAttribute(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(n.diag.warn(`Invalid attribute key: ${e}`),this):(0,o.isAttributeValue)(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(n.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(const[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,t,r){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return n.diag.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(n.diag.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,o.isTimeInput)(t)&&((0,o.isTimeInput)(r)||(r=t),t=void 0);const i=(0,o.sanitizeAttributes)(t);return this.events.push({name:e,attributes:i,time:this._getTime(r),droppedAttributesCount:0}),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e){this._isSpanEnded()?n.diag.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(e),this._duration=(0,o.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(n.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this))}_getTime(e){if("number"==typeof e&&e<o.otperformance.now())return(0,o.hrTime)(e+this._performanceOffset);if("number"==typeof e)return(0,o.millisToHrTime)(e);if(e instanceof Date)return(0,o.millisToHrTime)(e.getTime());if((0,o.isTimeInputHrTime)(e))return e;if(this._startTimeProvided)return(0,o.millisToHrTime)(Date.now());const t=o.otperformance.now()-this._performanceStartTime;return(0,o.addHrTimes)(this.startTime,(0,o.millisToHrTime)(t))}isRecording(){return!1===this._ended}recordException(e,t){const r={};"string"==typeof e?r[i.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?r[i.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(r[i.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(r[i.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(r[i.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),r[i.SemanticAttributes.EXCEPTION_TYPE]||r[i.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(s.ExceptionEventName,r,t):n.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){return this._ended&&n.diag.warn(`Can not execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),this._ended}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substr(0,t)}_truncateToSize(e){const t=this._attributeValueLengthLimit;return t<=0?(n.diag.warn(`Attribute value limit must be positive, got ${t}`),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map((e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e)):e}}},{"./enums":467,"@opentelemetry/api":21,"@opentelemetry/core":405,"@opentelemetry/semantic-conventions":485}],463:[function(e,t,r){arguments[4][367][0].apply(r,arguments)},{dup:367}],464:[function(e,t,r){arguments[4][368][0].apply(r,arguments)},{dup:368}],465:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Tracer=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./Span"),s=e("./utility"),a=e("./platform");r.Tracer=class{constructor(e,t,r){this._tracerProvider=r;const n=(0,s.mergeConfig)(t);this._sampler=n.sampler,this._generalLimits=n.generalLimits,this._spanLimits=n.spanLimits,this._idGenerator=t.idGenerator||new a.RandomIdGenerator,this.resource=r.resource,this.instrumentationLibrary=e}startSpan(e,t={},r=n.context.active()){var s,a,c;t.root&&(r=n.trace.deleteSpan(r));const u=n.trace.getSpan(r);if((0,o.isTracingSuppressed)(r)){n.diag.debug("Instrumentation suppressed, returning Noop Span");return n.trace.wrapSpanContext(n.INVALID_SPAN_CONTEXT)}const l=null==u?void 0:u.spanContext(),p=this._idGenerator.generateSpanId();let d,m,h;l&&n.trace.isSpanContextValid(l)?(d=l.traceId,m=l.traceState,h=l.spanId):d=this._idGenerator.generateTraceId();const _=null!==(s=t.kind)&&void 0!==s?s:n.SpanKind.INTERNAL,f=(null!==(a=t.links)&&void 0!==a?a:[]).map((e=>({context:e.context,attributes:(0,o.sanitizeAttributes)(e.attributes)}))),g=(0,o.sanitizeAttributes)(t.attributes),E=this._sampler.shouldSample(r,d,e,_,g,f);m=null!==(c=E.traceState)&&void 0!==c?c:m;const T={traceId:d,spanId:p,traceFlags:E.decision===n.SamplingDecision.RECORD_AND_SAMPLED?n.TraceFlags.SAMPLED:n.TraceFlags.NONE,traceState:m};if(E.decision===n.SamplingDecision.NOT_RECORD){n.diag.debug("Recording is off, propagating context in a non-recording span");return n.trace.wrapSpanContext(T)}const y=new i.Span(this,r,e,T,_,h,f,t.startTime),S=(0,o.sanitizeAttributes)(Object.assign(g,E.attributes));return y.setAttributes(S),y}startActiveSpan(e,t,r,o){let i,s,a;if(arguments.length<2)return;2===arguments.length?a=t:3===arguments.length?(i=t,a=r):(i=t,s=r,a=o);const c=null!=s?s:n.context.active(),u=this.startSpan(e,i,c),l=n.trace.setSpan(c,u);return n.context.with(l,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}},{"./Span":462,"./platform":478,"./utility":484,"@opentelemetry/api":21,"@opentelemetry/core":405}],466:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildSamplerFromEnv=r.loadDefaultConfig=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("./sampler/AlwaysOffSampler"),s=e("./sampler/AlwaysOnSampler"),a=e("./sampler/ParentBasedSampler"),c=e("./sampler/TraceIdRatioBasedSampler"),u=(0,o.getEnv)(),l=o.TracesSamplerValues.AlwaysOn,p=1;function d(e=(0,o.getEnv)()){switch(e.OTEL_TRACES_SAMPLER){case o.TracesSamplerValues.AlwaysOn:return new s.AlwaysOnSampler;case o.TracesSamplerValues.AlwaysOff:return new i.AlwaysOffSampler;case o.TracesSamplerValues.ParentBasedAlwaysOn:return new a.ParentBasedSampler({root:new s.AlwaysOnSampler});case o.TracesSamplerValues.ParentBasedAlwaysOff:return new a.ParentBasedSampler({root:new i.AlwaysOffSampler});case o.TracesSamplerValues.TraceIdRatio:return new c.TraceIdRatioBasedSampler(m(e));case o.TracesSamplerValues.ParentBasedTraceIdRatio:return new a.ParentBasedSampler({root:new c.TraceIdRatioBasedSampler(m(e))});default:return n.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${l}".`),new s.AlwaysOnSampler}}function m(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return n.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${p}.`),p;const t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${p}.`),p):t<0||t>1?(n.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${p}.`),p):t}r.loadDefaultConfig=function(){return{sampler:d(u),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,o.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,o.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,o.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,o.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,o.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}},r.buildSamplerFromEnv=d},{"./sampler/AlwaysOffSampler":479,"./sampler/AlwaysOnSampler":480,"./sampler/ParentBasedSampler":481,"./sampler/TraceIdRatioBasedSampler":482,"@opentelemetry/api":21,"@opentelemetry/core":405}],467:[function(e,t,r){arguments[4][371][0].apply(r,arguments)},{dup:371}],468:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessorBase=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");r.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._droppedSpansCount=0;const r=(0,o.getEnv)();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(n.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&n.TraceFlags.SAMPLED)&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&n.diag.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(n.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise(((e,t)=>{const r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,t)=>{const r=setTimeout((()=>{t(new Error("Timeout"))}),this._exportTimeoutMillis);n.context.with((0,o.suppressTracing)(n.context.active()),(()=>{const n=this._finishedSpans.splice(0,this._maxExportBatchSize),i=()=>this._exporter.export(n,(n=>{var i;clearTimeout(r),n.code===o.ExportResultCode.SUCCESS?e():t(null!==(i=n.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))})),s=n.map((e=>e.resource)).filter((e=>e.asyncAttributesPending));0===s.length?i():Promise.all(s.map((e=>{var t;return null===(t=e.waitForAsyncAttributes)||void 0===t?void 0:t.call(e)}))).then(i,(e=>{(0,o.globalErrorHandler)(e),t(e)}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{(0,o.globalErrorHandler)(e)}))}),this._scheduledDelayMillis),(0,o.unrefTimer)(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}},{"@opentelemetry/api":21,"@opentelemetry/core":405}],469:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleSpanExporter=void 0;const n=e("@opentelemetry/core");r.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),this.forceFlush()}forceFlush(){return Promise.resolve()}_exportInfo(e){var t;return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:null===(t=e.spanContext().traceState)||void 0===t?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:(0,n.hrTimeToMicroseconds)(e.startTime),duration:(0,n.hrTimeToMicroseconds)(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}}_sendSpans(e,t){for(const t of e)console.dir(this._exportInfo(t),{depth:3});if(t)return t({code:n.ExportResultCode.SUCCESS})}}},{"@opentelemetry/core":405}],470:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InMemorySpanExporter=void 0;const n=e("@opentelemetry/core");r.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,t){if(this._stopped)return t({code:n.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>t({code:n.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()}forceFlush(){return Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}},{"@opentelemetry/core":405}],471:[function(e,t,r){arguments[4][375][0].apply(r,arguments)},{dup:375}],472:[function(e,t,r){arguments[4][376][0].apply(r,arguments)},{dup:376}],473:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleSpanProcessor=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core");r.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._shutdownOnce=new o.BindOnceFuture(this._shutdown,this),this._unresolvedExports=new Set}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(e,t){}onEnd(e){var t,r;if(this._shutdownOnce.isCalled)return;if(0==(e.spanContext().traceFlags&n.TraceFlags.SAMPLED))return;const i=()=>o.internal._export(this._exporter,[e]).then((e=>{var t;e.code!==o.ExportResultCode.SUCCESS&&(0,o.globalErrorHandler)(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))})).catch((e=>{(0,o.globalErrorHandler)(e)}));if(e.resource.asyncAttributesPending){const n=null===(r=(t=e.resource).waitForAsyncAttributes)||void 0===r?void 0:r.call(t).then((()=>(null!=n&&this._unresolvedExports.delete(n),i())),(e=>(0,o.globalErrorHandler)(e)));null!=n&&this._unresolvedExports.add(n)}else i()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}},{"@opentelemetry/api":21,"@opentelemetry/core":405}],474:[function(e,t,r){arguments[4][378][0].apply(r,arguments)},{dup:378}],475:[function(e,t,r){arguments[4][379][0].apply(r,arguments)},{"./BasicTracerProvider":458,"./IdGenerator":459,"./Sampler":461,"./Span":462,"./SpanProcessor":463,"./TimedEvent":464,"./Tracer":465,"./export/ConsoleSpanExporter":469,"./export/InMemorySpanExporter":470,"./export/NoopSpanProcessor":471,"./export/ReadableSpan":472,"./export/SimpleSpanProcessor":473,"./export/SpanExporter":474,"./platform":478,"./sampler/AlwaysOffSampler":479,"./sampler/AlwaysOnSampler":480,"./sampler/ParentBasedSampler":481,"./sampler/TraceIdRatioBasedSampler":482,"./types":483,dup:379}],476:[function(e,t,r){arguments[4][380][0].apply(r,arguments)},{dup:380}],477:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessor=void 0;const n=e("../../../export/BatchSpanProcessorBase");class o extends n.BatchSpanProcessorBase{constructor(e,t){super(e,t),this.onInit(t)}onInit(e){!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush()},this._pageHideListener=()=>{this.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}r.BatchSpanProcessor=o},{"../../../export/BatchSpanProcessorBase":468}],478:[function(e,t,r){arguments[4][382][0].apply(r,arguments)},{"./RandomIdGenerator":476,"./export/BatchSpanProcessor":477,dup:382}],479:[function(e,t,r){arguments[4][383][0].apply(r,arguments)},{"../Sampler":461,dup:383}],480:[function(e,t,r){arguments[4][384][0].apply(r,arguments)},{"../Sampler":461,dup:384}],481:[function(e,t,r){arguments[4][385][0].apply(r,arguments)},{"./AlwaysOffSampler":479,"./AlwaysOnSampler":480,"@opentelemetry/api":21,"@opentelemetry/core":405,dup:385}],482:[function(e,t,r){arguments[4][386][0].apply(r,arguments)},{"../Sampler":461,"@opentelemetry/api":21,dup:386}],483:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],484:[function(e,t,r){arguments[4][388][0].apply(r,arguments)},{"./config":466,"@opentelemetry/core":405,dup:388}],485:[function(e,t,r){arguments[4][157][0].apply(r,arguments)},{"./resource":487,"./trace":489,dup:157}],486:[function(e,t,r){arguments[4][158][0].apply(r,arguments)},{dup:158}],487:[function(e,t,r){arguments[4][159][0].apply(r,arguments)},{"./SemanticResourceAttributes":486,dup:159}],488:[function(e,t,r){arguments[4][160][0].apply(r,arguments)},{dup:160}],489:[function(e,t,r){arguments[4][161][0].apply(r,arguments)},{"./SemanticAttributes":488,dup:161}],490:[function(e,t,r){arguments[4][157][0].apply(r,arguments)},{"./resource":492,"./trace":494,dup:157}],491:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetrySdkLanguageValues=r.OsTypeValues=r.HostArchValues=r.AwsEcsLaunchtypeValues=r.CloudPlatformValues=r.CloudProviderValues=r.SemanticResourceAttributes=void 0,r.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},r.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},r.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},r.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"},r.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},r.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},r.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}},{}],492:[function(e,t,r){arguments[4][159][0].apply(r,arguments)},{"./SemanticResourceAttributes":491,dup:159}],493:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MessageTypeValues=r.RpcGrpcStatusCodeValues=r.MessagingOperationValues=r.MessagingDestinationKindValues=r.HttpFlavorValues=r.NetHostConnectionSubtypeValues=r.NetHostConnectionTypeValues=r.NetTransportValues=r.FaasInvokedProviderValues=r.FaasDocumentOperationValues=r.FaasTriggerValues=r.DbCassandraConsistencyLevelValues=r.DbSystemValues=r.SemanticAttributes=void 0,r.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},r.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},r.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},r.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},r.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"},r.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},r.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},r.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},r.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},r.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},r.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"},r.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"},r.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},r.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}},{}],494:[function(e,t,r){arguments[4][161][0].apply(r,arguments)},{"./SemanticAttributes":493,dup:161}],495:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AttributeNames=void 0,function(e){e.DOCUMENT_LOAD="documentLoad",e.DOCUMENT_FETCH="documentFetch",e.RESOURCE_FETCH="resourceFetch"}(r.AttributeNames||(r.AttributeNames={}))},{}],496:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EventNames=void 0,function(e){e.FIRST_PAINT="firstPaint",e.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"}(r.EventNames||(r.EventNames={}))},{}],497:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./instrumentation"),r),(0,n.__exportStar)(e("./enums/AttributeNames"),r),(0,n.__exportStar)(e("./types"),r)},{"./enums/AttributeNames":495,"./instrumentation":498,"./types":499,tslib:625}],498:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DocumentLoadInstrumentation=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/core"),i=e("@opentelemetry/sdk-trace-web"),s=e("@opentelemetry/instrumentation"),a=e("@opentelemetry/semantic-conventions"),c=e("./utils");class u extends s.InstrumentationBase{constructor(e={}){super("@middleware-labs/instrumentation-document-load","0.1",e),this.component="document-load",this.version="1",this.moduleName=this.component}init(){}_onDocumentLoaded(){window.setTimeout((()=>{this._collectPerformance()}))}_addResourcesSpans(e){var t,r;const n=null===(r=(t=o.otperformance).getEntriesByType)||void 0===r?void 0:r.call(t,"resource");n&&n.forEach((t=>{this._initResourceSpan(t,e)}))}_collectPerformance(){const e=Array.from(document.getElementsByTagName("meta")).find((e=>e.getAttribute("name")===o.TRACE_PARENT_HEADER)),t=(0,c.getPerformanceNavigationEntries)(),r=e&&e.content||"";n.context.with(n.propagation.extract(n.ROOT_CONTEXT,{traceparent:r}),(()=>{var e;const r=this._startSpan("document load "+location.href,i.PerformanceTimingNames.FETCH_START,t);r&&(r.setAttribute("event.type","load"),n.context.with(n.trace.setSpan(n.context.active(),r),(()=>{const e=this._startSpan("document fetch "+location.href,i.PerformanceTimingNames.FETCH_START,t);e&&(e.setAttribute(a.SemanticAttributes.HTTP_URL,location.href),e.setAttribute("event.type","fetch"),n.context.with(n.trace.setSpan(n.context.active(),e),(()=>{var r;(0,i.addSpanNetworkEvents)(e,t),this._addCustomAttributesOnSpan(e,null===(r=this._getConfig().applyCustomAttributesOnSpan)||void 0===r?void 0:r.documentFetch),this._endSpan(e,i.PerformanceTimingNames.RESPONSE_END,t)})))})),r.setAttribute(a.SemanticAttributes.HTTP_URL,location.href),r.setAttribute(a.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent),this._addResourcesSpans(r),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.FETCH_START,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.UNLOAD_EVENT_START,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.UNLOAD_EVENT_END,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.DOM_INTERACTIVE,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.DOM_CONTENT_LOADED_EVENT_START,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.DOM_CONTENT_LOADED_EVENT_END,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.DOM_COMPLETE,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.LOAD_EVENT_START,t),(0,i.addSpanNetworkEvent)(r,i.PerformanceTimingNames.LOAD_EVENT_END,t),(0,c.addSpanPerformancePaintEvents)(r),this._addCustomAttributesOnSpan(r,null===(e=this._getConfig().applyCustomAttributesOnSpan)||void 0===e?void 0:e.documentLoad),this._endSpan(r,i.PerformanceTimingNames.LOAD_EVENT_END,t))}))}_endSpan(e,t,r){e&&((0,i.hasKey)(r,t)?e.end(r[t]):e.end())}_initResourceSpan(e,t){var r;const n=this._startSpan("resource fetch"+e.name,i.PerformanceTimingNames.FETCH_START,e,t);n&&(n.setAttribute(a.SemanticAttributes.HTTP_URL,e.name),(0,i.addSpanNetworkEvents)(n,e),this._addCustomAttributesOnResourceSpan(n,e,null===(r=this._getConfig().applyCustomAttributesOnSpan)||void 0===r?void 0:r.resourceFetch),this._endSpan(n,i.PerformanceTimingNames.RESPONSE_END,e))}_startSpan(e,t,r,o){if((0,i.hasKey)(r,t)&&"number"==typeof r[t]){return this.tracer.startSpan(e,{startTime:r[t]},o?n.trace.setSpan(n.context.active(),o):void 0)}}_waitForPageLoad(){"complete"===window.document.readyState?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))}_getConfig(){return this._config}_addCustomAttributesOnSpan(e,t){t&&(0,s.safeExecuteInTheMiddle)((()=>t(e)),(e=>{e&&this._diag.error("addCustomAttributesOnSpan",e)}),!0)}_addCustomAttributesOnResourceSpan(e,t,r){r&&(0,s.safeExecuteInTheMiddle)((()=>r(e,t)),(e=>{e&&this._diag.error("addCustomAttributesOnResourceSpan",e)}),!0)}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}}r.DocumentLoadInstrumentation=u},{"./utils":500,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/instrumentation":503,"@opentelemetry/sdk-trace-web":392,"@opentelemetry/semantic-conventions":490}],499:[function(e,t,r){arguments[4][152][0].apply(r,arguments)},{dup:152}],500:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addSpanPerformancePaintEvents=r.getPerformanceNavigationEntries=void 0;const n=e("@opentelemetry/core"),o=e("@opentelemetry/sdk-trace-web"),i=e("./enums/EventNames");r.getPerformanceNavigationEntries=()=>{var e,t;const r={},i=null===(t=(e=n.otperformance).getEntriesByType)||void 0===t?void 0:t.call(e,"navigation")[0];if(i){Object.values(o.PerformanceTimingNames).forEach((e=>{if((0,o.hasKey)(i,e)){const t=i[e];"number"==typeof t&&(r[e]=t)}}))}else{const e=n.otperformance.timing;if(e){Object.values(o.PerformanceTimingNames).forEach((t=>{if((0,o.hasKey)(e,t)){const n=e[t];"number"==typeof n&&(r[t]=n)}}))}}return r};const s={"first-paint":i.EventNames.FIRST_PAINT,"first-contentful-paint":i.EventNames.FIRST_CONTENTFUL_PAINT};r.addSpanPerformancePaintEvents=e=>{var t,r;const i=null===(r=(t=n.otperformance).getEntriesByType)||void 0===r?void 0:r.call(t,"paint");i&&i.forEach((({name:t,startTime:r})=>{(0,o.hasKey)(s,t)&&e.addEvent(s[t],r)}))}},{"./enums/EventNames":496,"@opentelemetry/core":65,"@opentelemetry/sdk-trace-web":392}],501:[function(e,t,r){arguments[4][175][0].apply(r,arguments)},{"./autoLoaderUtils":502,"@opentelemetry/api":21,dup:175}],502:[function(e,t,r){arguments[4][176][0].apply(r,arguments)},{dup:176}],503:[function(e,t,r){arguments[4][177][0].apply(r,arguments)},{"./autoLoader":501,"./platform/index":505,"./types":507,"./types_internal":508,"./utils":509,dup:177}],504:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentationAbstract=void 0;const n=e("@opentelemetry/api"),o=e("shimmer");r.InstrumentationAbstract=class{constructor(e,t,r={}){this.instrumentationName=e,this.instrumentationVersion=t,this._wrap=o.wrap,this._unwrap=o.unwrap,this._massWrap=o.massWrap,this._massUnwrap=o.massUnwrap,this._config=Object.assign({enabled:!0},r),this._diag=n.diag.createComponentLogger({namespace:e}),this._tracer=n.trace.getTracer(e,t),this._meter=n.metrics.getMeter(e,t),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e={}){this._config=Object.assign({},e)}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}},{"@opentelemetry/api":21,shimmer:624}],505:[function(e,t,r){arguments[4][179][0].apply(r,arguments)},{"./instrumentation":506,dup:179}],506:[function(e,t,r){arguments[4][180][0].apply(r,arguments)},{"../../instrumentation":504,dup:180}],507:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],508:[function(e,t,r){arguments[4][182][0].apply(r,arguments)},{dup:182}],509:[function(e,t,r){arguments[4][183][0].apply(r,arguments)},{dup:183}],510:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AttributeNames=void 0,function(e){e.HTTP_STATUS_TEXT="http.status_text"}(r.AttributeNames||(r.AttributeNames={}))},{}],511:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EventNames=void 0,function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"}(r.EventNames||(r.EventNames={}))},{}],512:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(0,e("tslib").__exportStar)(e("./xhr"),r)},{"./xhr":513,tslib:625}],513:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.XMLHttpRequestInstrumentation=void 0;const n=e("@opentelemetry/api"),o=e("@opentelemetry/instrumentation"),i=e("@opentelemetry/core"),s=e("@opentelemetry/semantic-conventions"),a=e("@opentelemetry/sdk-trace-web"),c=e("./enums/EventNames"),u=e("./enums/AttributeNames");class l extends o.InstrumentationBase{constructor(e){super("middleware.io-instrumentation-xml-http-request","0.1",e),this.component="xml-http-request",this.moduleName=this.component,this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}init(){}_getConfig(){return this._config}_addHeaders(e,t){const r=(0,a.parseUrl)(t).href;if(!(0,a.shouldPropagateTraceHeaders)(r,this._getConfig().propagateTraceHeaderCorsUrls)){const e={};return n.propagation.inject(n.context.active(),e),void(Object.keys(e).length>0&&this._diag.debug("headers inject skipped due to CORS policy"))}const o={};n.propagation.inject(n.context.active(),o),Object.keys(o).forEach((t=>{e.setRequestHeader(t,String(o[t]))}))}_addChildSpan(e,t){n.context.with(n.trace.setSpan(n.context.active(),e),(()=>{const e=this.tracer.startSpan("CORS Preflight",{startTime:t[a.PerformanceTimingNames.FETCH_START]});(0,a.addSpanNetworkEvents)(e,t),e.end(t[a.PerformanceTimingNames.RESPONSE_END])}))}_addFinalSpanAttributes(e,t,r){if("string"==typeof r){const n=(0,a.parseUrl)(r);void 0!==t.status&&e.setAttribute(s.SemanticAttributes.HTTP_STATUS_CODE,t.status),void 0!==t.statusText&&e.setAttribute(u.AttributeNames.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(s.SemanticAttributes.HTTP_HOST,n.host),e.setAttribute(s.SemanticAttributes.HTTP_SCHEME,n.protocol.replace(":","")),e.setAttribute(s.SemanticAttributes.HTTP_USER_AGENT,navigator.userAgent)}}_applyAttributesAfterXHR(e,t){const r=this._getConfig().applyCustomAttributesOnSpan;"function"==typeof r&&(0,o.safeExecuteInTheMiddle)((()=>r(e,t)),(e=>{e&&this._diag.error("applyCustomAttributesOnSpan",e)}),!0)}_addResourceObserver(e,t){const r=this._xhrMem.get(e);r&&"function"==typeof PerformanceObserver&&"function"==typeof PerformanceResourceTiming&&(r.createdResources={observer:new PerformanceObserver((e=>{const n=e.getEntries(),o=(0,a.parseUrl)(t);n.forEach((e=>{"xmlhttprequest"===e.initiatorType&&e.name===o.href&&r.createdResources&&r.createdResources.entries.push(e)}))})),entries:[]},r.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){0===this._tasksCount&&this._getConfig().clearTimingResources&&(i.otperformance.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(e,t,r,n,o){if(!(r&&n&&o&&e.createdResources))return;let s=e.createdResources.entries;s&&s.length||(s=i.otperformance.getEntriesByType("resource"));const c=(0,a.getResource)((0,a.parseUrl)(r).href,n,o,s,this._usedResources);if(c.mainRequest){const e=c.mainRequest;this._markResourceAsUsed(e);const r=c.corsPreFlightRequest;r&&(this._addChildSpan(t,r),this._markResourceAsUsed(r)),(0,a.addSpanNetworkEvents)(t,e)}}_cleanPreviousSpanInformation(e){const t=this._xhrMem.get(e);if(t){const r=t.callbackToRemoveEvents;r&&r(),this._xhrMem.delete(e)}}_createSpan(e,t,r){if((0,i.isUrlIgnored)(t,this._getConfig().ignoreUrls))return void this._diag.debug("ignoring span as url matches ignored url");const o=r.toUpperCase()+" "+(0,a.parseUrl)(t).toString(),u=this.tracer.startSpan(o,{kind:n.SpanKind.CLIENT,attributes:{[s.SemanticAttributes.HTTP_METHOD]:r,[s.SemanticAttributes.HTTP_URL]:(0,a.parseUrl)(t).toString()}});return u.addEvent(c.EventNames.METHOD_OPEN),this._cleanPreviousSpanInformation(e),this._xhrMem.set(e,{span:u,spanUrl:t}),u}_markResourceAsUsed(e){this._usedResources.add(e)}_patchOpen(){return e=>{const t=this;return function(...r){const n=r[0],o=r[1];return t._createSpan(this,o,n),e.apply(this,r)}}}_patchSend(){const e=this;function t(t,r){const n=e._xhrMem.get(r);if(!n)return;n.status=r.status,n.statusText=r.statusText,e._xhrMem.delete(r),n.span&&e._applyAttributesAfterXHR(n.span,r);const o=(0,i.hrTime)(),s=Date.now();setTimeout((()=>{!function(t,r,n,o){const i=r.callbackToRemoveEvents;"function"==typeof i&&i();const{span:s,spanUrl:a,sendStartTime:c}=r;s&&(e._findResourceAndAddNetworkEvents(r,s,a,c,n),s.addEvent(t,o),e._addFinalSpanAttributes(s,r,a),s.end(o),e._tasksCount--),e._clearResources()}(t,n,o,s)}),300)}function r(){t(c.EventNames.EVENT_ERROR,this)}function o(){t(c.EventNames.EVENT_ABORT,this)}function s(){t(c.EventNames.EVENT_TIMEOUT,this)}function a(){this.status<299?t(c.EventNames.EVENT_LOAD,this):t(c.EventNames.EVENT_ERROR,this)}return t=>function(...u){const l=e._xhrMem.get(this);if(!l)return t.apply(this,u);const p=l.span,d=l.spanUrl;return p&&d&&n.context.with(n.trace.setSpan(n.context.active(),p),(()=>{e._tasksCount++,l.sendStartTime=(0,i.hrTime)(),p.addEvent(c.EventNames.METHOD_SEND),this.addEventListener("abort",o),this.addEventListener("error",r),this.addEventListener("load",a),this.addEventListener("timeout",s),l.callbackToRemoveEvents=()=>{!function(t){t.removeEventListener("abort",o),t.removeEventListener("error",r),t.removeEventListener("load",a),t.removeEventListener("timeout",s);const n=e._xhrMem.get(t);n&&(n.callbackToRemoveEvents=void 0)}(this),l.createdResources&&l.createdResources.observer.disconnect()},e._addHeaders(this,d),e._addResourceObserver(this,d)})),t.apply(this,u)}}enable(){this._diag.debug("applying patch to",this.moduleName,.1),(0,o.isWrapped)(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),(0,o.isWrapped)(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,.1),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}}r.XMLHttpRequestInstrumentation=l},{"./enums/AttributeNames":510,"./enums/EventNames":511,"@opentelemetry/api":21,"@opentelemetry/core":524,"@opentelemetry/instrumentation":557,"@opentelemetry/sdk-trace-web":616,"@opentelemetry/semantic-conventions":619}],514:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{dup:55}],515:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{dup:56}],516:[function(e,t,r){arguments[4][102][0].apply(r,arguments)},{"../../trace/suppress-tracing":544,"../constants":515,"../utils":517,"@opentelemetry/api":21,dup:102}],517:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{"./constants":515,"@opentelemetry/api":21,dup:58}],518:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{dup:59}],519:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:60}],520:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./logging-error-handler":521,dup:61}],521:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:62}],522:[function(e,t,r){arguments[4][108][0].apply(r,arguments)},{"../platform":531,dup:108}],523:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],524:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.internal=r.baggageUtils=void 0;const n=e("tslib");(0,n.__exportStar)(e("./baggage/propagation/W3CBaggagePropagator"),r),(0,n.__exportStar)(e("./common/anchored-clock"),r),(0,n.__exportStar)(e("./common/attributes"),r),(0,n.__exportStar)(e("./common/global-error-handler"),r),(0,n.__exportStar)(e("./common/logging-error-handler"),r),(0,n.__exportStar)(e("./common/time"),r),(0,n.__exportStar)(e("./common/types"),r),(0,n.__exportStar)(e("./ExportResult"),r),(0,n.__exportStar)(e("./version"),r),r.baggageUtils=e("./baggage/utils"),(0,n.__exportStar)(e("./platform"),r),(0,n.__exportStar)(e("./propagation/composite"),r),(0,n.__exportStar)(e("./trace/W3CTraceContextPropagator"),r),(0,n.__exportStar)(e("./trace/IdGenerator"),r),(0,n.__exportStar)(e("./trace/rpc-metadata"),r),(0,n.__exportStar)(e("./trace/sampler/AlwaysOffSampler"),r),(0,n.__exportStar)(e("./trace/sampler/AlwaysOnSampler"),r),(0,n.__exportStar)(e("./trace/sampler/ParentBasedSampler"),r),(0,n.__exportStar)(e("./trace/sampler/TraceIdRatioBasedSampler"),r),(0,n.__exportStar)(e("./trace/suppress-tracing"),r),(0,n.__exportStar)(e("./trace/TraceState"),r),(0,n.__exportStar)(e("./utils/environment"),r),(0,n.__exportStar)(e("./utils/merge"),r),(0,n.__exportStar)(e("./utils/sampling"),r),(0,n.__exportStar)(e("./utils/timeout"),r),(0,n.__exportStar)(e("./utils/url"),r),(0,n.__exportStar)(e("./utils/wrap"),r),(0,n.__exportStar)(e("./utils/callback"),r),(0,n.__exportStar)(e("./version"),r);const o=e("./internal/exporter");r.internal={_export:o._export}},{"./ExportResult":514,"./baggage/propagation/W3CBaggagePropagator":516,"./baggage/utils":517,"./common/anchored-clock":518,"./common/attributes":519,"./common/global-error-handler":520,"./common/logging-error-handler":521,"./common/time":522,"./common/types":523,"./internal/exporter":525,"./platform":531,"./propagation/composite":535,"./trace/IdGenerator":536,"./trace/TraceState":537,"./trace/W3CTraceContextPropagator":538,"./trace/rpc-metadata":539,"./trace/sampler/AlwaysOffSampler":540,"./trace/sampler/AlwaysOnSampler":541,"./trace/sampler/ParentBasedSampler":542,"./trace/sampler/TraceIdRatioBasedSampler":543,"./trace/suppress-tracing":544,"./utils/callback":545,"./utils/environment":546,"./utils/merge":548,"./utils/sampling":550,"./utils/timeout":551,"./utils/url":552,"./utils/wrap":553,"./version":554,tslib:625}],525:[function(e,t,r){arguments[4][111][0].apply(r,arguments)},{"../trace/suppress-tracing":544,"@opentelemetry/api":21,dup:111}],526:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],527:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{dup:68}],528:[function(e,t,r){arguments[4][69][0].apply(r,arguments)},{"../../utils/environment":546,"./globalThis":529,dup:69}],529:[function(e,t,r){arguments[4][115][0].apply(r,arguments)},{dup:115}],530:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],531:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./environment"),r),(0,n.__exportStar)(e("./globalThis"),r),(0,n.__exportStar)(e("./hex-to-base64"),r),(0,n.__exportStar)(e("./RandomIdGenerator"),r),(0,n.__exportStar)(e("./performance"),r),(0,n.__exportStar)(e("./sdk-info"),r),(0,n.__exportStar)(e("./timer-util"),r)},{"./RandomIdGenerator":527,"./environment":528,"./globalThis":529,"./hex-to-base64":530,"./performance":532,"./sdk-info":533,"./timer-util":534,tslib:625}],532:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{dup:73}],533:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{"../../version":554,"@opentelemetry/semantic-conventions":619,dup:74}],534:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{dup:75}],535:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:76}],536:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],537:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"../internal/validators":526,dup:78}],538:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./TraceState":537,"./suppress-tracing":544,"@opentelemetry/api":21,dup:79}],539:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:80}],540:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:81}],541:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:82}],542:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"../../common/global-error-handler":520,"./AlwaysOffSampler":540,"./AlwaysOnSampler":541,"@opentelemetry/api":21,dup:83}],543:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:84}],544:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:85}],545:[function(e,t,r){arguments[4][131][0].apply(r,arguments)},{"./promise":549,dup:131}],546:[function(e,t,r){arguments[4][427][0].apply(r,arguments)},{"../platform/browser/globalThis":529,"./sampling":550,"@opentelemetry/api":21,_process:1,dup:427}],547:[function(e,t,r){arguments[4][133][0].apply(r,arguments)},{dup:133}],548:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./lodash.merge":547,dup:134}],549:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],550:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],551:[function(e,t,r){arguments[4][432][0].apply(r,arguments)},{dup:432}],552:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{dup:92}],553:[function(e,t,r){arguments[4][93][0].apply(r,arguments)},{dup:93}],554:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.15.0"},{}],555:[function(e,t,r){arguments[4][175][0].apply(r,arguments)},{"./autoLoaderUtils":556,"@opentelemetry/api":21,dup:175}],556:[function(e,t,r){arguments[4][176][0].apply(r,arguments)},{dup:176}],557:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./autoLoader"),r),(0,n.__exportStar)(e("./platform/index"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./types_internal"),r),(0,n.__exportStar)(e("./utils"),r)},{"./autoLoader":555,"./platform/index":559,"./types":561,"./types_internal":562,"./utils":563,tslib:625}],558:[function(e,t,r){arguments[4][504][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:504,shimmer:624}],559:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InstrumentationBase=void 0;var n=e("./instrumentation");Object.defineProperty(r,"InstrumentationBase",{enumerable:!0,get:function(){return n.InstrumentationBase}})},{"./instrumentation":560}],560:[function(e,t,r){arguments[4][180][0].apply(r,arguments)},{"../../instrumentation":558,dup:180}],561:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],562:[function(e,t,r){arguments[4][182][0].apply(r,arguments)},{dup:182}],563:[function(e,t,r){arguments[4][183][0].apply(r,arguments)},{dup:183}],564:[function(e,t,r){arguments[4][335][0].apply(r,arguments)},{dup:335}],565:[function(e,t,r){arguments[4][336][0].apply(r,arguments)},{"./platform":583,"@opentelemetry/api":21,"@opentelemetry/core":524,"@opentelemetry/semantic-conventions":619,dup:336}],566:[function(e,t,r){arguments[4][242][0].apply(r,arguments)},{dup:242}],567:[function(e,t,r){arguments[4][338][0].apply(r,arguments)},{"./Resource":565,"./utils":585,"@opentelemetry/api":21,dup:338}],568:[function(e,t,r){arguments[4][339][0].apply(r,arguments)},{"..":575,dup:339}],569:[function(e,t,r){arguments[4][340][0].apply(r,arguments)},{"..":575,"@opentelemetry/api":21,"@opentelemetry/semantic-conventions":619,dup:340}],570:[function(e,t,r){arguments[4][341][0].apply(r,arguments)},{"./EnvDetectorSync":571,dup:341}],571:[function(e,t,r){arguments[4][342][0].apply(r,arguments)},{"../Resource":565,"@opentelemetry/api":21,"@opentelemetry/core":524,"@opentelemetry/semantic-conventions":619,dup:342}],572:[function(e,t,r){arguments[4][343][0].apply(r,arguments)},{"./NoopDetectorSync":573,dup:343}],573:[function(e,t,r){arguments[4][344][0].apply(r,arguments)},{"../Resource":565,dup:344}],574:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./BrowserDetector"),r),(0,n.__exportStar)(e("./EnvDetector"),r),(0,n.__exportStar)(e("./BrowserDetectorSync"),r),(0,n.__exportStar)(e("./EnvDetectorSync"),r)},{"./BrowserDetector":568,"./BrowserDetectorSync":569,"./EnvDetector":570,"./EnvDetectorSync":571,tslib:625}],575:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./Resource"),r),(0,n.__exportStar)(e("./IResource"),r),(0,n.__exportStar)(e("./platform"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./config"),r),(0,n.__exportStar)(e("./detectors"),r),(0,n.__exportStar)(e("./detect-resources"),r)},{"./IResource":564,"./Resource":565,"./config":566,"./detect-resources":567,"./detectors":574,"./platform":583,"./types":584,tslib:625}],576:[function(e,t,r){arguments[4][249][0].apply(r,arguments)},{"../../detectors/NoopDetector":572,dup:249}],577:[function(e,t,r){arguments[4][350][0].apply(r,arguments)},{"../../detectors/NoopDetectorSync":573,dup:350}],578:[function(e,t,r){arguments[4][250][0].apply(r,arguments)},{"../../detectors/NoopDetector":572,dup:250}],579:[function(e,t,r){arguments[4][352][0].apply(r,arguments)},{"../../detectors/NoopDetectorSync":573,dup:352}],580:[function(e,t,r){arguments[4][452][0].apply(r,arguments)},{"../../detectors/NoopDetector":572,dup:452}],581:[function(e,t,r){arguments[4][453][0].apply(r,arguments)},{"../../detectors/NoopDetector":572,dup:453}],582:[function(e,t,r){arguments[4][251][0].apply(r,arguments)},{dup:251}],583:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./default-service-name"),r),(0,n.__exportStar)(e("./HostDetector"),r),(0,n.__exportStar)(e("./OSDetector"),r),(0,n.__exportStar)(e("./HostDetectorSync"),r),(0,n.__exportStar)(e("./OSDetectorSync"),r),(0,n.__exportStar)(e("./ProcessDetector"),r),(0,n.__exportStar)(e("./ProcessDetectorSync"),r)},{"./HostDetector":576,"./HostDetectorSync":577,"./OSDetector":578,"./OSDetectorSync":579,"./ProcessDetector":580,"./ProcessDetectorSync":581,"./default-service-name":582,tslib:625}],584:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],585:[function(e,t,r){arguments[4][356][0].apply(r,arguments)},{dup:356}],586:[function(e,t,r){arguments[4][458][0].apply(r,arguments)},{".":603,"./MultiSpanProcessor":588,"./config":594,"./export/NoopSpanProcessor":599,"./platform":606,"./utility":612,"@opentelemetry/api":21,"@opentelemetry/core":524,"@opentelemetry/resources":575,dup:458}],587:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{dup:77}],588:[function(e,t,r){arguments[4][364][0].apply(r,arguments)},{"@opentelemetry/core":524,dup:364}],589:[function(e,t,r){arguments[4][365][0].apply(r,arguments)},{dup:365}],590:[function(e,t,r){arguments[4][462][0].apply(r,arguments)},{"./enums":595,"@opentelemetry/api":21,"@opentelemetry/core":524,"@opentelemetry/semantic-conventions":619,dup:462}],591:[function(e,t,r){arguments[4][367][0].apply(r,arguments)},{dup:367}],592:[function(e,t,r){arguments[4][368][0].apply(r,arguments)},{dup:368}],593:[function(e,t,r){arguments[4][465][0].apply(r,arguments)},{"./Span":590,"./platform":606,"./utility":612,"@opentelemetry/api":21,"@opentelemetry/core":524,dup:465}],594:[function(e,t,r){arguments[4][466][0].apply(r,arguments)},{"./sampler/AlwaysOffSampler":607,"./sampler/AlwaysOnSampler":608,"./sampler/ParentBasedSampler":609,"./sampler/TraceIdRatioBasedSampler":610,"@opentelemetry/api":21,"@opentelemetry/core":524,dup:466}],595:[function(e,t,r){arguments[4][371][0].apply(r,arguments)},{dup:371}],596:[function(e,t,r){arguments[4][468][0].apply(r,arguments)},{"@opentelemetry/api":21,"@opentelemetry/core":524,dup:468}],597:[function(e,t,r){arguments[4][469][0].apply(r,arguments)},{"@opentelemetry/core":524,dup:469}],598:[function(e,t,r){arguments[4][470][0].apply(r,arguments)},{"@opentelemetry/core":524,dup:470}],599:[function(e,t,r){arguments[4][375][0].apply(r,arguments)},{dup:375}],600:[function(e,t,r){arguments[4][376][0].apply(r,arguments)},{dup:376}],601:[function(e,t,r){arguments[4][473][0].apply(r,arguments)},{"@opentelemetry/api":21,"@opentelemetry/core":524,dup:473}],602:[function(e,t,r){arguments[4][378][0].apply(r,arguments)},{dup:378}],603:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./Tracer"),r),(0,n.__exportStar)(e("./BasicTracerProvider"),r),(0,n.__exportStar)(e("./platform"),r),(0,n.__exportStar)(e("./export/ConsoleSpanExporter"),r),(0,n.__exportStar)(e("./export/InMemorySpanExporter"),r),(0,n.__exportStar)(e("./export/ReadableSpan"),r),(0,n.__exportStar)(e("./export/SimpleSpanProcessor"),r),(0,n.__exportStar)(e("./export/SpanExporter"),r),(0,n.__exportStar)(e("./export/NoopSpanProcessor"),r),(0,n.__exportStar)(e("./sampler/AlwaysOffSampler"),r),(0,n.__exportStar)(e("./sampler/AlwaysOnSampler"),r),(0,n.__exportStar)(e("./sampler/ParentBasedSampler"),r),(0,n.__exportStar)(e("./sampler/TraceIdRatioBasedSampler"),r),(0,n.__exportStar)(e("./Sampler"),r),(0,n.__exportStar)(e("./Span"),r),(0,n.__exportStar)(e("./SpanProcessor"),r),(0,n.__exportStar)(e("./TimedEvent"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./IdGenerator"),r)},{"./BasicTracerProvider":586,"./IdGenerator":587,"./Sampler":589,"./Span":590,"./SpanProcessor":591,"./TimedEvent":592,"./Tracer":593,"./export/ConsoleSpanExporter":597,"./export/InMemorySpanExporter":598,"./export/NoopSpanProcessor":599,"./export/ReadableSpan":600,"./export/SimpleSpanProcessor":601,"./export/SpanExporter":602,"./platform":606,"./sampler/AlwaysOffSampler":607,"./sampler/AlwaysOnSampler":608,"./sampler/ParentBasedSampler":609,"./sampler/TraceIdRatioBasedSampler":610,"./types":611,tslib:625}],604:[function(e,t,r){arguments[4][380][0].apply(r,arguments)},{dup:380}],605:[function(e,t,r){arguments[4][477][0].apply(r,arguments)},{"../../../export/BatchSpanProcessorBase":596,dup:477}],606:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./export/BatchSpanProcessor"),r),(0,n.__exportStar)(e("./RandomIdGenerator"),r)},{"./RandomIdGenerator":604,"./export/BatchSpanProcessor":605,tslib:625}],607:[function(e,t,r){arguments[4][383][0].apply(r,arguments)},{"../Sampler":589,dup:383}],608:[function(e,t,r){arguments[4][384][0].apply(r,arguments)},{"../Sampler":589,dup:384}],609:[function(e,t,r){arguments[4][385][0].apply(r,arguments)},{"./AlwaysOffSampler":607,"./AlwaysOnSampler":608,"@opentelemetry/api":21,"@opentelemetry/core":524,dup:385}],610:[function(e,t,r){arguments[4][386][0].apply(r,arguments)},{"../Sampler":589,"@opentelemetry/api":21,dup:386}],611:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{dup:52}],612:[function(e,t,r){arguments[4][388][0].apply(r,arguments)},{"./config":594,"@opentelemetry/core":524,dup:388}],613:[function(e,t,r){arguments[4][169][0].apply(r,arguments)},{"@opentelemetry/api":21,dup:169}],614:[function(e,t,r){arguments[4][170][0].apply(r,arguments)},{"./StackContextManager":613,"@opentelemetry/sdk-trace-base":603,dup:170}],615:[function(e,t,r){arguments[4][171][0].apply(r,arguments)},{dup:171}],616:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./WebTracerProvider"),r),(0,n.__exportStar)(e("./StackContextManager"),r),(0,n.__exportStar)(e("./enums/PerformanceTimingNames"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./utils"),r),(0,n.__exportStar)(e("@opentelemetry/sdk-trace-base"),r)},{"./StackContextManager":613,"./WebTracerProvider":614,"./enums/PerformanceTimingNames":615,"./types":617,"./utils":618,"@opentelemetry/sdk-trace-base":603,tslib:625}],617:[function(e,t,r){arguments[4][173][0].apply(r,arguments)},{"./enums/PerformanceTimingNames":615,dup:173}],618:[function(e,t,r){arguments[4][394][0].apply(r,arguments)},{"./enums/PerformanceTimingNames":615,"@opentelemetry/core":524,"@opentelemetry/semantic-conventions":619,dup:394}],619:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");(0,n.__exportStar)(e("./trace"),r),(0,n.__exportStar)(e("./resource"),r)},{"./resource":621,"./trace":623,tslib:625}],620:[function(e,t,r){arguments[4][158][0].apply(r,arguments)},{dup:158}],621:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(0,e("tslib").__exportStar)(e("./SemanticResourceAttributes"),r)},{"./SemanticResourceAttributes":620,tslib:625}],622:[function(e,t,r){arguments[4][160][0].apply(r,arguments)},{dup:160}],623:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});(0,e("tslib").__exportStar)(e("./SemanticAttributes"),r)},{"./SemanticAttributes":622,tslib:625}],624:[function(e,t,r){"use strict";function n(e){return"function"==typeof e}var o=console.error.bind(console);function i(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function s(e){e&&e.logger&&(n(e.logger)?o=e.logger:o("new logger isn't a function, not replacing"))}function a(e,t,r){if(e&&e[t]){if(!r)return o("no wrapper function"),void o((new Error).stack);if(n(e[t])&&n(r)){var s=e[t],a=r(s,t);return i(a,"__original",s),i(a,"__unwrap",(function(){e[t]===a&&i(e,t,s)})),i(a,"__wrapped",!0),i(e,t,a),a}o("original object and wrapper must be functions")}else o("no original function "+t+" to wrap")}function c(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void o("no original to unwrap to -- has "+t+" already been unwrapped?"):(o("no function to unwrap."),void o((new Error).stack))}s.wrap=a,s.massWrap=function(e,t,r){if(!e)return o("must provide one or more modules to patch"),void o((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t,r)}))})):o("must provide one or more functions to wrap on modules")},s.unwrap=c,s.massUnwrap=function(e,t){if(!e)return o("must provide one or more modules to patch"),void o((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){c(e,t)}))})):o("must provide one or more functions to unwrap on modules")},t.exports=s},{}],625:[function(e,t,r){(function(e){(function(){var r,n,o,i,s,a,c,u,l,p,d,m,h,_,f,g,E,T,y,S,v,O,b,A,R;!function(r){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};function o(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(e){r(o(n,o(e)))})):"object"==typeof t&&"object"==typeof t.exports?r(o(n,o(t.exports))):r(o(n))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};r=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},i=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},s=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},l=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||R(t,e,r)},R=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},p=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},h=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n},_=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},f=function(e){return this instanceof f?(this.v=e,this):new f(e)},g=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof f?Promise.resolve(r.value.v).then(c,u):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},E=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:f(e[n](t)),done:"return"===n}:o?o(t):t}:o}},T=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}},y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&R(t,e,r);return N(t,e),t},v=function(e){return e&&e.__esModule?e:{default:e}},O=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},b=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},A=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},e("__extends",r),e("__assign",n),e("__rest",o),e("__decorate",i),e("__param",s),e("__metadata",a),e("__awaiter",c),e("__generator",u),e("__exportStar",l),e("__createBinding",R),e("__values",p),e("__read",d),e("__spread",m),e("__spreadArrays",h),e("__spreadArray",_),e("__await",f),e("__asyncGenerator",g),e("__asyncDelegator",E),e("__asyncValues",T),e("__makeTemplateObject",y),e("__importStar",S),e("__importDefault",v),e("__classPrivateFieldGet",O),e("__classPrivateFieldSet",b),e("__classPrivateFieldIn",A)}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],626:[function(e,t,r){(function(e){(function(){"use strict";
        /**
         * @license Angular v12.0.0-next.0
         * (c) 2010-2020 Google LLC. https://angular.io/
         * License: MIT
         */var t;t=function(){!function(e){var t=e.performance;function r(e){t&&t.mark&&t.mark(e)}function n(e,r){t&&t.measure&&t.measure(e,r)}r("Zone");var o=e.__Zone_symbol_prefix||"__zone_symbol__";function i(e){return o+e}var s=!0===e[i("forceDuplicateZoneCheck")];if(e.Zone){if(s||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}var a=function(){function t(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==I.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"root",{get:function(){for(var e=t.current;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"current",{get:function(){return C.zone},enumerable:!1,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return w},enumerable:!1,configurable:!0}),t.__load_patch=function(o,i,a){if(void 0===a&&(a=!1),I.hasOwnProperty(o)){if(!a&&s)throw Error("Already loaded patch: "+o)}else if(!e["__Zone_disable_"+o]){var c="Zone:"+o;r(c),I[o]=i(e,t,M),n(c,c)}},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var r=this._zoneDelegate.intercept(this,e,t),n=this;return function(){return n.runGuarded(r,this,arguments,t)}},t.prototype.run=function(e,t,r,n){C={parent:C,zone:this};try{return this._zoneDelegate.invoke(this,e,t,r,n)}finally{C=C.parent}},t.prototype.runGuarded=function(e,t,r,n){void 0===t&&(t=null),C={parent:C,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,r,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{C=C.parent}},t.prototype.runTask=function(e,t,r){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||T).name+"; Execution: "+this.name+")");if(e.state!==y||e.type!==P&&e.type!==N){var n=e.state!=O;n&&e._transitionTo(O,v),e.runCount++;var o=w;w=e,C={parent:C,zone:this};try{e.type==N&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{e.state!==y&&e.state!==A&&(e.type==P||e.data&&e.data.isPeriodic?n&&e._transitionTo(v,O):(e.runCount=0,this._updateTaskCount(e,-1),n&&e._transitionTo(y,O,y))),C=C.parent,w=o}}},t.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(S,y);var r=[];e._zoneDelegates=r,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(t){throw e._transitionTo(A,S,y),this._zoneDelegate.handleError(this,t),t}return e._zoneDelegates===r&&this._updateTaskCount(e,1),e.state==S&&e._transitionTo(v,S),e},t.prototype.scheduleMicroTask=function(e,t,r,n){return this.scheduleTask(new p(R,e,t,r,n,void 0))},t.prototype.scheduleMacroTask=function(e,t,r,n,o){return this.scheduleTask(new p(N,e,t,r,n,o))},t.prototype.scheduleEventTask=function(e,t,r,n,o){return this.scheduleTask(new p(P,e,t,r,n,o))},t.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||T).name+"; Execution: "+this.name+")");e._transitionTo(b,v,O);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(A,b),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(y,b),e.runCount=0,e},t.prototype._updateTaskCount=function(e,t){var r=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var n=0;n<r.length;n++)r[n]._updateTaskCount(e.type,t)},t}();a.__symbol__=i;var c,u={name:"",onHasTask:function(e,t,r,n){return e.hasTask(r,n)},onScheduleTask:function(e,t,r,n){return e.scheduleTask(r,n)},onInvokeTask:function(e,t,r,n,o,i){return e.invokeTask(r,n,o,i)},onCancelTask:function(e,t,r,n){return e.cancelTask(r,n)}},l=function(){function e(e,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var n=r&&r.onHasTask,o=t&&t._hasTaskZS;(n||o)&&(this._hasTaskZS=n?r:u,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,r.onScheduleTask||(this._scheduleTaskZS=u,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=u,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=u,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new a(e,t)},e.prototype.intercept=function(e,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,r):t},e.prototype.invoke=function(e,t,r,n,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,r,n,o):t.apply(r,n)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),(r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=R)throw new Error("Task is missing scheduleFn.");g(t)}return r},e.prototype.invokeTask=function(e,t,r,n){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,r,n):t.callback.apply(r,n)},e.prototype.cancelTask=function(e,t){var r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r},e.prototype.hasTask=function(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(t){this.handleError(e,t)}},e.prototype._updateTaskCount=function(e,t){var r=this._taskCounts,n=r[e],o=r[e]=n+t;if(o<0)throw new Error("More tasks executed then were scheduled.");if(0==n||0==o){var i={microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:e};this.hasTask(this.zone,i)}},e}(),p=function(){function t(r,n,o,i,s,a){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=r,this.source=n,this.data=i,this.scheduleFn=s,this.cancelFn=a,!o)throw new Error("callback is not defined");this.callback=o;var c=this;r===P&&i&&i.useG?this.invoke=t.invokeTask:this.invoke=function(){return t.invokeTask.call(e,c,this,arguments)}}return t.invokeTask=function(e,t,r){e||(e=this),L++;try{return e.runCount++,e.zone.runTask(e,t,r)}finally{1==L&&E(),L--}},Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.cancelScheduleRequest=function(){this._transitionTo(y,S)},t.prototype._transitionTo=function(e,t,r){if(this._state!==t&&this._state!==r)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(r?" or '"+r+"'":"")+", was '"+this._state+"'.");this._state=e,e==y&&(this._zoneDelegates=null)},t.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},t.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}},t}(),d=i("setTimeout"),m=i("Promise"),h=i("then"),_=[],f=!1;function g(t){if(0===L&&0===_.length)if(c||e[m]&&(c=e[m].resolve(0)),c){var r=c[h];r||(r=c.then),r.call(c,E)}else e[d](E,0);t&&_.push(t)}function E(){if(!f){for(f=!0;_.length;){var e=_;_=[];for(var t=0;t<e.length;t++){var r=e[t];try{r.zone.runTask(r,null,null)}catch(e){M.onUnhandledError(e)}}}M.microtaskDrainDone(),f=!1}}var T={name:"NO ZONE"},y="notScheduled",S="scheduling",v="scheduled",O="running",b="canceling",A="unknown",R="microTask",N="macroTask",P="eventTask",I={},M={symbol:i,currentZoneFrame:function(){return C},onUnhandledError:D,microtaskDrainDone:D,scheduleMicroTask:g,showUncaughtError:function(){return!a[i("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:D,patchMethod:function(){return D},bindArguments:function(){return[]},patchThen:function(){return D},patchMacroTask:function(){return D},patchEventPrototype:function(){return D},isIEOrEdge:function(){return!1},getGlobalObjects:function(){},ObjectDefineProperty:function(){return D},ObjectGetOwnPropertyDescriptor:function(){},ObjectCreate:function(){},ArraySlice:function(){return[]},patchClass:function(){return D},wrapWithCurrentZone:function(){return D},filterProperties:function(){return[]},attachOriginToPatched:function(){return D},_redefineProperty:function(){return D},patchCallbacks:function(){return D}},C={parent:null,zone:new a(null,null)},w=null,L=0;function D(){}n("Zone","Zone"),e.Zone=a}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||e);
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            var t=Object.getOwnPropertyDescriptor,r=Object.defineProperty,n=Object.getPrototypeOf,o=Object.create,i=Array.prototype.slice,s="addEventListener",a="removeEventListener",c=Zone.__symbol__(s),u=Zone.__symbol__(a),l="true",p="false",d=Zone.__symbol__("");
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */function m(e,t){return Zone.current.wrap(e,t)}function h(e,t,r,n,o){return Zone.current.scheduleMacroTask(e,t,r,n,o)}var _=Zone.__symbol__,f="undefined"!=typeof window,g=f?window:void 0,E=f&&g||"object"==typeof self&&self||e,T="removeAttribute",y=[null];function S(e,t){for(var r=e.length-1;r>=0;r--)"function"==typeof e[r]&&(e[r]=m(e[r],t+"_"+r));return e}function v(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}var O="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,b=!("nw"in E)&&void 0!==E.process&&"[object process]"==={}.toString.call(E.process),A=!b&&!O&&!(!f||!g.HTMLElement),R=void 0!==E.process&&"[object process]"==={}.toString.call(E.process)&&!O&&!(!f||!g.HTMLElement),N={},P=function(e){if(e=e||E.event){var t=N[e.type];t||(t=N[e.type]=_("ON_PROPERTY"+e.type));var r,n=this||e.target||E,o=n[t];if(A&&n===g&&"error"===e.type){var i=e;!0===(r=o&&o.call(this,i.message,i.filename,i.lineno,i.colno,i.error))&&e.preventDefault()}else null==(r=o&&o.apply(this,arguments))||r||e.preventDefault();return r}};function I(e,n,o){var i=t(e,n);if(!i&&o&&t(o,n)&&(i={enumerable:!0,configurable:!0}),i&&i.configurable){var s=_("on"+n+"patched");if(!e.hasOwnProperty(s)||!e[s]){delete i.writable,delete i.value;var a=i.get,c=i.set,u=n.substr(2),l=N[u];l||(l=N[u]=_("ON_PROPERTY"+u)),i.set=function(t){var r=this;r||e!==E||(r=E),r&&(r[l]&&r.removeEventListener(u,P),c&&c.apply(r,y),"function"==typeof t?(r[l]=t,r.addEventListener(u,P,!1)):r[l]=null)},i.get=function(){var t=this;if(t||e!==E||(t=E),!t)return null;var r=t[l];if(r)return r;if(a){var o=a&&a.call(this);if(o)return i.set.call(this,o),"function"==typeof t[T]&&t.removeAttribute(n),o}return null},r(e,n,i),e[s]=!0}}}function M(e,t,r){if(t)for(var n=0;n<t.length;n++)I(e,"on"+t[n],r);else{var o=[];for(var i in e)"on"==i.substr(0,2)&&o.push(i);for(var s=0;s<o.length;s++)I(e,o[s],r)}}var C=_("originalInstance");function w(e){var t=E[e];if(t){E[_(e)]=t,E[e]=function(){var r=S(arguments,e);switch(r.length){case 0:this[C]=new t;break;case 1:this[C]=new t(r[0]);break;case 2:this[C]=new t(r[0],r[1]);break;case 3:this[C]=new t(r[0],r[1],r[2]);break;case 4:this[C]=new t(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},x(E[e],t);var n,o=new t((function(){}));for(n in o)"XMLHttpRequest"===e&&"responseBlob"===n||function(t){"function"==typeof o[t]?E[e].prototype[t]=function(){return this[C][t].apply(this[C],arguments)}:r(E[e].prototype,t,{set:function(r){"function"==typeof r?(this[C][t]=m(r,e+"."+t),x(this[C][t],r)):this[C][t]=r},get:function(){return this[C][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(E[e][n]=t[n])}}function L(e,r,o){for(var i=e;i&&!i.hasOwnProperty(r);)i=n(i);!i&&e[r]&&(i=e);var s=_(r),a=null;if(i&&(!(a=i[s])||!i.hasOwnProperty(s))&&(a=i[s]=i[r],v(i&&t(i,r)))){var c=o(a,s,r);i[r]=function(){return c(this,arguments)},x(i[r],a)}return a}function D(e,t,r){var n=null;function o(e){var t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},n.apply(t.target,t.args),e}n=L(e,t,(function(e){return function(t,n){var i=r(t,n);return i.cbIdx>=0&&"function"==typeof n[i.cbIdx]?h(i.name,n[i.cbIdx],i,o):e.apply(t,n)}}))}function x(e,t){e[_("OriginalDelegate")]=t}var k=!1,U=!1;function B(){if(k)return U;k=!0;try{var e=g.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(U=!0)}catch(e){}return U}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */Zone.__load_patch("ZoneAwarePromise",(function(e,t,r){var n=Object.getOwnPropertyDescriptor,o=Object.defineProperty,i=r.symbol,s=[],a=!0===e[i("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],c=i("Promise"),u=i("then"),l="__creationTrace__";r.onUnhandledError=function(e){if(r.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},r.microtaskDrainDone=function(){for(var e=function(){var e=s.shift();try{e.zone.runGuarded((function(){if(e.throwOriginal)throw e.rejection;throw e}))}catch(e){!function(e){r.onUnhandledError(e);try{var n=t[p];"function"==typeof n&&n.call(this,e)}catch(e){}}(e)}};s.length;)e()};var p=i("unhandledPromiseRejectionHandler");function d(e){return e&&e.then}function m(e){return e}function h(e){return x.reject(e)}var _=i("state"),f=i("value"),g=i("finally"),E=i("parentPromiseValue"),T=i("parentPromiseState"),y="Promise.then",S=null,v=!0,O=!1,b=0;function A(e,t){return function(r){try{I(e,t,r)}catch(t){I(e,!1,t)}}}var R=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},N="Promise resolved with itself",P=i("currentTaskTrace");function I(e,n,i){var c,u=R();if(e===i)throw new TypeError(N);if(e[_]===S){var p=null;try{"object"!=typeof i&&"function"!=typeof i||(p=i&&i.then)}catch(t){return u((function(){I(e,!1,t)}))(),e}if(n!==O&&i instanceof x&&i.hasOwnProperty(_)&&i.hasOwnProperty(f)&&i[_]!==S)C(i),I(e,i[_],i[f]);else if(n!==O&&"function"==typeof p)try{p.call(i,u(A(e,n)),u(A(e,!1)))}catch(t){u((function(){I(e,!1,t)}))()}else{e[_]=n;var d=e[f];if(e[f]=i,e[g]===g&&n===v&&(e[_]=e[T],e[f]=e[E]),n===O&&i instanceof Error){var m=t.currentTask&&t.currentTask.data&&t.currentTask.data[l];m&&o(i,P,{configurable:!0,enumerable:!1,writable:!0,value:m})}for(var h=0;h<d.length;)w(e,d[h++],d[h++],d[h++],d[h++]);if(0==d.length&&n==O){e[_]=b;var y=i;try{throw new Error("Uncaught (in promise): "+((c=i)&&c.toString===Object.prototype.toString?(c.constructor&&c.constructor.name||"")+": "+JSON.stringify(c):c?c.toString():Object.prototype.toString.call(c))+(i&&i.stack?"\n"+i.stack:""))}catch(e){y=e}a&&(y.throwOriginal=!0),y.rejection=i,y.promise=e,y.zone=t.current,y.task=t.currentTask,s.push(y),r.scheduleMicroTask()}}}return e}var M=i("rejectionHandledHandler");function C(e){if(e[_]===b){try{var r=t[M];r&&"function"==typeof r&&r.call(this,{rejection:e[f],promise:e})}catch(e){}e[_]=O;for(var n=0;n<s.length;n++)e===s[n].promise&&s.splice(n,1)}}function w(e,t,r,n,o){C(e);var i=e[_],s=i?"function"==typeof n?n:m:"function"==typeof o?o:h;t.scheduleMicroTask(y,(function(){try{var n=e[f],o=!!r&&g===r[g];o&&(r[E]=n,r[T]=i);var a=t.run(s,void 0,o&&s!==h&&s!==m?[]:[n]);I(r,!0,a)}catch(e){I(r,!1,e)}}),r)}var D=function(){},x=function(){function e(t){var r=this;if(!(r instanceof e))throw new Error("Must be an instanceof Promise.");r[_]=S,r[f]=[];try{t&&t(A(r,v),A(r,O))}catch(e){I(r,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return I(new this(null),v,e)},e.reject=function(e){return I(new this(null),O,e)},e.race=function(e){var t,r,n=new this((function(e,n){t=e,r=n}));function o(e){t(e)}function i(e){r(e)}for(var s=0,a=e;s<a.length;s++){var c=a[s];d(c)||(c=this.resolve(c)),c.then(o,i)}return n},e.all=function(t){return e.allWithCallback(t)},e.allSettled=function(t){return(this&&this.prototype instanceof e?this:e).allWithCallback(t,{thenCallback:function(e){return{status:"fulfilled",value:e}},errorCallback:function(e){return{status:"rejected",reason:e}}})},e.allWithCallback=function(e,t){for(var r,n,o=new this((function(e,t){r=e,n=t})),i=2,s=0,a=[],c=function(e){d(e)||(e=u.resolve(e));var o=s;try{e.then((function(e){a[o]=t?t.thenCallback(e):e,0==--i&&r(a)}),(function(e){t?(a[o]=t.errorCallback(e),0==--i&&r(a)):n(e)}))}catch(e){n(e)}i++,s++},u=this,l=0,p=e;l<p.length;l++)c(p[l]);return 0==(i-=2)&&r(a),o},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"Promise"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.then=function(r,n){var o=this.constructor[Symbol.species];o&&"function"==typeof o||(o=this.constructor||e);var i=new o(D),s=t.current;return this[_]==S?this[f].push(s,i,r,n):w(this,s,i,r,n),i},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(r){var n=this.constructor[Symbol.species];n&&"function"==typeof n||(n=e);var o=new n(D);o[g]=g;var i=t.current;return this[_]==S?this[f].push(i,o,r,r):w(this,i,o,r,r),o},e}();x.resolve=x.resolve,x.reject=x.reject,x.race=x.race,x.all=x.all;var k=e[c]=e.Promise;e.Promise=x;var U=i("thenPatched");function B(e){var t=e.prototype,r=n(t,"then");if(!r||!1!==r.writable&&r.configurable){var o=t.then;t[u]=o,e.prototype.then=function(e,t){var r=this;return new x((function(e,t){o.call(r,e,t)})).then(e,t)},e[U]=!0}}return r.patchThen=B,k&&(B(k),L(e,"fetch",(function(e){return t=e,function(e,r){var n=t.apply(e,r);if(n instanceof x)return n;var o=n.constructor;return o[U]||B(o),n};var t}))),Promise[t.__symbol__("uncaughtPromiseErrors")]=s,x})),
                /**
                 * @license
                 * Copyright Google LLC All Rights Reserved.
                 *
                 * Use of this source code is governed by an MIT-style license that can be
                 * found in the LICENSE file at https://angular.io/license
                 */
                Zone.__load_patch("toString",(function(e){var t=Function.prototype.toString,r=_("OriginalDelegate"),n=_("Promise"),o=_("Error"),i=function(){if("function"==typeof this){var i=this[r];if(i)return"function"==typeof i?t.call(i):Object.prototype.toString.call(i);if(this===Promise){var s=e[n];if(s)return t.call(s)}if(this===Error){var a=e[o];if(a)return t.call(a)}}return t.call(this)};i[r]=t,Function.prototype.toString=i;var s=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":s.call(this)}}));
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            var j=!1;if("undefined"!=typeof window)try{var V=Object.defineProperty({},"passive",{get:function(){j=!0}});window.addEventListener("test",V,V),window.removeEventListener("test",V,V)}catch(e){j=!1}var F={useG:!0},G={},H={},X=new RegExp("^"+d+"(\\w+)(true|false)$"),W=_("propagationStopped");function K(e,t){var r=(t?t(e):e)+p,n=(t?t(e):e)+l,o=d+r,i=d+n;G[e]={},G[e][p]=o,G[e][l]=i}function z(e,t,r){var o=r&&r.add||s,i=r&&r.rm||a,c=r&&r.listeners||"eventListeners",u=r&&r.rmAll||"removeAllListeners",m=_(o),h="."+o+":",f="prependListener",g="."+f+":",E=function(e,t,r){if(!e.isRemoved){var n=e.callback;"object"==typeof n&&n.handleEvent&&(e.callback=function(e){return n.handleEvent(e)},e.originalDelegate=n),e.invoke(e,t,[r]);var o=e.options;if(o&&"object"==typeof o&&o.once){var s=e.originalDelegate?e.originalDelegate:e.callback;t[i].call(t,r.type,s,o)}}},T=function(t){if(t=t||e.event){var r=this||t.target||e,n=r[G[t.type][p]];if(n)if(1===n.length)E(n[0],r,t);else for(var o=n.slice(),i=0;i<o.length&&(!t||!0!==t[W]);i++)E(o[i],r,t)}},y=function(t){if(t=t||e.event){var r=this||t.target||e,n=r[G[t.type][l]];if(n)if(1===n.length)E(n[0],r,t);else for(var o=n.slice(),i=0;i<o.length&&(!t||!0!==t[W]);i++)E(o[i],r,t)}};function S(t,r){if(!t)return!1;var s=!0;r&&void 0!==r.useG&&(s=r.useG);var a=r&&r.vh,E=!0;r&&void 0!==r.chkDup&&(E=r.chkDup);var S=!1;r&&void 0!==r.rt&&(S=r.rt);for(var v=t;v&&!v.hasOwnProperty(o);)v=n(v);if(!v&&t[o]&&(v=t),!v)return!1;if(v[m])return!1;var O,A=r&&r.eventNameToString,R={},N=v[m]=v[o],P=v[_(i)]=v[i],I=v[_(c)]=v[c],M=v[_(u)]=v[u];r&&r.prepend&&(O=v[_(r.prepend)]=v[r.prepend]);var C=s?function(e){if(!R.isExisting)return N.call(R.target,R.eventName,R.capture?y:T,R.options)}:function(e){return N.call(R.target,R.eventName,e.invoke,R.options)},w=s?function(e){if(!e.isRemoved){var t=G[e.eventName],r=void 0;t&&(r=t[e.capture?l:p]);var n=r&&e.target[r];if(n)for(var o=0;o<n.length;o++)if(n[o]===e){n.splice(o,1),e.isRemoved=!0,0===n.length&&(e.allRemoved=!0,e.target[r]=null);break}}if(e.allRemoved)return P.call(e.target,e.eventName,e.capture?y:T,e.options)}:function(e){return P.call(e.target,e.eventName,e.invoke,e.options)},L=r&&r.diff?r.diff:function(e,t){var r=typeof t;return"function"===r&&e.callback===t||"object"===r&&e.originalDelegate===t},D=Zone[_("UNPATCHED_EVENTS")],k=e[_("PASSIVE_EVENTS")],U=function(t,n,o,i,c,u){return void 0===c&&(c=!1),void 0===u&&(u=!1),function(){var d=this||e,m=arguments[0];r&&r.transferEventName&&(m=r.transferEventName(m));var h=arguments[1];if(!h)return t.apply(this,arguments);if(b&&"uncaughtException"===m)return t.apply(this,arguments);var _=!1;if("function"!=typeof h){if(!h.handleEvent)return t.apply(this,arguments);_=!0}if(!a||a(t,h,d,arguments)){var f=j&&!!k&&-1!==k.indexOf(m),g=function(e,t){return!j&&"object"==typeof e&&e?!!e.capture:j&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}(arguments[2],f);if(D)for(var T=0;T<D.length;T++)if(m===D[T])return f?t.call(d,m,h,g):t.apply(this,arguments);var y=!!g&&("boolean"==typeof g||g.capture),S=!(!g||"object"!=typeof g)&&g.once,v=Zone.current,O=G[m];O||(K(m,A),O=G[m]);var N,P=O[y?l:p],I=d[P],M=!1;if(I){if(M=!0,E)for(T=0;T<I.length;T++)if(L(I[T],h))return}else I=d[P]=[];var C=d.constructor.name,w=H[C];w&&(N=w[m]),N||(N=C+n+(A?A(m):m)),R.options=g,S&&(R.options.once=!1),R.target=d,R.capture=y,R.eventName=m,R.isExisting=M;var x=s?F:void 0;x&&(x.taskData=R);var U=v.scheduleEventTask(N,h,x,o,i);return R.target=null,x&&(x.taskData=null),S&&(g.once=!0),(j||"boolean"!=typeof U.options)&&(U.options=g),U.target=d,U.capture=y,U.eventName=m,_&&(U.originalDelegate=h),u?I.unshift(U):I.push(U),c?d:void 0}}};return v[o]=U(N,h,C,w,S),O&&(v[f]=U(O,g,(function(e){return O.call(R.target,R.eventName,e.invoke,R.options)}),w,S,!0)),v[i]=function(){var t=this||e,n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));var o=arguments[2],i=!!o&&("boolean"==typeof o||o.capture),s=arguments[1];if(!s)return P.apply(this,arguments);if(!a||a(P,s,t,arguments)){var c,u=G[n];u&&(c=u[i?l:p]);var m=c&&t[c];if(m)for(var h=0;h<m.length;h++){var _=m[h];if(L(_,s))return m.splice(h,1),_.isRemoved=!0,0===m.length&&(_.allRemoved=!0,t[c]=null,"string"==typeof n&&(t[d+"ON_PROPERTY"+n]=null)),_.zone.cancelTask(_),S?t:void 0}return P.apply(this,arguments)}},v[c]=function(){var t=this||e,n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));for(var o=[],i=Y(t,A?A(n):n),s=0;s<i.length;s++){var a=i[s],c=a.originalDelegate?a.originalDelegate:a.callback;o.push(c)}return o},v[u]=function(){var t=this||e,n=arguments[0];if(n){r&&r.transferEventName&&(n=r.transferEventName(n));var o=G[n];if(o){var s=o[p],a=o[l],c=t[s],d=t[a];if(c){var m=c.slice();for(g=0;g<m.length;g++){var h=(_=m[g]).originalDelegate?_.originalDelegate:_.callback;this[i].call(this,n,h,_.options)}}if(d)for(m=d.slice(),g=0;g<m.length;g++){var _;h=(_=m[g]).originalDelegate?_.originalDelegate:_.callback,this[i].call(this,n,h,_.options)}}}else{for(var f=Object.keys(t),g=0;g<f.length;g++){var E=f[g],T=X.exec(E),y=T&&T[1];y&&"removeListener"!==y&&this[u].call(this,y)}this[u].call(this,"removeListener")}if(S)return this},x(v[o],N),x(v[i],P),M&&x(v[u],M),I&&x(v[c],I),!0}for(var v=[],O=0;O<t.length;O++)v[O]=S(t[O],r);return v}function Y(e,t){if(!t){var r=[];for(var n in e){var o=X.exec(n),i=o&&o[1];if(i&&(!t||i===t)){var s=e[n];if(s)for(var a=0;a<s.length;a++)r.push(s[a])}}return r}var c=G[t];c||(K(t),c=G[t]);var u=e[c[p]],d=e[c[l]];return u?d?u.concat(d):u.slice():d?d.slice():[]}function Z(e,t){var r=e.Event;r&&r.prototype&&t.patchMethod(r.prototype,"stopImmediatePropagation",(function(e){return function(t,r){t[W]=!0,e&&e.apply(t,r)}}))}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */function $(e,t,r,n,o){var i=Zone.__symbol__(n);if(!t[i]){var s=t[i]=t[n];t[n]=function(i,a,c){return a&&a.prototype&&o.forEach((function(t){var o=r+"."+n+"::"+t,i=a.prototype;if(i.hasOwnProperty(t)){var s=e.ObjectGetOwnPropertyDescriptor(i,t);s&&s.value?(s.value=e.wrapWithCurrentZone(s.value,o),e._redefineProperty(a.prototype,t,s)):i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))}else i[t]&&(i[t]=e.wrapWithCurrentZone(i[t],o))})),s.call(t,i,a,c)},e.attachOriginToPatched(t[n],s)}}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */var q,Q,J,ee,te,re=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],ne=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],oe=["load"],ie=["blur","error","focus","load","resize","scroll","messageerror"],se=["bounce","finish","start"],ae=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ce=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],ue=["close","error","open","message"],le=["error","message"],pe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],re,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function de(e,t,r){if(!r||0===r.length)return t;var n=r.filter((function(t){return t.target===e}));if(!n||0===n.length)return t;var o=n[0].ignoreProperties;return t.filter((function(e){return-1===o.indexOf(e)}))}function me(e,t,r,n){e&&M(e,de(e,t,r),n)}function he(e,t){if((!b||R)&&!Zone[e.symbol("patchEvents")]){var r="undefined"!=typeof WebSocket,o=t.__Zone_ignore_on_properties;if(A){var i=window,s=function(){try{var e=g.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];me(i,pe.concat(["messageerror"]),o?o.concat(s):o,n(i)),me(Document.prototype,pe,o),void 0!==i.SVGElement&&me(i.SVGElement.prototype,pe,o),me(Element.prototype,pe,o),me(HTMLElement.prototype,pe,o),me(HTMLMediaElement.prototype,ne,o),me(HTMLFrameSetElement.prototype,re.concat(ie),o),me(HTMLBodyElement.prototype,re.concat(ie),o),me(HTMLFrameElement.prototype,oe,o),me(HTMLIFrameElement.prototype,oe,o);var a=i.HTMLMarqueeElement;a&&me(a.prototype,se,o);var c=i.Worker;c&&me(c.prototype,le,o)}var u=t.XMLHttpRequest;u&&me(u.prototype,ae,o);var l=t.XMLHttpRequestEventTarget;l&&me(l&&l.prototype,ae,o),"undefined"!=typeof IDBIndex&&(me(IDBIndex.prototype,ce,o),me(IDBRequest.prototype,ce,o),me(IDBOpenDBRequest.prototype,ce,o),me(IDBDatabase.prototype,ce,o),me(IDBTransaction.prototype,ce,o),me(IDBCursor.prototype,ce,o)),r&&me(WebSocket.prototype,ue,o)}}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */function _e(){q=Zone.__symbol__,Q=Object[q("defineProperty")]=Object.defineProperty,J=Object[q("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,ee=Object.create,te=q("unconfigurables"),Object.defineProperty=function(e,t,r){if(ge(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var n=r.configurable;return"prototype"!==t&&(r=Ee(e,t,r)),Te(e,t,r,n)},Object.defineProperties=function(e,t){return Object.keys(t).forEach((function(r){Object.defineProperty(e,r,t[r])})),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach((function(r){t[r]=Ee(e,r,t[r])})),ee(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var r=J(e,t);return r&&ge(e,t)&&(r.configurable=!1),r}}function fe(e,t,r){var n=r.configurable;return Te(e,t,r=Ee(e,t,r),n)}function ge(e,t){return e&&e[te]&&e[te][t]}function Ee(e,t,r){return Object.isFrozen(r)||(r.configurable=!0),r.configurable||(e[te]||Object.isFrozen(e)||Q(e,te,{writable:!0,value:{}}),e[te]&&(e[te][t]=!0)),r}function Te(e,t,r,n){try{return Q(e,t,r)}catch(s){if(!r.configurable)throw s;void 0===n?delete r.configurable:r.configurable=n;try{return Q(e,t,r)}catch(n){var o=!1;if("createdCallback"!==t&&"attachedCallback"!==t&&"detachedCallback"!==t&&"attributeChangedCallback"!==t||(o=!0),!o)throw n;var i=null;try{i=JSON.stringify(r)}catch(e){i=r.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+i+"' on object '"+e+"' and got error, giving up: "+n)}}}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */function ye(e,t){var r=t.getGlobalObjects(),n=r.eventNames,o=r.globalSources,i=r.zoneSymbolEventNames,s=r.TRUE_STR,a=r.FALSE_STR,c=r.ZONE_SYMBOL_PREFIX,u="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),l="EventTarget",p=[],d=e.wtf,m="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video".split(",");d?p=m.map((function(e){return"HTML"+e+"Element"})).concat(u):e[l]?p.push(l):p=u;for(var h=e.__Zone_disable_IE_check||!1,_=e.__Zone_enable_cross_context_check||!1,f=t.isIEOrEdge(),g="[object FunctionWrapper]",E="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",T={MSPointerCancel:"pointercancel",MSPointerDown:"pointerdown",MSPointerEnter:"pointerenter",MSPointerHover:"pointerhover",MSPointerLeave:"pointerleave",MSPointerMove:"pointermove",MSPointerOut:"pointerout",MSPointerOver:"pointerover",MSPointerUp:"pointerup"},y=0;y<n.length;y++){var S=c+((R=n[y])+a),v=c+(R+s);i[R]={},i[R][a]=S,i[R][s]=v}for(y=0;y<m.length;y++)for(var O=m[y],b=o[O]={},A=0;A<n.length;A++){var R;b[R=n[A]]=O+".addEventListener:"+R}var N=[];for(y=0;y<p.length;y++){var P=e[p[y]];N.push(P&&P.prototype)}return t.patchEventTarget(e,N,{vh:function(e,t,r,n){if(!h&&f){if(_)try{var o;if((o=t.toString())===g||o==E)return e.apply(r,n),!1}catch(t){return e.apply(r,n),!1}else if((o=t.toString())===g||o==E)return e.apply(r,n),!1}else if(_)try{t.toString()}catch(t){return e.apply(r,n),!1}return!0},transferEventName:function(e){return T[e]||e}}),Zone[t.symbol("patchEventTarget")]=!!e[l],!0}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            function Se(e,t){var r=e.getGlobalObjects(),n=r.isNode,o=r.isMix;if((!n||o)&&!function(e,t){var r=e.getGlobalObjects(),n=r.isBrowser,o=r.isMix;if((n||o)&&!e.ObjectGetOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var i=e.ObjectGetOwnPropertyDescriptor(Element.prototype,"onclick");if(i&&!i.configurable)return!1;if(i){e.ObjectDefineProperty(Element.prototype,"onclick",{enumerable:!0,configurable:!0,get:function(){return!0}});var s=!!document.createElement("div").onclick;return e.ObjectDefineProperty(Element.prototype,"onclick",i),s}}var a=t.XMLHttpRequest;if(!a)return!1;var c="onreadystatechange",u=a.prototype,l=e.ObjectGetOwnPropertyDescriptor(u,c);if(l)return e.ObjectDefineProperty(u,c,{enumerable:!0,configurable:!0,get:function(){return!0}}),s=!!(d=new a).onreadystatechange,e.ObjectDefineProperty(u,c,l||{}),s;var p=e.symbol("fake");e.ObjectDefineProperty(u,c,{enumerable:!0,configurable:!0,get:function(){return this[p]},set:function(e){this[p]=e}});var d,m=function(){};return(d=new a).onreadystatechange=m,s=d[p]===m,d.onreadystatechange=null,s}(e,t)){var i="undefined"!=typeof WebSocket;!function(e){for(var t=e.getGlobalObjects().eventNames,r=e.symbol("unbound"),n=function(n){var o=t[n],i="on"+o;self.addEventListener(o,(function(t){var n,o,s=t.target;for(o=s?s.constructor.name+"."+i:"unknown."+i;s;)s[i]&&!s[i][r]&&((n=e.wrapWithCurrentZone(s[i],o))[r]=s[i],s[i]=n),s=s.parentElement}),!0)},o=0;o<t.length;o++)n(o)}
                /**
                 * @license
                 * Copyright Google LLC All Rights Reserved.
                 *
                 * Use of this source code is governed by an MIT-style license that can be
                 * found in the LICENSE file at https://angular.io/license
                 */(e),e.patchClass("XMLHttpRequest"),i&&function(e,t){var r=e.getGlobalObjects(),n=r.ADD_EVENT_LISTENER_STR,o=r.REMOVE_EVENT_LISTENER_STR,i=t.WebSocket;t.EventTarget||e.patchEventTarget(t,[i.prototype]),t.WebSocket=function(t,r){var s,a,c=arguments.length>1?new i(t,r):new i(t),u=e.ObjectGetOwnPropertyDescriptor(c,"onmessage");return u&&!1===u.configurable?(s=e.ObjectCreate(c),a=c,[n,o,"send","close"].forEach((function(t){s[t]=function(){var r=e.ArraySlice.call(arguments);if(t===n||t===o){var i=r.length>0?r[0]:void 0;if(i){var a=Zone.__symbol__("ON_PROPERTY"+i);c[a]=s[a]}}return c[t].apply(c,r)}}))):s=c,e.patchOnProperties(s,["close","error","message","open"],a),s};var s=t.WebSocket;for(var a in i)s[a]=i[a]}(e,t),Zone[e.symbol("patchEvents")]=!0}}Zone.__load_patch("util",(function(e,n,c){c.patchOnProperties=M,c.patchMethod=L,c.bindArguments=S,c.patchMacroTask=D;var u=n.__symbol__("BLACK_LISTED_EVENTS"),h=n.__symbol__("UNPATCHED_EVENTS");e[h]&&(e[u]=e[h]),e[u]&&(n[u]=n[h]=e[u]),c.patchEventPrototype=Z,c.patchEventTarget=z,c.isIEOrEdge=B,c.ObjectDefineProperty=r,c.ObjectGetOwnPropertyDescriptor=t,c.ObjectCreate=o,c.ArraySlice=i,c.patchClass=w,c.wrapWithCurrentZone=m,c.filterProperties=de,c.attachOriginToPatched=x,c._redefineProperty=Object.defineProperty,c.patchCallbacks=$,c.getGlobalObjects=function(){return{globalSources:H,zoneSymbolEventNames:G,eventNames:pe,isBrowser:A,isMix:R,isNode:b,TRUE_STR:l,FALSE_STR:p,ZONE_SYMBOL_PREFIX:d,ADD_EVENT_LISTENER_STR:s,REMOVE_EVENT_LISTENER_STR:a}}})),
                /**
                 * @license
                 * Copyright Google LLC All Rights Reserved.
                 *
                 * Use of this source code is governed by an MIT-style license that can be
                 * found in the LICENSE file at https://angular.io/license
                 */
                function(e){var t,r=e.__Zone_symbol_prefix||"__zone_symbol__";e[(t="legacyPatch",r+t)]=function(){var t=e.Zone;t.__load_patch("defineProperty",(function(e,t,r){r._redefineProperty=fe,_e()})),t.__load_patch("registerElement",(function(e,t,r){!function(e,t){var r=t.getGlobalObjects(),n=r.isBrowser,o=r.isMix;(n||o)&&"registerElement"in e.document&&t.patchCallbacks(t,document,"Document","registerElement",["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"])}(e,r)})),t.__load_patch("EventTargetLegacy",(function(e,t,r){ye(e,r),Se(r,e)}))}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{});
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            var ve=_("zoneTask");function Oe(e,t,r,n){var o=null,i=null;r+=n;var s={};function a(t){var r=t.data;return r.args[0]=function(){return t.invoke.apply(this,arguments)},r.handleId=o.apply(e,r.args),t}function c(t){return i.call(e,t.data.handleId)}o=L(e,t+=n,(function(r){return function(o,i){if("function"==typeof i[0]){var u={isPeriodic:"Interval"===n,delay:"Timeout"===n||"Interval"===n?i[1]||0:void 0,args:i},l=i[0];i[0]=function(){try{return l.apply(this,arguments)}finally{u.isPeriodic||("number"==typeof u.handleId?delete s[u.handleId]:u.handleId&&(u.handleId[ve]=null))}};var p=h(t,i[0],u,a,c);if(!p)return p;var d=p.data.handleId;return"number"==typeof d?s[d]=p:d&&(d[ve]=p),d&&d.ref&&d.unref&&"function"==typeof d.ref&&"function"==typeof d.unref&&(p.ref=d.ref.bind(d),p.unref=d.unref.bind(d)),"number"==typeof d||d?d:p}return r.apply(e,i)}})),i=L(e,r,(function(t){return function(r,n){var o,i=n[0];"number"==typeof i?o=s[i]:(o=i&&i[ve])||(o=i),o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&("number"==typeof i?delete s[i]:i&&(i[ve]=null),o.zone.cancelTask(o)):t.apply(e,n)}}))}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            function be(e,t){if(!Zone[t.symbol("patchEventTarget")]){for(var r=t.getGlobalObjects(),n=r.eventNames,o=r.zoneSymbolEventNames,i=r.TRUE_STR,s=r.FALSE_STR,a=r.ZONE_SYMBOL_PREFIX,c=0;c<n.length;c++){var u=n[c],l=a+(u+s),p=a+(u+i);o[u]={},o[u][s]=l,o[u][i]=p}var d=e.EventTarget;if(d&&d.prototype)return t.patchEventTarget(e,[d&&d.prototype]),!0}}
            /**
             * @license
             * Copyright Google LLC All Rights Reserved.
             *
             * Use of this source code is governed by an MIT-style license that can be
             * found in the LICENSE file at https://angular.io/license
             */
            Zone.__load_patch("legacy",(function(e){var t=e[Zone.__symbol__("legacyPatch")];t&&t()})),Zone.__load_patch("queueMicrotask",(function(e,t,r){r.patchMethod(e,"queueMicrotask",(function(e){return function(e,r){t.current.scheduleMicroTask("queueMicrotask",r[0])}}))})),Zone.__load_patch("timers",(function(e){var t="set",r="clear";Oe(e,t,r,"Timeout"),Oe(e,t,r,"Interval"),Oe(e,t,r,"Immediate")})),Zone.__load_patch("requestAnimationFrame",(function(e){Oe(e,"request","cancel","AnimationFrame"),Oe(e,"mozRequest","mozCancel","AnimationFrame"),Oe(e,"webkitRequest","webkitCancel","AnimationFrame")})),Zone.__load_patch("blocking",(function(e,t){for(var r=["alert","prompt","confirm"],n=0;n<r.length;n++)L(e,r[n],(function(r,n,o){return function(n,i){return t.current.run(r,e,i,o)}}))})),Zone.__load_patch("EventTarget",(function(e,t,r){!function(e,t){t.patchEventPrototype(e,t)}(e,r),be(e,r);var n=e.XMLHttpRequestEventTarget;n&&n.prototype&&r.patchEventTarget(e,[n.prototype])})),Zone.__load_patch("MutationObserver",(function(e,t,r){w("MutationObserver"),w("WebKitMutationObserver")})),Zone.__load_patch("IntersectionObserver",(function(e,t,r){w("IntersectionObserver")})),Zone.__load_patch("FileReader",(function(e,t,r){w("FileReader")})),Zone.__load_patch("on_property",(function(e,t,r){he(r,e)})),Zone.__load_patch("customElements",(function(e,t,r){!function(e,t){var r=t.getGlobalObjects(),n=r.isBrowser,o=r.isMix;(n||o)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,r)})),Zone.__load_patch("XHR",(function(e,t){!function(e){var l=e.XMLHttpRequest;if(l){var p=l.prototype,d=p[c],m=p[u];if(!d){var f=e.XMLHttpRequestEventTarget;if(f){var g=f.prototype;d=g[c],m=g[u]}}var E="readystatechange",T="scheduled",y=L(p,"open",(function(){return function(e,t){return e[n]=0==t[2],e[s]=t[1],y.apply(e,t)}})),S=_("fetchTaskAborting"),v=_("fetchTaskScheduling"),O=L(p,"send",(function(){return function(e,r){if(!0===t.current[v])return O.apply(e,r);if(e[n])return O.apply(e,r);var o={target:e,url:e[s],isPeriodic:!1,args:r,aborted:!1},i=h("XMLHttpRequest.send",R,o,A,N);e&&!0===e[a]&&!o.aborted&&i.state===T&&i.invoke()}})),b=L(p,"abort",(function(){return function(e,n){var o=e[r];if(o&&"string"==typeof o.type){if(null==o.cancelFn||o.data&&o.data.aborted)return;o.zone.cancelTask(o)}else if(!0===t.current[S])return b.apply(e,n)}}))}function A(e){var n=e.data,s=n.target;s[i]=!1,s[a]=!1;var l=s[o];d||(d=s[c],m=s[u]),l&&m.call(s,E,l);var p=s[o]=function(){if(s.readyState===s.DONE)if(!n.aborted&&s[i]&&e.state===T){var r=s[t.__symbol__("loadfalse")];if(0!==s.status&&r&&r.length>0){var o=e.invoke;e.invoke=function(){for(var r=s[t.__symbol__("loadfalse")],i=0;i<r.length;i++)r[i]===e&&r.splice(i,1);n.aborted||e.state!==T||o.call(e)},r.push(e)}else e.invoke()}else n.aborted||!1!==s[i]||(s[a]=!0)};return d.call(s,E,p),s[r]||(s[r]=e),O.apply(s,n.args),s[i]=!0,e}function R(){}function N(e){var t=e.data;return t.aborted=!0,b.apply(t.target,t.args)}}(e);var r=_("xhrTask"),n=_("xhrSync"),o=_("xhrListener"),i=_("xhrScheduled"),s=_("xhrURL"),a=_("xhrErrorBeforeScheduled")})),Zone.__load_patch("geolocation",(function(e){e.navigator&&e.navigator.geolocation&&function(e,r){for(var n=e.constructor.name,o=function(o){var i=r[o],s=e[i];if(s){if(!v(t(e,i)))return"continue";e[i]=function(e){var t=function(){return e.apply(this,S(arguments,n+"."+i))};return x(t,e),t}(s)}},i=0;i<r.length;i++)o(i)}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])})),Zone.__load_patch("PromiseRejectionEvent",(function(e,t){function r(t){return function(r){Y(e,t).forEach((function(n){var o=e.PromiseRejectionEvent;if(o){var i=new o(t,{promise:r.promise,reason:r.rejection});n.invoke(i)}}))}}e.PromiseRejectionEvent&&(t[_("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[_("rejectionHandledHandler")]=r("rejectionhandled"))}))},"function"==typeof define&&define.amd?define(t):t()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],627:[function(e,t,r){t.exports={name:"@middleware.io/browser",version:"0.0.5",description:"",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"@middleware.io",license:"ISC",dependencies:{"@opentelemetry/api":"^1.3.0","@opentelemetry/api-metrics":"^0.33.0","@opentelemetry/context-zone":"^1.8.0","@opentelemetry/core":"^1.8.0","@opentelemetry/exporter-collector":"^0.25.0","@opentelemetry/exporter-metrics-otlp-http":"^0.36.1","@opentelemetry/exporter-prometheus":"^0.41.0","@opentelemetry/exporter-trace-otlp-http":"^0.34.0","@opentelemetry/instrumentation":"^0.34.0","@opentelemetry/instrumentation-fetch":"^0.34.0","@opentelemetry/instrumentation-user-interaction":"^0.32.1","@opentelemetry/instrumentation-xml-http-request":"^0.35.0","@opentelemetry/propagator-b3":"^1.8.0","@opentelemetry/resources":"^1.8.0","@opentelemetry/sdk-metrics":"^1.10.1","@opentelemetry/sdk-node":"^0.35.0","@opentelemetry/sdk-trace-base":"^1.8.0","@opentelemetry/sdk-trace-web":"^1.15.1","@opentelemetry/semantic-conventions":"^1.8.0","@splunk/otel-web":"^0.16.1","auto-instrumentations-web":"^0.0.2","instrumentation-document-load":"^0.0.4","middleware.io-instrumentation-xml-http-request":"^0.0.1",minify:"^9.1.0",rrweb:"^2.0.0-alpha.4"},devDependencies:{"@opentelemetry/instrumentation-document-load":"^0.31.2","@opentelemetry/instrumentation-long-task":"^0.32.0","@splunk/otel-web-session-recorder":"^0.16.1"}}},{}],628:[function(e,t,r){const{diag:n,DiagConsoleLogger:o,DiagLogLevel:i}=e("@opentelemetry/api"),s=e("./tracing"),a={accountKey:"",env:"prod",target:"",DEBUG:i.NONE,projectName:window.location.host,serviceName:"web-app",recording:"1"};t.exports.init=(e={})=>(Object.keys(a).forEach((t=>{a[t]=e[t]?e[t]:a[t]})),a.target&&(a.target=new URL(a.target).origin),n.setLogger(new o,a.DEBUG?i.DEBUG:i.NONE),s.init(a),a)},{"./tracing":634,"@opentelemetry/api":21}],629:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_SERVICE_NAME=r.HTTP_ACTION_TYPE=r.XHR_IS_ROOT_SPAN=r.ROOT_SPAN_HTTP_URL=r.ROOT_SPAN_OPERATION=r.INSTRUMENTED_EVENT_NAMES=r.DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT=r.BUFFER_TIMEOUT=r.MAX_EXPORT_BATCH_SIZE=r.BUFFER_MAX_SPANS=r.UNKNOWN_SERVICE_NAME=void 0,r.UNKNOWN_SERVICE_NAME="unknown",r.BUFFER_MAX_SPANS=2048,r.MAX_EXPORT_BATCH_SIZE=50,r.BUFFER_TIMEOUT=2e3,r.DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT=20,r.INSTRUMENTED_EVENT_NAMES=["click","dblclick","submit","reset","pause","play","dragstart","dragend","drop"],r.ROOT_SPAN_OPERATION="root_span.operation",r.ROOT_SPAN_HTTP_URL="root_span.http.url",r.XHR_IS_ROOT_SPAN="xhr.is_root_span",r.HTTP_ACTION_TYPE="http.action_type",r.DEFAULT_SERVICE_NAME="default.service.name"},{}],630:[function(e,t,r){function n(t={}){return t.accountKey?t.target?void e("./config").init(t):"target is required":"accountKey is required"}t.exports.track=n;var o={};o.track=n,"undefined"!=typeof window&&(window.Middleware=o)},{"./config":628}],631:[function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.LogsExporter=void 0;e("@opentelemetry/resources").Resource;var o=e("../package.json"),i=o.name,s=o.version,a=e("@opentelemetry/core"),c=a.hrTime,u=a.hrTimeToNanoseconds,l=e("@opentelemetry/api"),p=l,d=(l.Attributes,function(e){switch(typeof e){case"number":return Number.isInteger(e)?{intValue:e}:{doubleValue:e};case"boolean":return{boolValue:e};case"object":if(Array.isArray(e))return{arrayValue:{values:e.map((function(e){return d(e)}))}};if(null!=e)return{kvlistValue:{values:Object.entries(e).map((function(e){var t=e[0],r=e[1];return m(t,r)}))}};default:return{stringValue:String(e)}}}),m=function(e,t){return{key:e,value:d(t)}},h=function(e={}){return Object.entries(e).map((function(e){var t=e[0],r=e[1];return m(t,r)}))},_=function(){function e(e){var t=e.resource,r=e.collectorUrl,n=e.attributes,o=e.maxQueueSize,i=e.scheduledDelayMillis,s=e.serviceName,a=e.projectName;this.resource=t,this.collectorUrl=r,this.defaultAttributes=n,this.maxQueueSize=o,this.scheduledDelayMillis=i,this.logs=[],this.projectName=a,this.serviceName=s}return e.prototype.recordLog=function(e){let t=l.trace.getTracer("error-trace").startSpan(e.message);var r=this,o=n(n([],h(this.defaultAttributes),!0),[m("type",e.type),m("http.url",location.href),m("level","error"),m("project.name",this.projectName),m("service.name",this.serviceName),m("browser.trace",!0)],!1);t.setAttribute("type",e.type),t.setAttribute("http.url",location.href),t.setAttribute("level","error"),t.setAttribute("project.name",this.projectName),t.setAttribute("service.name",this.serviceName),t.setAttribute("browser.trace",!0),t.setAttribute("event.type","error"),t.setStatus({code:p.SpanStatusCode.ERROR,message:String(e.message)}),t.recordException(e.message),e.element&&(o.push(m("element.xpath",e.element.xpath)),t.setAttribute("element.xpath",e.element.xpath)),e.error&&(o.push(m("error.name",e.error.name)),o.push(m("error.message",e.error.message)),t.setAttribute("error.name",e.error.name),t.setAttribute("error.message",e.error.message),e.error.stack&&(o.push(m("error.stack",e.error.stack)),t.setAttribute("error.stack",e.error.stack))),e.arguments&&(o.push(m("arguments",e.arguments)),t.setAttribute("arguments",e.arguments)),e.attributes&&Object.entries(e.attributes).forEach((function(e){let r=e[0],n=e[1];o.push(m(r,n)),t.setAttribute(r,n)})),this.logs.push({observedTimeUnixNano:u(c()),body:{stringValue:e.message},attributes:o,droppedAttributesCount:0,traceId:null==t?"":t.spanContext().traceId,spanId:null==t?"":t.spanContext().spanId}),this.logs.length>=this.maxQueueSize?this.export():void 0===this.timer&&(this.timer=Number(setTimeout((function(){return r.export()}),this.scheduledDelayMillis))),t.end()},e.prototype.export=function(){clearTimeout(this.timer),this.timer=void 0;var e=this.logs;if(e.length){this.logs=[];var t=JSON.stringify({resourceLogs:[{resource:{attributes:h(this.resource.attributes)},scopeLogs:[{instrumentationLibrary:{name:i,version:s},logRecords:e}],schemaUrl:"https://opentelemetry.io/schemas/1.6.1"}]});!function(e,t){new Blob([t],{type:"application/json"}),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:t})}(this.collectorUrl,t)}},e}();r.LogsExporter=_},{"../package.json":627,"@opentelemetry/api":21,"@opentelemetry/core":65,"@opentelemetry/resources":248}],632:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LogsInstrumentation=void 0;var n=e("@opentelemetry/sdk-trace-web").getElementXPath,o=e("../packages/logs-exporter"),i=(o.LogRecord,o.LogsExporter,function(e,t){return e.length>t?"".concat(e.slice(0,t),"..."):e}),s=function(e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack?i(e.stack,5e3):void 0}:void 0},a=function(e,t){if(void 0===t&&(t=0),"string"==typeof e){var r=i(e,500);return t>0?'"'.concat(r,'"'):r}return Array.isArray(e)?t>0?"...":"[".concat(e.map((function(e){return a(e,t+1)})).join(", "),"]"):e instanceof Error?a({name:e.name,message:e.message},t):null!=e&&"object"==typeof e?t>0?"...":"{ ".concat(Object.getOwnPropertyNames(e).map((function(r){return"".concat(r,": ").concat(a(e[r],t+1))})).join(", ")," }"):String(e)},c=function(e,t){void 0===t&&(t=new Set);var r=!t.has(e);if(t.add(e),Array.isArray(e))return e.map((function(e){return c(e,t)}));if(null!=e&&"object"==typeof e){var n={};return Object.getOwnPropertyNames(e).forEach((function(o){var i=e[o];n[o]=t.has(i)&&(i!==e||r)?"[Circular]":c(i)})),n}return e},u=function(){function e(e){var t=this,r=e.exporter;this.isEnabled=!1,this.onError=function(e){t.exporter.recordLog({type:"uncaughtException",message:e.message,error:s(e.error)})},this.onUnhandledRejection=function(e){var r=e.reason;if(r){var n=s(r);t.exporter.recordLog({type:"unhandledRejection",message:n?"Unhandled rejection ".concat(r):String(r),error:n})}},this.onDocumentError=function(e){var r=e.target;if(r){var o=n(r);o&&t.exporter.recordLog({type:"documentError",message:"Uncaught error in element ".concat(r.currentSrc?r.currentSrc:o),element:{xpath:o}})}},this.onConsoleError=function(e){var r=e.find(s),n=e.length>3||e.find((function(e){return null!=e&&"object"==typeof e&&!(e instanceof Error)}))?e.map((function(e){return c(e)})):void 0;t.exporter.recordLog({type:"consoleError",message:e.map((function(e){return a(e)})).join(" "),arguments:n,error:r})},this.exporter=r;var o=console.error;console.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.isEnabled&&t.onConsoleError(e),o.apply(console,e)}}return e.prototype.enable=function(){this.disable(),window.addEventListener("error",this.onError),window.addEventListener("unhandledrejection",this.onUnhandledRejection),document.documentElement.addEventListener("error",this.onDocumentError,{capture:!0}),this.isEnabled=!0},e.prototype.disable=function(){window.removeEventListener("error",this.onError),window.removeEventListener("unhandledrejection",this.onUnhandledRejection),document.documentElement.removeEventListener("error",this.onDocumentError,{capture:!0}),this.isEnabled=!1},e}();r.LogsInstrumentation=u},{"../packages/logs-exporter":631,"@opentelemetry/sdk-trace-web":392}],633:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){var t,r;function n(e){return e.nodeType===e.ELEMENT_NODE}function o(e){var t=e?.host;return Boolean(t?.shadowRoot===e)}function i(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function s(e){try{var t=e.rules||e.cssRules;return t?function(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}(Array.from(t).map(a).join("")):null}catch{return null}}function a(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=s(e.styleSheet)||t}catch{}return t}(r=t||(t={}))[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment";var c=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;return e?(null===(t=this.getMeta(e))||void 0===t?void 0:t.id)??-1:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function u(){return new c}function l(e){var t=e.maskInputOptions,r=e.tagName,n=e.type,o=e.value,i=e.maskInputFn,s=o||"";return(t[r.toLowerCase()]||t[n])&&(s=i?i(s):"*".repeat(s.length)),s}var p="__rrweb_original__";var d=1,m=new RegExp("[^a-z0-9-_:]"),h=-2;function _(){return d++}var f,g,E=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,T=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,y=/^(data:)([^,]*),(.*)/i;function S(e,t){return(e||"").replace(E,(function(e,r,n,o,i,s){var a=n||i||s,c=r||o||"";if(!a)return e;if(!T.test(a)||y.test(a))return"url(".concat(c).concat(a).concat(c,")");if("/"===a[0])return"url(".concat(c).concat(function(e){return(e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0]).split("?")[0]}(t)+a).concat(c,")");var u=t.split("/"),l=a.split("/");u.pop();for(var p=0,d=l;p<d.length;p++){var m=d[p];"."!==m&&(".."===m?u.pop():u.push(m))}return"url(".concat(c).concat(u.join("/")).concat(c,")")}))}var v=/^[^ \t\n\r\u000c]+/,O=/^[, \t\n\r\u000c]+/;function b(e,t){if(!t||""===t.trim())return t;var r=e.createElement("a");return r.href=t,r.href}function A(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function R(){var e=document.createElement("a");return e.href="",e.href}function N(e,t,r,n){return"src"===r||"href"===r&&n&&("use"!==t||"#"!==n[0])||"xlink:href"===r&&n&&"#"!==n[0]||"background"===r&&n&&("table"===t||"td"===t||"th"===t)?b(e,n):"srcset"===r&&n?function(e,t){if(""===t.trim())return t;var r=0;function n(e){var n,o=e.exec(t.substring(r));return o?(n=o[0],r+=n.length,n):""}for(var o=[];n(O),!(r>=t.length);){var i=n(v);if(","===i.slice(-1))i=b(e,i.substring(0,i.length-1)),o.push(i);else{var s="";i=b(e,i);for(var a=!1;;){var c=t.charAt(r);if(""===c){o.push((i+s).trim());break}if(a)")"===c&&(a=!1);else{if(","===c){r+=1,o.push((i+s).trim());break}"("===c&&(a=!0)}s+=c,r+=1}}}return o.join(", ")}(e,n):"style"===r&&n?S(n,R()):"object"===t&&"data"===r&&n?b(e,n):n}function P(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&P(e.parentNode,t,r);for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&P(e.parentNode,t,r)}function I(e,t,r){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===n)return!1;if("string"==typeof t){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(P(n,t,!0))return!0;return!(!r||!n.matches(r)&&!n.closest(r))}function M(e,r){var n=r.doc,o=r.mirror,i=r.blockClass,a=r.blockSelector,c=r.maskTextClass,u=r.maskTextSelector,d=r.inlineStylesheet,h=r.maskInputOptions,_=void 0===h?{}:h,E=r.maskTextFn,T=r.maskInputFn,y=r.dataURLOptions,v=void 0===y?{}:y,O=r.inlineImages,b=r.recordCanvas,P=r.keepIframeSrcFn,M=r.newlyAddedElement,C=void 0!==M&&M,w=function(e,t){if(t.hasNode(e)){var r=t.getId(e);return 1===r?void 0:r}}(n,o);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:t.Document,childNodes:[],compatMode:e.compatMode}:{type:t.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:t.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,r){for(var n=r.doc,o=r.blockClass,i=r.blockSelector,a=r.inlineStylesheet,c=r.maskInputOptions,u=void 0===c?{}:c,d=r.maskInputFn,h=r.dataURLOptions,_=void 0===h?{}:h,E=r.inlineImages,T=r.recordCanvas,y=r.keepIframeSrcFn,v=r.newlyAddedElement,O=void 0!==v&&v,b=r.rootId,P=function(e,t,r){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return!!r&&e.matches(r)}(e,o,i),I=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return m.test(t)?"div":t}(e),M={},C=e.attributes.length,w=0;w<C;w++){var L=e.attributes[w];M[L.name]=N(n,I,L.name,L.value)}if("link"===I&&a){var D=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),x=null;D&&(x=s(D)),x&&(delete M.rel,delete M.href,M._cssText=S(x,D.href))}if("style"===I&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(x=s(e.sheet))&&(M._cssText=S(x,R()))}if("input"===I||"textarea"===I||"select"===I){var k=e.value,U=e.checked;"radio"!==M.type&&"checkbox"!==M.type&&"submit"!==M.type&&"button"!==M.type&&k?M.value=l({type:M.type,tagName:I,value:k,maskInputOptions:u,maskInputFn:d}):U&&(M.checked=U)}if("option"===I&&(e.selected&&!u.select?M.selected=!0:delete M.selected),"canvas"===I&&T)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var o=t.getImageData,i=p in o?o[p]:o;if(new Uint32Array(i.call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(M.rr_dataURL=e.toDataURL(_.type,_.quality));else if(!("__context"in e)){var B=e.toDataURL(_.type,_.quality),j=document.createElement("canvas");j.width=e.width,j.height=e.height,B!==j.toDataURL(_.type,_.quality)&&(M.rr_dataURL=B)}if("img"===I&&E){f||(f=n.createElement("canvas"),g=f.getContext("2d"));var V=e,F=V.crossOrigin;V.crossOrigin="anonymous";var G=function(){try{f.width=V.naturalWidth,f.height=V.naturalHeight,g.drawImage(V,0,0),M.rr_dataURL=f.toDataURL(_.type,_.quality)}catch(e){console.warn("Cannot inline img src=".concat(V.currentSrc,"! Error: ").concat(e))}F?M.crossOrigin=F:V.removeAttribute("crossorigin")};V.complete&&0!==V.naturalWidth?G():V.onload=G}if(("audio"===I||"video"===I)&&(M.rr_mediaState=e.paused?"paused":"played",M.rr_mediaCurrentTime=e.currentTime),O||(e.scrollLeft&&(M.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(M.rr_scrollTop=e.scrollTop)),P){var H=e.getBoundingClientRect(),X=H.width,W=H.height;M={class:M.class,rr_width:"".concat(X,"px"),rr_height:"".concat(W,"px")}}return"iframe"===I&&!y(M.src)&&(e.contentDocument||(M.rr_src=M.src),delete M.src),{type:t.Element,tagName:I,attributes:M,childNodes:[],isSVG:A(e)||void 0,needBlock:P,rootId:b}}(e,{doc:n,blockClass:i,blockSelector:a,inlineStylesheet:d,maskInputOptions:_,maskInputFn:T,dataURLOptions:v,inlineImages:O,recordCanvas:b,keepIframeSrcFn:P,newlyAddedElement:C,rootId:w});case e.TEXT_NODE:return function(e,r){var n,o=r.maskTextClass,i=r.maskTextSelector,s=r.maskTextFn,a=r.rootId,c=e.parentNode&&e.parentNode.tagName,u=e.textContent,l="STYLE"===c||void 0,p="SCRIPT"===c||void 0;if(l&&u){try{e.nextSibling||e.previousSibling||null!==(n=e.parentNode.sheet)&&void 0!==n&&n.cssRules&&(u=function(e){return e.cssRules?Array.from(e.cssRules).map((function(e){return e.cssText||""})).join(""):""}(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}u=S(u,R())}return p&&(u="SCRIPT_PLACEHOLDER"),!l&&!p&&u&&I(e,o,i)&&(u=s?s(u):u.replace(/[\S]/g,"*")),{type:t.Text,textContent:u||"",isStyle:l,rootId:a}}(e,{maskTextClass:c,maskTextSelector:u,maskTextFn:E,rootId:w});case e.CDATA_SECTION_NODE:return{type:t.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:t.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function C(e){return void 0===e?"":e.toLowerCase()}function w(e,r){var s,a=r.doc,c=r.mirror,u=r.blockClass,l=r.blockSelector,p=r.maskTextClass,d=r.maskTextSelector,m=r.skipChild,f=void 0!==m&&m,g=r.inlineStylesheet,E=void 0===g||g,T=r.maskInputOptions,y=void 0===T?{}:T,S=r.maskTextFn,v=r.maskInputFn,O=r.slimDOMOptions,b=r.dataURLOptions,A=void 0===b?{}:b,R=r.inlineImages,N=void 0!==R&&R,P=r.recordCanvas,I=void 0!==P&&P,L=r.onSerialize,D=r.onIframeLoad,x=r.iframeLoadTimeout,k=void 0===x?5e3:x,U=r.onStylesheetLoad,B=r.stylesheetLoadTimeout,j=void 0===B?5e3:B,V=r.keepIframeSrcFn,F=void 0===V?function(){return!1}:V,G=r.newlyAddedElement,H=void 0!==G&&G,X=r.preserveWhiteSpace,W=void 0===X||X,K=M(e,{doc:a,mirror:c,blockClass:u,blockSelector:l,maskTextClass:p,maskTextSelector:d,inlineStylesheet:E,maskInputOptions:y,maskTextFn:S,maskInputFn:v,dataURLOptions:A,inlineImages:N,recordCanvas:I,keepIframeSrcFn:F,newlyAddedElement:H});if(!K)return console.warn(e,"not serialized"),null;s=c.hasNode(e)?c.getId(e):function(e,r){return!!(r.comment&&e.type===t.Comment||e.type===t.Element&&(r.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js"))||r.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(C(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===C(e.attributes.name)||"icon"===C(e.attributes.rel)||"apple-touch-icon"===C(e.attributes.rel)||"shortcut icon"===C(e.attributes.rel)))||"meta"===e.tagName&&(r.headMetaDescKeywords&&C(e.attributes.name).match(/^description|keywords$/)||r.headMetaSocial&&(C(e.attributes.property).match(/^(og|twitter|fb):/)||C(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===C(e.attributes.name))||r.headMetaRobots&&("robots"===C(e.attributes.name)||"googlebot"===C(e.attributes.name)||"bingbot"===C(e.attributes.name))||r.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"]||r.headMetaAuthorship&&("author"===C(e.attributes.name)||"generator"===C(e.attributes.name)||"framework"===C(e.attributes.name)||"publisher"===C(e.attributes.name)||"progid"===C(e.attributes.name)||C(e.attributes.property).match(/^article:/)||C(e.attributes.property).match(/^product:/))||r.headMetaVerification&&("google-site-verification"===C(e.attributes.name)||"yandex-verification"===C(e.attributes.name)||"csrf-token"===C(e.attributes.name)||"p:domain_verify"===C(e.attributes.name)||"verify-v1"===C(e.attributes.name)||"verification"===C(e.attributes.name)||"shopify-checkout-api-token"===C(e.attributes.name)))))}(K,O)||!W&&K.type===t.Text&&!K.isStyle&&!K.textContent.replace(/^\s+|\s+$/gm,"").length?h:_();var z=Object.assign(K,{id:s});if(c.add(e,z),s===h)return null;L&&L(e);var Y=!f;if(z.type===t.Element){Y=Y&&!z.needBlock,delete z.needBlock;var Z=e.shadowRoot;Z&&i(Z)&&(z.isShadowHost=!0)}if((z.type===t.Document||z.type===t.Element)&&Y){O.headWhitespace&&z.type===t.Element&&"head"===z.tagName&&(W=!1);for(var $={doc:a,mirror:c,blockClass:u,blockSelector:l,maskTextClass:p,maskTextSelector:d,skipChild:f,inlineStylesheet:E,maskInputOptions:y,maskTextFn:S,maskInputFn:v,slimDOMOptions:O,dataURLOptions:A,inlineImages:N,recordCanvas:I,preserveWhiteSpace:W,onSerialize:L,onIframeLoad:D,iframeLoadTimeout:k,onStylesheetLoad:U,stylesheetLoadTimeout:j,keepIframeSrcFn:F},q=0,Q=Array.from(e.childNodes);q<Q.length;q++){(te=w(Q[q],$))&&z.childNodes.push(te)}if(n(e)&&e.shadowRoot)for(var J=0,ee=Array.from(e.shadowRoot.childNodes);J<ee.length;J++){var te;(te=w(ee[J],$))&&(i(e.shadowRoot)&&(te.isShadow=!0),z.childNodes.push(te))}}return e.parentNode&&o(e.parentNode)&&i(e.parentNode)&&(z.isShadow=!0),z.type===t.Element&&"iframe"===z.tagName&&function(e,t,r){var n=e.contentWindow;if(n){var o,i=!1;try{o=n.document.readyState}catch{return}if("complete"!==o){var s=setTimeout((function(){i||(t(),i=!0)}),r);return void e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}var a="about:blank";if(n.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}(e,(function(){var t=e.contentDocument;if(t&&D){var r=w(t,{doc:t,mirror:c,blockClass:u,blockSelector:l,maskTextClass:p,maskTextSelector:d,skipChild:!1,inlineStylesheet:E,maskInputOptions:y,maskTextFn:S,maskInputFn:v,slimDOMOptions:O,dataURLOptions:A,inlineImages:N,recordCanvas:I,preserveWhiteSpace:W,onSerialize:L,onIframeLoad:D,iframeLoadTimeout:k,onStylesheetLoad:U,stylesheetLoadTimeout:j,keepIframeSrcFn:F});r&&D(e,r)}}),k),z.type===t.Element&&"link"===z.tagName&&"stylesheet"===z.attributes.rel&&function(e,t,r){var n,o=!1;try{n=e.sheet}catch{return}if(!n){var i=setTimeout((function(){o||(t(),o=!0)}),r);e.addEventListener("load",(function(){clearTimeout(i),o=!0,t()}))}}(e,(function(){if(U){var t=w(e,{doc:a,mirror:c,blockClass:u,blockSelector:l,maskTextClass:p,maskTextSelector:d,skipChild:!1,inlineStylesheet:E,maskInputOptions:y,maskTextFn:S,maskInputFn:v,slimDOMOptions:O,dataURLOptions:A,inlineImages:N,recordCanvas:I,preserveWhiteSpace:W,onSerialize:L,onIframeLoad:D,iframeLoadTimeout:k,onStylesheetLoad:U,stylesheetLoadTimeout:j,keepIframeSrcFn:F});t&&U(e,t)}}),j),z}var L=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function D(e,t){void 0===t&&(t={});var r=1,n=1;function o(e){var t=e.match(/\n/g);t&&(r+=t.length);var o=e.lastIndexOf("\n");n=-1===o?n+e.length:e.length-o}function i(){var e={line:r,column:n};return function(t){return t.position=new s(e),m(),t}}var s=function(e){this.start=e,this.end={line:r,column:n},this.source=t.source};s.prototype.content=e;var a=[];function c(o){var i=new Error("".concat(t.source||"",":").concat(r,":").concat(n,": ").concat(o));if(i.reason=o,i.filename=t.source,i.line=r,i.column=n,i.source=e,!t.silent)throw i;a.push(i)}function u(){return d(/^{\s*/)}function l(){return d(/^}/)}function p(){var t,r=[];for(m(),h(r);e.length&&"}"!==e.charAt(0)&&(t=A()||R());)!1!==t&&(r.push(t),h(r));return r}function d(t){var r=t.exec(e);if(r){var n=r[0];return o(n),e=e.slice(n.length),r}}function m(){d(/^\s*/)}function h(e){void 0===e&&(e=[]);for(var t;t=_();)!1!==t&&e.push(t),t=_();return e}function _(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var r=2;""!==e.charAt(r)&&("*"!==e.charAt(r)||"/"!==e.charAt(r+1));)++r;if(r+=2,""===e.charAt(r-1))return c("End of comment missing");var s=e.slice(2,r-2);return n+=2,o(s),e=e.slice(r),n+=2,t({type:"comment",comment:s})}}function f(){var e=d(/^([^{]+)/);if(e)return x(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function g(){var e=i(),t=d(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var r=x(t[0]);if(!d(/^:\s*/))return c("property missing ':'");var n=d(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:r.replace(L,""),value:n?x(n[0]).replace(L,""):""});return d(/^[;\s]*/),o}}function E(){var e,t=[];if(!u())return c("missing '{'");for(h(t);e=g();)!1!==e&&(t.push(e),h(t)),e=g();return l()?t:c("missing '}'")}function T(){for(var e,t=[],r=i();e=d(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),d(/^,\s*/);if(t.length)return r({type:"keyframe",values:t,declarations:E()})}var y,S=b("import"),v=b("charset"),O=b("namespace");function b(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=i(),n=d(t);if(n){var o={type:e};return o[e]=n[1].trim(),r(o)}}}function A(){if("@"===e[0])return function(){var e=i(),t=d(/^@([-\w]+)?keyframes\s*/);if(t){var r=t[1];if(!(t=d(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n=t[1];if(!u())return c("@keyframes missing '{'");for(var o,s=h();o=T();)s.push(o),s=s.concat(h());return l()?e({type:"keyframes",name:n,vendor:r,keyframes:s}):c("@keyframes missing '}'")}}()||function(){var e=i(),t=d(/^@media *([^{]+)/);if(t){var r=x(t[1]);if(!u())return c("@media missing '{'");var n=h().concat(p());return l()?e({type:"media",media:r,rules:n}):c("@media missing '}'")}}()||function(){var e=i(),t=d(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:x(t[1]),media:x(t[2])})}()||function(){var e=i(),t=d(/^@supports *([^{]+)/);if(t){var r=x(t[1]);if(!u())return c("@supports missing '{'");var n=h().concat(p());return l()?e({type:"supports",supports:r,rules:n}):c("@supports missing '}'")}}()||S()||v()||O()||function(){var e=i(),t=d(/^@([-\w]+)?document *([^{]+)/);if(t){var r=x(t[1]),n=x(t[2]);if(!u())return c("@document missing '{'");var o=h().concat(p());return l()?e({type:"document",document:n,vendor:r,rules:o}):c("@document missing '}'")}}()||function(){var e=i();if(d(/^@page */)){var t=f()||[];if(!u())return c("@page missing '{'");for(var r,n=h();r=g();)n.push(r),n=n.concat(h());return l()?e({type:"page",selectors:t,declarations:n}):c("@page missing '}'")}}()||function(){var e=i();if(d(/^@host\s*/)){if(!u())return c("@host missing '{'");var t=h().concat(p());return l()?e({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var e=i();if(d(/^@font-face\s*/)){if(!u())return c("@font-face missing '{'");for(var t,r=h();t=g();)r.push(t),r=r.concat(h());return l()?e({type:"font-face",declarations:r}):c("@font-face missing '}'")}}()}function R(){var e=i(),t=f();return t?(h(),e({type:"rule",selectors:t,declarations:E()})):c("selector missing")}return k((y=p(),{type:"stylesheet",stylesheet:{source:t.source,rules:y,parsingErrors:a}}))}function x(e){return e?e.replace(/^\s+|\s+$/g,""):""}function k(e,t){for(var r=e&&"string"==typeof e.type,n=r?e:t,o=0,i=Object.keys(e);o<i.length;o++){var s=e[i[o]];Array.isArray(s)?s.forEach((function(e){k(e,n)})):s&&"object"==typeof s&&k(s,n)}return r&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var U={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var B=/([^\\]):hover/,j=new RegExp(B.source,"g");function V(e,t){var r=t?.stylesWithHoverClass.get(e);if(r)return r;var n=D(e,{silent:!0});if(!n.stylesheet)return e;var o=[];if(n.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){B.test(e)&&o.push(e)}))})),0===o.length)return e;var i=new RegExp(o.filter((function(e,t){return o.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e)})).join("|"),"g"),s=e.replace(i,(function(e){var t=e.replace(j,"$1.\\:hover");return"".concat(e,", ").concat(t)}));return t?.stylesWithHoverClass.set(e,s),s}function F(){return{stylesWithHoverClass:new Map}}function G(e,r){var n=r.doc,o=r.hackCss,i=r.cache;switch(e.type){case t.Document:return n.implementation.createDocument(null,"",null);case t.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case t.Element:var s,a=function(e){var t=U[e.tagName]?U[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(e);s=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",a):n.createElement(a);var c={};for(var u in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,u)){var l=e.attributes[u];if("option"!==a||"selected"!==u||!1!==l){if(!0===l&&(l=""),u.startsWith("rr_")){c[u]=l;continue}var p="textarea"===a&&"value"===u,d="style"===a&&"_cssText"===u;if(d&&o&&"string"==typeof l&&(l=V(l,i)),(p||d)&&"string"==typeof l){for(var m=n.createTextNode(l),h=0,_=Array.from(s.childNodes);h<_.length;h++){var f=_[h];f.nodeType===s.TEXT_NODE&&s.removeChild(f)}s.appendChild(m);continue}try{if(e.isSVG&&"xlink:href"===u)s.setAttributeNS("http://www.w3.org/1999/xlink",u,l.toString());else if("onload"===u||"onclick"===u||"onmouse"===u.substring(0,7))s.setAttribute("_"+u,l.toString());else{if("meta"===a&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===u){s.setAttribute("csp-content",l.toString());continue}"link"===a&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===a&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===a&&e.attributes.srcset&&e.attributes.rr_dataURL?s.setAttribute("rrweb-original-srcset",e.attributes.srcset):s.setAttribute(u,l.toString()))}}catch{}}}var g=function(t){var r=c[t];if("canvas"===a&&"rr_dataURL"===t){var n=document.createElement("img");n.onload=function(){var e=s.getContext("2d");e&&e.drawImage(n,0,0,n.width,n.height)},n.src=r.toString(),s.RRNodeType&&(s.rr_dataURL=r.toString())}else if("img"===a&&"rr_dataURL"===t){var o=s;o.currentSrc.startsWith("data:")||(o.setAttribute("rrweb-original-src",e.attributes.src),o.src=r.toString())}if("rr_width"===t)s.style.width=r.toString();else if("rr_height"===t)s.style.height=r.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof r)s.currentTime=r;else if("rr_mediaState"===t)switch(r){case"played":s.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":s.pause()}};for(var E in c)g(E);if(e.isShadowHost)if(s.shadowRoot)for(;s.shadowRoot.firstChild;)s.shadowRoot.removeChild(s.shadowRoot.firstChild);else s.attachShadow({mode:"open"});return s;case t.Text:return n.createTextNode(e.isStyle&&o?V(e.textContent,i):e.textContent);case t.CDATA:return n.createCDATASection(e.textContent);case t.Comment:return n.createComment(e.textContent);default:return null}}function H(e,r){var o=r.doc,i=r.mirror,s=r.skipChild,a=void 0!==s&&s,c=r.hackCss,u=void 0===c||c,l=r.afterAppend,p=r.cache,d=G(e,{doc:o,hackCss:u,cache:p});if(!d)return null;if(e.rootId&&i.getNode(e.rootId)!==o&&i.replace(e.rootId,o),e.type===t.Document&&(o.close(),o.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==t.DocumentType&&(e.childNodes[0].type===t.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?o.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):o.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),d=o),i.add(d,e),(e.type===t.Document||e.type===t.Element)&&!a)for(var m=0,h=e.childNodes;m<h.length;m++){var _=h[m],f=H(_,{doc:o,mirror:i,skipChild:!1,hackCss:u,afterAppend:l,cache:p});f?(_.isShadow&&n(d)&&d.shadowRoot?d.shadowRoot.appendChild(f):d.appendChild(f),l&&l(f,_.id)):console.warn("Failed to rebuild",_)}return d}function X(e,r){var n=r.doc,o=r.onVisit,i=r.hackCss,s=void 0===i||i,a=r.afterAppend,u=r.cache,l=r.mirror,p=void 0===l?new c:l,d=H(e,{doc:n,mirror:p,skipChild:!1,hackCss:s,afterAppend:a,cache:u});return function(e,t){for(var r=0,n=e.getIds();r<n.length;r++){var o=n[r];e.has(o)&&t(e.getNode(o))}}(p,(function(e){o&&o(e),function(e,r){var n=r.getMeta(e);if(n?.type===t.Element){var o=e;for(var i in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,i)&&i.startsWith("rr_")){var s=n.attributes[i];"rr_scrollLeft"===i&&(o.scrollLeft=s),"rr_scrollTop"===i&&(o.scrollTop=s)}}}(e,p)})),d}function W(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const K="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";function z(e,t,r={}){let n=null,o=0;return function(...i){const s=Date.now();!o&&!1===r.leading&&(o=s);const a=t-(s-o),c=this;a<=0||a>t?(n&&(clearTimeout(n),n=null),o=s,e.apply(c,i)):!n&&!1!==r.trailing&&(n=setTimeout((()=>{o=!1===r.leading?0:Date.now(),n=null,e.apply(c,i)}),a))}}function Y(e,t,r,n,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(e){setTimeout((()=>{r.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Y(e,t,i||{},!0)}function Z(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function $(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function q(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Q(e,t,r,n){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if("string"==typeof t){if(o.classList.contains(t)||n&&null!==o.closest("."+t))return!0}else if(P(o,t,n))return!0;return!(!r||!(e.matches(r)||n&&null!==o.closest(r)))}function J(e,t){return-1!==t.getId(e)}function ee(e,t){return t.getId(e)===h}function te(e,t){if(o(e))return!1;const r=t.getId(e);return!t.has(r)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||te(e.parentNode,t))}function re(e){return Boolean(e.changedTouches)}function ne(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}function oe(e){const t={},r=(e,r)=>{const n={value:e,parent:r,children:[]};return t[e.node.id]=n,n},n=[];for(const o of e){const{nextId:e,parentId:i}=o;if(e&&e in t){const i=t[e];if(i.parent){const e=i.parent.children.indexOf(i);i.parent.children.splice(e,0,r(o,i.parent))}else{const e=n.indexOf(i);n.splice(e,0,r(o,null))}}else if(i in t){const e=t[i];e.children.push(r(o,e))}else n.push(r(o,null))}return n}function ie(e,t){t(e.value);for(let r=e.children.length-1;r>=0;r--)ie(e.children[r],t)}function se(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ae(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function ce(e,t){var r,n;const o=null==(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?void 0:n.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),s=ce(o,t),a=i.height/o.clientHeight;return{x:i.x*s.relativeScale+s.x,y:i.y*s.relativeScale+s.y,relativeScale:a,absoluteScale:s.absoluteScale*a}}function ue(e){return Boolean(e?.shadowRoot)}function le(e,t){const r=e[t[0]];return 1===t.length?r:le(r.cssRules[t[1]].cssRules,t.slice(2))}function pe(e){const t=[...e],r=t.pop();return{positions:t,index:r}}function de(e){const t=new Set,r=[];for(let n=e.length;n--;){const o=e[n];t.has(o.id)||(r.push(o),t.add(o.id))}return r}e.mirror={map:{},getId:()=>(console.error(K),-1),getNode:()=>(console.error(K),null),removeNodeFromMap(){console.error(K)},has:()=>(console.error(K),!1),reset(){console.error(K)}},typeof window<"u"&&window.Proxy&&window.Reflect&&(e.mirror=new Proxy(e.mirror,{get:(e,t,r)=>("map"===t&&console.error(K),Reflect.get(e,t,r))}));class me{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!=(t=this.styleIDMap.get(e))?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return r=void 0===t?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var he=Object.freeze({__proto__:null,on:W,get _mirror(){return e.mirror},throttle:z,hookSetter:Y,patch:Z,getWindowHeight:$,getWindowWidth:q,isBlocked:Q,isSerialized:J,isIgnored:ee,isAncestorRemoved:te,isTouchEvent:re,polyfill:ne,queueToResolveTrees:oe,iterateResolveTree:ie,isSerializedIframe:se,isSerializedStylesheet:ae,getBaseDimension:ce,hasShadowRoot:ue,getNestedRule:le,getPositionsAndIndex:pe,uniqueTextMutations:de,StyleSheetMirror:me}),_e=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(_e||{}),fe=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(fe||{}),ge=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ge||{}),Ee=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ee||{}),Te=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Te||{}),ye=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(ye||{});function Se(e){return"__ln"in e}class ve{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=t?.next||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Se(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&Se(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;!this.head||(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const Oe=(e,t)=>`${e}@${t}`;class be{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new ve,r=e=>{let t=e,r=h;for(;r===h;)t=t&&t.nextSibling,r=t&&this.mirror.getId(t);return r},n=n=>{var i,s,a,c;let u=null;(null==(s=null==(i=n.getRootNode)?void 0:i.call(n))?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host&&(u=n.getRootNode().host);let l=u;for(;(null==(c=null==(a=l?.getRootNode)?void 0:a.call(l))?void 0:c.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&l.getRootNode().host;)l=l.getRootNode().host;const p=!(this.doc.contains(n)||l&&this.doc.contains(l));if(!n.parentNode||p)return;const d=o(n.parentNode)?this.mirror.getId(u):this.mirror.getId(n.parentNode),m=r(n);if(-1===d||-1===m)return t.addNode(n);const h=w(n,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{se(e,this.mirror)&&this.iframeManager.addIframe(e),ae(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),ue(n)&&this.shadowDomManager.addShadowRoot(n.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});h&&e.push({parentId:d,nextId:m,node:h})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of Array.from(this.movedSet.values()))Re(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||n(e);for(const e of Array.from(this.addedSet.values()))!Pe(this.droppedSet,e)&&!Re(this.removes,e,this.mirror)||Pe(this.movedSet,e)?n(e):this.droppedSet.add(e);let i=null;for(;t.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e)for(let n=t.length-1;n>=0;n--){const o=t.get(n);if(o){const t=this.mirror.getId(o.value.parentNode);if(-1===r(o.value))continue;if(-1!==t){e=o;break}{const t=o.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=o;break}}}}}if(!e){for(;t.head;)t.removeNode(t.head.value);break}i=e.previous,t.removeNode(e.value),n(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>({id:this.mirror.getId(e.node),attributes:e.attributes}))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};!s.texts.length&&!s.attributes.length&&!s.removes.length&&!s.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!ee(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;!Q(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:I(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(r=l({maskInputOptions:this.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:r,maskInputFn:this.maskInputFn})),Q(e.target,this.blockClass,this.blockSelector,!1)||r===e.oldValue)return;let n=this.attributes.find((t=>t.node===e.target));if("IFRAME"===t.tagName&&"src"===e.attributeName&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;e.attributeName="rr_src"}if(n||(n={node:e.target,attributes:{}},this.attributes.push(n)),"style"===e.attributeName){const r=this.doc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue),(void 0===n.attributes.style||null===n.attributes.style)&&(n.attributes.style={});const o=n.attributes.style;for(const e of Array.from(t.style)){const n=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);(n!==r.style.getPropertyValue(e)||i!==r.style.getPropertyPriority(e))&&(o[e]=""===i?n:[n,i])}for(const e of Array.from(r.style))""===t.style.getPropertyValue(e)&&(o[e]=!1)}else n.attributes[e.attributeName]=N(this.doc,t.tagName,e.attributeName,r);break}case"childList":if(Q(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const r=this.mirror.getId(t),n=o(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Q(e.target,this.blockClass,this.blockSelector,!1)||ee(t,this.mirror)||!J(t,this.mirror)||(this.addedSet.has(t)?(Ae(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===r||te(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Oe(r,n)]?Ae(this.movedSet,t):this.removes.push({parentId:n,id:r,isShadow:!(!o(e.target)||!i(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(this.mirror.hasNode(e)){if(ee(e,this.mirror))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&-1!==r&&(this.movedMap[Oe(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Q(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach((e=>this.genAdds(e)))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ae(e,t){e.delete(t),t.childNodes.forEach((t=>Ae(e,t)))}function Re(e,t,r){return 0!==e.length&&Ne(e,t,r)}function Ne(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return!!e.some((e=>e.id===o))||Ne(e,n,r)}function Pe(e,t){return 0!==e.size&&Ie(e,t)}function Ie(e,t){const{parentNode:r}=t;return!!r&&(!!e.has(r)||Ie(e,r))}var Me=Object.defineProperty,Ce=Object.defineProperties,we=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))De.call(t,r)&&ke(e,r,t[r]);if(Le)for(var r of Le(t))xe.call(t,r)&&ke(e,r,t[r]);return e},Be=(e,t)=>Ce(e,we(t));const je=[],Ve=typeof CSSGroupingRule<"u",Fe=typeof CSSMediaRule<"u",Ge=typeof CSSSupportsRule<"u",He=typeof CSSConditionRule<"u";function Xe(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function We(e,t){var r,n;const o=new be;je.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const s=null==(n=null==(r=window?.Zone)?void 0:r.__symbol__)?void 0:n.call(r,"MutationObserver");s&&window[s]&&(i=window[s]);const a=new i(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Ke({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const s=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,a=[];return Object.keys(ge).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((i=>{const s=i.toLowerCase(),c=(t=>i=>{const s=Xe(i);if(Q(s,n,o,!0))return;const a=re(i)?i.changedTouches[0]:i;if(!a)return;const c=r.getId(s),{clientX:u,clientY:l}=a;e({type:ge[t],id:c,x:u,y:l})})(i);a.push(W(s,c,t))})),()=>{a.forEach((e=>e()))}}function ze({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:i}){return W("scroll",z((i=>{const s=Xe(i);if(!s||Q(s,n,o,!0))return;const a=r.getId(s);if(s===t){const r=t.scrollingElement||t.documentElement;e({id:a,x:r.scrollLeft,y:r.scrollTop})}else e({id:a,x:s.scrollLeft,y:s.scrollTop})}),i.scroll||100),t)}function Ye(e,t){const r=Ue({},e);return t||delete r.userTriggered,r}const Ze=["INPUT","TEXTAREA","SELECT"],$e=new WeakMap;function qe(e){return function(e,t){if(Ve&&e.parentRule instanceof CSSGroupingRule||Fe&&e.parentRule instanceof CSSMediaRule||Ge&&e.parentRule instanceof CSSSupportsRule||He&&e.parentRule instanceof CSSConditionRule){const r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){const r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function Qe(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Je({mirror:e,stylesheetManager:t},r){var n,o,i;let s=null;s="#document"===r.nodeName?e.getId(r):e.getId(r.host);const a="#document"===r.nodeName?null==(n=r.defaultView)?void 0:n.Document:null==(i=null==(o=r.ownerDocument)?void 0:o.defaultView)?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(a?.prototype,"adoptedStyleSheets");return null!==s&&-1!==s&&a&&c?(Object.defineProperty(r,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null==(e=c.get)?void 0:e.call(this)},set(e){var r;const n=null==(r=c.set)?void 0:r.call(this,e);if(null!==s&&-1!==s)try{t.adoptStyleSheets(e,s)}catch{}return n}}),()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}):()=>{}}function et(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};!function(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:s,inputCb:a,mediaInteractionCb:c,styleSheetRuleCb:u,styleDeclarationCb:l,canvasMutationCb:p,fontCb:d,selectionCb:m}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),r(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),n(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),s(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),a(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),l(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),p(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),d(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),m(...e)}}(e,t);const n=We(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const c=z((t=>{const r=Date.now()-s;e(a.map((e=>(e.timeOffset-=r,e))),t),a=[],s=null}),i),u=z((e=>{const t=Xe(e),{clientX:r,clientY:o}=re(e)?e.changedTouches[0]:e;s||(s=Date.now()),a.push({x:r,y:o,id:n.getId(t),timeOffset:Date.now()-s}),c(typeof DragEvent<"u"&&e instanceof DragEvent?fe.Drag:e instanceof MouseEvent?fe.MouseMove:fe.TouchMove)}),o,{trailing:!1}),l=[W("mousemove",u,r),W("touchmove",u,r),W("drag",u,r)];return()=>{l.forEach((e=>e()))}}(e),i=Ke(e),s=ze(e),a=function({viewportResizeCb:e}){let t=-1,r=-1;return W("resize",z((()=>{const n=$(),o=q();(t!==n||r!==o)&&(e({width:Number(o),height:Number(n)}),t=n,r=o)}),200),window)}(e),c=function({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,maskInputOptions:s,maskInputFn:a,sampling:c,userTriggeredOnInput:u}){function p(e){let r=Xe(e);const c=e.isTrusted;if(r&&"OPTION"===r.tagName&&(r=r.parentElement),!r||!r.tagName||Ze.indexOf(r.tagName)<0||Q(r,n,o,!0))return;const p=r.type;if(r.classList.contains(i))return;let m=r.value,h=!1;"radio"===p||"checkbox"===p?h=r.checked:(s[r.tagName.toLowerCase()]||s[p])&&(m=l({maskInputOptions:s,tagName:r.tagName,type:p,value:m,maskInputFn:a})),d(r,Ye({text:m,isChecked:h,userTriggered:c},u));const _=r.name;"radio"===p&&_&&h&&t.querySelectorAll(`input[type="radio"][name="${_}"]`).forEach((e=>{e!==r&&d(e,Ye({text:e.value,isChecked:!h,userTriggered:!1},u))}))}function d(t,n){const o=$e.get(t);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){$e.set(t,n);const o=r.getId(t);e(Be(Ue({},n),{id:o}))}}const m=("last"===c.input?["change"]:["input","change"]).map((e=>W(e,p,t))),h=t.defaultView;if(!h)return()=>{m.forEach((e=>e()))};const _=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,"value"),f=[[h.HTMLInputElement.prototype,"value"],[h.HTMLInputElement.prototype,"checked"],[h.HTMLSelectElement.prototype,"value"],[h.HTMLTextAreaElement.prototype,"value"],[h.HTMLSelectElement.prototype,"selectedIndex"],[h.HTMLOptionElement.prototype,"selected"]];return _&&_.set&&m.push(...f.map((e=>Y(e[0],e[1],{set(){p({target:this})}},!1,h)))),()=>{m.forEach((e=>e()))}}(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o}){const i=i=>z((o=>{const s=Xe(o);if(!s||Q(s,t,r,!0))return;const{currentTime:a,volume:c,muted:u,playbackRate:l}=s;e({type:i,id:n.getId(s),currentTime:a,volume:c,muted:u,playbackRate:l})}),o.media||500),s=[W("play",i(Te.Play)),W("pause",i(Te.Pause)),W("seeked",i(Te.Seeked)),W("volumechange",i(Te.VolumeChange)),W("ratechange",i(Te.RateChange))];return()=>{s.forEach((e=>e()))}}(e),p=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(n,i){const{id:s,styleId:a}=Qe(this,t,r.styleMirror);return(s&&-1!==s||a&&-1!==a)&&e({id:s,styleId:a,adds:[{rule:n,index:i}]}),o.apply(this,[n,i])};const i=n.CSSStyleSheet.prototype.deleteRule;let s,a;n.CSSStyleSheet.prototype.deleteRule=function(n){const{id:o,styleId:s}=Qe(this,t,r.styleMirror);return(o&&-1!==o||s&&-1!==s)&&e({id:o,styleId:s,removes:[{index:n}]}),i.apply(this,[n])},n.CSSStyleSheet.prototype.replace&&(s=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=function(n){const{id:o,styleId:i}=Qe(this,t,r.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replace:n}),s.apply(this,[n])}),n.CSSStyleSheet.prototype.replaceSync&&(a=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=function(n){const{id:o,styleId:i}=Qe(this,t,r.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replaceSync:n}),a.apply(this,[n])});const c={};Ve?c.CSSGroupingRule=n.CSSGroupingRule:(Fe&&(c.CSSMediaRule=n.CSSMediaRule),He&&(c.CSSConditionRule=n.CSSConditionRule),Ge&&(c.CSSSupportsRule=n.CSSSupportsRule));const u={};return Object.entries(c).forEach((([n,o])=>{u[n]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(o,i){const{id:s,styleId:a}=Qe(this.parentStyleSheet,t,r.styleMirror);return(s&&-1!==s||a&&-1!==a)&&e({id:s,styleId:a,adds:[{rule:o,index:[...qe(this),i||0]}]}),u[n].insertRule.apply(this,[o,i])},o.prototype.deleteRule=function(o){const{id:i,styleId:s}=Qe(this.parentStyleSheet,t,r.styleMirror);return(i&&-1!==i||s&&-1!==s)&&e({id:i,styleId:s,removes:[{index:[...qe(this),o]}]}),u[n].deleteRule.apply(this,[o])}})),()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,s&&(n.CSSStyleSheet.prototype.replace=s),a&&(n.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}}(e,{win:r}),d=Je(e,e.doc),m=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(o,s,a){var c;if(r.has(o))return i.apply(this,[o,s,a]);const{id:u,styleId:l}=Qe(null==(c=this.parentRule)?void 0:c.parentStyleSheet,t,n.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,set:{property:o,value:s,priority:a},index:qe(this.parentRule)}),i.apply(this,[o,s,a])};const s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(o){var i;if(r.has(o))return s.apply(this,[o]);const{id:a,styleId:c}=Qe(null==(i=this.parentRule)?void 0:i.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,remove:{property:o},index:qe(this.parentRule)}),s.apply(this,[o])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s}}(e,{win:r}),h=e.collectFonts?function({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(e,t,r){const n=new i(e,t,r);return o.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};const s=Z(t.fonts,"add",(function(t){return function(r){return setTimeout((()=>{const t=o.get(r);t&&(e(t),o.delete(r))}),0),t.apply(this,[r])}}));return n.push((()=>{r.FontFace=i})),n.push(s),()=>{n.forEach((e=>e()))}}(e):()=>{},_=function(e){const{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=e;let s=!0;const a=()=>{const e=t.getSelection();if(!e||s&&e?.isCollapsed)return;s=e.isCollapsed||!1;const a=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:s,startOffset:c,endContainer:u,endOffset:l}=i;Q(s,n,o,!0)||Q(u,n,o,!0)||a.push({start:r.getId(s),startOffset:c,end:r.getId(u),endOffset:l})}i({ranges:a})};return a(),W("selectionchange",a)}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,r,t.options));return()=>{je.forEach((e=>e.reset())),n.disconnect(),o(),i(),s(),a(),c(),u(),p(),d(),m(),h(),_(),f.forEach((e=>e()))}}class tt{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,r,n){const o=r||this.getIdToRemoteIdMap(e),i=n||this.getRemoteIdToIdMap(e);let s=o.get(t);return s||(s=this.generateIdFn(),o.set(t,s),i.set(s,t)),s}getIds(e,t){const r=this.getIdToRemoteIdMap(e),n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,r,n)))}getRemoteId(e,t,r){const n=r||this.getRemoteIdToIdMap(e);return"number"!=typeof t?t:n.get(t)||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,r)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class rt{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new tt(_),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new tt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"===e.data.type){if(!e.source)return;const t=this.crossOriginIframeMap.get(e.source);if(!t)return;const r=this.transformCrossOriginEvent(t,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}}transformCrossOriginEvent(e,t){var r;switch(t.type){case _e.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:_e.IncrementalSnapshot,data:{source:fe.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case _e.Meta:case _e.Load:case _e.DomContentLoaded:return!1;case _e.Plugin:return t;case _e.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case _e.IncrementalSnapshot:switch(t.data.source){case fe.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case fe.Drag:case fe.TouchMove:case fe.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case fe.ViewportResize:return!1;case fe.MediaInteraction:case fe.MouseInteraction:case fe.Scroll:case fe.CanvasMutation:case fe.Input:return this.replaceIds(t.data,e,["id"]),t;case fe.StyleSheetRule:case fe.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case fe.Font:return t;case fe.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case fe.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,r,n){for(const o of n)!Array.isArray(t[o])&&"number"!=typeof t[o]||(Array.isArray(t[o])?t[o]=e.getIds(r,t[o]):t[o]=e.getId(r,t[o]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}}var nt=Object.defineProperty,ot=Object.defineProperties,it=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))at.call(t,r)&&ut(e,r,t[r]);if(st)for(var r of st(t))ct.call(t,r)&&ut(e,r,t[r]);return e},pt=(e,t)=>ot(e,it(t));class dt{constructor(e){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;const t=this;this.restorePatches.push(Z(Element.prototype,"attachShadow",(function(e){return function(r){const n=e.call(this,r);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}addShadowRoot(e,t){!i(e)||this.shadowDoms.has(e)||(this.shadowDoms.add(e),We(pt(lt({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),ze(pt(lt({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),Je({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e)}),0))}observeAttachShadow(e){if(e.contentWindow){const t=this;this.restorePatches.push(Z(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(r){return function(n){const o=r.call(this,n);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),o}})))}}reset(){this.restorePatches.forEach((e=>e())),this.shadowDoms=new WeakSet}}for(var mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ht=typeof Uint8Array>"u"?[]:new Uint8Array(256),_t=0;_t<64;_t++)ht[mt.charCodeAt(_t)]=_t;var ft=function(e){var t,r,n,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),l=new Uint8Array(u);for(t=0;t<a;t+=4)r=ht[e.charCodeAt(t)],n=ht[e.charCodeAt(t+1)],o=ht[e.charCodeAt(t+2)],i=ht[e.charCodeAt(t+3)],l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u};const gt=new Map;const Et=(e,t,r)=>{if(!e||!St(e,t)&&"object"!=typeof e)return;const n=function(e,t){let r=gt.get(e);return r||(r=new Map,gt.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}(r,e.constructor.name);let o=n.indexOf(e);return-1===o&&(o=n.length,n.push(e)),o};function Tt(e,t,r){if(e instanceof Array)return e.map((e=>Tt(e,t,r)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const t=e.constructor.name,r=function(e){var t,r=new Uint8Array(e),n=r.length,o="";for(t=0;t<n;t+=3)o+=mt[r[t]>>2],o+=mt[(3&r[t])<<4|r[t+1]>>4],o+=mt[(15&r[t+1])<<2|r[t+2]>>6],o+=mt[63&r[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:r}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Tt(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:r}=e;return{rr_type:t,src:r}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Tt(e.data,t,r),e.width,e.height]};if(St(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Et(e,t,r)}}return e}const yt=(e,t,r)=>[...e].map((e=>Tt(e,t,r))),St=(e,t)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(r.find((r=>e instanceof t[r])))};function vt(e,t,r){const n=[];try{const o=Z(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n,...o){return Q(this,t,r,!0)||"__context"in this||(this.__context=n),e.apply(this,[n,...o])}}));n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach((e=>e()))}}function Ot(e,t,r,n,o,i,s){const a=[],c=Object.getOwnPropertyNames(e);for(const i of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const c=Z(e,i,(function(e){return function(...a){const c=e.apply(this,a);if(Et(c,s,this),!Q(this.canvas,n,o,!0)){const e=yt([...a],s,this),n={type:t,property:i,args:e};r(this.canvas,n)}return c}}));a.push(c)}catch{const n=Y(e,i,{set(e){r(this.canvas,{type:t,property:i,args:[e],setter:!0})}});a.push(n)}return a}function bt(e,t,r){var n=void 0===t?null:t,o=function(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}(e,void 0!==r&&r),i=o.indexOf("\n",10)+1,s=o.substring(i)+(n?"//# sourceMappingURL="+n:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var At=function(e,t,r){var n;return function(o){return n=n||bt(e,t,r),new Worker(n,o)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Zm9yKHZhciByPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIixwPXR5cGVvZiBVaW50OEFycmF5PiJ1Ij9bXTpuZXcgVWludDhBcnJheSgyNTYpLGY9MDtmPHIubGVuZ3RoO2YrKylwW3IuY2hhckNvZGVBdChmKV09Zjt2YXIgdT1mdW5jdGlvbihzKXt2YXIgZT1uZXcgVWludDhBcnJheShzKSxuLGE9ZS5sZW5ndGgsdD0iIjtmb3Iobj0wO248YTtuKz0zKXQrPXJbZVtuXT4+Ml0sdCs9clsoZVtuXSYzKTw8NHxlW24rMV0+PjRdLHQrPXJbKGVbbisxXSYxNSk8PDJ8ZVtuKzJdPj42XSx0Kz1yW2VbbisyXSY2M107cmV0dXJuIGElMz09PTI/dD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTEpKyI9IjphJTM9PT0xJiYodD10LnN1YnN0cmluZygwLHQubGVuZ3RoLTIpKyI9PSIpLHR9O2NvbnN0IGM9bmV3IE1hcCxsPW5ldyBNYXA7YXN5bmMgZnVuY3Rpb24gdihzLGUsbil7Y29uc3QgYT1gJHtzfS0ke2V9YDtpZigiT2Zmc2NyZWVuQ2FudmFzImluIGdsb2JhbFRoaXMpe2lmKGwuaGFzKGEpKXJldHVybiBsLmdldChhKTtjb25zdCB0PW5ldyBPZmZzY3JlZW5DYW52YXMocyxlKTt0LmdldENvbnRleHQoIjJkIik7Y29uc3QgZz1hd2FpdChhd2FpdCB0LmNvbnZlcnRUb0Jsb2IobikpLmFycmF5QnVmZmVyKCksZD11KGcpO3JldHVybiBsLnNldChhLGQpLGR9ZWxzZSByZXR1cm4iIn1jb25zdCBpPXNlbGY7aS5vbm1lc3NhZ2U9YXN5bmMgZnVuY3Rpb24ocyl7aWYoIk9mZnNjcmVlbkNhbnZhcyJpbiBnbG9iYWxUaGlzKXtjb25zdHtpZDplLGJpdG1hcDpuLHdpZHRoOmEsaGVpZ2h0OnQsZGF0YVVSTE9wdGlvbnM6Z309cy5kYXRhLGQ9dihhLHQsZyksaD1uZXcgT2Zmc2NyZWVuQ2FudmFzKGEsdCk7aC5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShuLDAsMCksbi5jbG9zZSgpO2NvbnN0IHc9YXdhaXQgaC5jb252ZXJ0VG9CbG9iKGcpLHk9dy50eXBlLGI9YXdhaXQgdy5hcnJheUJ1ZmZlcigpLG89dShiKTtpZighYy5oYXMoZSkmJmF3YWl0IGQ9PT1vKXJldHVybiBjLnNldChlLG8pLGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpZihjLmdldChlKT09PW8pcmV0dXJuIGkucG9zdE1lc3NhZ2Uoe2lkOmV9KTtpLnBvc3RNZXNzYWdlKHtpZDplLHR5cGU6eSxiYXNlNjQ6byx3aWR0aDphLGhlaWdodDp0fSksYy5zZXQoZSxvKX1lbHNlIHJldHVybiBpLnBvc3RNZXNzYWdlKHtpZDpzLmRhdGEuaWR9KX19KSgpOwoK",null,!1),Rt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;class It{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:r,blockClass:n,blockSelector:o,recordCanvas:i,dataURLOptions:s}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(r,n,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,n,o,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,n,o){const i=vt(t,r,n),s=new Map,a=new At;a.onmessage=e=>{const{id:t}=e.data;if(s.set(t,!1),!("base64"in e.data))return;const{base64:r,type:n,width:o,height:i}=e.data;this.mutationCb({id:t,type:Ee["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:n}]},0,0]}]})};const c=1e3/e;let u,l=0;const p=e=>{l&&e-l<c||(l=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{Q(t,r,n,!0)||e.push(t)})),e})().forEach((e=>((e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())})))(this,null,(function*(){var t;const r=this.mirror.getId(e);if(s.get(r))return;if(s.set(r,!0),["webgl","webgl2"].includes(e.__context)){const r=e.getContext(e.__context);!1===(null==(t=r?.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&r?.clear(r.COLOR_BUFFER_BIT)}const n=yield createImageBitmap(e);a.postMessage({id:r,bitmap:n,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[n])}))))),u=requestAnimationFrame(p)};u=requestAnimationFrame(p),this.resetObservers=()=>{i(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const n=vt(e,t,r),o=function(e,t,r,n){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const i=Z(t.CanvasRenderingContext2D.prototype,s,(function(o){return function(...i){return Q(this.canvas,r,n,!0)||setTimeout((()=>{const r=yt([...i],t,this);e(this.canvas,{type:Ee["2D"],property:s,args:r})}),0),o.apply(this,i)}}));o.push(i)}catch{const r=Y(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:Ee["2D"],property:s,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,r),i=function(e,t,r,n,o){const i=[];return i.push(...Ot(t.WebGLRenderingContext.prototype,Ee.WebGL,e,r,n,0,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Ot(t.WebGL2RenderingContext.prototype,Ee.WebGL2,e,r,n,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,r,this.mirror);this.resetObservers=()=>{n(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||-1===t)return;const n=r.map((e=>((e,t)=>{var r={};for(var n in e)Nt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Rt)for(var n of Rt(e))t.indexOf(n)<0&&Pt.call(e,n)&&(r[n]=e[n]);return r})(e,["type"]))),{type:o}=r[0];this.mutationCb({id:t,type:o,commands:n}),this.pendingCanvasMutations.delete(e)}}class Mt{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new me,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const r={id:t,styleIds:[]},n=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const r=Array.from(t.rules||CSSRule);n.push({styleId:e,rules:r.map(((e,t)=>({rule:a(e),index:t})))})}r.styleIds.push(e)}n.length>0&&(r.styles=n),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}var Ct=Object.defineProperty,wt=Object.defineProperties,Lt=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Ut=(e,t,r)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bt=(e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&Ut(e,r,t[r]);if(Dt)for(var r of Dt(t))kt.call(t,r)&&Ut(e,r,t[r]);return e},jt=(e,t)=>wt(e,Lt(t));function Vt(e){return jt(Bt({},e),{timestamp:Date.now()})}let Ft,Gt,Ht,Xt=!1;const Wt=u();function Kt(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:s="rr-ignore",maskTextClass:a="rr-mask",maskTextSelector:u=null,inlineStylesheet:l=!0,maskAllInputs:p,maskInputOptions:d,slimDOMOptions:m,maskInputFn:h,maskTextFn:_,hooks:f,packFn:g,sampling:E={},dataURLOptions:T={},mousemoveWait:y,recordCanvas:S=!1,recordCrossOriginIframes:v=!1,userTriggeredOnInput:O=!1,collectFonts:b=!1,inlineImages:A=!1,plugins:R,keepIframeSrcFn:N=(()=>!1),ignoreCSSAttributes:P=new Set([])}=e,I=!v||window.parent===window;let M=!1;if(!I)try{window.parent.document,M=!1}catch{M=!0}if(I&&!t)throw new Error("emit function is required");void 0!==y&&void 0===E.mousemove&&(E.mousemove=y),Wt.reset();const C=!0===p?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},L=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m}:m||{};ne();let D,x=0;const k=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return g&&(e=g(e)),e};Ft=(e,o)=>{var i;if((null==(i=je[0])?void 0:i.isFrozen())&&e.type!==_e.FullSnapshot&&!(e.type===_e.IncrementalSnapshot&&e.data.source===fe.Mutation)&&je.forEach((e=>e.unfreeze())),I)t?.(k(e),o);else if(M){const t={type:"rrweb",event:k(e),isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===_e.FullSnapshot)D=e,x=0;else if(e.type===_e.IncrementalSnapshot){if(e.data.source===fe.Mutation&&e.data.isAttachIframe)return;x++;const t=n&&x>=n,o=r&&e.timestamp-D.timestamp>r;(t||o)&&Gt(!0)}};const U=e=>{Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.Mutation},e)}))},B=e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.Scroll},e)})),j=e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.CanvasMutation},e)})),V=new Mt({mutationCb:U,adoptedStyleSheetCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.AdoptedStyleSheet},e)}))}),F=new rt({mirror:Wt,mutationCb:U,stylesheetManager:V,recordCrossOriginIframes:v,wrappedEmit:Ft});for(const e of R||[])e.getMirror&&e.getMirror({nodeMirror:Wt,crossOriginIframeMirror:F.crossOriginIframeMirror,crossOriginIframeStyleMirror:F.crossOriginIframeStyleMirror});Ht=new It({recordCanvas:S,mutationCb:j,win:window,blockClass:o,blockSelector:i,mirror:Wt,sampling:E.canvas,dataURLOptions:T});const G=new dt({mutationCb:U,scrollCb:B,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:u,inlineStylesheet:l,maskInputOptions:C,dataURLOptions:T,maskTextFn:_,maskInputFn:h,recordCanvas:S,inlineImages:A,sampling:E,slimDOMOptions:L,iframeManager:F,stylesheetManager:V,canvasManager:Ht,keepIframeSrcFn:N},mirror:Wt});Gt=(e=!1)=>{var t,r,n,s,p,d;Ft(Vt({type:_e.Meta,data:{href:window.location.href,width:q(),height:$()}}),e),V.reset(),je.forEach((e=>e.lock()));const m=function(e,t){var r=t||{},n=r.mirror,o=void 0===n?new c:n,i=r.blockClass,s=void 0===i?"rr-block":i,a=r.blockSelector,u=void 0===a?null:a,l=r.maskTextClass,p=void 0===l?"rr-mask":l,d=r.maskTextSelector,m=void 0===d?null:d,h=r.inlineStylesheet,_=void 0===h||h,f=r.inlineImages,g=void 0!==f&&f,E=r.recordCanvas,T=void 0!==E&&E,y=r.maskAllInputs,S=void 0!==y&&y,v=r.maskTextFn,O=r.maskInputFn,b=r.slimDOM,A=void 0!==b&&b,R=r.dataURLOptions,N=r.preserveWhiteSpace,P=r.onSerialize,I=r.onIframeLoad,M=r.iframeLoadTimeout,C=r.onStylesheetLoad,L=r.stylesheetLoadTimeout,D=r.keepIframeSrcFn;return w(e,{doc:e,mirror:o,blockClass:s,blockSelector:u,maskTextClass:p,maskTextSelector:m,skipChild:!1,inlineStylesheet:_,maskInputOptions:!0===S?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===S?{password:!0}:S,maskTextFn:v,maskInputFn:O,slimDOMOptions:!0===A||"all"===A?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===A,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===A?{}:A,dataURLOptions:R,inlineImages:g,recordCanvas:T,preserveWhiteSpace:N,onSerialize:P,onIframeLoad:I,iframeLoadTimeout:M,onStylesheetLoad:C,stylesheetLoadTimeout:L,keepIframeSrcFn:void 0===D?function(){return!1}:D,newlyAddedElement:!1})}(document,{mirror:Wt,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:u,inlineStylesheet:l,maskAllInputs:C,maskTextFn:_,slimDOM:L,dataURLOptions:T,recordCanvas:S,inlineImages:A,onSerialize:e=>{se(e,Wt)&&F.addIframe(e),ae(e,Wt)&&V.trackLinkElement(e),ue(e)&&G.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{F.attachIframe(e,t),G.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{V.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!m)return console.warn("Failed to snapshot the document");Ft(Vt({type:_e.FullSnapshot,data:{node:m,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:document?.documentElement.scrollLeft||(null==(r=null==(t=document?.body)?void 0:t.parentElement)?void 0:r.scrollLeft)||(null==(n=document?.body)?void 0:n.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:document?.documentElement.scrollTop||(null==(p=null==(s=document?.body)?void 0:s.parentElement)?void 0:p.scrollTop)||(null==(d=document?.body)?void 0:d.scrollTop)||0}}})),je.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,Wt.getId(document))};try{const e=[];e.push(W("DOMContentLoaded",(()=>{Ft(Vt({type:_e.DomContentLoaded,data:{}}))})));const t=e=>{var t;return et({mutationCb:U,mousemoveCb:(e,t)=>Ft(Vt({type:_e.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.MouseInteraction},e)})),scrollCb:B,viewportResizeCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.ViewportResize},e)})),inputCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.Input},e)})),mediaInteractionCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.MediaInteraction},e)})),styleSheetRuleCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.StyleSheetRule},e)})),styleDeclarationCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.StyleDeclaration},e)})),canvasMutationCb:j,fontCb:e=>Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.Font},e)})),selectionCb:e=>{Ft(Vt({type:_e.IncrementalSnapshot,data:Bt({source:fe.Selection},e)}))},blockClass:o,ignoreClass:s,maskTextClass:a,maskTextSelector:u,maskInputOptions:C,inlineStylesheet:l,sampling:E,recordCanvas:S,inlineImages:A,userTriggeredOnInput:O,collectFonts:b,doc:e,maskInputFn:h,maskTextFn:_,keepIframeSrcFn:N,blockSelector:i,slimDOMOptions:L,dataURLOptions:T,mirror:Wt,iframeManager:F,stylesheetManager:V,shadowDomManager:G,canvasManager:Ht,ignoreCSSAttributes:P,plugins:(null==(t=R?.filter((e=>e.observer)))?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>Ft(Vt({type:_e.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},f)};F.addLoadListener((r=>{e.push(t(r.contentDocument))}));const r=()=>{Gt(),e.push(t(document)),Xt=!0};return"interactive"===document.readyState||"complete"===document.readyState?r():e.push(W("load",(()=>{Ft(Vt({type:_e.Load,data:{}})),r()}),window)),()=>{e.forEach((e=>e())),Xt=!1}}catch(e){console.warn(e)}}var zt;Kt.addCustomEvent=(e,t)=>{if(!Xt)throw new Error("please add custom event after start recording");Ft(Vt({type:_e.Custom,data:{tag:e,payload:t}}))},Kt.freezePage=()=>{je.forEach((e=>e.freeze()))},Kt.takeFullSnapshot=e=>{if(!Xt)throw new Error("please take full snapshot after start recording");Gt(e)},Kt.mirror=Wt,function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(zt||(zt={}));var Yt=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;return e?(null===(t=this.getMeta(e))||void 0===t?void 0:t.id)??-1:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Zt(e){const t=[];for(const r in e){const n=e[r];if("string"!=typeof n)continue;const o=er(r);t.push(`${o}: ${n};`)}return t.join(" ")}const $t=/-([a-z])/g,qt=/^--[a-zA-Z0-9-]+$/,Qt=e=>qt.test(e)?e:e.replace($t,((e,t)=>t?t.toUpperCase():"")),Jt=/\B([A-Z])/g,er=e=>e.replace(Jt,"-$1").toLowerCase();class tr{constructor(...e){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=cr.ELEMENT_NODE,this.TEXT_NODE=cr.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const e=this.parentNode;if(!e)return null;const t=e.childNodes,r=t.indexOf(this);return t[r+1]||null}contains(e){if(e===this)return!0;for(const t of this.childNodes)if(t.contains(e))return!0;return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function rr(e){return class extends e{constructor(e,t,r){super(),this.nodeType=cr.DOCUMENT_TYPE_NODE,this.RRNodeType=zt.DocumentType,this.textContent=null,this.name=e,this.publicId=t,this.systemId=r,this.nodeName=e}toString(){return"RRDocumentType"}}}function nr(e){return class extends e{constructor(e){super(),this.nodeType=cr.ELEMENT_NODE,this.RRNodeType=zt.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.childNodes=[this.ownerDocument.createTextNode(e)]}get classList(){return new ar(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?function(e){const t={},r=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const n=e.split(r);n.length>1&&(t[Qt(n[0].trim())]=n[1].trim())}})),t}(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(r,n,o)=>{if(t.test(r))return;const i=Qt(r);n?e[i]=n:delete e[i],"important"===o&&(e[i]+=" !important"),this.attributes.style=Zt(e)},e.removeProperty=r=>{if(t.test(r))return"";const n=Qt(r),o=e[n]||"";return delete e[n],this.attributes.style=Zt(e),o},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,r){this.setAttribute(t,r)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return this.childNodes.push(e),e.parentNode=this,e.parentElement=this,e}insertBefore(e,t){if(null===t)return this.appendChild(e);const r=this.childNodes.indexOf(t);if(-1==r)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(r,0,e),e.parentElement=this,e.parentNode=this,e}removeChild(e){const t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(t,1),e.parentElement=null,e.parentNode=null,e}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}}function or(e){return class extends e{constructor(e){super(),this.nodeType=cr.TEXT_NODE,this.nodeName="#text",this.RRNodeType=zt.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function ir(e){return class extends e{constructor(e){super(),this.nodeType=cr.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=zt.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function sr(e){return class extends e{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=cr.CDATA_SECTION_NODE,this.RRNodeType=zt.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class ar{constructor(e,t){if(this.classes=[],this.add=(...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))},e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}var cr;!function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(cr||(cr={}));const ur={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},lr={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function pr(e,t,r,n){const o=e.childNodes,i=t.childNodes;n=n||t.mirror||t.ownerDocument.mirror,(o.length>0||i.length>0)&&dr(Array.from(o),i,e,r,n);let s=null,a=null;switch(t.RRNodeType){case zt.Document:a=t.scrollData;break;case zt.Element:{const o=e,i=t;switch(function(e,t,r){const n=e.attributes,o=t.attributes;for(const n in o){const i=o[n],s=r.getMeta(t);if(s&&"isSVG"in s&&s.isSVG&&ur[n])e.setAttributeNS(ur[n],n,i);else if("CANVAS"===t.tagName&&"rr_dataURL"===n){const t=document.createElement("img");t.src=i,t.onload=()=>{const r=e.getContext("2d");r&&r.drawImage(t,0,0,t.width,t.height)}}else e.setAttribute(n,i)}for(const{name:t}of Array.from(n))t in o||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}(o,i,n),a=i.scrollData,s=i.inputData,i.tagName){case"AUDIO":case"VIDEO":{const t=e,r=i;void 0!==r.paused&&(r.paused?t.pause():t.play()),void 0!==r.muted&&(t.muted=r.muted),void 0!==r.volume&&(t.volume=r.volume),void 0!==r.currentTime&&(t.currentTime=r.currentTime),void 0!==r.playbackRate&&(t.playbackRate=r.playbackRate);break}case"CANVAS":{const n=t;if(null!==n.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=o.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=n.rr_dataURL}n.canvasMutations.forEach((t=>r.applyCanvas(t.event,t.mutation,e)))}break;case"STYLE":{const e=o.sheet;e&&t.rules.forEach((t=>r.applyStyleSheetMutation(t,e)))}}if(i.shadowRoot){o.shadowRoot||o.attachShadow({mode:"open"});const e=o.shadowRoot.childNodes,t=i.shadowRoot.childNodes;(e.length>0||t.length>0)&&dr(Array.from(e),t,o.shadowRoot,r,n)}break}case zt.Text:case zt.Comment:case zt.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}if(a&&r.applyScroll(a,!0),s&&r.applyInput(s),"IFRAME"===t.nodeName){const o=e.contentDocument,i=t;if(o){const e=n.getMeta(i.contentDocument);e&&r.mirror.add(o,Object.assign({},e)),pr(o,i.contentDocument,r,n)}}}function dr(e,t,r,n,o){var i;let s,a,c=0,u=e.length-1,l=0,p=t.length-1,d=e[c],m=e[u],h=t[l],_=t[p];for(;c<=u&&l<=p;){const f=n.mirror.getId(d),g=n.mirror.getId(m),E=o.getId(h),T=o.getId(_);if(void 0===d)d=e[++c];else if(void 0===m)m=e[--u];else if(-1!==f&&f===E)pr(d,h,n,o),d=e[++c],h=t[++l];else if(-1!==g&&g===T)pr(m,_,n,o),m=e[--u],_=t[--p];else if(-1!==f&&f===T)r.insertBefore(d,m.nextSibling),pr(d,_,n,o),d=e[++c],_=t[--p];else if(-1!==g&&g===E)r.insertBefore(m,d),pr(m,h,n,o),m=e[--u],h=t[++l];else{if(!s){s={};for(let t=c;t<=u;t++){const r=e[t];r&&n.mirror.hasNode(r)&&(s[n.mirror.getId(r)]=t)}}if(a=s[o.getId(h)],a){const t=e[a];r.insertBefore(t,d),pr(t,h,n,o),e[a]=void 0}else{const t=mr(h,n.mirror,o);"#document"===r.nodeName&&(null===(i=n.mirror.getMeta(t))||void 0===i?void 0:i.type)===zt.Element&&r.documentElement&&(r.removeChild(r.documentElement),e[c]=void 0,d=void 0),r.insertBefore(t,d||null),pr(t,h,n,o)}h=t[++l]}}if(c>u){const e=t[p+1];let i=null;for(e&&r.childNodes.forEach((t=>{n.mirror.getId(t)===o.getId(e)&&(i=t)}));l<=p;++l){const e=mr(t[l],n.mirror,o);r.insertBefore(e,i),pr(e,t[l],n,o)}}else if(l>p)for(;c<=u;c++){const t=e[c];t&&(r.removeChild(t),n.mirror.removeNodeFromMap(t))}}function mr(e,t,r){const n=r.getId(e),o=r.getMeta(e);let i=null;if(n>-1&&(i=t.getNode(n)),null!==i)return i;switch(e.RRNodeType){case zt.Document:i=new Document;break;case zt.DocumentType:i=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case zt.Element:{let t=e.tagName.toLowerCase();t=lr[t]||t,i=o&&"isSVG"in o&&o?.isSVG?document.createElementNS(ur.svg,t):document.createElement(e.tagName);break}case zt.Text:i=document.createTextNode(e.data);break;case zt.Comment:i=document.createComment(e.data);break;case zt.CDATA:i=document.createCDATASection(e.data)}return o&&t.add(i,Object.assign({},o)),i}class hr extends(function(e){return class t extends e{constructor(){super(...arguments),this.nodeType=cr.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=zt.Document,this.textContent=null}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===zt.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===zt.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===zt.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===zt.Element||t===zt.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===zt.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return e.parentElement=null,e.parentNode=this,this.childNodes.push(e),e}insertBefore(e,t){const r=e.RRNodeType;if((r===zt.Element||r===zt.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===r)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${r===zt.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(null===t)return this.appendChild(e);const n=this.childNodes.indexOf(t);if(-1==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(n,0,e),e.parentElement=null,e.parentNode=this,e}removeChild(e){const t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(t,1),e.parentElement=null,e.parentNode=null,e}open(){this.childNodes=[]}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,r,n){return new t}createDocumentType(e,t,r){const n=new(rr(tr))(e,t,r);return n.ownerDocument=this,n}createElement(e){const t=new(nr(tr))(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new(or(tr))(e);return t.ownerDocument=this,t}createComment(e){const t=new(ir(tr))(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new(sr(tr))(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}}(tr)){constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new Rr,this.scrollData=null,e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,r){return new hr}createDocumentType(e,t,r){const n=new _r(e,t,r);return n.ownerDocument=this,n}createElement(e){const t=e.toUpperCase();let r;switch(t){case"AUDIO":case"VIDEO":r=new gr(t);break;case"IFRAME":r=new yr(t,this.mirror);break;case"CANVAS":r=new Er(t);break;case"STYLE":r=new Tr(t);break;default:r=new fr(t)}return r.ownerDocument=this,r}createComment(e){const t=new vr(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new Or(e);return t.ownerDocument=this,t}createTextNode(e){const t=new Sr(e);return t.ownerDocument=this,t}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const _r=rr(tr);class fr extends(nr(tr)){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class gr extends(function(e){return class extends e{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(fr)){}class Er extends fr{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class Tr extends fr{constructor(){super(...arguments),this.rules=[]}}class yr extends fr{constructor(e,t){super(e),this.contentDocument=new hr,this.contentDocument.mirror=t}}const Sr=or(tr),vr=ir(tr),Or=sr(tr);function br(e,t,r,n){let o;switch(e.nodeType){case cr.DOCUMENT_NODE:n&&"IFRAME"===n.nodeName?o=n.contentDocument:(o=t,o.compatMode=e.compatMode);break;case cr.DOCUMENT_TYPE_NODE:{const r=e;o=t.createDocumentType(r.name,r.publicId,r.systemId);break}case cr.ELEMENT_NODE:{const r=e,n=function(e){return e instanceof HTMLFormElement?"FORM":e.tagName.toUpperCase()}(r);o=t.createElement(n);const i=o;for(const{name:e,value:t}of Array.from(r.attributes))i.attributes[e]=t;r.scrollLeft&&(i.scrollLeft=r.scrollLeft),r.scrollTop&&(i.scrollTop=r.scrollTop);break}case cr.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case cr.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case cr.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case cr.DOCUMENT_FRAGMENT_NODE:o=n.attachShadow({mode:"open"});break;default:return null}let i=r.getMeta(e);return t instanceof hr&&(i||(i=Nr(o,t.unserializedId),r.add(e,i)),t.mirror.add(o,Object.assign({},i))),o}function Ar(e,t=function(){return new Yt}(),r=new hr){return function e(n,o){const i=br(n,r,t,o);if(null!==i)if("IFRAME"!==o?.nodeName&&n.nodeType!==cr.DOCUMENT_FRAGMENT_NODE&&(o?.appendChild(i),i.parentNode=o,i.parentElement=o),"IFRAME"===n.nodeName){const t=n.contentDocument;t&&e(t,i)}else(n.nodeType===cr.DOCUMENT_NODE||n.nodeType===cr.ELEMENT_NODE||n.nodeType===cr.DOCUMENT_FRAGMENT_NODE)&&(n.nodeType===cr.ELEMENT_NODE&&n.shadowRoot&&e(n.shadowRoot,i),n.childNodes.forEach((t=>e(t,i))))}(e,null),r}class Rr{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;return(null===(t=this.getMeta(e))||void 0===t?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Nr(e,t){switch(e.RRNodeType){case zt.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case zt.DocumentType:{const r=e;return{id:t,type:e.RRNodeType,name:r.name,publicId:r.publicId,systemId:r.systemId}}case zt.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case zt.Text:case zt.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case zt.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}function Pr(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map((function(e){e(r)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,r)}))}}}var Ir,Mr=Object.freeze({__proto__:null,default:Pr});function Cr(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const r=e.HTMLElement||e.Element,n=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||c,scrollIntoView:r.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const s=(a=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(a)?1:0);var a;function c(e,t){this.scrollLeft=e,this.scrollTop=t}function u(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(e,t){return"Y"===t?e.clientHeight+s<e.scrollHeight:"X"===t?e.clientWidth+s<e.scrollWidth:void 0}function p(t,r){const n=e.getComputedStyle(t,null)["overflow"+r];return"auto"===n||"scroll"===n}function d(e){const t=l(e,"Y")&&p(e,"Y"),r=l(e,"X")&&p(e,"X");return t||r}function m(t){let r,o,s,a=(i()-t.startTime)/n;a=a>1?1:a,r=function(e){return.5*(1-Math.cos(Math.PI*e))}(a),o=t.startX+(t.x-t.startX)*r,s=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,o,s),(o!==t.x||s!==t.y)&&e.requestAnimationFrame(m.bind(e,t))}function h(r,n,s){let a,u,l,p;const d=i();r===t.body?(a=e,u=e.scrollX||e.pageXOffset,l=e.scrollY||e.pageYOffset,p=o.scroll):(a=r,u=r.scrollLeft,l=r.scrollTop,p=c),m({scrollable:a,method:p,startTime:d,startX:u,startY:l,x:n,y:s})}e.scroll=e.scrollTo=function(){if(void 0!==arguments[0]){if(!0===u(arguments[0]))return void o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset);h.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset)}},e.scrollBy=function(){if(void 0!==arguments[0]){if(u(arguments[0]))return void o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0);h.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===u(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;h.call(this,this,typeof e>"u"?this.scrollLeft:~~e,typeof t>"u"?this.scrollTop:~~t)},r.prototype.scrollBy=function(){if(void 0!==arguments[0]){if(!0===u(arguments[0]))return void o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(!0===u(arguments[0]))return void o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const r=function(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}(this),n=r.getBoundingClientRect(),i=this.getBoundingClientRect();r!==t.body?(h.call(this,r,r.scrollLeft+i.left-n.left,r.scrollTop+i.top-n.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}class wr{constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed,this.liveMode=t.liveMode}addAction(e){if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)return void this.actions.push(e);const t=this.findActionIndex(e);this.actions.splice(t,0,e)}start(){this.timeOffset=0;let e=performance.now();const t=()=>{const r=performance.now();for(this.timeOffset+=(r-e)*this.speed,e=r;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(t))};this.raf=requestAnimationFrame(t)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}toggleLiveMode(e){this.liveMode=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,r=this.actions.length-1;for(;t<=r;){const n=Math.floor((t+r)/2);if(this.actions[n].delay<e.delay)t=n+1;else{if(!(this.actions[n].delay>e.delay))return n+1;r=n-1}}return t}}function Lr(e,t){if(e.type===_e.IncrementalSnapshot&&e.data.source===fe.MouseMove&&e.data.positions&&e.data.positions.length){const r=e.data.positions[0].timeOffset,n=e.timestamp+r;return e.delay=n-t,n-t}return e.delay=e.timestamp-t,e.delay}function Dr(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(Ir||(Ir={}));var xr={type:"xstate.init"};function kr(e){return void 0===e?[]:[].concat(e)}function Ur(e){return{type:"xstate.assign",assignment:e}}function Br(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function jr(e){return function(t){return e===t}}function Vr(e){return"string"==typeof e?{type:e}:e}function Fr(e,t){return{value:e,context:t,actions:[],changed:!1,matches:jr(e)}}function Gr(e,t,r){var n=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](n,r):e.assignment[o]})),n=t,!1}return!0})),n,o]}function Hr(e,t){void 0===t&&(t={});var r=Dr(Gr(kr(e.states[e.initial].entry).map((function(e){return Br(e,t.actions)})),e.context,xr),2),n=r[0],o=r[1],i={config:e,_options:t,initialState:{value:e.initial,actions:n,context:o,matches:jr(e.initial)},transition:function(t,r){var n,o,s="string"==typeof t?{value:t,context:e.context}:t,a=s.value,c=s.context,u=Vr(r),l=e.states[a];if(l.on){var p=kr(l.on[u.type]);try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),m=d.next();!m.done;m=d.next()){var h=m.value;if(void 0===h)return Fr(a,c);var _="string"==typeof h?{target:h}:h,f=_.target,g=_.actions,E=void 0===g?[]:g,T=_.cond,y=void 0===T?function(){return!0}:T,S=void 0===f,v=f??a,O=e.states[v];if(y(c,u)){var b=Dr(Gr((S?kr(E):[].concat(l.exit,E,O.entry).filter((function(e){return e}))).map((function(e){return Br(e,i._options.actions)})),c,u),3),A=b[0],R=b[1],N=b[2],P=f??a;return{value:P,context:R,actions:A,changed:f!==a||A.length>0||N,matches:jr(P)}}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}return Fr(a,c)}};return i}var Xr=function(e,t){return e.actions.forEach((function(r){var n=r.exec;return n&&n(e.context,t)}))};function Wr(e){var t=e.initialState,r=Ir.NotStarted,n=new Set,o={_machine:e,send:function(o){r===Ir.Running&&(t=e.transition(t,o),Xr(t,Vr(o)),n.forEach((function(e){return e(t)})))},subscribe:function(e){return n.add(e),e(t),{unsubscribe:function(){return n.delete(e)}}},start:function(n){if(n){var i="object"==typeof n?n:{context:e.config.context,value:n};t={value:i.value,actions:[],context:i.context,matches:jr(i.value)}}return r=Ir.Running,Xr(t,xr),o},stop:function(){return r=Ir.Stopped,n.clear(),o},get state(){return t},get status(){return r}};return o}var Kr=Object.defineProperty,zr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,Qr=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jr=(e,t)=>{for(var r in t||(t={}))$r.call(t,r)&&Qr(e,r,t[r]);if(Zr)for(var r of Zr(t))qr.call(t,r)&&Qr(e,r,t[r]);return e},en=(e,t)=>zr(e,Yr(t));function tn(e,{getCastFn:t,applyEventsSynchronously:r,emitter:n}){const o=Hr({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Ur({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:Ur(((e,t)=>{let r=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(r=t.payload.timeOffset),en(Jr({},e),{timeOffset:r,baselineTime:e.events[0].timestamp+r})})),play(e){var o;const{timer:i,events:s,baselineTime:a,lastPlayedEvent:c}=e;i.clear();for(const e of s)Lr(e,a);const u=function(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.type===_e.Meta&&n.timestamp<=t)return e.slice(r)}return e}(s,a);let l=c?.timestamp;c?.type===_e.IncrementalSnapshot&&c.data.source===fe.MouseMove&&(l=c.timestamp+(null==(o=c.data.positions[0])?void 0:o.timeOffset)),a<(l||0)&&n.emit(ye.PlayBack);const p=new Array;for(const e of u)if(!(l&&l<a&&(e.timestamp<=l||e===c)))if(e.timestamp<a)p.push(e);else{const r=t(e,!1);i.addAction({doAction:()=>{r()},delay:e.delay})}r(p),n.emit(ye.Flush),i.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:Ur((e=>en(Jr({},e),{lastPlayedEvent:null}))),startLive:Ur({baselineTime:(e,t)=>(e.timer.toggleLiveMode(!0),e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:Ur(((e,r)=>{const{baselineTime:n,timer:o,events:i}=e;if("ADD_EVENT"===r.type){const{event:e}=r.payload;Lr(e,n);let s=i.length-1;if(!i[s]||i[s].timestamp<=e.timestamp)i.push(e);else{let t=-1,r=0;for(;r<=s;){const t=Math.floor((r+s)/2);i[t].timestamp<=e.timestamp?r=t+1:s=t-1}-1===t&&(t=r),i.splice(t,0,e)}const a=e.timestamp<n,c=t(e,a);a?c():o.isActive()&&o.addAction({doAction:()=>{c()},delay:e.delay})}return en(Jr({},e),{events:i})}))}});return Wr(o)}var rn=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())}));const nn=new Map;function on(e,t){let r=nn.get(e);return r||(r=new Map,nn.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function sn(e,t,r){return n=>rn(this,null,(function*(){if(n&&"object"==typeof n&&"rr_type"in n){if(r&&(r.isUnchanged=!1),"ImageBitmap"===n.rr_type&&"args"in n){const o=yield sn(e,t,r)(n.args);return yield createImageBitmap.apply(null,o)}if("index"in n){if(r||null===t)return n;const{rr_type:e,index:o}=n;return on(t,e)[o]}if("args"in n){const{rr_type:o,args:i}=n;return new(0,window[o])(...yield Promise.all(i.map(sn(e,t,r))))}if("base64"in n)return ft(n.base64);if("src"in n){const t=e.get(n.src);if(t)return t;{const t=new Image;return t.src=n.src,e.set(n.src,t),t}}if("data"in n&&"Blob"===n.rr_type){const o=yield Promise.all(n.data.map(sn(e,t,r)));return new Blob(o,{type:n.type})}}else if(Array.isArray(n))return yield Promise.all(n.map(sn(e,t,r)));return n}))}var an=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())}));const cn=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function un(e){return an(this,arguments,(function*({mutation:e,target:t,type:r,imageMap:n,errorHandler:o}){try{const o=function(e,t){try{return t===Ee.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch{return null}}(t,r);if(!o)return;if(e.setter)return void(o[e.property]=e.args[0]);const i=o[e.property],s=yield Promise.all(e.args.map(sn(n,o)));!function(e,t){if(null==t||!t.constructor)return;const{name:r}=t.constructor;if(!cn.includes(r))return;const n=on(e,r);n.includes(t)||n.push(t)}(o,i.apply(o,s))}catch(t){o(e,t)}}))}var ln=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())}));function pn(e){return ln(this,arguments,(function*({event:e,mutation:t,target:r,imageMap:n,errorHandler:o}){try{const o=r.getContext("2d");if(t.setter)return void(o[t.property]=t.args[0]);const i=o[t.property];if("drawImage"===t.property&&"string"==typeof t.args[0])n.get(e),i.apply(o,t.args);else{const e=yield Promise.all(t.args.map(sn(n,o)));i.apply(o,e)}}catch(e){o(t,e)}}))}function dn(e){return((e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())})))(this,arguments,(function*({event:e,mutation:t,target:r,imageMap:n,canvasEventMap:o,errorHandler:i}){try{const s=o.get(e)||t,a="commands"in s?s.commands:[s];if([Ee.WebGL,Ee.WebGL2].includes(t.type)){for(let e=0;e<a.length;e++){const o=a[e];yield un({mutation:o,type:t.type,target:r,imageMap:n,errorHandler:i})}return}for(let t=0;t<a.length;t++){const o=a[t];yield pn({event:e,mutation:o,target:r,imageMap:n,errorHandler:i})}}catch(e){i(t,e)}}))}var mn=Object.defineProperty,hn=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,Tn=(e,t,r)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yn=(e,t)=>{for(var r in t||(t={}))gn.call(t,r)&&Tn(e,r,t[r]);if(fn)for(var r of fn(t))En.call(t,r)&&Tn(e,r,t[r]);return e},Sn=(e,t)=>hn(e,_n(t)),vn=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())}));const On=Pr||Mr,bn="[replayer]",An={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Rn(e){return e.type==_e.IncrementalSnapshot&&(e.data.source==fe.TouchMove||e.data.source==fe.MouseInteraction&&e.data.type==ge.TouchStart)}const{addCustomEvent:Nn}=Kt,{freezePage:Pn}=Kt;return e.EventType=_e,e.IncrementalSource=fe,e.MouseInteractions=ge,e.Replayer=class{constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new hr,this.mouseTail=null,this.tailPositions=[],this.emitter=On(),this.legacy_missingNodeRetryMap={},this.cache=F(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=u(),this.styleMirror=new me,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])!t||(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))},this.applyEventsSynchronously=e=>{for(const t of e){switch(t.type){case _e.DomContentLoaded:case _e.Load:case _e.Custom:continue;case _e.FullSnapshot:case _e.Meta:case _e.Plugin:case _e.IncrementalSnapshot:}this.getCastFn(t,!0)()}!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(e,t=!1)=>{let r;switch(e.type){case _e.DomContentLoaded:case _e.Load:break;case _e.Custom:r=()=>{this.emitter.emit(ye.CustomEvent,e)};break;case _e.Meta:r=()=>this.emitter.emit(ye.Resize,{width:e.data.width,height:e.data.height});break;case _e.FullSnapshot:r=()=>{var r;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(e,t),null==(r=this.iframe.contentWindow)||r.scrollTo(e.data.initialOffset),this.styleMirror.reset()};break;case _e.IncrementalSnapshot:r=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,r={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:r}),this.emitter.emit(ye.SkipStart,r)}}}}return()=>{r&&r();for(const r of this.config.plugins||[])r.handler&&r.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const n=this.service.state.context.events.length-1;if(e===this.service.state.context.events[n]){const t=()=>{n<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(ye.Finish))};e.type===_e.IncrementalSnapshot&&e.data.source===fe.MouseMove&&e.data.positions.length?setTimeout((()=>{t()}),Math.max(0,50-e.data.positions[0].timeOffset)):t()}this.emitter.emit(ye.EventCast,e)}},(null==t||!t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:An,useVirtualDom:!0};this.config=Object.assign({},r,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ye.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(ye.Flush,(()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,r)=>{dn({event:e,mutation:t,target:r,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===fe.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===fe.StyleDeclaration&&this.applyStyleDeclaration(e,t)}};if(this.iframe.contentDocument&&pr(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const r=this.legacy_missingNodeRetryMap[t],n=mr(r.node,this.mirror,this.virtualDom.mirror);pr(n,r.node,e,this.virtualDom.mirror),r.node=n}catch(e){this.config.showWarning&&console.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(ye.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()}));const n=new wr([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=tn({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:n,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(ye.StateChange,{player:e})})),this.speedService=function(e){return Wr(Hr({id:"speed",context:e,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:Ur({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}}))}({normalSpeed:-1,timer:n}),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(ye.StateChange,{speed:e})}));const o=this.service.state.context.events.find((e=>e.type===_e.Meta)),i=this.service.state.context.events.find((e=>e.type===_e.FullSnapshot));if(o){const{width:e,height:t}=o.data;setTimeout((()=>{this.emitter.emit(ye.Resize,{width:e,height:t})}),0)}i&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=i,this.rebuildFullSnapshot(i),null==(e=this.iframe.contentWindow)||e.scrollTo(i.data.initialOffset))}),1),this.service.state.context.events.find(Rn)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,r;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null==(r=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||r.classList.remove("rrweb-paused"),this.emitter.emit(ye.Start)}pause(e){var t,r;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null==(r=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||r.classList.add("rrweb-paused"),this.emitter.emit(ye.Pause)}resume(e=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ye.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(ye.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;Rn(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=F()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Cr(this.iframe.contentWindow,this.iframe.contentDocument),ne(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const r=[],n=(e,t)=>{this.collectIframeAndAttachDocument(r,e);for(const r of this.config.plugins||[])r.onBuild&&r.onBuild(e,{id:t,replayer:this})};X(e.data.node,{doc:this.iframe.contentDocument,afterAppend:n,cache:this.cache,mirror:this.mirror}),n(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ye.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var r;const n=(e=>[`.${e} { background: currentColor }`,"noscript { display: none !important; }"])(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&n.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const r=this.virtualDom.createElement("style");this.virtualDom.mirror.add(r,Nr(r,this.virtualDom.unserializedId)),e.insertBefore(r,t),r.rules.push({source:fe.StyleSheetRule,adds:n.map(((e,t)=>({rule:e,index:t})))})}else{const o=document.createElement("style");e.insertBefore(o,t);for(let e=0;e<n.length;e++)null==(r=o.sheet)||r.insertRule(n[e],e)}}attachDocumentToIframe(e,r){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[],i=(e,i)=>{this.collectIframeAndAttachDocument(o,e);const s=n.getMeta(e);if(s?.type===t.Element&&"HTML"===s?.tagName.toUpperCase()){const{documentElement:e,head:t}=r.contentDocument;this.insertStyleRules(e,t)}for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:i,replayer:this})};H(e.node,{doc:r.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:i,cache:this.cache}),i(r.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of o)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e))}collectIframeAndAttachDocument(e,t){if(se(t,this.mirror)){const r=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));r&&e.push({mutationInQueue:r,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null==(e=this.iframe.contentDocument)?void 0:e.head;if(t){const e=new Set;let r,n=this.service.state;const o=()=>{n=this.service.state};this.emitter.on(ye.Start,o),this.emitter.on(ye.Pause,o);const i=()=>{this.emitter.off(ye.Start,o),this.emitter.off(ye.Pause,o)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==r&&(n.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(ye.LoadStylesheetEnd),r&&clearTimeout(r),i())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ye.LoadStylesheetStart),r=setTimeout((()=>{n.matches("playing")&&this.play(this.getCurrentTime()),r=-1,i()}),this.config.loadTimeout))}}preloadAllImages(){return vn(this,null,(function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(ye.Start,e),this.emitter.on(ye.Pause,e);const t=[];for(const e of this.service.state.context.events)e.type===_e.IncrementalSnapshot&&e.data.source===fe.CanvasMutation&&(t.push(this.deserializeAndPreloadCanvasEvents(e.data,e)),("commands"in e.data?e.data.commands:[e.data]).forEach((t=>{this.preloadImages(t,e)})));return Promise.all(t)}))}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const t=document.createElement("canvas"),r=t.getContext("2d"),n=r?.createImageData(t.width,t.height);n?.data,JSON.parse(e.args[0]),r?.putImageData(n,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return vn(this,null,(function*(){if(!this.canvasEventMap.has(t)){const r={isUnchanged:!0};if("commands"in e){const n=yield Promise.all(e.commands.map((e=>vn(this,null,(function*(){const t=yield Promise.all(e.args.map(sn(this.imageMap,null,r)));return Sn(yn({},e),{args:t})})))));!1===r.isUnchanged&&this.canvasEventMap.set(t,Sn(yn({},e),{commands:n}))}else{const n=yield Promise.all(e.args.map(sn(this.imageMap,null,r)));!1===r.isUnchanged&&this.canvasEventMap.set(t,Sn(yn({},e),{args:n}))}}}))}applyIncremental(e,t){var r,n,o;const{data:i}=e;switch(i.source){case fe.Mutation:try{this.applyMutation(i,t)}catch(e){this.warn(`Exception in mutation ${e.message||e}`,i)}break;case fe.Drag:case fe.TouchMove:case fe.MouseMove:if(t){const e=i.positions[i.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:i}}else i.positions.forEach((r=>{const n={doAction:()=>{this.moveAndHover(r.x,r.y,r.id,t,i)},delay:r.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(n)})),this.timer.addAction({doAction(){},delay:e.delay-(null==(r=i.positions[0])?void 0:r.timeOffset)});break;case fe.MouseInteraction:{if(-1===i.id||t)break;const e=new Event(ge[i.type].toLowerCase()),r=this.mirror.getNode(i.id);if(!r)return this.debugNodeNotFound(i,i.id);this.emitter.emit(ye.MouseInteraction,{type:i.type,target:r});const{triggerFocus:n}=this.config;switch(i.type){case ge.Blur:"blur"in r&&r.blur();break;case ge.Focus:n&&r.focus&&r.focus({preventScroll:!0});break;case ge.Click:case ge.TouchStart:case ge.TouchEnd:t?(i.type===ge.TouchStart?this.touchActive=!0:i.type===ge.TouchEnd&&(this.touchActive=!1),this.mousePos={x:i.x,y:i.y,id:i.id,debugData:i}):(i.type===ge.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(i.x,i.y,i.id,t,i),i.type===ge.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):i.type===ge.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):i.type===ge.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case ge.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:r.dispatchEvent(e)}break}case fe.Scroll:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.scrollData=i;break}this.applyScroll(i,t);break;case fe.ViewportResize:this.emitter.emit(ye.Resize,{width:i.width,height:i.height});break;case fe.Input:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.inputData=i;break}this.applyInput(i);break;case fe.MediaInteraction:{const e=this.usingVirtualDom?this.virtualDom.mirror.getNode(i.id):this.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);const t=e;try{i.currentTime&&(t.currentTime=i.currentTime),i.volume&&(t.volume=i.volume),i.muted&&(t.muted=i.muted),i.type===Te.Pause&&t.pause(),i.type===Te.Play&&t.play(),i.type===Te.RateChange&&(t.playbackRate=i.playbackRate)}catch(e){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${e.message||e}`)}break}case fe.StyleSheetRule:case fe.StyleDeclaration:this.usingVirtualDom?i.styleId?this.constructedStyleMutations.push(i):i.id&&(null==(n=this.virtualDom.mirror.getNode(i.id))||n.rules.push(i)):this.applyStyleSheetMutation(i);break;case fe.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);t.canvasMutations.push({event:e,mutation:i})}else{const t=this.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);dn({event:e,mutation:i,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case fe.Font:try{const e=new FontFace(i.family,i.buffer?new Uint8Array(JSON.parse(i.fontSource)):i.fontSource,i.descriptors);null==(o=this.iframe.contentDocument)||o.fonts.add(e)}catch(e){this.config.showWarning&&console.warn(e)}break;case fe.Selection:if(t){this.lastSelectionData=i;break}this.applySelection(i);break;case fe.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(i):this.applyAdoptedStyleSheet(i)}}applyMutation(e,r){if(this.config.useVirtualDom&&!this.usingVirtualDom&&r&&(this.usingVirtualDom=!0,Ar(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],r=br(t.node,this.virtualDom,this.mirror);r&&(t.node=r)}catch(e){this.config.showWarning&&console.warn(e)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes.forEach((t=>{var r;const o=n.getNode(t.id);if(!o)return e.removes.find((e=>e.id===t.parentId))?void 0:this.warnNodeNotFound(e,t.id);let i=n.getNode(t.parentId);if(!i)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&ue(i)&&(i=i.shadowRoot),n.removeNodeFromMap(o),i)try{i.removeChild(o),this.usingVirtualDom&&"#text"===o.nodeName&&"STYLE"===i.nodeName&&(null==(r=i.rules)?void 0:r.length)>0&&(i.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",i,o,e)}}));const o=yn({},this.legacy_missingNodeRetryMap),i=[],s=e=>{var r;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let s=n.getNode(e.parentId);if(!s)return e.node.type===t.Document?this.newDocumentQueue.push(e):i.push(e);e.node.isShadow&&(ue(s)||s.attachShadow({mode:"open"}),s=s.shadowRoot);let a=null,c=null;if(e.previousId&&(a=n.getNode(e.previousId)),e.nextId&&(c=n.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=n.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return i.push(e);if(e.node.rootId&&!n.getNode(e.node.rootId))return;const u=e.node.rootId?n.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(se(s,n))return void this.attachDocumentToIframe(e,s);const l=(e,t)=>{for(const r of this.config.plugins||[])r.onBuild&&r.onBuild(e,{id:t,replayer:this})},p=H(e.node,{doc:u,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:l});if(-1===e.previousId||-1===e.nextId)return void(o[e.node.id]={node:p,mutation:e});const d=n.getMeta(s);if(d&&d.type===t.Element&&"textarea"===d.tagName&&e.node.type===t.Text){const e=Array.isArray(s.childNodes)?s.childNodes:Array.from(s.childNodes);for(const t of e)t.nodeType===s.TEXT_NODE&&s.removeChild(t)}if(a&&a.nextSibling&&a.nextSibling.parentNode)s.insertBefore(p,a.nextSibling);else if(c&&c.parentNode)s.contains(c)?s.insertBefore(p,c):s.insertBefore(p,null);else{if(s===u)for(;u.firstChild;)u.removeChild(u.firstChild);s.appendChild(p)}if(l(p,e.node.id),this.usingVirtualDom&&"#text"===p.nodeName&&"STYLE"===s.nodeName&&(null==(r=s.rules)?void 0:r.length)>0&&(s.rules=[]),se(p,this.mirror)){const e=this.mirror.getId(p),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,p),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(o,s,p,e)};e.adds.forEach((e=>{s(e)}));const a=Date.now();for(;i.length;){const e=oe(i);if(i.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e)n.getNode(t.value.parentId)?ie(t,(e=>{s(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),de(e.texts).forEach((t=>{var r;const o=n.getNode(t.id);if(!o)return e.removes.find((e=>e.id===t.id))?void 0:this.warnNodeNotFound(e,t.id);if(o.textContent=t.value,this.usingVirtualDom){const e=o.parentNode;(null==(r=e?.rules)?void 0:r.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{const r=n.getNode(t.id);if(!r)return e.removes.find((e=>e.id===t.id))?void 0:this.warnNodeNotFound(e,t.id);for(const e in t.attributes)if("string"==typeof e){const o=t.attributes[e];if(null===o)r.removeAttribute(e);else if("string"==typeof o)try{if("_cssText"===e&&("LINK"===r.nodeName||"STYLE"===r.nodeName))try{const e=n.getMeta(r);Object.assign(e.attributes,t.attributes);const o=H(e,{doc:r.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),i=r.nextSibling,s=r.parentNode;if(o&&s){s.removeChild(r),s.insertBefore(o,i),n.replace(t.id,o);break}}catch{}r.setAttribute(e,o)}catch(e){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=o,t=r;for(const r in e)if(!1===e[r])t.style.removeProperty(r);else if(e[r]instanceof Array){const n=e[r];t.style.setProperty(r,n[0],n[1])}else{const n=e[r];t.style.setProperty(r,n)}}}}))}applyScroll(e,r){var n,o;const i=this.mirror.getNode(e.id);if(!i)return this.debugNodeNotFound(e,e.id);const s=this.mirror.getMeta(i);if(i===this.iframe.contentDocument)null==(n=this.iframe.contentWindow)||n.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else if(s?.type===t.Document)null==(o=i.defaultView)||o.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else try{i.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"})}catch{}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch{}}applySelection(e){try{const t=new Set,r=e.ranges.map((({start:e,startOffset:r,end:n,endOffset:o})=>{const i=this.mirror.getNode(e),s=this.mirror.getNode(n);if(!i||!s)return;const a=new Range;a.setStart(i,r),a.setEnd(s,o);const c=i.ownerDocument,u=c?.getSelection();return u&&t.add(u),{range:a,selection:u}}));t.forEach((e=>e.removeAllRanges())),r.forEach((e=>{var t;return e&&(null==(t=e.selection)?void 0:t.addRange(e.range))}))}catch{}}applyStyleSheetMutation(e){var t;let r=null;e.styleId?r=this.styleMirror.getStyle(e.styleId):e.id&&(r=(null==(t=this.mirror.getNode(e.id))?void 0:t.sheet)||null),r&&(e.source===fe.StyleSheetRule?this.applyStyleSheetRule(e,r):e.source===fe.StyleDeclaration&&this.applyStyleDeclaration(e,r))}applyStyleSheetRule(e,t){var r,n,o,i;if(null==(r=e.adds)||r.forEach((({rule:e,index:r})=>{try{if(Array.isArray(r)){const{positions:n,index:o}=pe(r);le(t.cssRules,n).insertRule(e,o)}else{const n=void 0===r?void 0:Math.min(r,t.cssRules.length);t?.insertRule(e,n)}}catch{}})),null==(n=e.removes)||n.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:r,index:n}=pe(e);le(t.cssRules,r).deleteRule(n||0)}else t?.deleteRule(e)}catch{}})),e.replace)try{null==(o=t.replace)||o.call(t,e.replace)}catch{}if(e.replaceSync)try{null==(i=t.replaceSync)||i.call(t,e.replaceSync)}catch{}}applyStyleDeclaration(e,t){e.set&&le(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&le(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;const r=this.mirror.getNode(e.id);if(!r)return;null==(t=e.styles)||t.forEach((e=>{var t;let n=null,o=null;if(ue(r)?o=(null==(t=r.ownerDocument)?void 0:t.defaultView)||null:"#document"===r.nodeName&&(o=r.defaultView),o)try{n=new o.CSSStyleSheet,this.styleMirror.add(n,e.styleId),this.applyStyleSheetRule({source:fe.StyleSheetRule,adds:e.rules},n)}catch{}}));let n=0;const o=(e,t)=>{const r=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));ue(e)?e.shadowRoot.adoptedStyleSheets=r:"#document"===e.nodeName&&(e.adoptedStyleSheets=r),r.length!==t.length&&n<10&&(setTimeout((()=>o(e,t)),0+100*n),n++)};o(r,e.styleIds)}legacy_resolveMissingNode(e,t,r,n){const{previousId:o,nextId:i}=n,s=o&&e[o],a=i&&e[i];if(s){const{node:n,mutation:o}=s;t.insertBefore(n,r),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,n,o)}if(a){const{node:n,mutation:o}=a;t.insertBefore(n,r.nextSibling),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,n,o)}}moveAndHover(e,t,r,n,o){const i=this.mirror.getNode(r);if(!i)return this.debugNodeNotFound(o,r);const s=ce(i,this.iframe),a=e*s.absoluteScale+s.x,c=t*s.absoluteScale+s.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${c}px`,n||this.drawMouseTail({x:a,y:c}),this.hoverElements(i)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:r,strokeStyle:n,duration:o}=!0===this.config.mouseTail?An:Object.assign({},An,this.config.mouseTail),i=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");!e||!this.tailPositions.length||(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=r,e.lineCap=t,e.strokeStyle=n,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),i(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),i()}),o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null==(t=this.iframe.contentDocument)||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")}));let r=e;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(e){return e.type===_e.IncrementalSnapshot&&(e.data.source>fe.Mutation&&e.data.source<=fe.Input)}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ye.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(bn,`Node with id '${t}' not found. `,e)}warn(...e){!this.config.showWarning||console.warn(bn,...e)}debug(...e){!this.config.showDebug||console.log(bn,...e)}},e.ReplayerEvents=ye,e.addCustomEvent=Nn,e.freezePage=Pn,e.record=Kt,e.utils=he,Object.defineProperty(e,"__esModule",{value:!0}),e}({});r.initSessionRecording=function(e,t,r,o){let i=[];n.record({emit(e){i.push(e)}}),setInterval((()=>{if(i.length>0){const n=JSON.stringify({events:i,session_id:t});i=[],fetch(`${e}/v1/metrics/rum`,{method:"POST",headers:{"Content-Type":"application/json",MW_API_KEY:r},body:n})}}),1e4)}},{}],634:[function(e,t,r){class n{constructor(e,t){this.attributeName=e,this.attributeValue=t}onStart(e){}onEnd(e){const t=e.attributes;t[this.attributeName]=this.attributeValue,e.setAttributes(t)}shutdown(){}}const{initSessionRecording:o}=e("./recording"),{RandomIdGenerator:i}=e("@opentelemetry/sdk-trace-base"),s="session.id",a="mwRumSessionId",c="-",u=new i;function l(e){document.cookie="".concat(a,"=").concat(e.sessionId).concat(c).concat(e.lastActivityTimestamp,"; path=/")}let p=function(){let e=document.cookie.split("; ").find((function(e){return e.startsWith("".concat(a,"="))}));if(!e)return;let t=e.split("=")[1].split(c),r=t[0],n=t[1];return{sessionId:r,lastActivityTimestamp:parseInt(n,10)}}();t.exports.init=t=>{const r=e("@opentelemetry/api"),{trace:i,context:a}=e("@opentelemetry/api"),{WebTracerProvider:c}=e("@opentelemetry/sdk-trace-web"),{BatchSpanProcessor:d}=e("@opentelemetry/sdk-trace-base"),{OTLPTraceExporter:m}=e("@opentelemetry/exporter-trace-otlp-http"),{ZoneContextManager:h}=e("@opentelemetry/context-zone"),{registerInstrumentations:_}=e("@opentelemetry/instrumentation"),{Resource:f}=e("@opentelemetry/resources"),{SemanticResourceAttributes:g}=e("@opentelemetry/semantic-conventions"),{LogsExporter:E}=e("../packages/logs-exporter"),{LogsInstrumentation:T}=e("../packages/logs-instrumentation"),{DocumentLoadInstrumentation:y}=e("instrumentation-document-load"),{XMLHttpRequestInstrumentation:S}=e("middleware.io-instrumentation-xml-http-request"),{FetchInstrumentation:v}=e("@opentelemetry/instrumentation-fetch"),{MeterProvider:O,PeriodicExportingMetricReader:b}=e("@opentelemetry/sdk-metrics"),{OTLPMetricExporter:A}=e("@opentelemetry/exporter-metrics-otlp-http"),{INSTRUMENTED_EVENT_NAMES:R,DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT:N}=e("./constants"),{getUserInteractionSpanName:P}=e("./util"),I=function(){let e=Date.now();if(p){let t=e-p.lastActivityTimestamp;t>36e5?p=void 0:t>3e4&&(p.lastActivityTimestamp=e,l(p))}return p||(p={sessionId:u.generateTraceId(),lastActivityTimestamp:e},l(p)),p.sessionId}(),M=new f({[g.SERVICE_NAME]:t.serviceName,mw_agent:!0,"project.name":t.projectName,"mw.account_key":t.accountKey,env:t.env,"browser.trace":!0,[s]:I}),C=new c({resource:M});i.setGlobalTracerProvider(C),C.register();const w=function(){let e=window.navigator.userAgent,t=window.navigator.platform,r=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?r="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)?r="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(t)&&(r="Linux"),r}(),L=function(){let e,t=navigator.userAgent;return e=t.match(/chrome|chromium|crios/i)?"Chrome":t.match(/firefox|fxios/i)?"Firefox":t.match(/safari/i)?"Safari":t.match(/opr\//i)?"Opera":t.match(/edg/i)?"Edge":"No browser detection",e}();C.addSpanProcessor(new d(new m({url:`${t.target}/v1/traces`,headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"*"},concurrencyLimit:10,exportTimeoutMillis:1e4}))),C.addSpanProcessor(new n(s,I)),C.addSpanProcessor(new n("os",w)),C.addSpanProcessor(new n("browser.name",L)),C.addSpanProcessor(new n("navigator.userAgent",navigator.userAgent.toString())),C.addSpanProcessor(new n("env",t.env)),C.addSpanProcessor(new n("root.url",window.location.pathname)),C.addSpanProcessor(new n("recording.available","1"==t.recording?"true":"false")),C.register({contextManager:new h});new T({exporter:new E({resource:M,collectorUrl:`${t.target}/v1/logs`,maxQueueSize:2048,scheduledDelayMillis:2e3,projectName:t.projectName,serviceName:t.serviceName})}).enable(),document.addEventListener("click",(e=>{const t=new Set(["click"]),n=e.target;if(!(n instanceof HTMLElement))return;if(!n.getAttribute)return;if(n.hasAttribute("disabled"))return;if(!t.has(e.type))return;let o=r.trace.getTracer("user-interaction");const i=P(e.type,n,N);let s=o.startSpan(i);e.target.dataset.spanId=s.spanContext().spanId,s.setAttribute("event.type",e.type),s.setAttribute("component","user-interaction"),s.setAttribute("target_element",n.tagName),s.setAttribute("target_xpath","xpath"),s.setAttribute("http.url",window.location.href),s.setAttribute("http.user_agent",navigator.userAgent),s.end()})),_({instrumentations:[new y,new S({enabled:!1}),new v({enabled:!1})]});const D=new A({url:`${t.target}/v1/metrics`,headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"*"},concurrencyLimit:1}),x=new O({resource:M});x.addMetricReader(new b({exporter:D,exportIntervalMillis:1e4}));new PerformanceObserver((e=>{const r=e.getEntries(),n={};n[s]=I,n.os=w,n["browser.name"]=L,n["navigator.userAgent"]=navigator.userAgent.toString(),n.env=t.env,n["root.url"]=window.location.pathname,r.forEach((e=>{switch(e.entryType){case"paint":if("first-paint"===e.name){x.getMeter("mw-counter").createCounter("first-paint",{description:"Time to first paint",unit:"ms",valueType:1}).add(e.startTime,n)}else if("first-contentful-paint"===e.name){x.getMeter("mw-counter").createCounter("first-contentful-paint",{description:"Time to first contentful paint",unit:"ms",valueType:1}).add(e.startTime,n)}break;case"layout-shift":x.getMeter("mw-counter").createCounter("layout-shift",{description:"Layout shift score",unit:"",valueType:1}).add(e.value,n);break;case"first-input":let t=e.processingStart-e.startTime;x.getMeter("mw-counter").createCounter("first-input-delay",{description:"First input delay",unit:"ms",valueType:1}).add(t,n);break;case"largest-contentful-paint":let r=e.renderTime-e.loadTime;x.getMeter("mw-counter").createCounter("largest-contentful-paint",{description:"Largest Contentful Paint",unit:"ms",valueType:1}).add(r,n);break;case"longtask":x.getMeter("mw-counter").createCounter("longtask",{description:"Long task duration",unit:"ms",valueType:1}).add(e.duration,n)}}))})).observe({entryTypes:["longtask","largest-contentful-paint","navigation","paint","resource","layout-shift","first-input"],buffered:!0}),setTimeout((()=>{D.shutdown()}),11e3),"1"==t.recording&&o(t.target,I,t.accountKey,C)}},{"../packages/logs-exporter":631,"../packages/logs-instrumentation":632,"./constants":629,"./recording":633,"./util":635,"@opentelemetry/api":21,"@opentelemetry/context-zone":54,"@opentelemetry/exporter-metrics-otlp-http":97,"@opentelemetry/exporter-trace-otlp-http":162,"@opentelemetry/instrumentation":177,"@opentelemetry/instrumentation-fetch":167,"@opentelemetry/resources":248,"@opentelemetry/sdk-metrics":273,"@opentelemetry/sdk-trace-base":379,"@opentelemetry/sdk-trace-web":392,"@opentelemetry/semantic-conventions":490,"instrumentation-document-load":497,"middleware.io-instrumentation-xml-http-request":512}],635:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCollectionSourceUrl=r.tryNumber=r.getUserInteractionSpanName=void 0;var n=e("./constants");r.getUserInteractionSpanName=function(e,t,o){for(var i,s="",a=t;a&&!s;)s=(s=a.getAttribute("aria-label")||a.id||a.textContent||a.value||"").trim(),a=a.parentElement;if(s){var c=null!==(i=(0,r.tryNumber)(o))&&void 0!==i?i:n.DEFAULT_USER_INTERACTION_ELEMENT_NAME_LIMIT;return c>0&&s.length>c&&(s="".concat(s.slice(0,c-3),"...")),"".concat(e," on '").concat(s,"'")}};r.tryNumber=function(e){return"number"==typeof e?e:null!=e&&Number.isFinite(+e)?+e:void 0};r.getCollectionSourceUrl=function(e){var t=new URL(e);return t.pathname=t.pathname.replace(/\/v1\/(traces|metrics|logs)\/?$/,""),t.pathname.endsWith("/")||(t.pathname+="/"),t.href}},{"./constants":629}]},{},[3]);
